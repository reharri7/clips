var Xz=Object.defineProperty,Jz=Object.defineProperties,e7=Object.getOwnPropertyDescriptors,WA=Object.getOwnPropertySymbols,M2=Object.prototype.hasOwnProperty,R2=Object.prototype.propertyIsEnumerable,O2=(Ye,_e,U)=>_e in Ye?Xz(Ye,_e,{enumerable:!0,configurable:!0,writable:!0,value:U}):Ye[_e]=U,rn=(Ye,_e)=>{for(var U in _e||(_e={}))M2.call(_e,U)&&O2(Ye,U,_e[U]);if(WA)for(var U of WA(_e))R2.call(_e,U)&&O2(Ye,U,_e[U]);return Ye},Fs=(Ye,_e)=>Jz(Ye,e7(_e)),N2=(Ye,_e)=>{var U={};for(var d in Ye)M2.call(Ye,d)&&_e.indexOf(d)<0&&(U[d]=Ye[d]);if(null!=Ye&&WA)for(var d of WA(Ye))_e.indexOf(d)<0&&R2.call(Ye,d)&&(U[d]=Ye[d]);return U};(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{7905:(Ye,_e,U)=>{"use strict";U.d(_e,{hO:()=>et,xv:()=>fe,Dh:()=>ce,GT:()=>he,cc:()=>Ze,on:()=>Q,pX:()=>ie});var d=U(3668),ee=U(7892),B=U(7233);Ye=U.hmd(Ye);const ae=["ngOnDestroy"],ie=(le,Ie,Ve,He={})=>new Proxy(le,{get:(Je,Ke)=>Ve.runOutsideAngular(()=>{var st;if(le[Ke])return(null===(st=null==He?void 0:He.spy)||void 0===st?void 0:st.get)&&He.spy.get(Ke,le[Ke]),le[Ke];if(ae.indexOf(Ke)>-1)return()=>{};const Tt=Ie.toPromise().then(Z=>{const G=Z&&Z[Ke];return"function"==typeof G?G.bind(Z):G&&G.then?G.then(re=>Ve.run(()=>re)):Ve.run(()=>G)});return new Proxy(()=>{},{get:(Z,G)=>Tt[G],apply:(Z,G,re)=>Tt.then(Te=>{var Ee;const Ue=Te&&Te(...re);return(null===(Ee=null==He?void 0:He.spy)||void 0===Ee?void 0:Ee.apply)&&He.spy.apply(Ke,re,Ue),Ue})})})}),he=(le,Ie)=>{Ie.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(He=>{Object.defineProperty(le.prototype,He,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,He))})})};class pe{constructor(Ie){return Ie}}const ce=new d.OlP("angularfire2.app.options"),fe=new d.OlP("angularfire2.app.name");function Q(le,Ie,Ve){const Je="object"==typeof Ve&&Ve||{};Je.name=Je.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const st=ee.Z.apps.filter(Tt=>Tt&&Tt.name===Je.name)[0]||Ie.runOutsideAngular(()=>ee.Z.initializeApp(le,Je));try{JSON.stringify(le)!==JSON.stringify(st.options)&&ue("error",`${st.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Tt){}return new pe(st)}const ue=(le,...Ie)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[le](...Ie)},ne={provide:pe,useFactory:Q,deps:[ce,d.R0b,[new d.FiY,fe]]};let et=(()=>{class le{constructor(Ve){ee.Z.registerVersion("angularfire",B.q4.full,"core"),ee.Z.registerVersion("angularfire",B.q4.full,"app-compat"),ee.Z.registerVersion("angular",d.q4F.full,Ve.toString())}static initializeApp(Ve,He){return{ngModule:le,providers:[{provide:ce,useValue:Ve},{provide:fe,useValue:He}]}}}return le.\u0275fac=function(Ve){return new(Ve||le)(d.LFG(d.Lbi))},le.\u0275mod=d.oAB({type:le}),le.\u0275inj=d.cJS({providers:[ne]}),le})();function Ze(le,Ie,Ve,He,Je){const[,Ke,st]=globalThis.\u0275AngularfireInstanceCache.find(Tt=>Tt[0]===le)||[];if(Ke)return function(le,Ie){try{return le.toString()===Ie.toString()}catch(Ve){return le===Ie}}(Je,st)||(ye("error",`${Ie} was already initialized on the ${Ve} Firebase App with different settings.${St?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Je,was:st})),Ke;{const Tt=He();return globalThis.\u0275AngularfireInstanceCache.push([le,Tt,Je]),Tt}}const St=!!Ye.hot,ye=(le,...Ie)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[le](...Ie)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(Ye,_e,U)=>{"use strict";U.d(_e,{q4:()=>kf,iC:()=>Ro,fc:()=>wl,HU:()=>Gd,vb:()=>Pg,JM:()=>Pf});var d=U(3668),ee=U(7713),B=U(8239),ae=U(1572),ie=U(4213),he=U(1177),pe=U(3855),ce=U(4995);const fe="@firebase/installations",Q="0.5.5",ne=`w:${Q}`,et="FIS_v2",Ie=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ve(P){return P instanceof ie.ZR&&P.code.includes("request-failed")}function He({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Je(P){return{token:P.token,requestStatus:2,expiresIn:Te(P.expiresIn),creationTime:Date.now()}}function Ke(P,R){return st.apply(this,arguments)}function st(){return(st=(0,B.Z)(function*(P,R){const se=(yield R.json()).error;return Ie.create("request-failed",{requestName:P,serverCode:se.code,serverMessage:se.message,serverStatus:se.status})})).apply(this,arguments)}function Tt({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function Z(P,{refreshToken:R}){const z=Tt(P);return z.append("Authorization",function(P){return`${et} ${P}`}(R)),z}function G(P){return re.apply(this,arguments)}function re(){return(re=(0,B.Z)(function*(P){const R=yield P();return R.status>=500&&R.status<600?P():R})).apply(this,arguments)}function Te(P){return Number(P.replace("s","000"))}function Ue(P,R){return Y.apply(this,arguments)}function Y(){return(Y=(0,B.Z)(function*(P,{fid:R}){const z=He(P),Oe={method:"POST",headers:Tt(P),body:JSON.stringify({fid:R,authVersion:et,appId:P.appId,sdkVersion:ne})},gt=yield G(()=>fetch(z,Oe));if(gt.ok){const qt=yield gt.json();return{fid:qt.fid||R,registrationStatus:2,refreshToken:qt.refreshToken,authToken:Je(qt.authToken)}}throw yield Ke("Create Installation",gt)})).apply(this,arguments)}function ge(P){return new Promise(R=>{setTimeout(R,P)})}const Ge=/^[cdef][\w-]{21}$/;function qe(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const z=function(P){return function(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Ge.test(z)?z:""}catch(P){return""}}function kt(P){return`${P.appName}!${P.appId}`}const Ht=new Map;function Lt(P,R){const z=kt(P);pn(z,R),function(P,R){const z=(!sn&&"BroadcastChannel"in self&&(sn=new BroadcastChannel("[Firebase] FID Change"),sn.onmessage=P=>{pn(P.data.key,P.data.fid)}),sn);z&&z.postMessage({key:P,fid:R}),0===Ht.size&&sn&&(sn.close(),sn=null)}(z,R)}function pn(P,R){const z=Ht.get(P);if(z)for(const se of z)se(R)}let sn=null;const ht="firebase-installations-store";let An=null;function ar(){return An||(An=(0,ce.openDb)("firebase-installations-database",1,P=>{0===P.oldVersion&&P.createObjectStore(ht)})),An}function Jt(P,R){return In.apply(this,arguments)}function In(){return(In=(0,B.Z)(function*(P,R){const z=kt(P),Le=(yield ar()).transaction(ht,"readwrite"),Oe=Le.objectStore(ht),gt=yield Oe.get(z);return yield Oe.put(R,z),yield Le.complete,(!gt||gt.fid!==R.fid)&&Lt(P,R.fid),R})).apply(this,arguments)}function Yr(P){return Br.apply(this,arguments)}function Br(){return(Br=(0,B.Z)(function*(P){const R=kt(P),se=(yield ar()).transaction(ht,"readwrite");yield se.objectStore(ht).delete(R),yield se.complete})).apply(this,arguments)}function Rt(P,R){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,B.Z)(function*(P,R){const z=kt(P),Le=(yield ar()).transaction(ht,"readwrite"),Oe=Le.objectStore(ht),gt=yield Oe.get(z),qt=R(gt);return void 0===qt?yield Oe.delete(z):yield Oe.put(qt,z),yield Le.complete,qt&&(!gt||gt.fid!==qt.fid)&&Lt(P,qt.fid),qt})).apply(this,arguments)}function vn(P){return yn.apply(this,arguments)}function yn(){return(yn=(0,B.Z)(function*(P){let R;const z=yield Rt(P,se=>{const Le=ii(se),Oe=Mn(P,Le);return R=Oe.registrationPromise,Oe.installationEntry});return""===z.fid?{installationEntry:yield R}:{installationEntry:z,registrationPromise:R}})).apply(this,arguments)}function ii(P){return ln(P||{fid:qe(),registrationStatus:0})}function Mn(P,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(Ie.create("app-offline"))};const z={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},se=function(P,R){return Yt.apply(this,arguments)}(P,z);return{installationEntry:z,registrationPromise:se}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:pu(P)}:{installationEntry:R}}function Yt(){return(Yt=(0,B.Z)(function*(P,R){try{return Jt(P,yield Ue(P,R))}catch(z){throw Ve(z)&&409===z.customData.serverCode?yield Yr(P):yield Jt(P,{fid:R.fid,registrationStatus:0}),z}})).apply(this,arguments)}function pu(P){return js.apply(this,arguments)}function js(){return(js=(0,B.Z)(function*(P){let R=yield Nn(P);for(;1===R.registrationStatus;)yield ge(100),R=yield Nn(P);if(0===R.registrationStatus){const{installationEntry:z,registrationPromise:se}=yield vn(P);return se||z}return R})).apply(this,arguments)}function Nn(P){return Rt(P,R=>{if(!R)throw Ie.create("installation-not-found");return ln(R)})}function ln(P){return function(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function gu(P,R){return xe.apply(this,arguments)}function xe(){return(xe=(0,B.Z)(function*({appConfig:P,platformLoggerProvider:R},z){const se=de(P,z),Le=Z(P,z),Oe=R.getImmediate({optional:!0});Oe&&Le.append("x-firebase-client",Oe.getPlatformInfoString());const qt={method:"POST",headers:Le,body:JSON.stringify({installation:{sdkVersion:ne}})},Nt=yield G(()=>fetch(se,qt));if(Nt.ok)return Je(yield Nt.json());throw yield Ke("Generate Auth Token",Nt)})).apply(this,arguments)}function de(P,{fid:R}){return`${He(P)}/${R}/authTokens:generate`}function ke(P){return at.apply(this,arguments)}function at(){return(at=(0,B.Z)(function*(P,R=!1){let z;const se=yield Rt(P.appConfig,Oe=>{if(!X(Oe))throw Ie.create("not-registered");const gt=Oe.authToken;if(!R&&De(gt))return Oe;if(1===gt.requestStatus)return z=ze(P,R),Oe;{if(!navigator.onLine)throw Ie.create("app-offline");const qt=vt(Oe);return z=Gn(P,qt),qt}});return z?yield z:se.authToken})).apply(this,arguments)}function ze(P,R){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,B.Z)(function*(P,R){let z=yield nn(P.appConfig);for(;1===z.authToken.requestStatus;)yield ge(100),z=yield nn(P.appConfig);const se=z.authToken;return 0===se.requestStatus?ke(P,R):se})).apply(this,arguments)}function nn(P){return Rt(P,R=>{if(!X(R))throw Ie.create("not-registered");return function(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function Gn(P,R){return K.apply(this,arguments)}function K(){return(K=(0,B.Z)(function*(P,R){try{const z=yield gu(P,R),se=Object.assign(Object.assign({},R),{authToken:z});return yield Jt(P.appConfig,se),z}catch(z){if(!Ve(z)||401!==z.customData.serverCode&&404!==z.customData.serverCode){const se=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield Jt(P.appConfig,se)}else yield Yr(P.appConfig);throw z}})).apply(this,arguments)}function X(P){return void 0!==P&&2===P.registrationStatus}function De(P){return 2===P.requestStatus&&!function(P){const R=Date.now();return R<P.creationTime||P.creationTime+P.expiresIn<R+36e5}(P)}function vt(P){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:R})}function nr(){return(nr=(0,B.Z)(function*(P){const R=P,{installationEntry:z,registrationPromise:se}=yield vn(R.appConfig);return se?se.catch(console.error):ke(R).catch(console.error),z.fid})).apply(this,arguments)}function pi(){return(pi=(0,B.Z)(function*(P,R=!1){const z=P;return yield rs(z.appConfig),(yield ke(z,R)).token})).apply(this,arguments)}function rs(P){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,B.Z)(function*(P){const{registrationPromise:R}=yield vn(P);R&&(yield R)})).apply(this,arguments)}function Vi(P){return Ie.create("missing-app-config-values",{valueName:P})}const Hr="installations";(0,ae._registerComponent)(new he.wA(Hr,P=>{const R=P.getProvider("app").getImmediate(),z=function(P){if(!P||!P.options)throw Vi("App Configuration");if(!P.name)throw Vi("App Name");const R=["projectId","apiKey","appId"];for(const z of R)if(!P.options[z])throw Vi(z);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(R);return{app:R,appConfig:z,platformLoggerProvider:(0,ae._getProvider)(R,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new he.wA("installations-internal",P=>{const R=P.getProvider("app").getImmediate(),z=(0,ae._getProvider)(R,Hr).getImmediate();return{getId:()=>function(P){return nr.apply(this,arguments)}(z),getToken:Le=>function(P){return pi.apply(this,arguments)}(z,Le)}},"PRIVATE")),(0,ae.registerVersion)(fe,Q),(0,ae.registerVersion)(fe,Q,"esm2017");const cn="@firebase/remote-config",zn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class hg{constructor(R,z,se,Le){this.client=R,this.storage=z,this.storageCache=se,this.logger=Le}isCachedDataFresh(R,z){if(!z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const se=Date.now()-z,Le=se<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${se}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${Le}.`),Le}fetch(R){var z=this;return(0,B.Z)(function*(){const[se,Le]=yield Promise.all([z.storage.getLastSuccessfulFetchTimestampMillis(),z.storage.getLastSuccessfulFetchResponse()]);if(Le&&z.isCachedDataFresh(R.cacheMaxAgeMillis,se))return Le;R.eTag=Le&&Le.eTag;const Oe=yield z.client.fetch(R),gt=[z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Oe.status&&gt.push(z.storage.setLastSuccessfulFetchResponse(Oe)),yield Promise.all(gt),Oe})()}}function $v(P=navigator){return P.languages&&P.languages[0]||P.language}class Bs{constructor(R,z,se,Le,Oe,gt){this.firebaseInstallations=R,this.sdkVersion=z,this.namespace=se,this.projectId=Le,this.apiKey=Oe,this.appId=gt}fetch(R){var z=this;return(0,B.Z)(function*(){const[se,Le]=yield Promise.all([z.firebaseInstallations.getId(),z.firebaseInstallations.getToken()]),gt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${z.projectId}/namespaces/${z.namespace}:fetch?key=${z.apiKey}`,qt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},Nt={sdk_version:z.sdkVersion,app_instance_id:se,app_instance_id_token:Le,app_id:z.appId,language_code:$v()},Pn={method:"POST",headers:qt,body:JSON.stringify(Nt)},Wn=fetch(gt,Pn),Zi=new Promise((go,Oo)=>{R.signal.addEventListener(()=>{const Za=new Error("The operation was aborted.");Za.name="AbortError",Oo(Za)})});let Ki;try{yield Promise.race([Wn,Zi]),Ki=yield Wn}catch(go){let Oo="fetch-client-network";throw"AbortError"===go.name&&(Oo="fetch-timeout"),zn.create(Oo,{originalErrorMessage:go.message})}let mr=Ki.status;const yi=Ki.headers.get("ETag")||void 0;let za,us;if(200===Ki.status){let go;try{go=yield Ki.json()}catch(Oo){throw zn.create("fetch-client-parse",{originalErrorMessage:Oo.message})}za=go.entries,us=go.state}if("INSTANCE_STATE_UNSPECIFIED"===us?mr=500:"NO_CHANGE"===us?mr=304:("NO_TEMPLATE"===us||"EMPTY_CONFIG"===us)&&(za={}),304!==mr&&200!==mr)throw zn.create("fetch-status",{httpStatus:mr});return{status:mr,eTag:yi,config:za}})()}}class hf{constructor(R,z){this.client=R,this.storage=z}fetch(R){var z=this;return(0,B.Z)(function*(){const se=(yield z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return z.attemptFetch(R,se)})()}attemptFetch(R,{throttleEndTimeMillis:z,backoffCount:se}){var Le=this;return(0,B.Z)(function*(){yield function(P,R){return new Promise((z,se)=>{const Le=Math.max(R-Date.now(),0),Oe=setTimeout(z,Le);P.addEventListener(()=>{clearTimeout(Oe),se(zn.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,z);try{const Oe=yield Le.client.fetch(R);return yield Le.storage.deleteThrottleMetadata(),Oe}catch(Oe){if(!function(P){if(!(P instanceof ie.ZR&&P.customData))return!1;const R=Number(P.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Oe))throw Oe;const gt={throttleEndTimeMillis:Date.now()+(0,ie.$s)(se),backoffCount:se+1};return yield Le.storage.setThrottleMetadata(gt),Le.attemptFetch(R,gt)}})()}}class qv{constructor(R,z,se,Le,Oe){this.app=R,this._client=z,this._storageCache=se,this._storage=Le,this._logger=Oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ku(P,R){const z=P.target.error||void 0;return zn.create(R,{originalErrorMessage:z&&z.message})}const vu="app_namespace_store";class Wv{constructor(R,z,se,Le=function(){return new Promise((P,R)=>{try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=se=>{R(Ku(se,"storage-open"))},z.onsuccess=se=>{P(se.target.result)},z.onupgradeneeded=se=>{0===se.oldVersion&&se.target.result.createObjectStore(vu,{keyPath:"compositeKey"})}}catch(z){R(zn.create("storage-open",{originalErrorMessage:z}))}})}()){this.appId=R,this.appName=z,this.namespace=se,this.openDbPromise=Le}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var z=this;return(0,B.Z)(function*(){const se=yield z.openDbPromise;return new Promise((Le,Oe)=>{const qt=se.transaction([vu],"readonly").objectStore(vu),Nt=z.createCompositeKey(R);try{const Pn=qt.get(Nt);Pn.onerror=Wn=>{Oe(Ku(Wn,"storage-get"))},Pn.onsuccess=Wn=>{const Zi=Wn.target.result;Le(Zi?Zi.value:void 0)}}catch(Pn){Oe(zn.create("storage-get",{originalErrorMessage:Pn&&Pn.message}))}})})()}set(R,z){var se=this;return(0,B.Z)(function*(){const Le=yield se.openDbPromise;return new Promise((Oe,gt)=>{const Nt=Le.transaction([vu],"readwrite").objectStore(vu),Pn=se.createCompositeKey(R);try{const Wn=Nt.put({compositeKey:Pn,value:z});Wn.onerror=Zi=>{gt(Ku(Zi,"storage-set"))},Wn.onsuccess=()=>{Oe()}}catch(Wn){gt(zn.create("storage-set",{originalErrorMessage:Wn&&Wn.message}))}})})()}delete(R){var z=this;return(0,B.Z)(function*(){const se=yield z.openDbPromise;return new Promise((Le,Oe)=>{const qt=se.transaction([vu],"readwrite").objectStore(vu),Nt=z.createCompositeKey(R);try{const Pn=qt.delete(Nt);Pn.onerror=Wn=>{Oe(Ku(Wn,"storage-delete"))},Pn.onsuccess=()=>{Le()}}catch(Pn){Oe(zn.create("storage-delete",{originalErrorMessage:Pn&&Pn.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class pf{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,B.Z)(function*(){const z=R.storage.getLastFetchStatus(),se=R.storage.getLastSuccessfulFetchTimestampMillis(),Le=R.storage.getActiveConfig(),Oe=yield z;Oe&&(R.lastFetchStatus=Oe);const gt=yield se;gt&&(R.lastSuccessfulFetchTimestampMillis=gt);const qt=yield Le;qt&&(R.activeConfig=qt)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function Qu(){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,B.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(P){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new he.wA("remote-config",function(R,{instanceIdentifier:z}){const se=R.getProvider("app").getImmediate(),Le=R.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw zn.create("registration-window");if(!(0,ie.hl)())throw zn.create("indexed-db-unavailable");const{projectId:Oe,apiKey:gt,appId:qt}=se.options;if(!Oe)throw zn.create("registration-project-id");if(!gt)throw zn.create("registration-api-key");if(!qt)throw zn.create("registration-app-id");const Nt=new Wv(qt,se.name,z=z||"firebase"),Pn=new pf(Nt),Wn=new pe.Yd(cn);Wn.logLevel=pe.in.ERROR;const Zi=new Bs(Le,ae.SDK_VERSION,z,Oe,gt,qt),Ki=new hf(Zi,Nt),mr=new hg(Ki,Nt,Pn,Wn),yi=new qv(se,mr,Pn,Nt,Wn);return function(P){const R=(0,ie.m9)(P);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(yi),yi},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(cn,"0.3.4"),(0,ae.registerVersion)(cn,"0.3.4","esm2017");const mf="/firebase-messaging-sw.js",gg="/firebase-cloud-messaging-push-scope",so="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aa="google.c.a.c_id",yu="google.c.a.c_l",ua="google.c.a.ts",_u="google.c.a.e";var gi=(()=>{return(P=gi||(gi={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",gi;var P})();function Io(P){const R=new Uint8Array(P);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xu(P){const z=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),se=atob(z),Le=new Uint8Array(se.length);for(let Oe=0;Oe<se.length;++Oe)Le[Oe]=se.charCodeAt(Oe);return Le}const yf="fcm_token_details_db",_f="fcm_token_object_Store";function Pd(P){return vc.apply(this,arguments)}function vc(){return vc=(0,B.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Oe=>Oe.name).includes(yf))return null;let R=null;return(yield(0,ce.openDb)(yf,5,function(){var se=(0,B.Z)(function*(Le){var Oe;if(Le.oldVersion<2||!Le.objectStoreNames.contains(_f))return;const gt=Le.transaction.objectStore(_f),qt=yield gt.index("fcmSenderId").get(P);if(yield gt.clear(),qt)if(2===Le.oldVersion){const Nt=qt;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;R={token:Nt.fcmToken,createTime:null!==(Oe=Nt.createTime)&&void 0!==Oe?Oe:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:Io(Nt.vapidKey)}}}else if(3===Le.oldVersion){const Nt=qt;R={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Io(Nt.auth),p256dh:Io(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Io(Nt.vapidKey)}}}else if(4===Le.oldVersion){const Nt=qt;R={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Io(Nt.auth),p256dh:Io(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Io(Nt.vapidKey)}}}});return function(Le){return se.apply(this,arguments)}}())).close(),yield(0,ce.deleteDb)(yf),yield(0,ce.deleteDb)("fcm_vapid_details_db"),yield(0,ce.deleteDb)("undefined"),mg(R)?R:null}),vc.apply(this,arguments)}function mg(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:R}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const Kn="firebase-messaging-store";let Md=null;function Oa(){return Md||(Md=(0,ce.openDb)("firebase-messaging-database",1,P=>{0===P.oldVersion&&P.createObjectStore(Kn)})),Md}function Mr(P){return Na.apply(this,arguments)}function Na(){return(Na=(0,B.Z)(function*(P){const R=La(P),se=yield(yield Oa()).transaction(Kn).objectStore(Kn).get(R);if(se)return se;{const Le=yield Pd(P.appConfig.senderId);if(Le)return yield Gi(P,Le),Le}})).apply(this,arguments)}function Gi(P,R){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,B.Z)(function*(P,R){const z=La(P),Le=(yield Oa()).transaction(Kn,"readwrite");return yield Le.objectStore(Kn).put(R,z),yield Le.complete,R})).apply(this,arguments)}function Rr(P){return yc.apply(this,arguments)}function yc(){return(yc=(0,B.Z)(function*(P){const R=La(P),se=(yield Oa()).transaction(Kn,"readwrite");yield se.objectStore(Kn).delete(R),yield se.complete})).apply(this,arguments)}function La({appConfig:P}){return P.appId}const $n=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ao(P,R){return el.apply(this,arguments)}function el(){return(el=(0,B.Z)(function*(P,R){const z=yield _c(P),se=bu(R),Le={method:"POST",headers:z,body:JSON.stringify(se)};let Oe;try{Oe=yield(yield fetch(Wt(P.appConfig),Le)).json()}catch(gt){throw $n.create("token-subscribe-failed",{errorInfo:gt})}if(Oe.error)throw $n.create("token-subscribe-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw $n.create("token-subscribe-no-token");return Oe.token})).apply(this,arguments)}function ja(P,R){return $i.apply(this,arguments)}function $i(){return($i=(0,B.Z)(function*(P,R){const z=yield _c(P),se=bu(R.subscriptionOptions),Le={method:"PATCH",headers:z,body:JSON.stringify(se)};let Oe;try{Oe=yield(yield fetch(`${Wt(P.appConfig)}/${R.token}`,Le)).json()}catch(gt){throw $n.create("token-update-failed",{errorInfo:gt})}if(Oe.error)throw $n.create("token-update-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw $n.create("token-update-no-token");return Oe.token})).apply(this,arguments)}function tl(P,R){return la.apply(this,arguments)}function la(){return(la=(0,B.Z)(function*(P,R){const se={method:"DELETE",headers:yield _c(P)};try{const Oe=yield(yield fetch(`${Wt(P.appConfig)}/${R}`,se)).json();if(Oe.error)throw $n.create("token-unsubscribe-failed",{errorInfo:Oe.error.message})}catch(Le){throw $n.create("token-unsubscribe-failed",{errorInfo:Le})}})).apply(this,arguments)}function Wt({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function _c(P){return nl.apply(this,arguments)}function nl(){return(nl=(0,B.Z)(function*({appConfig:P,installations:R}){const z=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${z}`})})).apply(this,arguments)}function bu({p256dh:P,auth:R,endpoint:z,vapidKey:se}){const Le={web:{endpoint:z,auth:R,p256dh:P}};return se!==so&&(Le.web.applicationPubKey=se),Le}const rl=6048e5;function bc(P){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,B.Z)(function*(P){const R=yield ca(P.swRegistration,P.vapidKey),z={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:R.endpoint,auth:Io(R.getKey("auth")),p256dh:Io(R.getKey("p256dh"))},se=yield Mr(P.firebaseDependencies);if(se){if(Ec(se.subscriptionOptions,z))return Date.now()>=se.createTime+rl?kn(P,{token:se.token,createTime:Date.now(),subscriptionOptions:z}):se.token;try{yield tl(P.firebaseDependencies,se.token)}catch(Le){console.warn(Le)}return fr(P.firebaseDependencies,z)}return fr(P.firebaseDependencies,z)})).apply(this,arguments)}function bf(P){return ft.apply(this,arguments)}function ft(){return(ft=(0,B.Z)(function*(P){const R=yield Mr(P.firebaseDependencies);R&&(yield tl(P.firebaseDependencies,R.token),yield Rr(P.firebaseDependencies));const z=yield P.swRegistration.pushManager.getSubscription();return!z||z.unsubscribe()})).apply(this,arguments)}function kn(P,R){return Do.apply(this,arguments)}function Do(){return(Do=(0,B.Z)(function*(P,R){try{const z=yield ja(P.firebaseDependencies,R),se=Object.assign(Object.assign({},R),{token:z,createTime:Date.now()});return yield Gi(P.firebaseDependencies,se),z}catch(z){throw yield bf(P),z}})).apply(this,arguments)}function fr(P,R){return il.apply(this,arguments)}function il(){return(il=(0,B.Z)(function*(P,R){const se={token:yield Ao(P,R),createTime:Date.now(),subscriptionOptions:R};return yield Gi(P,se),se.token})).apply(this,arguments)}function ca(P,R){return mi.apply(this,arguments)}function mi(){return(mi=(0,B.Z)(function*(P,R){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xu(R)})})).apply(this,arguments)}function Ec(P,R){return R.vapidKey===P.vapidKey&&R.endpoint===P.endpoint&&R.auth===P.auth&&R.p256dh===P.p256dh}function Ua(P){const R={from:P.from,collapseKey:P.collapse_key,messageId:P.fcm_message_id};return function(P,R){if(!R.notification)return;P.notification={};const z=R.notification.title;z&&(P.notification.title=z);const se=R.notification.body;se&&(P.notification.body=se);const Le=R.notification.image;Le&&(P.notification.image=Le)}(R,P),function(P,R){!R.data||(P.data=R.data)}(R,P),function(P,R){if(!R.fcmOptions)return;P.fcmOptions={};const z=R.fcmOptions.link;z&&(P.fcmOptions.link=z);const se=R.fcmOptions.analytics_label;se&&(P.fcmOptions.analyticsLabel=se)}(R,P),R}function Ba(P){return"object"==typeof P&&!!P&&aa in P}function oi(P,R){const z=[];for(let se=0;se<P.length;se++)z.push(P.charAt(se)),se<R.length&&z.push(R.charAt(se));return z.join("")}function ol(P){return $n.create("missing-app-config-values",{valueName:P})}oi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class da{constructor(R,z,se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Le=function(P){if(!P||!P.options)throw ol("App Configuration Object");if(!P.name)throw ol("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:z}=P;for(const se of R)if(!z[se])throw ol(se);return{appName:P.name,projectId:z.projectId,apiKey:z.apiKey,appId:z.appId,senderId:z.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:Le,installations:z,analyticsProvider:se}}_delete(){return Promise.resolve()}}function oo(P){return al.apply(this,arguments)}function al(){return(al=(0,B.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(mf,{scope:gg}),P.swRegistration.update().catch(()=>{})}catch(R){throw $n.create("failed-service-worker-registration",{browserErrorMessage:R.message})}})).apply(this,arguments)}function ul(P,R){return ll.apply(this,arguments)}function ll(){return(ll=(0,B.Z)(function*(P,R){if(!R&&!P.swRegistration&&(yield oo(P)),R||!P.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw $n.create("invalid-sw-registration");P.swRegistration=R}})).apply(this,arguments)}function wc(P,R){return cl.apply(this,arguments)}function cl(){return(cl=(0,B.Z)(function*(P,R){R?P.vapidKey=R:P.vapidKey||(P.vapidKey=so)})).apply(this,arguments)}function Sc(){return(Sc=(0,B.Z)(function*(P,R){if(!navigator)throw $n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $n.create("permission-blocked");return yield wc(P,null==R?void 0:R.vapidKey),yield ul(P,null==R?void 0:R.serviceWorkerRegistration),bc(P)})).apply(this,arguments)}function dl(P,R,z){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,B.Z)(function*(P,R,z){const se=Cc(R);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(se,{message_id:z[aa],message_name:z[yu],message_time:z[ua],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cc(P){switch(P){case gi.NOTIFICATION_CLICKED:return"notification_open";case gi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function hl(){return(hl=(0,B.Z)(function*(P,R){const z=R.data;if(!z.isFirebaseMessaging)return;P.onMessageHandler&&z.messageType===gi.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Ua(z)):P.onMessageHandler.next(Ua(z)));const se=z.data;Ba(se)&&"1"===se[_u]&&(yield dl(P,z.messageType,se))})).apply(this,arguments)}const Nd="@firebase/messaging";function Ld(){return rr.apply(this,arguments)}function rr(){return(rr=(0,B.Z)(function*(){return"undefined"!=typeof window&&(0,ie.hl)()&&(yield(0,ie.eu)())&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new he.wA("messaging",P=>{const R=new da(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",z=>function(P,R){return hl.apply(this,arguments)}(R,z)),R},"PUBLIC")),(0,ae._registerComponent)(new he.wA("messaging-internal",P=>{const R=P.getProvider("messaging").getImmediate();return{getToken:se=>function(P,R){return Sc.apply(this,arguments)}(R,se)}},"PRIVATE")),(0,ae.registerVersion)(Nd,"0.9.5"),(0,ae.registerVersion)(Nd,"0.9.5","esm2017");const fa="analytics",Ic="firebase_id",Fd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xf="https://www.googletagmanager.com/gtag/js",ur=new pe.Yd("@firebase/analytics");function ml(P){return Promise.all(P.map(R=>R.catch(z=>z)))}function Yv(P,R){const z=document.createElement("script");z.src=`${xf}?l=${P}&id=${R}`,z.async=!0,document.head.appendChild(z)}function wu(P,R,z,se,Le,Oe){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,B.Z)(function*(P,R,z,se,Le,Oe){const gt=se[Le];try{if(gt)yield R[gt];else{const Nt=(yield ml(z)).find(Pn=>Pn.measurementId===Le);Nt&&(yield R[Nt.appId])}}catch(qt){ur.error(qt)}P("config",Le,Oe)})).apply(this,arguments)}function Va(P,R,z,se,Le){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,B.Z)(function*(P,R,z,se,Le){try{let Oe=[];if(Le&&Le.send_to){let gt=Le.send_to;Array.isArray(gt)||(gt=[gt]);const qt=yield ml(z);for(const Nt of gt){const Pn=qt.find(Zi=>Zi.measurementId===Nt),Wn=Pn&&R[Pn.appId];if(!Wn){Oe=[];break}Oe.push(Wn)}}0===Oe.length&&(Oe=Object.values(R)),yield Promise.all(Oe),P("event",se,Le||{})}catch(Oe){ur.error(Oe)}})).apply(this,arguments)}function qn(){const P=window.document.getElementsByTagName("script");for(const R of Object.values(P))if(R.src&&R.src.includes(xf))return R;return null}const $t=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Su=new class{constructor(R={},z=1e3){this.throttleMetadata=R,this.intervalMillis=z}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,z){this.throttleMetadata[R]=z}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function Qv(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function vl(P){return kc.apply(this,arguments)}function kc(){return(kc=(0,B.Z)(function*(P){var R;const{appId:z,apiKey:se}=P,Le={method:"GET",headers:Qv(se)},Oe=Fd.replace("{app-id}",z),gt=yield fetch(Oe,Le);if(200!==gt.status&&304!==gt.status){let qt="";try{const Nt=yield gt.json();(null===(R=Nt.error)||void 0===R?void 0:R.message)&&(qt=Nt.error.message)}catch(Nt){}throw $t.create("config-fetch-failed",{httpStatus:gt.status,responseMessage:qt})}return gt.json()})).apply(this,arguments)}function Ga(P){return pa.apply(this,arguments)}function pa(){return(pa=(0,B.Z)(function*(P,R=Su,z){const{appId:se,apiKey:Le,measurementId:Oe}=P.options;if(!se)throw $t.create("no-app-id");if(!Le){if(Oe)return{measurementId:Oe,appId:se};throw $t.create("no-api-key")}const gt=R.getThrottleMetadata(se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qt=new Cu;return setTimeout((0,B.Z)(function*(){qt.abort()}),void 0!==z?z:6e4),ko({appId:se,apiKey:Le,measurementId:Oe},gt,qt,R)})).apply(this,arguments)}function ko(P,R,z){return un.apply(this,arguments)}function un(){return(un=(0,B.Z)(function*(P,{throttleEndTimeMillis:R,backoffCount:z},se,Le=Su){const{appId:Oe,measurementId:gt}=P;try{yield Tg(se,R)}catch(qt){if(gt)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gt} provided in the "measurementId" field in the local Firebase config. [${qt.message}]`),{appId:Oe,measurementId:gt};throw qt}try{const qt=yield vl(P);return Le.deleteThrottleMetadata(Oe),qt}catch(qt){if(!Eg(qt)){if(Le.deleteThrottleMetadata(Oe),gt)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gt} provided in the "measurementId" field in the local Firebase config. [${qt.message}]`),{appId:Oe,measurementId:gt};throw qt}const Nt=503===Number(qt.customData.httpStatus)?(0,ie.$s)(z,Le.intervalMillis,30):(0,ie.$s)(z,Le.intervalMillis),Pn={throttleEndTimeMillis:Date.now()+Nt,backoffCount:z+1};return Le.setThrottleMetadata(Oe,Pn),ur.debug(`Calling attemptFetch again in ${Nt} millis`),ko(P,Pn,se,Le)}})).apply(this,arguments)}function Tg(P,R){return new Promise((z,se)=>{const Le=Math.max(R-Date.now(),0),Oe=setTimeout(z,Le);P.addEventListener(()=>{clearTimeout(Oe),se($t.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function Eg(P){if(!(P instanceof ie.ZR&&P.customData))return!1;const R=Number(P.customData.httpStatus);return 429===R||500===R||503===R||504===R}class Cu{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}function xu(){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,B.Z)(function*(){if(!(0,ie.hl)())return ur.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(P){return ur.warn($t.create("indexeddb-unavailable",{errorInfo:P}).message),!1}return!0})).apply(this,arguments)}function Gs(){return(Gs=(0,B.Z)(function*(P,R,z,se,Le,Oe,gt){var qt;const Nt=Ga(P);Nt.then(mr=>{z[mr.measurementId]=mr.appId,P.options.measurementId&&mr.measurementId!==P.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>ur.error(mr)),R.push(Nt);const Pn=xu().then(mr=>{if(mr)return se.getId()}),[Wn,Zi]=yield Promise.all([Nt,Pn]);qn()||Yv(Oe,Wn.measurementId),Le("js",new Date);const Ki=null!==(qt=null==gt?void 0:gt.config)&&void 0!==qt?qt:{};return Ki.origin="firebase",Ki.update=!0,null!=Zi&&(Ki[Ic]=Zi),Le("config",Wn.measurementId,Ki),Wn.measurementId})).apply(this,arguments)}class If{constructor(R){this.app=R}_delete(){return delete $s[this.app.options.appId],Promise.resolve()}}let $s={},jd=[];const Iu={};let Mc,Jr,$a="dataLayer",ga=!1;function vi(P,R,z){!function(){const P=[];if((0,ie.ru)()&&P.push("This is a browser extension environment."),(0,ie.zI)()||P.push("Cookies are not available."),P.length>0){const R=P.map((se,Le)=>`(${Le+1}) ${se}`).join(" "),z=$t.create("invalid-analytics-context",{errorInfo:R});ur.warn(z.message)}}();const se=P.options.appId;if(!se)throw $t.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw $t.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$s[se])throw $t.create("already-exists",{id:se});if(!ga){!function(P){let R=[];Array.isArray(window[P])?R=window[P]:window[P]=R}($a);const{wrappedGtag:Oe,gtagCore:gt}=function(P,R,z,se,Le){let Oe=function(...gt){window[se].push(arguments)};return window[Le]&&"function"==typeof window[Le]&&(Oe=window[Le]),window[Le]=function(P,R,z,se){function Oe(){return(Oe=(0,B.Z)(function*(gt,qt,Nt){try{"event"===gt?yield Va(P,R,z,qt,Nt):"config"===gt?yield wu(P,R,z,se,qt,Nt):P("set",qt)}catch(Pn){ur.error(Pn)}})).apply(this,arguments)}return function(gt,qt,Nt){return Oe.apply(this,arguments)}}(Oe,P,R,z),{gtagCore:Oe,wrappedGtag:window[Le]}}($s,jd,Iu,$a,"gtag");Jr=Oe,Mc=gt,ga=!0}return $s[se]=function(P,R,z,se,Le,Oe,gt){return Gs.apply(this,arguments)}(P,jd,Iu,R,Mc,$a,z),new If(P)}function Rc(){return(Rc=(0,B.Z)(function*(P,R,z,se,Le){if(Le&&Le.global)P("event",z,se);else{const Oe=yield R;P("event",z,Object.assign(Object.assign({},se),{send_to:Oe}))}})).apply(this,arguments)}function Jn(){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,B.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(P){return!1}})).apply(this,arguments)}const Af="@firebase/analytics";(0,ae._registerComponent)(new he.wA(fa,(R,{options:z})=>vi(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),z),"PUBLIC")),(0,ae._registerComponent)(new he.wA("analytics-internal",function(R){try{const z=R.getProvider(fa).getImmediate();return{logEvent:(se,Le,Oe)=>function(P,R,z,se){P=(0,ie.m9)(P),function(P,R,z,se,Le){return Rc.apply(this,arguments)}(Jr,$s[P.app.options.appId],R,z,se).catch(Le=>ur.error(Le))}(z,se,Le,Oe)}}catch(z){throw $t.create("interop-component-reg-failed",{reason:z})}},"PRIVATE")),(0,ae.registerVersion)(Af,"0.7.5"),(0,ae.registerVersion)(Af,"0.7.5","esm2017");var _r=U(2869),Tl=U(8843);const Ig=new class extends Tl.v{}(class extends _r.o{constructor(R,z){super(R,z),this.scheduler=R,this.work=z}schedule(R,z=0){return z>0?super.schedule(R,z):(this.delay=z,this.state=R,this.scheduler.flush(this),this)}execute(R,z){return z>0||this.closed?super.execute(R,z):this._execute(R,z)}requestAsyncId(R,z,se=0){return null!=se&&se>0||null==se&&this.delay>0?super.requestAsyncId(R,z,se):R.flush(this)}});var ho=U(2210),Ud=U(7384),Wa=U(4763),Au=U(5222);const kf=new d.GfV("7.2.0"),Bd="__angularfire_symbol__analyticsIsSupported",Vd="__angularfire_symbol__remoteConfigIsSupported",Mi="__angularfire_symbol__messagingIsSupported";function Pf(P,R,z){if(R){if(1===R.length)return R[0];const Oe=R.filter(gt=>gt.app===z);if(1===Oe.length)return Oe[0]}return z.container.getProvider(P).getImmediate({optional:!0})}globalThis[Bd]||(globalThis[Bd]=Jn().then(P=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=P)),globalThis[Mi]||(globalThis[Mi]=Ld().then(P=>globalThis.__angularfire_symbol__messagingIsSupportedValue=P)),globalThis[Vd]||(globalThis[Vd]=Qu().then(P=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=P));const Pg=(P,R)=>{const z=R?[R]:(0,ee.C6)(),se=[];return z.forEach(Le=>{Le.container.getProvider(P).instances.forEach(gt=>{se.includes(gt)||se.push(gt)})}),se};function Ri(){}class Hd{constructor(R,z=Ig){this.zone=R,this.delegate=z}now(){return this.delegate.now()}schedule(R,z,se){const Le=this.zone;return this.delegate.schedule(function(gt){Le.runGuarded(()=>{R.apply(this,[gt])})},z,se)}}class Nc{constructor(R){this.zone=R,this.task=null}call(R,z){const se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ri,{},Ri,Ri)),z.pipe((0,Ud.b)({next:se,complete:se,error:se})).subscribe(R).add(se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Gd=(()=>{class P{constructor(z){this.ngZone=z,this.outsideAngular=z.runOutsideAngular(()=>new Hd(Zone.current)),this.insideAngular=z.run(()=>new Hd(Zone.current,ho.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(z){return new(z||P)(d.LFG(d.R0b))},P.\u0275prov=d.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function po(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function wl(P){return P.pipe((0,Wa.Q)(po().outsideAngular))}function Ro(P){return po(),function(P){return function(z){return(z=z.lift(new Nc(P.ngZone))).pipe((0,Au.R)(P.outsideAngular),(0,Wa.Q)(P.insideAngular))}}(po())(P)}},5007:(Ye,_e,U)=>{U(9969);const{devDependencies:ee}=U(3681);Ye.exports={corePath:`https://unpkg.com/@ffmpeg/core@${ee["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},4449:(Ye,_e,U)=>{var d=U(1052).default;const ee=U(9969);Ye.exports=function(){var ae=d(function*(ie){let he=ie;return void 0===ie?new Uint8Array:("string"==typeof ie?he=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(ie)?atob(ie.split(",")[1]).split("").map(pe=>pe.charCodeAt(0)):yield(yield fetch(ee(ie))).arrayBuffer():(ie instanceof File||ie instanceof Blob)&&(he=yield(ae=>new Promise((ie,he)=>{const pe=new FileReader;pe.onload=()=>{ie(pe.result)},pe.onerror=({target:{error:{code:ce}}})=>{he(Error(`File could not be read! Code=${ce}`))},pe.readAsArrayBuffer(ae)}))(ie)),new Uint8Array(he))});return function(ie){return ae.apply(this,arguments)}}()},1146:(Ye,_e,U)=>{var d=U(1052).default;const ee=U(9969),{log:B}=U(8315),ae=function(){var ie=d(function*(he,pe){B("info",`fetch ${he}`);const ce=yield(yield fetch(he)).arrayBuffer();B("info",`${he} file size = ${ce.byteLength} bytes`);const fe=new Blob([ce],{type:pe}),Q=URL.createObjectURL(fe);return B("info",`${he} blob URL = ${Q}`),Q});return function(pe,ce){return ie.apply(this,arguments)}}();Ye.exports=function(){var ie=d(function*({corePath:he}){if("string"!=typeof he)throw Error("corePath should be a string!");const pe=ee(he),ce=yield ae(pe,"application/javascript"),fe=yield ae(pe.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),Q=yield ae(pe.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(ue=>{const ne=document.createElement("script"),et=()=>{ne.removeEventListener("load",et),B("info","ffmpeg-core.js script loaded"),ue({createFFmpegCore,corePath:ce,wasmPath:fe,workerPath:Q})};ne.src=ce,ne.type="text/javascript",ne.addEventListener("load",et),document.getElementsByTagName("head")[0].appendChild(ne)}):(B("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:ce,wasmPath:fe,workerPath:Q}))});return function(he){return ie.apply(this,arguments)}}()},1237:(Ye,_e,U)=>{const d=U(5007),ee=U(1146),B=U(4449);Ye.exports={defaultOptions:d,getCreateFFmpegCore:ee,fetchFile:B}},2746:Ye=>{Ye.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},8903:(Ye,_e,U)=>{var d=U(1052).default;const{defaultArgs:ee,baseOptions:B}=U(2746),{setLogging:ae,setCustomLogger:ie,log:he}=U(8315),pe=U(9250),ce=U(8807),{defaultOptions:fe,getCreateFFmpegCore:Q}=U(1237),{version:ue}=U(3681),ne=Error("ffmpeg.wasm is not ready, make sure you have completed load().");Ye.exports=(et={})=>{const Y=rn(rn(rn({},B),fe),et),{log:Ze,logger:rt,progress:St}=Y,ye=N2(Y,["log","logger","progress"]);let le=null,Ie=null,Ve=null,He=!1,Je=St;const st=({type:ge,message:Pe})=>{he(ge,Pe),pe(Pe,Je),(ge=>{"FFMPEG_END"===ge&&null!==Ve&&(Ve(),Ve=null,He=!1)})(Pe)},Tt=function(){var ge=d(function*(){if(he("info","load ffmpeg-core"),null!==le)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{he("info","loading ffmpeg-core");const{createFFmpegCore:Pe,corePath:Ge,workerPath:Me,wasmPath:qe}=yield Q(ye);le=yield Pe({mainScriptUrlOrBlob:Ge,printErr:ot=>st({type:"fferr",message:ot}),print:ot=>st({type:"ffout",message:ot}),locateFile:(ot,kt)=>{if("undefined"!=typeof window){if(void 0!==qe&&ot.endsWith("ffmpeg-core.wasm"))return qe;if(void 0!==Me&&ot.endsWith("ffmpeg-core.worker.js"))return Me}return kt+ot}}),Ie=le.cwrap("proxy_main","number",["number","number"]),he("info","ffmpeg-core loaded")}});return function(){return ge.apply(this,arguments)}}();return ae(Ze),ie(rt),he("info",`use ffmpeg.wasm v${ue}`),{setProgress:ge=>{Je=ge},setLogger:ge=>{ie(ge)},setLogging:ae,load:Tt,isLoaded:()=>null!==le,run:(...ge)=>{if(he("info",`run ffmpeg command: ${ge.join(" ")}`),null===le)throw ne;if(He)throw Error("ffmpeg.wasm can only run one command at a time");return He=!0,new Promise(Pe=>{const Ge=[...ee,...ge].filter(Me=>0!==Me.length);Ve=Pe,Ie(...ce(le,Ge))})},exit:()=>{if(null===le)throw ne;He=!1,le.exit(1),le=null,Ie=null,Ve=null},FS:(ge,...Pe)=>{if(he("info",`run FS.${ge} ${Pe.map(Ge=>"string"==typeof Ge?Ge:`<${Ge.length} bytes binary file>`).join(" ")}`),null===le)throw ne;{let Ge=null;try{Ge=le.FS[ge](...Pe)}catch(Me){throw Error("readdir"===ge?`ffmpeg.FS('readdir', '${Pe[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===ge?`ffmpeg.FS('readFile', '${Pe[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return Ge}}}}},6285:(Ye,_e,U)=>{U(7503);const d=U(8903),{fetchFile:ee}=U(1237);Ye.exports={createFFmpeg:d,fetchFile:ee}},8315:Ye=>{let _e=!1,U=()=>{};Ye.exports={logging:_e,setLogging:ae=>{_e=ae},setCustomLogger:ae=>{U=ae},log:(ae,ie)=>{U({type:ae,message:ie}),_e&&console.log(`[${ae}] ${ie}`)}}},8807:Ye=>{Ye.exports=(_e,U)=>{const d=_e._malloc(U.length*Uint32Array.BYTES_PER_ELEMENT);return U.forEach((ee,B)=>{const ae=_e._malloc(ee.length+1);_e.writeAsciiToMemory(ee,ae),_e.setValue(d+Uint32Array.BYTES_PER_ELEMENT*B,ae,"i32")}),[U.length,d]}},9250:Ye=>{let _e=0,U=0;const d=ee=>{const[B,ae,ie]=ee.split(":");return 60*parseFloat(B)*60+60*parseFloat(ae)+parseFloat(ie)};Ye.exports=(ee,B)=>{if("string"==typeof ee)if(ee.startsWith("  Duration")){const ae=ee.split(", ")[0].split(": ")[1],ie=d(ae);B({duration:ie,ratio:U}),(0===_e||_e>ie)&&(_e=ie)}else if(ee.startsWith("frame")||ee.startsWith("size")){const ae=ee.split("time=")[1].split(" ")[0],ie=d(ae);U=ie/_e,B({ratio:U,time:ie})}else ee.startsWith("video:")&&(B({ratio:1}),_e=0)}},4213:(Ye,_e,U)=>{"use strict";U.d(_e,{BH:()=>et,LL:()=>Y,ZR:()=>Ue,zI:()=>re,US:()=>he,tV:()=>fe,$s:()=>Nn,r3:()=>Pt,Sg:()=>Ze,ne:()=>An,vZ:()=>sn,ZB:()=>ue,pd:()=>ki,m9:()=>gu,z$:()=>rt,jU:()=>le,ru:()=>Ie,d:()=>He,xb:()=>pn,w1:()=>Je,hl:()=>Z,uI:()=>St,UG:()=>ye,b$:()=>Ve,G6:()=>Tt,Mn:()=>Ke,xO:()=>Di,zd:()=>Un,eu:()=>G});const ae=function(xe){const de=[];let ke=0;for(let at=0;at<xe.length;at++){let ze=xe.charCodeAt(at);ze<128?de[ke++]=ze:ze<2048?(de[ke++]=ze>>6|192,de[ke++]=63&ze|128):55296==(64512&ze)&&at+1<xe.length&&56320==(64512&xe.charCodeAt(at+1))?(ze=65536+((1023&ze)<<10)+(1023&xe.charCodeAt(++at)),de[ke++]=ze>>18|240,de[ke++]=ze>>12&63|128,de[ke++]=ze>>6&63|128,de[ke++]=63&ze|128):(de[ke++]=ze>>12|224,de[ke++]=ze>>6&63|128,de[ke++]=63&ze|128)}return de},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(xe,de){if(!Array.isArray(xe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ke=de?this.byteToCharMapWebSafe_:this.byteToCharMap_,at=[];for(let ze=0;ze<xe.length;ze+=3){const Vt=xe[ze],nn=ze+1<xe.length,Gn=nn?xe[ze+1]:0,K=ze+2<xe.length,X=K?xe[ze+2]:0;let vt=(15&Gn)<<2|X>>6,bn=63&X;K||(bn=64,nn||(vt=64)),at.push(ke[Vt>>2],ke[(3&Vt)<<4|Gn>>4],ke[vt],ke[bn])}return at.join("")},encodeString(xe,de){return this.HAS_NATIVE_SUPPORT&&!de?btoa(xe):this.encodeByteArray(ae(xe),de)},decodeString(xe,de){return this.HAS_NATIVE_SUPPORT&&!de?atob(xe):function(xe){const de=[];let ke=0,at=0;for(;ke<xe.length;){const ze=xe[ke++];if(ze<128)de[at++]=String.fromCharCode(ze);else if(ze>191&&ze<224){const Vt=xe[ke++];de[at++]=String.fromCharCode((31&ze)<<6|63&Vt)}else if(ze>239&&ze<365){const K=((7&ze)<<18|(63&xe[ke++])<<12|(63&xe[ke++])<<6|63&xe[ke++])-65536;de[at++]=String.fromCharCode(55296+(K>>10)),de[at++]=String.fromCharCode(56320+(1023&K))}else{const Vt=xe[ke++],nn=xe[ke++];de[at++]=String.fromCharCode((15&ze)<<12|(63&Vt)<<6|63&nn)}}return de.join("")}(this.decodeStringToByteArray(xe,de))},decodeStringToByteArray(xe,de){this.init_();const ke=de?this.charToByteMapWebSafe_:this.charToByteMap_,at=[];for(let ze=0;ze<xe.length;){const Vt=ke[xe.charAt(ze++)],Gn=ze<xe.length?ke[xe.charAt(ze)]:0;++ze;const X=ze<xe.length?ke[xe.charAt(ze)]:64;++ze;const We=ze<xe.length?ke[xe.charAt(ze)]:64;if(++ze,null==Vt||null==Gn||null==X||null==We)throw Error();at.push(Vt<<2|Gn>>4),64!==X&&(at.push(Gn<<4&240|X>>2),64!==We&&at.push(X<<6&192|We))}return at},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let xe=0;xe<this.ENCODED_VALS.length;xe++)this.byteToCharMap_[xe]=this.ENCODED_VALS.charAt(xe),this.charToByteMap_[this.byteToCharMap_[xe]]=xe,this.byteToCharMapWebSafe_[xe]=this.ENCODED_VALS_WEBSAFE.charAt(xe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[xe]]=xe,xe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(xe)]=xe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(xe)]=xe)}}},ce=function(xe){return function(xe){const de=ae(xe);return he.encodeByteArray(de,!0)}(xe).replace(/\./g,"")},fe=function(xe){try{return he.decodeString(xe,!0)}catch(de){console.error("base64Decode failed: ",de)}return null};function ue(xe,de){if(!(de instanceof Object))return de;switch(de.constructor){case Date:return new Date(de.getTime());case Object:void 0===xe&&(xe={});break;case Array:xe=[];break;default:return de}for(const ke in de)!de.hasOwnProperty(ke)||!ne(ke)||(xe[ke]=ue(xe[ke],de[ke]));return xe}function ne(xe){return"__proto__"!==xe}class et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((de,ke)=>{this.resolve=de,this.reject=ke})}wrapCallback(de){return(ke,at)=>{ke?this.reject(ke):this.resolve(at),"function"==typeof de&&(this.promise.catch(()=>{}),1===de.length?de(ke):de(ke,at))}}}function Ze(xe,de){if(xe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const at=de||"demo-project",ze=xe.iat||0,Vt=xe.sub||xe.user_id;if(!Vt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const nn=Object.assign({iss:`https://securetoken.google.com/${at}`,aud:at,iat:ze,exp:ze+3600,auth_time:ze,sub:Vt,user_id:Vt,firebase:{sign_in_provider:"custom",identities:{}}},xe);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(nn)),""].join(".")}function rt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function St(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(xe){return!1}}function le(){return"object"==typeof self&&self.self===self}function Ie(){const xe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof xe&&void 0!==xe.id}function Ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){return rt().indexOf("Electron/")>=0}function Je(){const xe=rt();return xe.indexOf("MSIE ")>=0||xe.indexOf("Trident/")>=0}function Ke(){return rt().indexOf("MSAppHost/")>=0}function Tt(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z(){return"object"==typeof indexedDB}function G(){return new Promise((xe,de)=>{try{let ke=!0;const at="validate-browser-context-for-indexeddb-analytics-module",ze=self.indexedDB.open(at);ze.onsuccess=()=>{ze.result.close(),ke||self.indexedDB.deleteDatabase(at),xe(!0)},ze.onupgradeneeded=()=>{ke=!1},ze.onerror=()=>{var Vt;de((null===(Vt=ze.error)||void 0===Vt?void 0:Vt.message)||"")}}catch(ke){de(ke)}})}function re(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ue extends Error{constructor(de,ke,at){super(ke),this.code=de,this.customData=at,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(de,ke,at){this.service=de,this.serviceName=ke,this.errors=at}create(de,...ke){const at=ke[0]||{},ze=`${this.service}/${de}`,Vt=this.errors[de],nn=Vt?function(xe,de){return xe.replace(Pe,(ke,at)=>{const ze=de[at];return null!=ze?String(ze):`<${at}?>`})}(Vt,at):"Error";return new Ue(ze,`${this.serviceName}: ${nn} (${ze}).`,at)}}const Pe=/\{\$([^}]+)}/g;function Pt(xe,de){return Object.prototype.hasOwnProperty.call(xe,de)}function pn(xe){for(const de in xe)if(Object.prototype.hasOwnProperty.call(xe,de))return!1;return!0}function sn(xe,de){if(xe===de)return!0;const ke=Object.keys(xe),at=Object.keys(de);for(const ze of ke){if(!at.includes(ze))return!1;const Vt=xe[ze],nn=de[ze];if(Cn(Vt)&&Cn(nn)){if(!sn(Vt,nn))return!1}else if(Vt!==nn)return!1}for(const ze of at)if(!ke.includes(ze))return!1;return!0}function Cn(xe){return null!==xe&&"object"==typeof xe}function Di(xe){const de=[];for(const[ke,at]of Object.entries(xe))Array.isArray(at)?at.forEach(ze=>{de.push(encodeURIComponent(ke)+"="+encodeURIComponent(ze))}):de.push(encodeURIComponent(ke)+"="+encodeURIComponent(at));return de.length?"&"+de.join("&"):""}function Un(xe){const de={};return xe.replace(/^\?/,"").split("&").forEach(at=>{if(at){const[ze,Vt]=at.split("=");de[decodeURIComponent(ze)]=decodeURIComponent(Vt)}}),de}function ki(xe){const de=xe.indexOf("?");if(!de)return"";const ke=xe.indexOf("#",de);return xe.substring(de,ke>0?ke:void 0)}function An(xe,de){const ke=new ar(xe,de);return ke.subscribe.bind(ke)}class ar{constructor(de,ke){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ke,this.task.then(()=>{de(this)}).catch(at=>{this.error(at)})}next(de){this.forEachObserver(ke=>{ke.next(de)})}error(de){this.forEachObserver(ke=>{ke.error(de)}),this.close(de)}complete(){this.forEachObserver(de=>{de.complete()}),this.close()}subscribe(de,ke,at){let ze;if(void 0===de&&void 0===ke&&void 0===at)throw new Error("Missing Observer.");ze=function(xe,de){if("object"!=typeof xe||null===xe)return!1;for(const ke of["next","error","complete"])if(ke in xe&&"function"==typeof xe[ke])return!0;return!1}(de)?de:{next:de,error:ke,complete:at},void 0===ze.next&&(ze.next=Yr),void 0===ze.error&&(ze.error=Yr),void 0===ze.complete&&(ze.complete=Yr);const Vt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ze.error(this.finalError):ze.complete()}catch(nn){}}),this.observers.push(ze),Vt}unsubscribeOne(de){void 0===this.observers||void 0===this.observers[de]||(delete this.observers[de],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(de){if(!this.finalized)for(let ke=0;ke<this.observers.length;ke++)this.sendOne(ke,de)}sendOne(de,ke){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[de])try{ke(this.observers[de])}catch(at){"undefined"!=typeof console&&console.error&&console.error(at)}})}close(de){this.finalized||(this.finalized=!0,void 0!==de&&(this.finalError=de),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yr(){}function Nn(xe,de=1e3,ke=2){const at=de*Math.pow(ke,xe),ze=Math.round(.5*at*(Math.random()-.5)*2);return Math.min(144e5,at+ze)}function gu(xe){return xe&&xe._delegate?xe._delegate:xe}},8755:(Ye,_e,U)=>{"use strict";var d=U(397);Ye.exports=function(ie,he){return void 0===he&&(he=!1),function(pe,ce,fe){if(pe)ie(pe);else if(ce.statusCode>=400&&ce.statusCode<=599){var Q=fe;if(he)if(d.TextDecoder){var ue=(void 0===(ae=ce.headers&&ce.headers["content-type"])&&(ae=""),ae.toLowerCase().split(";").reduce(function(ie,he){var pe=he.split("="),fe=pe[1];return"charset"===pe[0].trim()?fe.trim():ie},"utf-8"));try{Q=new TextDecoder(ue).decode(fe)}catch(ne){}}else Q=String.fromCharCode.apply(null,new Uint8Array(fe));ie({cause:Q})}else{var ae;ie(null,fe)}}}},5729:(Ye,_e,U)=>{"use strict";var d=U(397),ee=U(6549),B=U(985);function pe(ne,et,Ze){var rt=ne;return B(et)?(Ze=et,"string"==typeof ne&&(rt={uri:ne})):rt=ee({},et,{uri:ne}),rt.callback=Ze,rt}function ce(ne,et,Ze){return fe(et=pe(ne,et,Ze))}function fe(ne){if(void 0===ne.callback)throw new Error("callback argument missing");var et=!1,Ze=function(Ue,Y,ge){et||(et=!0,ne.callback(Ue,Y,ge))};function St(){var Ee=void 0;if(Ee=Ie.response?Ie.response:Ie.responseText||function(ne){try{if("document"===ne.responseType)return ne.responseXML;if(""===ne.responseType&&(!ne.responseXML||"parsererror"!==ne.responseXML.documentElement.nodeName))return ne.responseXML}catch(Ze){}return null}(Ie),G)try{Ee=JSON.parse(Ee)}catch(Ue){}return Ee}function ye(Ee){return clearTimeout(re),Ee instanceof Error||(Ee=new Error(""+(Ee||"Unknown XMLHttpRequest Error"))),Ee.statusCode=0,Ze(Ee,Te)}function le(){if(!He){var Ee;clearTimeout(re);var Ue=Te,Y=null;return 0!==(Ee=ne.useXDR&&void 0===Ie.status?200:1223===Ie.status?204:Ie.status)?(Ue={body:St(),statusCode:Ee,method:Ke,headers:{},url:Je,rawRequest:Ie},Ie.getAllResponseHeaders&&(Ue.headers=function(et){var Ze={};return et&&et.trim().split("\n").forEach(function(rt){var St=rt.indexOf(":"),ye=rt.slice(0,St).trim().toLowerCase(),le=rt.slice(St+1).trim();void 0===Ze[ye]?Ze[ye]=le:Array.isArray(Ze[ye])?Ze[ye].push(le):Ze[ye]=[Ze[ye],le]}),Ze}(Ie.getAllResponseHeaders()))):Y=new Error("Internal XMLHttpRequest Error"),Ze(Y,Ue,Ue.body)}}var Ie=ne.xhr||null;Ie||(Ie=ne.cors||ne.useXDR?new ce.XDomainRequest:new ce.XMLHttpRequest);var Ve,He,re,Je=Ie.url=ne.uri||ne.url,Ke=Ie.method=ne.method||"GET",st=ne.body||ne.data,Tt=Ie.headers=ne.headers||{},Z=!!ne.sync,G=!1,Te={body:void 0,headers:{},statusCode:0,method:Ke,url:Je,rawRequest:Ie};if("json"in ne&&!1!==ne.json&&(G=!0,Tt.accept||Tt.Accept||(Tt.Accept="application/json"),"GET"!==Ke&&"HEAD"!==Ke&&(Tt["content-type"]||Tt["Content-Type"]||(Tt["Content-Type"]="application/json"),st=JSON.stringify(!0===ne.json?st:ne.json))),Ie.onreadystatechange=function(){4===Ie.readyState&&setTimeout(le,0)},Ie.onload=le,Ie.onerror=ye,Ie.onprogress=function(){},Ie.onabort=function(){He=!0},Ie.ontimeout=ye,Ie.open(Ke,Je,!Z,ne.username,ne.password),Z||(Ie.withCredentials=!!ne.withCredentials),!Z&&ne.timeout>0&&(re=setTimeout(function(){if(!He){He=!0,Ie.abort("timeout");var Ee=new Error("XMLHttpRequest timeout");Ee.code="ETIMEDOUT",ye(Ee)}},ne.timeout)),Ie.setRequestHeader)for(Ve in Tt)Tt.hasOwnProperty(Ve)&&Ie.setRequestHeader(Ve,Tt[Ve]);else if(ne.headers&&!function(ne){for(var et in ne)if(ne.hasOwnProperty(et))return!1;return!0}(ne.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in ne&&(Ie.responseType=ne.responseType),"beforeSend"in ne&&"function"==typeof ne.beforeSend&&ne.beforeSend(Ie),Ie.send(st||null),Ie}ce.httpHandler=U(8755),Ye.exports=ce,Ye.exports.default=ce,ce.XMLHttpRequest=d.XMLHttpRequest||function(){},ce.XDomainRequest="withCredentials"in new ce.XMLHttpRequest?ce.XMLHttpRequest:d.XDomainRequest,function(ne,et){for(var Ze=0;Ze<ne.length;Ze++)et(ne[Ze])}(["get","put","post","patch","head","delete"],function(ne){ce["delete"===ne?"del":ne]=function(et,Ze,rt){return(Ze=pe(et,Ze,rt)).method=ne.toUpperCase(),fe(Ze)}})},1469:(Ye,_e)=>{"use strict";function U(B,ae){return void 0===ae&&(ae=Object),ae&&"function"==typeof ae.freeze?ae.freeze(B):B}var d=U({HTML:"text/html",isHTML:function(B){return B===d.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ee=U({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(B){return B===ee.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});_e.freeze=U,_e.MIME_TYPE=d,_e.NAMESPACE=ee},1343:(Ye,_e,U)=>{var ee=U(1469),B=U(3472),ae=U(8667),ie=U(3115),he=B.DOMImplementation,pe=ee.NAMESPACE,ce=ie.ParseError,fe=ie.XMLReader;function Q(ye){this.options=ye||{locator:{}}}function ne(){this.cdata=!1}function et(ye,le){le.lineNumber=ye.lineNumber,le.columnNumber=ye.columnNumber}function Ze(ye){if(ye)return"\n@"+(ye.systemId||"")+"#[line:"+ye.lineNumber+",col:"+ye.columnNumber+"]"}function rt(ye,le,Ie){return"string"==typeof ye?ye.substr(le,Ie):ye.length>=le+Ie||le?new java.lang.String(ye,le,Ie)+"":ye}function St(ye,le){ye.currentElement?ye.currentElement.appendChild(le):ye.doc.appendChild(le)}Q.prototype.parseFromString=function(ye,le){var Ie=this.options,Ve=new fe,He=Ie.domBuilder||new ne,Je=Ie.errorHandler,Ke=Ie.locator,st=Ie.xmlns||{},Tt=/\/x?html?$/.test(le),Z=Tt?ae.HTML_ENTITIES:ae.XML_ENTITIES;return Ke&&He.setDocumentLocator(Ke),Ve.errorHandler=function(ye,le,Ie){if(!ye){if(le instanceof ne)return le;ye=le}var Ve={},He=ye instanceof Function;function Je(Ke){var st=ye[Ke];!st&&He&&(st=2==ye.length?function(Tt){ye(Ke,Tt)}:ye),Ve[Ke]=st&&function(Tt){st("[xmldom "+Ke+"]\t"+Tt+Ze(Ie))}||function(){}}return Ie=Ie||{},Je("warning"),Je("error"),Je("fatalError"),Ve}(Je,He,Ke),Ve.domBuilder=Ie.domBuilder||He,Tt&&(st[""]=pe.HTML),st.xml=st.xml||pe.XML,ye&&"string"==typeof ye?Ve.parse(ye,st,Z):Ve.errorHandler.error("invalid doc source"),He.doc},ne.prototype={startDocument:function(){this.doc=(new he).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(ye,le,Ie,Ve){var He=this.doc,Je=He.createElementNS(ye,Ie||le),Ke=Ve.length;St(this,Je),this.currentElement=Je,this.locator&&et(this.locator,Je);for(var st=0;st<Ke;st++){ye=Ve.getURI(st);var Tt=Ve.getValue(st),Z=(Ie=Ve.getQName(st),He.createAttributeNS(ye,Ie));this.locator&&et(Ve.getLocator(st),Z),Z.value=Z.nodeValue=Tt,Je.setAttributeNode(Z)}},endElement:function(ye,le,Ie){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(ye,le){},endPrefixMapping:function(ye){},processingInstruction:function(ye,le){var Ie=this.doc.createProcessingInstruction(ye,le);this.locator&&et(this.locator,Ie),St(this,Ie)},ignorableWhitespace:function(ye,le,Ie){},characters:function(ye,le,Ie){if(ye=rt.apply(this,arguments)){if(this.cdata)var Ve=this.doc.createCDATASection(ye);else Ve=this.doc.createTextNode(ye);this.currentElement?this.currentElement.appendChild(Ve):/^\s*$/.test(ye)&&this.doc.appendChild(Ve),this.locator&&et(this.locator,Ve)}},skippedEntity:function(ye){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(ye){(this.locator=ye)&&(ye.lineNumber=0)},comment:function(ye,le,Ie){ye=rt.apply(this,arguments);var Ve=this.doc.createComment(ye);this.locator&&et(this.locator,Ve),St(this,Ve)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(ye,le,Ie){var Ve=this.doc.implementation;if(Ve&&Ve.createDocumentType){var He=Ve.createDocumentType(ye,le,Ie);this.locator&&et(this.locator,He),St(this,He),this.doc.doctype=He}},warning:function(ye){console.warn("[xmldom warning]\t"+ye,Ze(this.locator))},error:function(ye){console.error("[xmldom error]\t"+ye,Ze(this.locator))},fatalError:function(ye){throw new ce(ye,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(ye){ne.prototype[ye]=function(){return null}}),_e.DOMParser=Q},3472:(Ye,_e,U)=>{var ee=U(1469).NAMESPACE;function B(K){return""!==K}function ie(K,X){return K.hasOwnProperty(X)||(K[X]=!0),K}function he(K){if(!K)return[];var X=function(K){return K?K.split(/[\t\n\f\r ]+/).filter(B):[]}(K);return Object.keys(X.reduce(ie,{}))}function ce(K,X){for(var De in K)X[De]=K[De]}function fe(K,X){var De=K.prototype;if(!(De instanceof X)){let vt=function(){};vt.prototype=X.prototype,vt=new vt,ce(De,vt),K.prototype=De=vt}De.constructor!=K&&("function"!=typeof K&&console.error("unknown Class:"+K),De.constructor=K)}var Q={},ue=Q.ELEMENT_NODE=1,ne=Q.ATTRIBUTE_NODE=2,et=Q.TEXT_NODE=3,Ze=Q.CDATA_SECTION_NODE=4,rt=Q.ENTITY_REFERENCE_NODE=5,St=Q.ENTITY_NODE=6,ye=Q.PROCESSING_INSTRUCTION_NODE=7,le=Q.COMMENT_NODE=8,Ie=Q.DOCUMENT_NODE=9,Ve=Q.DOCUMENT_TYPE_NODE=10,He=Q.DOCUMENT_FRAGMENT_NODE=11,Je=Q.NOTATION_NODE=12,Ke={},st={},G=(Ke.INDEX_SIZE_ERR=(st[1]="Index size error",1),Ke.DOMSTRING_SIZE_ERR=(st[2]="DOMString size error",2),Ke.HIERARCHY_REQUEST_ERR=(st[3]="Hierarchy request error",3)),Y=(Ke.WRONG_DOCUMENT_ERR=(st[4]="Wrong document",4),Ke.INVALID_CHARACTER_ERR=(st[5]="Invalid character",5),Ke.NO_DATA_ALLOWED_ERR=(st[6]="No data allowed",6),Ke.NO_MODIFICATION_ALLOWED_ERR=(st[7]="No modification allowed",7),Ke.NOT_FOUND_ERR=(st[8]="Not found",8)),Pe=(Ke.NOT_SUPPORTED_ERR=(st[9]="Not supported",9),Ke.INUSE_ATTRIBUTE_ERR=(st[10]="Attribute in use",10));function Ht(K,X){if(X instanceof Error)var De=X;else De=this,Error.call(this,st[K]),this.message=st[K],Error.captureStackTrace&&Error.captureStackTrace(this,Ht);return De.code=K,X&&(this.message=this.message+": "+X),De}function Lt(){}function Pt(K,X){this._node=K,this._refresh=X,Yn(this)}function Yn(K){var X=K._node._inc||K._node.ownerDocument._inc;if(K._inc!=X){var De=K._refresh(K._node);nn(K,"length",De.length),ce(De,K),K._inc=X}}function pn(){}function On(K,X){for(var De=K.length;De--;)if(K[De]===X)return De}function sn(K,X,De,We){if(We?X[On(X,We)]=De:X[X.length++]=De,K){De.ownerElement=K;var vt=K.ownerDocument;vt&&(We&&Jt(vt,K,We),function(K,X,De){K&&K._inc++,De.namespaceURI===ee.XMLNS&&(X._nsMap[De.prefix?De.localName:""]=De.value)}(vt,K,De))}}function Cn(K,X,De){var We=On(X,De);if(!(We>=0))throw Ht(Y,new Error(K.tagName+"@"+De));for(var vt=X.length-1;We<vt;)X[We]=X[++We];if(X.length=vt,K){var bn=K.ownerDocument;bn&&(Jt(bn,K,De),De.ownerElement=null)}}function Di(){}function Un(){}function ki(K){return("<"==K?"&lt;":">"==K&&"&gt;")||"&"==K&&"&amp;"||'"'==K&&"&quot;"||"&#"+K.charCodeAt()+";"}function ht(K,X){if(X(K))return!0;if(K=K.firstChild)do{if(ht(K,X))return!0}while(K=K.nextSibling)}function An(){}function Jt(K,X,De,We){K&&K._inc++,De.namespaceURI===ee.XMLNS&&delete X._nsMap[De.prefix?De.localName:""]}function In(K,X,De){if(K&&K._inc){K._inc++;var We=X.childNodes;if(De)We[We.length++]=De;else{for(var vt=X.firstChild,bn=0;vt;)We[bn++]=vt,vt=vt.nextSibling;We.length=bn}}}function Yr(K,X){var De=X.previousSibling,We=X.nextSibling;return De?De.nextSibling=We:K.firstChild=We,We?We.previousSibling=De:K.lastChild=De,In(K.ownerDocument,K),X}function Br(K,X,De){var We=X.parentNode;if(We&&We.removeChild(X),X.nodeType===He){var vt=X.firstChild;if(null==vt)return X;var bn=X.lastChild}else vt=bn=X;var dr=De?De.previousSibling:K.lastChild;vt.previousSibling=dr,bn.nextSibling=De,dr?dr.nextSibling=vt:K.firstChild=vt,null==De?K.lastChild=bn:De.previousSibling=bn;do{vt.parentNode=K}while(vt!==bn&&(vt=vt.nextSibling));return In(K.ownerDocument||K,K),X.nodeType==He&&(X.firstChild=X.lastChild=null),X}function Ft(){this._nsMap={}}function vn(){}function yn(){}function ii(){}function Mn(){}function jt(){}function Yt(){}function pu(){}function js(){}function Nn(){}function ln(){}function Qr(){}function gu(){}function xe(K,X){var De=[],We=9==this.nodeType&&this.documentElement||this,vt=We.prefix,bn=We.namespaceURI;if(bn&&null==vt&&null==(vt=We.lookupPrefix(bn)))var dr=[{namespace:bn,prefix:null}];return at(this,De,K,X,dr),De.join("")}function de(K,X,De){var We=K.prefix||"",vt=K.namespaceURI;if(!vt||"xml"===We&&vt===ee.XML||vt===ee.XMLNS)return!1;for(var bn=De.length;bn--;){var dr=De[bn];if(dr.prefix===We)return dr.namespace!==vt}return!0}function ke(K,X,De){K.push(" ",X,'="',De.replace(/[<&"]/g,ki),'"')}function at(K,X,De,We,vt){if(vt||(vt=[]),We){if(!(K=We(K)))return;if("string"==typeof K)return void X.push(K)}switch(K.nodeType){case ue:var bn=K.attributes,dr=bn.length,nr=K.firstChild,Es=K.tagName,pi=Es;if(!(De=ee.isHTML(K.namespaceURI)||De)&&!K.prefix&&K.namespaceURI){for(var rs,Bn=0;Bn<bn.length;Bn++)if("xmlns"===bn.item(Bn).name){rs=bn.item(Bn).value;break}if(!rs)for(var Vr=vt.length-1;Vr>=0;Vr--)if(""===(Pr=vt[Vr]).prefix&&Pr.namespace===K.namespaceURI){rs=Pr.namespace;break}if(rs!==K.namespaceURI)for(Vr=vt.length-1;Vr>=0;Vr--){var Pr;if((Pr=vt[Vr]).namespace===K.namespaceURI){Pr.prefix&&(pi=Pr.prefix+":"+Es);break}}}X.push("<",pi);for(var hr=0;hr<dr;hr++)"xmlns"==(vr=bn.item(hr)).prefix?vt.push({prefix:vr.localName,namespace:vr.value}):"xmlns"==vr.nodeName&&vt.push({prefix:"",namespace:vr.value});for(hr=0;hr<dr;hr++){var vr,Ct,hn;de(vr=bn.item(hr),0,vt)&&(ke(X,(Ct=vr.prefix||"")?"xmlns:"+Ct:"xmlns",hn=vr.namespaceURI),vt.push({prefix:Ct,namespace:hn})),at(vr,X,De,We,vt)}if(Es===pi&&de(K,0,vt)&&(ke(X,(Ct=K.prefix||"")?"xmlns:"+Ct:"xmlns",hn=K.namespaceURI),vt.push({prefix:Ct,namespace:hn})),nr||De&&!/^(?:meta|link|img|br|hr|input)$/i.test(Es)){if(X.push(">"),De&&/^script$/i.test(Es))for(;nr;)nr.data?X.push(nr.data):at(nr,X,De,We,vt.slice()),nr=nr.nextSibling;else for(;nr;)at(nr,X,De,We,vt.slice()),nr=nr.nextSibling;X.push("</",pi,">")}else X.push("/>");return;case Ie:case He:for(nr=K.firstChild;nr;)at(nr,X,De,We,vt.slice()),nr=nr.nextSibling;return;case ne:return ke(X,K.name,K.value);case et:return X.push(K.data.replace(/[<&]/g,ki).replace(/]]>/g,"]]&gt;"));case Ze:return X.push("<![CDATA[",K.data,"]]>");case le:return X.push("\x3c!--",K.data,"--\x3e");case Ve:var Qn=K.publicId,wr=K.systemId;if(X.push("<!DOCTYPE ",K.name),Qn)X.push(" PUBLIC ",Qn),wr&&"."!=wr&&X.push(" ",wr),X.push(">");else if(wr&&"."!=wr)X.push(" SYSTEM ",wr,">");else{var Vi=K.internalSubset;Vi&&X.push(" [",Vi,"]"),X.push(">")}return;case ye:return X.push("<?",K.target," ",K.data,"?>");case rt:return X.push("&",K.nodeName,";");default:X.push("??",K.nodeName)}}function ze(K,X,De){var We;switch(X.nodeType){case ue:(We=X.cloneNode(!1)).ownerDocument=K;case He:break;case ne:De=!0}if(We||(We=X.cloneNode(!1)),We.ownerDocument=K,We.parentNode=null,De)for(var vt=X.firstChild;vt;)We.appendChild(ze(K,vt,De)),vt=vt.nextSibling;return We}function Vt(K,X,De){var We=new X.constructor;for(var vt in X){var bn=X[vt];"object"!=typeof bn&&bn!=We[vt]&&(We[vt]=bn)}switch(X.childNodes&&(We.childNodes=new Lt),We.ownerDocument=K,We.nodeType){case ue:var dr=X.attributes,nr=We.attributes=new pn,Es=dr.length;nr._ownerElement=We;for(var pi=0;pi<Es;pi++)We.setAttributeNode(Vt(K,dr.item(pi),!0));break;case ne:De=!0}if(De)for(var rs=X.firstChild;rs;)We.appendChild(Vt(K,rs,De)),rs=rs.nextSibling;return We}function nn(K,X,De){K[X]=De}Ke.INVALID_STATE_ERR=(st[11]="Invalid state",11),Ke.SYNTAX_ERR=(st[12]="Syntax error",12),Ke.INVALID_MODIFICATION_ERR=(st[13]="Invalid modification",13),Ke.NAMESPACE_ERR=(st[14]="Invalid namespace",14),Ke.INVALID_ACCESS_ERR=(st[15]="Invalid access",15),Ht.prototype=Error.prototype,ce(Ke,Ht),Lt.prototype={length:0,item:function(K){return this[K]||null},toString:function(K,X){for(var De=[],We=0;We<this.length;We++)at(this[We],De,K,X);return De.join("")}},Pt.prototype.item=function(K){return Yn(this),this[K]},fe(Pt,Lt),pn.prototype={length:0,item:Lt.prototype.item,getNamedItem:function(K){for(var X=this.length;X--;){var De=this[X];if(De.nodeName==K)return De}},setNamedItem:function(K){var X=K.ownerElement;if(X&&X!=this._ownerElement)throw new Ht(Pe);var De=this.getNamedItem(K.nodeName);return sn(this._ownerElement,this,K,De),De},setNamedItemNS:function(K){var De,X=K.ownerElement;if(X&&X!=this._ownerElement)throw new Ht(Pe);return De=this.getNamedItemNS(K.namespaceURI,K.localName),sn(this._ownerElement,this,K,De),De},removeNamedItem:function(K){var X=this.getNamedItem(K);return Cn(this._ownerElement,this,X),X},removeNamedItemNS:function(K,X){var De=this.getNamedItemNS(K,X);return Cn(this._ownerElement,this,De),De},getNamedItemNS:function(K,X){for(var De=this.length;De--;){var We=this[De];if(We.localName==X&&We.namespaceURI==K)return We}return null}},Di.prototype={hasFeature:function(K,X){return!0},createDocument:function(K,X,De){var We=new An;if(We.implementation=this,We.childNodes=new Lt,We.doctype=De||null,De&&We.appendChild(De),X){var vt=We.createElementNS(K,X);We.appendChild(vt)}return We},createDocumentType:function(K,X,De){var We=new Yt;return We.name=K,We.nodeName=K,We.publicId=X||"",We.systemId=De||"",We}},Un.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(K,X){return Br(this,K,X)},replaceChild:function(K,X){this.insertBefore(K,X),X&&this.removeChild(X)},removeChild:function(K){return Yr(this,K)},appendChild:function(K){return this.insertBefore(K,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(K){return Vt(this.ownerDocument||this,this,K)},normalize:function(){for(var K=this.firstChild;K;){var X=K.nextSibling;X&&X.nodeType==et&&K.nodeType==et?(this.removeChild(X),K.appendData(X.data)):(K.normalize(),K=X)}},isSupported:function(K,X){return this.ownerDocument.implementation.hasFeature(K,X)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(K){for(var X=this;X;){var De=X._nsMap;if(De)for(var We in De)if(De[We]==K)return We;X=X.nodeType==ne?X.ownerDocument:X.parentNode}return null},lookupNamespaceURI:function(K){for(var X=this;X;){var De=X._nsMap;if(De&&K in De)return De[K];X=X.nodeType==ne?X.ownerDocument:X.parentNode}return null},isDefaultNamespace:function(K){return null==this.lookupPrefix(K)}},ce(Q,Un),ce(Q,Un.prototype),An.prototype={nodeName:"#document",nodeType:Ie,doctype:null,documentElement:null,_inc:1,insertBefore:function(K,X){if(K.nodeType==He){for(var De=K.firstChild;De;){var We=De.nextSibling;this.insertBefore(De,X),De=We}return K}return null==this.documentElement&&K.nodeType==ue&&(this.documentElement=K),Br(this,K,X),K.ownerDocument=this,K},removeChild:function(K){return this.documentElement==K&&(this.documentElement=null),Yr(this,K)},importNode:function(K,X){return ze(this,K,X)},getElementById:function(K){var X=null;return ht(this.documentElement,function(De){if(De.nodeType==ue&&De.getAttribute("id")==K)return X=De,!0}),X},getElementsByClassName:function(K){var X=he(K);return new Pt(this,function(De){var We=[];return X.length>0&&ht(De.documentElement,function(vt){if(vt!==De&&vt.nodeType===ue){var bn=vt.getAttribute("class");if(bn){var dr=K===bn;if(!dr){var nr=he(bn);dr=X.every(function(K){return function(X){return K&&-1!==K.indexOf(X)}}(nr))}dr&&We.push(vt)}}}),We})},createElement:function(K){var X=new Ft;return X.ownerDocument=this,X.nodeName=K,X.tagName=K,X.localName=K,X.childNodes=new Lt,(X.attributes=new pn)._ownerElement=X,X},createDocumentFragment:function(){var K=new ln;return K.ownerDocument=this,K.childNodes=new Lt,K},createTextNode:function(K){var X=new ii;return X.ownerDocument=this,X.appendData(K),X},createComment:function(K){var X=new Mn;return X.ownerDocument=this,X.appendData(K),X},createCDATASection:function(K){var X=new jt;return X.ownerDocument=this,X.appendData(K),X},createProcessingInstruction:function(K,X){var De=new Qr;return De.ownerDocument=this,De.tagName=De.target=K,De.nodeValue=De.data=X,De},createAttribute:function(K){var X=new vn;return X.ownerDocument=this,X.name=K,X.nodeName=K,X.localName=K,X.specified=!0,X},createEntityReference:function(K){var X=new Nn;return X.ownerDocument=this,X.nodeName=K,X},createElementNS:function(K,X){var De=new Ft,We=X.split(":"),vt=De.attributes=new pn;return De.childNodes=new Lt,De.ownerDocument=this,De.nodeName=X,De.tagName=X,De.namespaceURI=K,2==We.length?(De.prefix=We[0],De.localName=We[1]):De.localName=X,vt._ownerElement=De,De},createAttributeNS:function(K,X){var De=new vn,We=X.split(":");return De.ownerDocument=this,De.nodeName=X,De.name=X,De.namespaceURI=K,De.specified=!0,2==We.length?(De.prefix=We[0],De.localName=We[1]):De.localName=X,De}},fe(An,Un),An.prototype.getElementsByTagName=(Ft.prototype={nodeType:ue,hasAttribute:function(K){return null!=this.getAttributeNode(K)},getAttribute:function(K){var X=this.getAttributeNode(K);return X&&X.value||""},getAttributeNode:function(K){return this.attributes.getNamedItem(K)},setAttribute:function(K,X){var De=this.ownerDocument.createAttribute(K);De.value=De.nodeValue=""+X,this.setAttributeNode(De)},removeAttribute:function(K){var X=this.getAttributeNode(K);X&&this.removeAttributeNode(X)},appendChild:function(K){return K.nodeType===He?this.insertBefore(K,null):function(K,X){var De=X.parentNode;if(De){var We=K.lastChild;De.removeChild(X),We=K.lastChild}return We=K.lastChild,X.parentNode=K,X.previousSibling=We,X.nextSibling=null,We?We.nextSibling=X:K.firstChild=X,K.lastChild=X,In(K.ownerDocument,K,X),X}(this,K)},setAttributeNode:function(K){return this.attributes.setNamedItem(K)},setAttributeNodeNS:function(K){return this.attributes.setNamedItemNS(K)},removeAttributeNode:function(K){return this.attributes.removeNamedItem(K.nodeName)},removeAttributeNS:function(K,X){var De=this.getAttributeNodeNS(K,X);De&&this.removeAttributeNode(De)},hasAttributeNS:function(K,X){return null!=this.getAttributeNodeNS(K,X)},getAttributeNS:function(K,X){var De=this.getAttributeNodeNS(K,X);return De&&De.value||""},setAttributeNS:function(K,X,De){var We=this.ownerDocument.createAttributeNS(K,X);We.value=We.nodeValue=""+De,this.setAttributeNode(We)},getAttributeNodeNS:function(K,X){return this.attributes.getNamedItemNS(K,X)},getElementsByTagName:function(K){return new Pt(this,function(X){var De=[];return ht(X,function(We){We!==X&&We.nodeType==ue&&("*"===K||We.tagName==K)&&De.push(We)}),De})},getElementsByTagNameNS:function(K,X){return new Pt(this,function(De){var We=[];return ht(De,function(vt){vt!==De&&vt.nodeType===ue&&("*"===K||vt.namespaceURI===K)&&("*"===X||vt.localName==X)&&We.push(vt)}),We})}}).getElementsByTagName,An.prototype.getElementsByTagNameNS=Ft.prototype.getElementsByTagNameNS,fe(Ft,Un),vn.prototype.nodeType=ne,fe(vn,Un),yn.prototype={data:"",substringData:function(K,X){return this.data.substring(K,K+X)},appendData:function(K){this.nodeValue=this.data=K=this.data+K,this.length=K.length},insertData:function(K,X){this.replaceData(K,0,X)},appendChild:function(K){throw new Error(st[G])},deleteData:function(K,X){this.replaceData(K,X,"")},replaceData:function(K,X,De){var We=this.data.substring(0,K),vt=this.data.substring(K+X);this.nodeValue=this.data=De=We+De+vt,this.length=De.length}},fe(yn,Un),ii.prototype={nodeName:"#text",nodeType:et,splitText:function(K){var X=this.data,De=X.substring(K);X=X.substring(0,K),this.data=this.nodeValue=X,this.length=X.length;var We=this.ownerDocument.createTextNode(De);return this.parentNode&&this.parentNode.insertBefore(We,this.nextSibling),We}},fe(ii,yn),Mn.prototype={nodeName:"#comment",nodeType:le},fe(Mn,yn),jt.prototype={nodeName:"#cdata-section",nodeType:Ze},fe(jt,yn),Yt.prototype.nodeType=Ve,fe(Yt,Un),pu.prototype.nodeType=Je,fe(pu,Un),js.prototype.nodeType=St,fe(js,Un),Nn.prototype.nodeType=rt,fe(Nn,Un),ln.prototype.nodeName="#document-fragment",ln.prototype.nodeType=He,fe(ln,Un),Qr.prototype.nodeType=ye,fe(Qr,Un),gu.prototype.serializeToString=function(K,X,De){return xe.call(K,X,De)},Un.prototype.toString=xe;try{if(Object.defineProperty){let K=function(X){switch(X.nodeType){case ue:case He:var De=[];for(X=X.firstChild;X;)7!==X.nodeType&&8!==X.nodeType&&De.push(K(X)),X=X.nextSibling;return De.join("");default:return X.nodeValue}};Object.defineProperty(Pt.prototype,"length",{get:function(){return Yn(this),this.$$length}}),Object.defineProperty(Un.prototype,"textContent",{get:function(){return K(this)},set:function(X){switch(this.nodeType){case ue:case He:for(;this.firstChild;)this.removeChild(this.firstChild);(X||String(X))&&this.appendChild(this.ownerDocument.createTextNode(X));break;default:this.data=X,this.value=X,this.nodeValue=X}}}),nn=function(X,De,We){X["$$"+De]=We}}}catch(K){}_e.DocumentType=Yt,_e.DOMException=Ht,_e.DOMImplementation=Di,_e.Element=Ft,_e.Node=Un,_e.NodeList=Lt,_e.XMLSerializer=gu},8667:(Ye,_e,U)=>{var d=U(1469).freeze;_e.XML_ENTITIES=d({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),_e.HTML_ENTITIES=d({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),_e.entityMap=_e.HTML_ENTITIES},3874:(Ye,_e,U)=>{U(3472);_e.DOMParser=U(1343).DOMParser},3115:(Ye,_e,U)=>{var d=U(1469).NAMESPACE,ee=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,B=new RegExp("[\\-\\.0-9"+ee.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ae=new RegExp("^"+ee.source+B.source+"*(?::"+ee.source+B.source+"*)?$");function et(Z,G){this.message=Z,this.locator=G,Error.captureStackTrace&&Error.captureStackTrace(this,et)}function Ze(){}function St(Z,G){return G.lineNumber=Z.lineNumber,G.columnNumber=Z.columnNumber,G}function ye(Z,G,re,Te,Ee,Ue){function Y(kt,Ht,Lt){re.attributeNames.hasOwnProperty(kt)&&Ue.fatalError("Attribute "+kt+" redefined"),re.addValue(kt,Ht,Lt)}for(var ge,Ge=++G,Me=0;;){var qe=Z.charAt(Ge);switch(qe){case"=":if(1===Me)ge=Z.slice(G,Ge),Me=3;else{if(2!==Me)throw new Error("attribute equal must after attrName");Me=3}break;case"'":case'"':if(3===Me||1===Me){if(1===Me&&(Ue.warning('attribute value must after "="'),ge=Z.slice(G,Ge)),!((Ge=Z.indexOf(qe,G=Ge+1))>0))throw new Error("attribute value no end '"+qe+"' match");Y(ge,Pe=Z.slice(G,Ge).replace(/&#?\w+;/g,Ee),G-1),Me=5}else{if(4!=Me)throw new Error('attribute value must after "="');Y(ge,Pe=Z.slice(G,Ge).replace(/&#?\w+;/g,Ee),G),Ue.warning('attribute "'+ge+'" missed start quot('+qe+")!!"),G=Ge+1,Me=5}break;case"/":switch(Me){case 0:re.setTagName(Z.slice(G,Ge));case 5:case 6:case 7:Me=7,re.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Ue.error("unexpected end of input"),0==Me&&re.setTagName(Z.slice(G,Ge)),Ge;case">":switch(Me){case 0:re.setTagName(Z.slice(G,Ge));case 5:case 6:case 7:break;case 4:case 1:"/"===(Pe=Z.slice(G,Ge)).slice(-1)&&(re.closed=!0,Pe=Pe.slice(0,-1));case 2:2===Me&&(Pe=ge),4==Me?(Ue.warning('attribute "'+Pe+'" missed quot(")!'),Y(ge,Pe.replace(/&#?\w+;/g,Ee),G)):((!d.isHTML(Te[""])||!Pe.match(/^(?:disabled|checked|selected)$/i))&&Ue.warning('attribute "'+Pe+'" missed value!! "'+Pe+'" instead!!'),Y(Pe,Pe,G));break;case 3:throw new Error("attribute value missed!!")}return Ge;case"\x80":qe=" ";default:if(qe<=" ")switch(Me){case 0:re.setTagName(Z.slice(G,Ge)),Me=6;break;case 1:ge=Z.slice(G,Ge),Me=2;break;case 4:var Pe=Z.slice(G,Ge).replace(/&#?\w+;/g,Ee);Ue.warning('attribute "'+Pe+'" missed quot(")!!'),Y(ge,Pe,G);case 5:Me=6}else switch(Me){case 2:(!d.isHTML(Te[""])||!ge.match(/^(?:disabled|checked|selected)$/i))&&Ue.warning('attribute "'+ge+'" missed value!! "'+ge+'" instead2!!'),Y(ge,ge,G),G=Ge,Me=1;break;case 5:Ue.warning('attribute space is required"'+ge+'"!!');case 6:Me=1,G=Ge;break;case 3:Me=4,G=Ge;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Ge++}}function le(Z,G,re){for(var Te=Z.tagName,Ee=null,Ue=Z.length;Ue--;){var Y=Z[Ue],ge=Y.qName,Pe=Y.value;if((ot=ge.indexOf(":"))>0)var Ge=Y.prefix=ge.slice(0,ot),Me=ge.slice(ot+1),qe="xmlns"===Ge&&Me;else Me=ge,Ge=null,qe="xmlns"===ge&&"";Y.localName=Me,!1!==qe&&(null==Ee&&(Ee={},He(re,re={})),re[qe]=Ee[qe]=Pe,Y.uri=d.XMLNS,G.startPrefixMapping(qe,Pe))}for(Ue=Z.length;Ue--;)(Ge=(Y=Z[Ue]).prefix)&&("xml"===Ge&&(Y.uri=d.XML),"xmlns"!==Ge&&(Y.uri=re[Ge||""]));var ot;(ot=Te.indexOf(":"))>0?(Ge=Z.prefix=Te.slice(0,ot),Me=Z.localName=Te.slice(ot+1)):(Ge=null,Me=Z.localName=Te);var kt=Z.uri=re[Ge||""];if(G.startElement(kt,Me,Te,Z),!Z.closed)return Z.currentNSMap=re,Z.localNSMap=Ee,!0;if(G.endElement(kt,Me,Te),Ee)for(Ge in Ee)G.endPrefixMapping(Ge)}function Ie(Z,G,re,Te,Ee){if(/^(?:script|textarea)$/i.test(re)){var Ue=Z.indexOf("</"+re+">",G),Y=Z.substring(G+1,Ue);if(/[&<]/.test(Y))return/^script$/i.test(re)?(Ee.characters(Y,0,Y.length),Ue):(Y=Y.replace(/&#?\w+;/g,Te),Ee.characters(Y,0,Y.length),Ue)}return G+1}function Ve(Z,G,re,Te){var Ee=Te[re];return null==Ee&&((Ee=Z.lastIndexOf("</"+re+">"))<G&&(Ee=Z.lastIndexOf("</"+re)),Te[re]=Ee),Ee<G}function He(Z,G){for(var re in Z)G[re]=Z[re]}function Je(Z,G,re,Te){if("-"===Z.charAt(G+2))return"-"===Z.charAt(G+3)?(Ue=Z.indexOf("--\x3e",G+4))>G?(re.comment(Z,G+4,Ue-G-4),Ue+3):(Te.error("Unclosed comment"),-1):-1;if("CDATA["==Z.substr(G+3,6)){var Ue=Z.indexOf("]]>",G+9);return re.startCDATA(),re.characters(Z,G+9,Ue-G-9),re.endCDATA(),Ue+3}var Y=function(Z,G){var re,Te=[],Ee=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Ee.lastIndex=G,Ee.exec(Z);re=Ee.exec(Z);)if(Te.push(re),re[1])return Te}(Z,G),ge=Y.length;if(ge>1&&/!doctype/i.test(Y[0][0])){var Pe=Y[1][0],Ge=!1,Me=!1;ge>3&&(/^public$/i.test(Y[2][0])?(Ge=Y[3][0],Me=ge>4&&Y[4][0]):/^system$/i.test(Y[2][0])&&(Me=Y[3][0]));var qe=Y[ge-1];return re.startDTD(Pe,Ge,Me),re.endDTD(),qe.index+qe[0].length}return-1}function Ke(Z,G,re){var Te=Z.indexOf("?>",G);if(Te){var Ee=Z.substring(G,Te).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Ee?(re.processingInstruction(Ee[1],Ee[2]),Te+2):-1}return-1}function st(){this.attributeNames={}}(et.prototype=new Error).name=et.name,Ze.prototype={parse:function(Z,G,re){var Te=this.domBuilder;Te.startDocument(),He(G,G={}),function(Z,G,re,Te,Ee){function Y(Rt){var Ft=Rt.slice(1,-1);return Ft in re?re[Ft]:"#"===Ft.charAt(0)?function(Rt){return Rt>65535?(Rt-=65536,String.fromCharCode(55296+(Rt>>10),56320+(1023&Rt))):String.fromCharCode(Rt)}(parseInt(Ft.substr(1).replace("x","0x"))):(Ee.error("entity not found:"+Rt),Rt)}function ge(Rt){if(Rt>Lt){var Ft=Z.substring(Lt,Rt).replace(/&#?\w+;/g,Y);ot&&Pe(Lt),Te.characters(Ft,0,Rt-Lt),Lt=Rt}}function Pe(Rt,Ft){for(;Rt>=Me&&(Ft=qe.exec(Z));)Me=(Ge=Ft.index)+Ft[0].length,ot.lineNumber++;ot.columnNumber=Rt-Ge+1}for(var Ge=0,Me=0,qe=/.*(?:\r\n?|\n)|.*$/g,ot=Te.locator,kt=[{currentNSMap:G}],Ht={},Lt=0;;){try{var Pt=Z.indexOf("<",Lt);if(Pt<0){if(!Z.substr(Lt).match(/^\s*$/)){var Yn=Te.doc,pn=Yn.createTextNode(Z.substr(Lt));Yn.appendChild(pn),Te.currentElement=pn}return}switch(Pt>Lt&&ge(Pt),Z.charAt(Pt+1)){case"/":var On=Z.indexOf(">",Pt+3),sn=Z.substring(Pt+2,On).replace(/[ \t\n\r]+$/g,""),Cn=kt.pop();On<0?(sn=Z.substring(Pt+2).replace(/[\s<].*/,""),Ee.error("end tag name: "+sn+" is not complete:"+Cn.tagName),On=Pt+1+sn.length):sn.match(/\s</)&&(sn=sn.replace(/[\s<].*/,""),Ee.error("end tag name: "+sn+" maybe not complete"),On=Pt+1+sn.length);var Di=Cn.localNSMap,Un=Cn.tagName==sn;if(Un||Cn.tagName&&Cn.tagName.toLowerCase()==sn.toLowerCase()){if(Te.endElement(Cn.uri,Cn.localName,sn),Di)for(var ht in Di)Te.endPrefixMapping(ht);Un||Ee.fatalError("end tag name: "+sn+" is not match the current start tagName:"+Cn.tagName)}else kt.push(Cn);On++;break;case"?":ot&&Pe(Pt),On=Ke(Z,Pt,Te);break;case"!":ot&&Pe(Pt),On=Je(Z,Pt,Te,Ee);break;default:ot&&Pe(Pt);var An=new st,ar=kt[kt.length-1].currentNSMap,Jt=(On=ye(Z,Pt,An,ar,Y,Ee),An.length);if(!An.closed&&Ve(Z,On,An.tagName,Ht)&&(An.closed=!0,re.nbsp||Ee.warning("unclosed xml attribute")),ot&&Jt){for(var In=St(ot,{}),Yr=0;Yr<Jt;Yr++){var Br=An[Yr];Pe(Br.offset),Br.locator=St(ot,{})}Te.locator=In,le(An,Te,ar)&&kt.push(An),Te.locator=ot}else le(An,Te,ar)&&kt.push(An);d.isHTML(An.uri)&&!An.closed?On=Ie(Z,On,An.tagName,Y,Te):On++}}catch(Rt){if(Rt instanceof et)throw Rt;Ee.error("element parse error: "+Rt),On=-1}On>Lt?Lt=On:ge(Math.max(Pt,Lt)+1)}}(Z,G,re,Te,this.errorHandler),Te.endDocument()}},st.prototype={setTagName:function(Z){if(!ae.test(Z))throw new Error("invalid tagName:"+Z);this.tagName=Z},addValue:function(Z,G,re){if(!ae.test(Z))throw new Error("invalid attribute:"+Z);this.attributeNames[Z]=this.length,this[this.length++]={qName:Z,value:G,offset:re}},length:0,getLocalName:function(Z){return this[Z].localName},getLocator:function(Z){return this[Z].locator},getQName:function(Z){return this[Z].qName},getURI:function(Z){return this[Z].uri},getValue:function(Z){return this[Z].value}},_e.XMLReader=Ze,_e.ParseError=et},7713:(Ye,_e,U)=>{"use strict";U.d(_e,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=U(1572);(0,d.registerVersion)("firebase","9.6.2","app")},7892:(Ye,_e,U)=>{"use strict";U.d(_e,{Z:()=>d.Z});var d=U(6293);d.Z.registerVersion("firebase","9.6.2","app-compat")},4891:(Ye,_e,U)=>{"use strict";U.r(_e);var d=U(8239),ee=U(6293),B=U(4213),ae=U(1572);function ce(b,g){var v={};for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&g.indexOf(S)<0&&(v[S]=b[S]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var O=0;for(S=Object.getOwnPropertySymbols(b);O<S.length;O++)g.indexOf(S[O])<0&&Object.prototype.propertyIsEnumerable.call(b,S[O])&&(v[S[O]]=b[S[O]])}return v}var Ue=U(3855),Y=U(1177);const Ht=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Lt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pt=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pn=new Ue.Yd("@firebase/auth");function On(b,...g){pn.logLevel<=Ue.in.ERROR&&pn.error(`Auth (${ae.SDK_VERSION}): ${b}`,...g)}function sn(b,...g){throw ki(b,...g)}function Cn(b,...g){return ki(b,...g)}function Di(b,g,v){const S=Object.assign(Object.assign({},Lt()),{[g]:v});return new B.LL("auth","Firebase",S).create(g,{appName:b.name})}function Un(b,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&sn(b,"argument-error"),Di(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ki(b,...g){if("string"!=typeof b){const v=g[0],S=[...g.slice(1)];return S[0]&&(S[0].appName=b.name),b._errorFactory.create(v,...S)}return Pt.create(b,...g)}function ht(b,g,...v){if(!b)throw ki(g,...v)}function An(b){const g="INTERNAL ASSERTION FAILED: "+b;throw On(g),new Error(g)}function ar(b,g){b||An(g)}const Jt=new Map;function In(b){ar(b instanceof Function,"Expected a class definition");let g=Jt.get(b);return g?(ar(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,Jt.set(b,g),g)}function Rt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Ft(){return"http:"===vn()||"https:"===vn()}function vn(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Mn{constructor(g,v){this.shortDelay=g,this.longDelay=v,ar(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ft()||(0,B.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function jt(b,g){ar(b.emulator,"Emulator should always be set here");const{url:v}=b.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class Yt{static initialize(g,v,S){this.fetchImpl=g,v&&(this.headersImpl=v),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},js=new Mn(3e4,6e4);function Nn(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function ln(b,g,v,S){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,d.Z)(function*(b,g,v,S,O={}){return gu(b,O,(0,d.Z)(function*(){let $={},me={};S&&("GET"===g?me=S:$={body:JSON.stringify(S)});const Qe=(0,B.xO)(Object.assign({key:b.config.apiKey},me)).slice(1),wt=yield b._getAdditionalHeaders();return wt["Content-Type"]="application/json",b.languageCode&&(wt["X-Firebase-Locale"]=b.languageCode),Yt.fetch()(at(b,b.config.apiHost,v,Qe),Object.assign({method:g,headers:wt,referrerPolicy:"no-referrer"},$))}))})).apply(this,arguments)}function gu(b,g,v){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(b,g,v){b._canInitEmulator=!1;const S=Object.assign(Object.assign({},pu),g);try{const O=new ze(b),$=yield Promise.race([v(),O.promise]);O.clearNetworkTimeout();const me=yield $.json();if("needConfirmation"in me)throw Vt(b,"account-exists-with-different-credential",me);if($.ok&&!("errorMessage"in me))return me;{const Qe=$.ok?me.errorMessage:me.error.message,[wt,yt]=Qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wt)throw Vt(b,"credential-already-in-use",me);if("EMAIL_EXISTS"===wt)throw Vt(b,"email-already-in-use",me);const zt=S[wt]||wt.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw Di(b,zt,yt);sn(b,zt)}}catch(O){if(O instanceof B.ZR)throw O;sn(b,"network-request-failed")}})).apply(this,arguments)}function de(b,g,v,S){return ke.apply(this,arguments)}function ke(){return(ke=(0,d.Z)(function*(b,g,v,S,O={}){const $=yield ln(b,g,v,S,O);return"mfaPendingCredential"in $&&sn(b,"multi-factor-auth-required",{_serverResponse:$}),$})).apply(this,arguments)}function at(b,g,v,S){const O=`${g}${v}?${S}`;return b.config.emulator?jt(b.config,O):`${b.config.apiScheme}://${O}`}class ze{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,S)=>{this.timer=setTimeout(()=>S(Cn(this.auth,"timeout")),js.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vt(b,g,v){const S={appName:b.name};v.email&&(S.email=v.email),v.phoneNumber&&(S.phoneNumber=v.phoneNumber);const O=Cn(b,g,S);return O.customData._tokenResponse=v,O}function Gn(){return(Gn=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function K(b,g){return X.apply(this,arguments)}function X(){return(X=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function De(b,g){return We.apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function vt(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function nr(){return(nr=(0,d.Z)(function*(b,g=!1){const v=(0,B.m9)(b),S=yield v.getIdToken(g),O=pi(S);ht(O&&O.exp&&O.auth_time&&O.iat,v.auth,"internal-error");const $="object"==typeof O.firebase?O.firebase:void 0,me=null==$?void 0:$.sign_in_provider;return{claims:O,token:S,authTime:vt(Es(O.auth_time)),issuedAtTime:vt(Es(O.iat)),expirationTime:vt(Es(O.exp)),signInProvider:me||null,signInSecondFactor:(null==$?void 0:$.sign_in_second_factor)||null}})).apply(this,arguments)}function Es(b){return 1e3*Number(b)}function pi(b){const[g,v,S]=b.split(".");if(void 0===g||void 0===v||void 0===S)return On("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,B.tV)(v);return O?JSON.parse(O):(On("Failed to decode base64 JWT payload"),null)}catch(O){return On("Caught error parsing JWT payload as JSON",O),null}}function Bn(b,g){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(b,g,v=!1){if(v)return g;try{return yield g}catch(S){throw S instanceof B.ZR&&Pr(S)&&b.auth.currentUser===b&&(yield b.auth.signOut()),S}})).apply(this,arguments)}function Pr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class hr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const O=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,O)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const S=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield v.iteration()}),S)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v.code&&g.schedule(!0))}g.schedule()})()}}class vr{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=vt(this.lastLoginAt),this.creationTime=vt(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ct(b){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(b){var g;const v=b.auth,S=yield b.getIdToken(),O=yield Bn(b,De(v,{idToken:S}));ht(null==O?void 0:O.users.length,v,"internal-error");const $=O.users[0];b._notifyReloadListener($);const me=(null===(g=$.providerUserInfo)||void 0===g?void 0:g.length)?Hr($.providerUserInfo):[],Qe=Vi(b.providerData,me),zt=!!b.isAnonymous&&!(b.email&&$.passwordHash||(null==Qe?void 0:Qe.length)),Qt={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:Qe,metadata:new vr($.createdAt,$.lastLoginAt),isAnonymous:zt};Object.assign(b,Qt)})).apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(b){const g=(0,B.m9)(b);yield Ct(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Vi(b,g){return[...b.filter(S=>!g.some(O=>O.providerId===S.providerId)),...g]}function Hr(b){return b.map(g=>{var{providerId:v}=g,S=ce(g,["providerId"]);return{providerId:v,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}function yr(){return(yr=(0,d.Z)(function*(b,g){const v=yield gu(b,{},(0,d.Z)(function*(){const S=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:O,apiKey:$}=b.config,me=at(b,O,"/v1/token",`key=${$}`),Qe=yield b._getAdditionalHeaders();return Qe["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(me,{method:"POST",headers:Qe,body:S})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ht(g.idToken,"internal-error"),ht(void 0!==g.idToken,"internal-error"),ht(void 0!==g.refreshToken,"internal-error");const v="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(b){const g=pi(b);return ht(g,"internal-error"),ht(void 0!==g.exp,"internal-error"),ht(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var S=this;return(0,d.Z)(function*(){return ht(!S.accessToken||S.refreshToken,g,"user-token-expired"),v||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(g,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var S=this;return(0,d.Z)(function*(){const{accessToken:O,refreshToken:$,expiresIn:me}=yield function(b,g){return yr.apply(this,arguments)}(g,v);S.updateTokensAndExpiration(O,$,Number(me))})()}updateTokensAndExpiration(g,v,S){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(g,v){const{refreshToken:S,accessToken:O,expirationTime:$}=v,me=new Us;return S&&(ht("string"==typeof S,"internal-error",{appName:g}),me.refreshToken=S),O&&(ht("string"==typeof O,"internal-error",{appName:g}),me.accessToken=O),$&&(ht("number"==typeof $,"internal-error",{appName:g}),me.expirationTime=$),me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Us,this.toJSON())}_performRefresh(){return An("not implemented")}}function is(b,g){ht("string"==typeof b||void 0===b,"internal-error",{appName:g})}class cn{constructor(g){var{uid:v,auth:S,stsTokenManager:O}=g,$=ce(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new hr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=S,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=$.displayName||null,this.email=$.email||null,this.emailVerified=$.emailVerified||!1,this.phoneNumber=$.phoneNumber||null,this.photoURL=$.photoURL||null,this.isAnonymous=$.isAnonymous||!1,this.tenantId=$.tenantId||null,this.metadata=new vr($.createdAt||void 0,$.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,d.Z)(function*(){const S=yield Bn(v,v.stsTokenManager.getToken(v.auth,g));return ht(S,v.auth,"internal-error"),v.accessToken!==S&&(v.accessToken=S,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),S})()}getIdTokenResult(g){return function(b){return nr.apply(this,arguments)}(this,g)}reload(){return function(b){return wr.apply(this,arguments)}(this)}_assign(g){this!==g&&(ht(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new cn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var S=this;return(0,d.Z)(function*(){let O=!1;g.idToken&&g.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(g),O=!0),v&&(yield Ct(S)),yield S.auth._persistUserIfCurrent(S),O&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var g=this;return(0,d.Z)(function*(){const v=yield g.getIdToken();return yield Bn(g,function(b,g){return Gn.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var S,O,$,me,Qe,wt,yt,zt;const Qt=null!==(S=v.displayName)&&void 0!==S?S:void 0,Tn=null!==(O=v.email)&&void 0!==O?O:void 0,ei=null!==($=v.phoneNumber)&&void 0!==$?$:void 0,As=null!==(me=v.photoURL)&&void 0!==me?me:void 0,oh=null!==(Qe=v.tenantId)&&void 0!==Qe?Qe:void 0,jl=null!==(wt=v._redirectEventId)&&void 0!==wt?wt:void 0,fy=null!==(yt=v.createdAt)&&void 0!==yt?yt:void 0,ah=null!==(zt=v.lastLoginAt)&&void 0!==zt?zt:void 0,{uid:im,emailVerified:Yf,isAnonymous:sm,providerData:Qf,stsTokenManager:Xf}=v;ht(im&&Xf,g,"internal-error");const Jf=Us.fromJSON(this.name,Xf);ht("string"==typeof im,g,"internal-error"),is(Qt,g.name),is(Tn,g.name),ht("boolean"==typeof Yf,g,"internal-error"),ht("boolean"==typeof sm,g,"internal-error"),is(ei,g.name),is(As,g.name),is(oh,g.name),is(jl,g.name),is(fy,g.name),is(ah,g.name);const zc=new cn({uid:im,auth:g,email:Tn,emailVerified:Yf,displayName:Qt,isAnonymous:sm,photoURL:As,phoneNumber:ei,tenantId:oh,stsTokenManager:Jf,createdAt:fy,lastLoginAt:ah});return Qf&&Array.isArray(Qf)&&(zc.providerData=Qf.map(ep=>Object.assign({},ep))),jl&&(zc._redirectEventId=jl),zc}static _fromIdTokenResponse(g,v,S=!1){return(0,d.Z)(function*(){const O=new Us;O.updateFromServerResponse(v);const $=new cn({uid:v.localId,auth:g,stsTokenManager:O,isAnonymous:S});return yield Ct($),$})()}}const ss=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(v,S){var O=this;return(0,d.Z)(function*(){O.storage[v]=S})()}_get(v){var S=this;return(0,d.Z)(function*(){const O=S.storage[v];return void 0===O?null:O})()}_remove(v){var S=this;return(0,d.Z)(function*(){delete S.storage[v]})()}_addListener(v,S){}_removeListener(v,S){}}return b.type="NONE",b})();function os(b,g,v){return`firebase:${b}:${g}:${v}`}class ws{constructor(g,v,S){this.persistence=g,this.auth=v,this.userKey=S;const{config:O,name:$}=this.auth;this.fullUserKey=os(this.userKey,O.apiKey,$),this.fullPersistenceKey=os("persistence",O.apiKey,$),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?cn._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,d.Z)(function*(){if(v.persistence===g)return;const S=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,S?v.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,S="authUser"){return(0,d.Z)(function*(){if(!v.length)return new ws(In(ss),g,S);const O=(yield Promise.all(v.map(function(){var yt=(0,d.Z)(function*(zt){if(yield zt._isAvailable())return zt});return function(zt){return yt.apply(this,arguments)}}()))).filter(yt=>yt);let $=O[0]||In(ss);const me=os(S,g.config.apiKey,g.name);let Qe=null;for(const yt of v)try{const zt=yield yt._get(me);if(zt){const Qt=cn._fromJSON(g,zt);yt!==$&&(Qe=Qt),$=yt;break}}catch(zt){}const wt=O.filter(yt=>yt._shouldAllowMigration);return $._shouldAllowMigration&&wt.length?($=wt[0],Qe&&(yield $._set(me,Qe.toJSON())),yield Promise.all(v.map(function(){var yt=(0,d.Z)(function*(zt){if(zt!==$)try{yield zt._remove(me)}catch(Qt){}});return function(zt){return yt.apply(this,arguments)}}())),new ws($,g,S)):new ws($,g,S)})()}}function zn(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Zn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Wu(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ia(g))return"Blackberry";if(Zu(g))return"Webos";if(ra(g))return"Safari";if((g.includes("chrome/")||si(g))&&!g.includes("edge/"))return"Chrome";if(zu(g))return"Android";{const S=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==S?void 0:S.length))return S[1]}return"Other"}function Wu(b=(0,B.z$)()){return/firefox\//i.test(b)}function ra(b=(0,B.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function si(b=(0,B.z$)()){return/crios\//i.test(b)}function Zn(b=(0,B.z$)()){return/iemobile/i.test(b)}function zu(b=(0,B.z$)()){return/android/i.test(b)}function ia(b=(0,B.z$)()){return/blackberry/i.test(b)}function Zu(b=(0,B.z$)()){return/webos/i.test(b)}function sa(b=(0,B.z$)()){return/iphone|ipad|ipod/i.test(b)}function xr(b=(0,B.z$)()){return sa(b)||zu(b)||Zu(b)||ia(b)||/windows phone/i.test(b)||Zn(b)}function ro(b,g=[]){let v;switch(b){case"Browser":v=zn((0,B.z$)());break;case"Worker":v=`${zn((0,B.z$)())}-${b}`;break;default:v=b}const S=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${ae.SDK_VERSION}/${S}`}class io{constructor(g,v){this.app=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xo(this),this.idTokenSubscription=new xo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(g,v){var S=this;return v&&(this._popupRedirectResolver=In(v)),this._initializationPromise=this.queue((0,d.Z)(function*(){var O,$;if(!S._deleted&&(S.persistenceManager=yield ws.create(S,g),!S._deleted)){if(null===(O=S._popupRedirectResolver)||void 0===O?void 0:O._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch(me){}yield S.initializeCurrentUser(v),S.lastNotifiedUid=(null===($=S.currentUser)||void 0===$?void 0:$.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v)}})()}initializeCurrentUser(g){var v=this;return(0,d.Z)(function*(){var S;let O=yield v.assertedPersistence.getCurrentUser();if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const $=null===(S=v.redirectUser)||void 0===S?void 0:S._redirectEventId,me=null==O?void 0:O._redirectEventId,Qe=yield v.tryRedirectSignIn(g);(!$||$===me)&&(null==Qe?void 0:Qe.user)&&(O=Qe.user)}return O?O._redirectEventId?(ht(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===O._redirectEventId?v.directlySetCurrentUser(O):v.reloadAndSetCurrentUserOrClear(O)):v.reloadAndSetCurrentUserOrClear(O):v.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var v=this;return(0,d.Z)(function*(){let S=null;try{S=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch(O){yield v._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,d.Z)(function*(){try{yield Ct(g)}catch(S){if("auth/network-request-failed"!==S.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,d.Z)(function*(){const S=g?(0,B.m9)(g):null;return S&&ht(S.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(S&&S._clone(v))})()}_updateCurrentUser(g){var v=this;return(0,d.Z)(function*(){if(!v._deleted)return g&&ht(v.tenantId===g.tenantId,v,"tenant-id-mismatch"),v.queue((0,d.Z)(function*(){yield v.directlySetCurrentUser(g),v.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var v=this;return this.queue((0,d.Z)(function*(){yield v.assertedPersistence.setPersistence(In(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,v,S){return this.registerStateListener(this.authStateSubscription,g,v,S)}onIdTokenChanged(g,v,S){return this.registerStateListener(this.idTokenSubscription,g,v,S)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var S=this;return(0,d.Z)(function*(){const O=yield S.getOrInitRedirectPersistenceManager(v);return null===g?O.removeCurrentUser():O.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,d.Z)(function*(){if(!v.redirectPersistenceManager){const S=g&&In(g)||v._popupRedirectResolver;ht(S,v,"argument-error"),v.redirectPersistenceManager=yield ws.create(v,[In(S._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,d.Z)(function*(){var S,O;return v._isInitialized&&(yield v.queue((0,d.Z)(function*(){}))),(null===(S=v._currentUser)||void 0===S?void 0:S._redirectEventId)===g?v._currentUser:(null===(O=v.redirectUser)||void 0===O?void 0:O._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,d.Z)(function*(){if(g===v.currentUser)return v.queue((0,d.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,S,O){if(this._deleted)return()=>{};const $="function"==typeof v?v:v.next.bind(v),me=this._isInitialized?Promise.resolve():this._initializationPromise;return ht(me,this,"internal-error"),me.then(()=>$(this.currentUser)),"function"==typeof v?g.addObserver(v,S,O):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,d.Z)(function*(){v.currentUser&&v.currentUser!==g&&(v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh()),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ro(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){const v={"X-Client-Version":g.clientVersion};return g.app.options.appId&&(v["X-Firebase-gmpid"]=g.app.options.appId),v})()}}function Xr(b){return(0,B.m9)(b)}class xo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(v=>this.observer=v)}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ss(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function $v(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class mu{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return An("not implemented")}_getIdTokenResponse(g){return An("not implemented")}_linkToIdToken(g,v){return An("not implemented")}_getReauthenticationResolver(g){return An("not implemented")}}function fg(b,g){return hf.apply(this,arguments)}function hf(){return(hf=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:resetPassword",Nn(b,g))})).apply(this,arguments)}function pg(b,g){return gc.apply(this,arguments)}function gc(){return(gc=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function qv(b,g){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:update",Nn(b,g))})).apply(this,arguments)}function ff(){return(ff=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signInWithPassword",Nn(b,g))})).apply(this,arguments)}function Ad(b,g){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:sendOobCode",Nn(b,g))})).apply(this,arguments)}function Wv(b,g){return pf.apply(this,arguments)}function pf(){return(pf=(0,d.Z)(function*(b,g){return Ad(b,g)})).apply(this,arguments)}function zv(b,g){return gf.apply(this,arguments)}function gf(){return(gf=(0,d.Z)(function*(b,g){return Ad(b,g)})).apply(this,arguments)}function mc(b,g){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,d.Z)(function*(b,g){return Ad(b,g)})).apply(this,arguments)}function Dd(b,g){return mf.apply(this,arguments)}function mf(){return(mf=(0,d.Z)(function*(b,g){return Ad(b,g)})).apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signInWithEmailLink",Nn(b,g))})).apply(this,arguments)}function aa(){return(aa=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signInWithEmailLink",Nn(b,g))})).apply(this,arguments)}class yu extends mu{constructor(g,v,S,O=null){super("password",S),this._email=g,this._password=v,this._tenantId=O}static _fromEmailAndPassword(g,v){return new yu(g,v,"password")}static _fromEmailAndCode(g,v,S=null){return new yu(g,v,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return function(b,g){return ff.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(b,g){return so.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:sn(g,"internal-error")}})()}_linkToIdToken(g,v){var S=this;return(0,d.Z)(function*(){switch(S.signInMethod){case"password":return pg(g,{idToken:v,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function(b,g){return aa.apply(this,arguments)}(g,{idToken:v,email:S._email,oobCode:S._password});default:sn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ua(b,g){return _u.apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signInWithIdp",Nn(b,g))})).apply(this,arguments)}class gi extends mu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new gi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):sn("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:S,signInMethod:O}=v,$=ce(v,["providerId","signInMethod"]);if(!S||!O)return null;const me=new gi(S,O);return me.idToken=$.idToken||void 0,me.accessToken=$.accessToken||void 0,me.secret=$.secret,me.nonce=$.nonce,me.pendingToken=$.pendingToken||null,me}_getIdTokenResponse(g){return ua(g,this.buildRequest())}_linkToIdToken(g,v){const S=this.buildRequest();return S.idToken=v,ua(g,S)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ua(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,B.xO)(v)}return g}}function Io(b,g){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:sendVerificationCode",Nn(b,g))})).apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signInWithPhoneNumber",Nn(b,g))})).apply(this,arguments)}function Pd(){return(Pd=(0,d.Z)(function*(b,g){const v=yield de(b,"POST","/v1/accounts:signInWithPhoneNumber",Nn(b,g));if(v.temporaryProof)throw Vt(b,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const vc={USER_NOT_FOUND:"user-not-found"};function Ju(){return(Ju=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signInWithPhoneNumber",Nn(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),vc)})).apply(this,arguments)}class Ra extends mu{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new Ra({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new Ra({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function(b,g){return Pi.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function(b,g){return Pd.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(b,g){return Ju.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:S,verificationCode:O}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:S,code:O}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:S,phoneNumber:O,temporaryProof:$}=g;return S||v||O||$?new Ra({verificationId:v,verificationCode:S,phoneNumber:O,temporaryProof:$}):null}}class Oa{constructor(g){var v,S,O,$,me,Qe;const wt=(0,B.zd)((0,B.pd)(g)),yt=null!==(v=wt.apiKey)&&void 0!==v?v:null,zt=null!==(S=wt.oobCode)&&void 0!==S?S:null,Qt=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=wt.mode)&&void 0!==O?O:null);ht(yt&&zt&&Qt,"argument-error"),this.apiKey=yt,this.operation=Qt,this.code=zt,this.continueUrl=null!==($=wt.continueUrl)&&void 0!==$?$:null,this.languageCode=null!==(me=wt.languageCode)&&void 0!==me?me:null,this.tenantId=null!==(Qe=wt.tenantId)&&void 0!==Qe?Qe:null}static parseLink(g){const v=function(b){const g=(0,B.zd)((0,B.pd)(b)).link,v=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,S=(0,B.zd)((0,B.pd)(b)).deep_link_id;return(S?(0,B.zd)((0,B.pd)(S)).link:null)||S||v||g||b}(g);try{return new Oa(v)}catch(S){return null}}}let Na=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(v,S){return yu._fromEmailAndPassword(v,S)}static credentialWithLink(v,S){const O=Oa.parseLink(S);return ht(O,"argument-error"),yu._fromEmailAndCode(v,O.code,O.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Gi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Vs extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Rr extends Vs{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return ht("providerId"in v&&"signInMethod"in v,"argument-error"),gi._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ht(g.idToken||g.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Rr.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Rr.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:S,oauthTokenSecret:O,pendingToken:$,nonce:me,providerId:Qe}=g;if(!S&&!O&&!v&&!$||!Qe)return null;try{return new Rr(Qe)._credential({idToken:v,accessToken:S,nonce:me,pendingToken:$})}catch(wt){return null}}}let yc=(()=>{class b extends Vs{constructor(){super("facebook.com")}static credential(v){return gi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(S){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),La=(()=>{class b extends Vs{constructor(){super("google.com"),this.addScope("profile")}static credential(v,S){return gi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:S})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:S,oauthAccessToken:O}=v;if(!S&&!O)return null;try{return b.credential(S,O)}catch($){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Fa=(()=>{class b extends Vs{constructor(){super("github.com")}static credential(v){return gi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(S){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Ao extends mu{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return ua(g,this.buildRequest())}_linkToIdToken(g,v){const S=this.buildRequest();return S.idToken=v,ua(g,S)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ua(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:S,signInMethod:O,pendingToken:$}=v;return S&&O&&$&&S===O?new Ao(S,$):null}static _create(g,v){return new Ao(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ja extends Gi{constructor(g){ht(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ja.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ja.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=Ao.fromJSON(g);return ht(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:S}=g;if(!v||!S)return null;try{return Ao._create(S,v)}catch(O){return null}}}let $i=(()=>{class b extends Vs{constructor(){super("twitter.com")}static credential(v,S){return gi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:S})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:S,oauthTokenSecret:O}=v;if(!S||!O)return null;try{return b.credential(S,O)}catch($){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function tl(b,g){return la.apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signUp",Nn(b,g))})).apply(this,arguments)}class Wt{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,S,O=!1){return(0,d.Z)(function*(){const $=yield cn._fromIdTokenResponse(g,S,O),me=_c(S);return new Wt({user:$,providerId:me,_tokenResponse:S,operationType:v})})()}static _forOperation(g,v,S){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(S,!0);const O=_c(S);return new Wt({user:g,providerId:O,_tokenResponse:S,operationType:v})})()}}function _c(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function bu(){return(bu=(0,d.Z)(function*(b){var g;const v=Xr(b);if(yield v._initializationPromise,null===(g=v.currentUser)||void 0===g?void 0:g.isAnonymous)return new Wt({user:v.currentUser,providerId:null,operationType:"signIn"});const S=yield tl(v,{returnSecureToken:!0}),O=yield Wt._fromIdTokenResponse(v,"signIn",S,!0);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}class rl extends B.ZR{constructor(g,v,S,O){var $;super(v.code,v.message),this.operationType=S,this.user=O,Object.setPrototypeOf(this,rl.prototype),this.customData={appName:g.name,tenantId:null!==($=g.tenantId)&&void 0!==$?$:void 0,_serverResponse:v.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(g,v,S,O){return new rl(g,v,S,O)}}function bc(b,g,v,S){return("reauthenticate"===g?v._getReauthenticationResolver(b):v._getIdTokenResponse(b)).catch($=>{throw"auth/multi-factor-auth-required"===$.code?rl._fromErrorAndOperation(b,$,g,S):$})}function Tc(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function ft(){return(ft=(0,d.Z)(function*(b,g){const v=(0,B.m9)(b);yield fr(!0,v,g);const{providerUserInfo:S}=yield K(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),O=Tc(S||[]);return v.providerData=v.providerData.filter($=>O.has($.providerId)),O.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function kn(b,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(b,g,v=!1){const S=yield Bn(b,g._linkToIdToken(b.auth,yield b.getIdToken()),v);return Wt._forOperation(b,"link",S)})).apply(this,arguments)}function fr(b,g,v){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(b,g,v){yield Ct(g);const O=!1===b?"provider-already-linked":"no-such-provider";ht(Tc(g.providerData).has(v)===b,g.auth,O)})).apply(this,arguments)}function ca(b,g){return mi.apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(b,g,v=!1){const{auth:S}=b,O="reauthenticate";try{const $=yield Bn(b,bc(S,O,g,b),v);ht($.idToken,S,"internal-error");const me=pi($.idToken);ht(me,S,"internal-error");const{sub:Qe}=me;return ht(b.uid===Qe,S,"user-mismatch"),Wt._forOperation(b,O,$)}catch($){throw"auth/user-not-found"===(null==$?void 0:$.code)&&sn(S,"user-mismatch"),$}})).apply(this,arguments)}function Ec(b,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,d.Z)(function*(b,g,v=!1){const S="signIn",O=yield bc(b,S,g),$=yield Wt._fromIdTokenResponse(b,S,O);return v||(yield b._updateCurrentUser($.user)),$})).apply(this,arguments)}function Rd(b,g){return Od.apply(this,arguments)}function Od(){return(Od=(0,d.Z)(function*(b,g){return Ec(Xr(b),g)})).apply(this,arguments)}function sl(b,g){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(b,g){const v=(0,B.m9)(b);return yield fr(!1,v,g.providerId),kn(v,g)})).apply(this,arguments)}function oi(b,g){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(b,g){return ca((0,B.m9)(b),g)})).apply(this,arguments)}function ol(b,g){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(b,g){return de(b,"POST","/v1/accounts:signInWithCustomToken",Nn(b,g))})).apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(b,g){const v=Xr(b),S=yield ol(v,{token:g,returnSecureToken:!0}),O=yield Wt._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}class ul{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?ll._fromServerResponse(g,v):sn(g,"internal-error")}}class ll extends ul{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new ll(v)}}function wc(b,g,v){var S;ht((null===(S=v.url)||void 0===S?void 0:S.length)>0,b,"invalid-continue-uri"),ht(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(ht(v.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(ht(v.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Tu(){return(Tu=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b),O={requestType:"PASSWORD_RESET",email:g};v&&wc(S,O,v),yield zv(S,O)})).apply(this,arguments)}function dl(){return(dl=(0,d.Z)(function*(b,g,v){yield fg((0,B.m9)(b),{oobCode:g,newPassword:v})})).apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(b,g){yield qv((0,B.m9)(b),{oobCode:g})})).apply(this,arguments)}function xc(b,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(b,g){const v=(0,B.m9)(b),S=yield fg(v,{oobCode:g}),O=S.requestType;switch(ht(O,v,"internal-error"),O){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ht(S.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ht(S.mfaInfo,v,"internal-error");default:ht(S.email,v,"internal-error")}let $=null;return S.mfaInfo&&($=ul._fromServerResponse(Xr(v),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:$},operation:O}})).apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(b,g){const{data:v}=yield xc((0,B.m9)(b),g);return v.email})).apply(this,arguments)}function pl(){return(pl=(0,d.Z)(function*(b,g,v){const S=Xr(b),O=yield tl(S,{returnSecureToken:!0,email:g,password:v}),$=yield Wt._fromIdTokenResponse(S,"signIn",O);return yield S._updateCurrentUser($.user),$})).apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b),O={requestType:"EMAIL_SIGNIN",email:g};ht(v.handleCodeInApp,S,"argument-error"),v&&wc(S,O,v),yield mc(S,O)})).apply(this,arguments)}function Eu(){return(Eu=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b),O=Na.credentialWithLink(g,v||Rt());return ht(O._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),Rd(S,O)})).apply(this,arguments)}function vg(b,g){return wf.apply(this,arguments)}function wf(){return(wf=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:createAuthUri",Nn(b,g))})).apply(this,arguments)}function yg(){return(yg=(0,d.Z)(function*(b,g){const S={identifier:g,continueUri:Ft()?Rt():"http://localhost"},{signinMethods:O}=yield vg((0,B.m9)(b),S);return O||[]})).apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(b,g){const v=(0,B.m9)(b),O={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&wc(v.auth,O,g);const{email:$}=yield Wv(v.auth,O);$!==b.email&&(yield b.reload())})).apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b),$={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};v&&wc(S.auth,$,v);const{email:me}=yield Dd(S.auth,$);me!==b.email&&(yield b.reload())})).apply(this,arguments)}function Cf(b,g){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,d.Z)(function*(b,g){return ln(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(b,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const S=(0,B.m9)(b),$={idToken:yield S.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},me=yield Bn(S,Cf(S.auth,$));S.displayName=me.displayName||null,S.photoURL=me.photoUrl||null;const Qe=S.providerData.find(({providerId:wt})=>"password"===wt);Qe&&(Qe.displayName=S.displayName,Qe.photoURL=S.photoURL),yield S._updateTokensIfNecessary(me)})).apply(this,arguments)}function _g(b,g,v){return wu.apply(this,arguments)}function wu(){return(wu=(0,d.Z)(function*(b,g,v){const{auth:S}=b,$={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&($.email=g),v&&($.password=v);const me=yield Bn(b,pg(S,$));yield b._updateTokensIfNecessary(me,!0)})).apply(this,arguments)}class Va{constructor(g,v,S={}){this.isNewUser=g,this.providerId=v,this.profile=S}}class Dc extends Va{constructor(g,v,S,O){super(g,v,S),this.username=O}}class bg extends Va{constructor(g,v){super(g,"facebook.com",v)}}class U0 extends Dc{constructor(g,v){super(g,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class qn extends Va{constructor(g,v){super(g,"google.com",v)}}class Ha extends Dc{constructor(g,v,S){super(g,"twitter.com",v,S)}}function $t(b){const{user:g,_tokenResponse:v}=b;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function(b){var g,v;if(!b)return null;const{providerId:S}=b,O=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},$=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!S&&(null==b?void 0:b.idToken)){const me=null===(v=null===(g=pi(b.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(me)return new Va($,"anonymous"!==me&&"custom"!==me?me:null)}if(!S)return null;switch(S){case"facebook.com":return new bg($,O);case"github.com":return new U0($,O);case"google.com":return new qn($,O);case"twitter.com":return new Ha($,O,b.screenName||null);case"custom":case"anonymous":return new Va($,null);default:return new Va($,S,O)}}(v)}class pa{constructor(g,v){this.type=g,this.credential=v}static _fromIdtoken(g){return new pa("enroll",g)}static _fromMfaPendingCredential(g){return new pa("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,S;if(null==g?void 0:g.multiFactorSession){if(null===(v=g.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return pa._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(S=g.multiFactorSession)||void 0===S?void 0:S.idToken)return pa._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ko{constructor(g,v,S){this.session=g,this.hints=v,this.signInResolver=S}static _fromError(g,v){const S=Xr(g),O=v.customData._serverResponse,$=(O.mfaInfo||[]).map(Qe=>ul._fromServerResponse(S,Qe));ht(O.mfaPendingCredential,S,"internal-error");const me=pa._fromMfaPendingCredential(O.mfaPendingCredential);return new ko(me,$,function(){var Qe=(0,d.Z)(function*(wt){const yt=yield wt._process(S,me);delete O.mfaInfo,delete O.mfaPendingCredential;const zt=Object.assign(Object.assign({},O),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(v.operationType){case"signIn":const Qt=yield Wt._fromIdTokenResponse(S,v.operationType,zt);return yield S._updateCurrentUser(Qt.user),Qt;case"reauthenticate":return ht(v.user,S,"internal-error"),Wt._forOperation(v.user,v.operationType,zt);default:sn(S,"internal-error")}});return function(wt){return Qe.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,d.Z)(function*(){return v.signInResolver(g)})()}}function Tg(b,g){return ln(b,"POST","/v2/accounts/mfaEnrollment:start",Nn(b,g))}class xu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(S=>ul._fromServerResponse(g.auth,S)))})}static _fromUser(g){return new xu(g)}getSession(){var g=this;return(0,d.Z)(function*(){return pa._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,v){var S=this;return(0,d.Z)(function*(){const O=g,$=yield S.getSession(),me=yield Bn(S.user,O._process(S.user.auth,$,v));return yield S.user._updateTokensIfNecessary(me),S.user.reload()})()}unenroll(g){var v=this;return(0,d.Z)(function*(){const S="string"==typeof g?g:g.uid,O=yield v.user.getIdToken(),$=yield Bn(v.user,function(b,g){return ln(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Nn(b,g))}(v.user.auth,{idToken:O,mfaEnrollmentId:S}));v.enrolledFactors=v.enrolledFactors.filter(({uid:me})=>me!==S),yield v.user._updateTokensIfNecessary($);try{yield v.user.reload()}catch(me){if("auth/user-token-expired"!==me.code)throw me}})()}}const Sr=new WeakMap,Gs="__sak";class If{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Gs,"1"),this.storage.removeItem(Gs),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const yl=(()=>{class b extends If{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,S)=>this.onStorageEvent(v,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,B.z$)();return ra(b)||sa(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=xr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const S of Object.keys(this.listeners)){const O=this.storage.getItem(S),$=this.localCache[S];O!==$&&v(S,$,O)}}onStorageEvent(v,S=!1){if(!v.key)return void this.forAllChangedKeys((Qe,wt,yt)=>{this.notifyListeners(Qe,yt)});const O=v.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qe=this.storage.getItem(O);if(v.newValue!==Qe)null!==v.newValue?this.storage.setItem(O,v.newValue):this.storage.removeItem(O);else if(this.localCache[O]===v.newValue&&!S)return}const $=()=>{const Qe=this.storage.getItem(O);!S&&this.localCache[O]===Qe||this.notifyListeners(O,Qe)},me=this.storage.getItem(O);(0,B.w1)()&&10===document.documentMode&&me!==v.newValue&&v.newValue!==v.oldValue?setTimeout($,10):$()}notifyListeners(v,S){this.localCache[v]=S;const O=this.listeners[v];if(O)for(const $ of Array.from(O))$(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,S,O)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:S,newValue:O}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,S){var O=()=>super._set,$=this;return(0,d.Z)(function*(){yield O().call($,v,S),$.localCache[v]=JSON.stringify(S)})()}_get(v){var S=()=>super._get,O=this;return(0,d.Z)(function*(){const $=yield S().call(O,v);return O.localCache[v]=JSON.stringify($),$})()}_remove(v){var S=()=>super._remove,O=this;return(0,d.Z)(function*(){yield S().call(O,v),delete O.localCache[v]})()}}return b.type="LOCAL",b})(),Jr=(()=>{class b extends If{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,S){}_removeListener(v,S){}}return b.type="SESSION",b})();let _l=(()=>{class b{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const S=this.receivers.find($=>$.isListeningto(v));if(S)return S;const O=new b(v);return this.receivers.push(O),O}isListeningto(v){return this.eventTarget===v}handleEvent(v){var S=this;return(0,d.Z)(function*(){const O=v,{eventId:$,eventType:me,data:Qe}=O.data,wt=S.handlersMap[me];if(!(null==wt?void 0:wt.size))return;O.ports[0].postMessage({status:"ack",eventId:$,eventType:me});const yt=Array.from(wt).map(function(){var Qt=(0,d.Z)(function*(Tn){return Tn(O.origin,Qe)});return function(Tn){return Qt.apply(this,arguments)}}()),zt=yield function(b){return Promise.all(b.map(function(){var g=(0,d.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(S){return{fulfilled:!1,reason:S}}});return function(v){return g.apply(this,arguments)}}()))}(yt);O.ports[0].postMessage({status:"done",eventId:$,eventType:me,response:zt})})()}_subscribe(v,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(S)}_unsubscribe(v,S){this.handlersMap[v]&&S&&this.handlersMap[v].delete(S),(!S||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function qa(b="",g=10){let v="";for(let S=0;S<g;S++)v+=Math.floor(10*Math.random());return b+v}class vi{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,S=50){var O=this;return(0,d.Z)(function*(){const $="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!$)throw new Error("connection_unavailable");let me,Qe;return new Promise((wt,yt)=>{const zt=qa("",20);$.port1.start();const Qt=setTimeout(()=>{yt(new Error("unsupported_event"))},S);Qe={messageChannel:$,onMessage(Tn){const ei=Tn;if(ei.data.eventId===zt)switch(ei.data.status){case"ack":clearTimeout(Qt),me=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(me),wt(ei.data.response);break;default:clearTimeout(Qt),clearTimeout(me),yt(new Error("invalid_response"))}}},O.handlers.add(Qe),$.port1.addEventListener("message",Qe.onMessage),O.target.postMessage({eventType:g,eventId:zt,data:v},[$.port2])}).finally(()=>{Qe&&O.removeMessageHandler(Qe)})})()}}function lr(){return window}function gr(){return void 0!==lr().WorkerGlobalScope&&"function"==typeof lr().importScripts}function qs(){return(qs=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const ai="firebaseLocalStorageDb",Xn="firebaseLocalStorage",wg="fbase_key";class Po{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Jn(b,g){return b.transaction([Xn],g?"readwrite":"readonly").objectStore(Xn)}function Sg(){const b=indexedDB.open(ai,1);return new Promise((g,v)=>{b.addEventListener("error",()=>{v(b.error)}),b.addEventListener("upgradeneeded",()=>{const S=b.result;try{S.createObjectStore(Xn,{keyPath:wg})}catch(O){v(O)}}),b.addEventListener("success",(0,d.Z)(function*(){const S=b.result;S.objectStoreNames.contains(Xn)?g(S):(S.close(),yield function(){const b=indexedDB.deleteDatabase(ai);return new Po(b).toPromise()}(),g(yield Sg()))}))})}function Cg(b,g,v){return xg.apply(this,arguments)}function xg(){return(xg=(0,d.Z)(function*(b,g,v){const S=Jn(b,!0).put({[wg]:g,value:v});return new Po(S).toPromise()})).apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(b,g){const v=Jn(b,!1).get(g),S=yield new Po(v).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function Af(b,g){const v=Jn(b,!0).delete(g);return new Po(v).toPromise()}const Mo=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,d.Z)(function*(){return v.db||(v.db=yield Sg()),v.db})()}_withRetries(v){var S=this;return(0,d.Z)(function*(){let O=0;for(;;)try{const $=yield S._openDb();return yield v($)}catch($){if(O++>3)throw $;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,d.Z)(function*(){return gr()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,d.Z)(function*(){v.receiver=_l._getInstance(gr()?self:null),v.receiver._subscribe("keyChanged",function(){var S=(0,d.Z)(function*(O,$){return{keyProcessed:(yield v._poll()).includes($.key)}});return function(O,$){return S.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var S=(0,d.Z)(function*(O,$){return["keyChanged"]});return function(O,$){return S.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,d.Z)(function*(){var S,O;if(v.activeServiceWorker=yield function(){return qs.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new vi(v.activeServiceWorker);const $=yield v.sender._send("ping",{},800);!$||(null===(S=$[0])||void 0===S?void 0:S.fulfilled)&&(null===(O=$[0])||void 0===O?void 0:O.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var S=this;return(0,d.Z)(function*(){if(S.sender&&S.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:v},S.serviceWorkerReceiverAvailable?800:50)}catch(O){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Sg();return yield Cg(v,Gs,"1"),yield Af(v,Gs),!0}catch(v){}return!1})()}_withPendingWrite(v){var S=this;return(0,d.Z)(function*(){S.pendingWrites++;try{yield v()}finally{S.pendingWrites--}})()}_set(v,S){var O=this;return(0,d.Z)(function*(){return O._withPendingWrite((0,d.Z)(function*(){return yield O._withRetries($=>Cg($,v,S)),O.localCache[v]=S,O.notifyServiceWorker(v)}))})()}_get(v){var S=this;return(0,d.Z)(function*(){const O=yield S._withRetries($=>function(b,g){return Wi.apply(this,arguments)}($,v));return S.localCache[v]=O,O})()}_remove(v){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(O=>Af(O,v)),delete S.localCache[v],S.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,d.Z)(function*(){const S=yield v._withRetries(me=>{const Qe=Jn(me,!1).getAll();return new Po(Qe).toPromise()});if(!S)return[];if(0!==v.pendingWrites)return[];const O=[],$=new Set;for(const{fbase_key:me,value:Qe}of S)$.add(me),JSON.stringify(v.localCache[me])!==JSON.stringify(Qe)&&(v.notifyListeners(me,Qe),O.push(me));for(const me of Object.keys(v.localCache))v.localCache[me]&&!$.has(me)&&(v.notifyListeners(me,null),O.push(me));return O})()}notifyListeners(v,S){this.localCache[v]=S;const O=this.listeners[v];if(O)for(const $ of Array.from(O))$(S)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Tl(b,g){return ln(b,"POST","/v2/accounts/mfaSignIn:start",Nn(b,g))}function as(){return(as=(0,d.Z)(function*(b){return(yield ln(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ud(b){return new Promise((g,v)=>{const S=document.createElement("script");S.setAttribute("src",b),S.onload=g,S.onerror=O=>{const $=Cn("internal-error");$.customData=O,v($)},S.type="text/javascript",S.charset="UTF-8",function(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(S)})}function Wa(b){return`__${b}${Math.floor(1e6*Math.random())}`}const El=1e12;class Bd{constructor(g){this.auth=g,this.counter=El,this._widgets=new Map}render(g,v){const S=this.counter;return this._widgets.set(S,new Ag(g,this.auth.name,v||{})),this.counter++,S}reset(g){var v;const S=g||El;null===(v=this._widgets.get(S))||void 0===v||v.delete(),this._widgets.delete(S)}getResponse(g){var v;return(null===(v=this._widgets.get(g||El))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,d.Z)(function*(){var S;return null===(S=v._widgets.get(g||El))||void 0===S||S.execute(),""})()}}class Ag{constructor(g,v,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const O="string"==typeof g?document.getElementById(g):g;ht(O,"argument-error",{appName:v}),this.container=O,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<50;S++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}();const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch(S){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(S){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _n=Wa("rcb"),Mi=new Mn(3e4,6e4);class Du{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!lr().grecaptcha}load(g,v=""){return ht((b=v).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(lr().grecaptcha):new Promise((S,O)=>{const $=lr().setTimeout(()=>{O(Cn(g,"network-request-failed"))},Mi.get());lr()[_n]=()=>{lr().clearTimeout($),delete lr()[_n];const Qe=lr().grecaptcha;if(!Qe)return void O(Cn(g,"internal-error"));const wt=Qe.render;Qe.render=(yt,zt)=>{const Qt=wt(yt,zt);return this.counter++,Qt},this.hostLanguage=v,S(Qe)},Ud(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:_n,render:"explicit",hl:v})}`).catch(()=>{clearTimeout($),O(Cn(g,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!lr().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kg{load(g){return(0,d.Z)(function*(){return new Bd(g)})()}clearedOneInstance(){}}const Pf="recaptcha",Pg={theme:"light",type:"image"};class Ri{constructor(g,v=Object.assign({},Pg),S){this.parameters=v,this.type=Pf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xr(S),this.isInvisible="invisible"===this.parameters.size,ht("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const O="string"==typeof g?document.getElementById(g):g;ht(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kg:new Du,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),S=g.getAssertedRecaptcha();return S.getResponse(v)||new Promise($=>{const me=Qe=>{!Qe||(g.tokenChangeListeners.delete(me),$(Qe))};g.tokenChangeListeners.add(me),g.isInvisible&&S.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ht(!this.parameters.sitekey,this.auth,"argument-error"),ht(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ht("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(S=>S(v)),"function"==typeof g)g(v);else if("string"==typeof g){const S=lr()[g];"function"==typeof S&&S(v)}}}assertNotDestroyed(){ht(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const S=document.createElement("div");v.appendChild(S),v=S}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){ht(Ft()&&!gr(),g.auth,"internal-error"),yield function(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function(b){return as.apply(this,arguments)}(g.auth);ht(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return ht(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nc{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=Ra._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function po(){return(po=(0,d.Z)(function*(b,g,v){const S=Xr(b),O=yield Ro(S,g,(0,B.m9)(v));return new Nc(O,$=>Rd(S,$))})).apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b);yield fr(!1,S,"phone");const O=yield Ro(S.auth,g,(0,B.m9)(v));return new Nc(O,$=>sl(S,$))})).apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b),O=yield Ro(S.auth,g,(0,B.m9)(v));return new Nc(O,$=>oi(S,$))})).apply(this,arguments)}function Ro(b,g,v){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(b,g,v){var S;const O=yield v.verify();try{let $;if(ht("string"==typeof O,b,"argument-error"),ht(v.type===Pf,b,"argument-error"),$="string"==typeof g?{phoneNumber:g}:g,"session"in $){const me=$.session;if("phoneNumber"in $)return ht("enroll"===me.type,b,"internal-error"),(yield Tg(b,{idToken:me.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:O}})).phoneSessionInfo.sessionInfo;{ht("signin"===me.type,b,"internal-error");const Qe=(null===(S=$.multiFactorHint)||void 0===S?void 0:S.uid)||$.multiFactorUid;return ht(Qe,b,"missing-multi-factor-info"),(yield Tl(b,{mfaPendingCredential:me.credential,mfaEnrollmentId:Qe,phoneSignInInfo:{recaptchaToken:O}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:me}=yield Io(b,{phoneNumber:$.phoneNumber,recaptchaToken:O});return me}}finally{v._reset()}})).apply(this,arguments)}function $d(){return($d=(0,d.Z)(function*(b,g){yield kn((0,B.m9)(b),g)})).apply(this,arguments)}let P=(()=>{class b{constructor(v){this.providerId=b.PROVIDER_ID,this.auth=Xr(v)}verifyPhoneNumber(v,S){return Ro(this.auth,v,(0,B.m9)(S))}static credential(v,S){return Ra._fromVerification(v,S)}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:S,temporaryProof:O}=v;return S&&O?Ra._fromTokenResponse(S,O):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function R(b,g){return g?In(g):(ht(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class z extends mu{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ua(g,this._buildIdpRequest())}_linkToIdToken(g,v){return ua(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return ua(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function se(b){return Ec(b.auth,new z(b),b.bypassAuthState)}function Le(b){const{auth:g,user:v}=b;return ht(v,g,"internal-error"),ca(v,new z(b),b.bypassAuthState)}function Oe(b){return gt.apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(b){const{auth:g,user:v}=b;return ht(v,g,"internal-error"),kn(v,new z(b),b.bypassAuthState)})).apply(this,arguments)}class qt{constructor(g,v,S,O,$=!1){this.auth=g,this.resolver=S,this.user=O,this.bypassAuthState=$,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,d.Z)(function*(S,O){g.pendingPromise={resolve:S,reject:O};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch($){g.reject($)}});return function(S,O){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,d.Z)(function*(){const{urlResponse:S,sessionId:O,postBody:$,tenantId:me,error:Qe,type:wt}=g;if(Qe)return void v.reject(Qe);const yt={auth:v.auth,requestUri:S,sessionId:O,tenantId:me||void 0,postBody:$||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(wt)(yt))}catch(zt){v.reject(zt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return se;case"linkViaPopup":case"linkViaRedirect":return Oe;case"reauthViaPopup":case"reauthViaRedirect":return Le;default:sn(this.auth,"internal-error")}}resolve(g){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nt=new Mn(2e3,1e4);function Wn(){return(Wn=(0,d.Z)(function*(b,g,v){const S=Xr(b);Un(b,g,Gi);const O=R(S,v);return new za(S,"signInViaPopup",g,O).executeNotNull()})).apply(this,arguments)}function Ki(){return(Ki=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b);Un(S.auth,g,Gi);const O=R(S.auth,v);return new za(S.auth,"reauthViaPopup",g,O,S).executeNotNull()})).apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b);Un(S.auth,g,Gi);const O=R(S.auth,v);return new za(S.auth,"linkViaPopup",g,O,S).executeNotNull()})).apply(this,arguments)}let za=(()=>{class b extends qt{constructor(v,S,O,$,me){super(v,S,$,me),this.provider=O,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var v=this;return(0,d.Z)(function*(){const S=yield v.execute();return ht(S,v.auth,"internal-error"),S})()}onExecution(){var v=this;return(0,d.Z)(function*(){ar(1===v.filter.length,"Popup operations only handle one event");const S=qa();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],S),v.authWindow.associatedEvent=S,v.resolver._originValidation(v.auth).catch(O=>{v.reject(O)}),v.resolver._isIframeWebStorageSupported(v.auth,O=>{O||v.reject(Cn(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const v=()=>{var S,O;this.pollId=(null===(O=null===(S=this.authWindow)||void 0===S?void 0:S.window)||void 0===O?void 0:O.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Nt.get())};v()}}return b.currentPopupAction=null,b})();const go=new Map;class Oo extends qt{constructor(g,v,S=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,S),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,d.Z)(function*(){let S=go.get(v.auth._key());if(!S){try{const $=(yield function(b,g){return Sl.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;S=()=>Promise.resolve($)}catch(O){S=()=>Promise.reject(O)}go.set(v.auth._key(),S)}return v.bypassAuthState||go.set(v.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,S=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(S,g);if("unknown"!==g.type){if(g.eventId){const O=yield S.auth._redirectUserForId(g.eventId);if(O)return S.user=O,v().call(S,g);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Sl(){return(Sl=(0,d.Z)(function*(b,g){const v=Ka(g),S=Cl(b);if(!(yield S._isAvailable()))return!1;const O="true"===(yield S._get(v));return yield S._remove(v),O})).apply(this,arguments)}function qd(b,g){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,d.Z)(function*(b,g){return Cl(b)._set(Ka(g),"true")})).apply(this,arguments)}function Cl(b){return In(b._redirectPersistence)}function Ka(b){return os("pendingRedirect",b.config.apiKey,b.name)}function Mf(){return(Mf=(0,d.Z)(function*(b,g,v){const S=Xr(b);Un(b,g,Gi);const O=R(S,v);return yield qd(O,S),O._openRedirect(S,g,"signInViaRedirect")})).apply(this,arguments)}function Rf(){return(Rf=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b);Un(S.auth,g,Gi);const O=R(S.auth,v);yield qd(O,S.auth);const $=yield Qa(S);return O._openRedirect(S.auth,g,"reauthViaRedirect",$)})).apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(b,g,v){const S=(0,B.m9)(b);Un(S.auth,g,Gi);const O=R(S.auth,v);yield fr(!1,S,g.providerId),yield qd(O,S.auth);const $=yield Qa(S);return O._openRedirect(S.auth,g,"linkViaRedirect",$)})).apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(b,g){return yield Xr(b)._initializationPromise,Wd(b,g,!1)})).apply(this,arguments)}function Wd(b,g){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,d.Z)(function*(b,g,v=!1){const S=Xr(b),O=R(S,g),me=yield new Oo(S,O,v).execute();return me&&!v&&(delete me.user._redirectEventId,yield S._persistUserIfCurrent(me.user),yield S._setRedirectUser(null,g)),me})).apply(this,arguments)}function Qa(b){return xl.apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(b){const g=qa(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class jc{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(g,S)&&(v=!0,this.sendToConsumer(g,S),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zd(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var S;if(g.error&&!zd(g)){const O=(null===(S=g.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";v.onError(Cn(this.auth,O))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const S=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&S}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Of(g))}saveEventToCache(g){this.cachedEventUids.add(Of(g)),this.lastProcessedEventTime=Date.now()}}function Of(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function zd({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Nf(b){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,d.Z)(function*(b,g={}){return ln(b,"GET","/v1/projects",g)})).apply(this,arguments)}const G0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kd=/^https?/;function No(){return(No=(0,d.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Nf(b);for(const v of g)try{if(Uc(v))return}catch(S){}sn(b,"unauthorized-domain")})).apply(this,arguments)}function Uc(b){const g=Rt(),{protocol:v,hostname:S}=new URL(g);if(b.startsWith("chrome-extension://")){const me=new URL(b);return""===me.hostname&&""===S?"chrome-extension:"===v&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&me.hostname===S}if(!Kd.test(v))return!1;if(G0.test(b))return S===b;const O=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+O+"|"+O+")$","i").test(S)}const Yd=new Mn(3e4,6e4);function Bc(){const b=lr().___jsl;if(null==b?void 0:b.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let v=0;v<b.CP.length;v++)b.CP[v]=null}let Qd=null;function Jv(b){return Qd=Qd||function(b){return new Promise((g,v)=>{var S,O,$;function me(){Bc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Bc(),v(Cn(b,"network-request-failed"))},timeout:Yd.get()})}if(null===(O=null===(S=lr().gapi)||void 0===S?void 0:S.iframes)||void 0===O?void 0:O.Iframe)g(gapi.iframes.getContext());else{if(!(null===($=lr().gapi)||void 0===$?void 0:$.load)){const Qe=Wa("iframefcb");return lr()[Qe]=()=>{gapi.load?me():v(Cn(b,"network-request-failed"))},Ud(`https://apis.google.com/js/api.js?onload=${Qe}`).catch(wt=>v(wt))}me()}}).catch(g=>{throw Qd=null,g})}(b),Qd}const q0=new Mn(5e3,15e3),z0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ey(b){const g=b.config;ht(g.authDomain,b,"auth-domain-config-required");const v=g.emulator?jt(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,S={apiKey:g.apiKey,appName:b.name,v:ae.SDK_VERSION},O=Z0.get(b.config.apiHost);O&&(S.eid=O);const $=b._getFrameworks();return $.length&&(S.fw=$.join(",")),`${v}?${(0,B.xO)(S).slice(1)}`}function Bg(){return Bg=(0,d.Z)(function*(b){const g=yield Jv(b),v=lr().gapi;return ht(v,b,"internal-error"),g.open({where:document.body,url:ey(b),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z0,dontclear:!0},S=>new Promise(function(){var O=(0,d.Z)(function*($,me){yield S.restyle({setHideOnLeave:!1});const Qe=Cn(b,"network-request-failed"),wt=lr().setTimeout(()=>{me(Qe)},q0.get());function yt(){lr().clearTimeout(wt),$(S)}S.ping(yt).then(yt,()=>{me(Qe)})});return function($,me){return O.apply(this,arguments)}}()))}),Bg.apply(this,arguments)}const Il={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vg{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Fo(b,g,v,S,O,$){ht(b.config.authDomain,b,"auth-domain-config-required"),ht(b.config.apiKey,b,"invalid-api-key");const me={apiKey:b.config.apiKey,appName:b.name,authType:v,redirectUrl:S,v:ae.SDK_VERSION,eventId:O};if(g instanceof Gi){g.setDefaultLanguage(b.languageCode),me.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(me.customParameters=JSON.stringify(g.getCustomParameters()));for(const[wt,yt]of Object.entries($||{}))me[wt]=yt}if(g instanceof Vs){const wt=g.getScopes().filter(yt=>""!==yt);wt.length>0&&(me.scopes=wt.join(","))}b.tenantId&&(me.tid=b.tenantId);const Qe=me;for(const wt of Object.keys(Qe))void 0===Qe[wt]&&delete Qe[wt];return`${function({config:b}){return b.emulator?jt(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,B.xO)(Qe).slice(1)}`}const Xd="webStorageSupport";class Dl extends class{constructor(g){this.factorId=g}_process(g,v,S){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,S);case"signin":return this._finalizeSignIn(g,v.credential);default:return An("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Dl(g)}_finalizeEnroll(g,v,S){return function(b,g){return ln(b,"POST","/v2/accounts/mfaEnrollment:finalize",Nn(b,g))}(g,{idToken:v,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function(b,g){return ln(b,"POST","/v2/accounts/mfaSignIn:finalize",Nn(b,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Y0=(()=>{class b{constructor(){}static assertion(v){return Dl._fromCredential(v)}}return b.FACTOR_ID="phone",b})();var b,Gc="@firebase/auth";class sy{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,d.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(S=>{var O;g((null===(O=S)||void 0===O?void 0:O.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function kl(){return window}function jf(){return jf=(0,d.Z)(function*(b,g,v){var S;const{BuildInfo:O}=kl();ar(g.sessionId,"AuthEvent did not contain a session ID");const $=yield J0(g.sessionId),me={};return sa()?me.ibi=O.packageName:zu()?me.apn=O.packageName:sn(b,"operation-not-supported-in-this-environment"),O.displayName&&(me.appDisplayName=O.displayName),me.sessionId=$,Fo(b,v,g.type,void 0,null!==(S=g.eventId)&&void 0!==S?S:void 0,me)}),jf.apply(this,arguments)}function Pl(){return Pl=(0,d.Z)(function*(b){const{BuildInfo:g}=kl(),v={};sa()?v.iosBundleId=g.packageName:zu()?v.androidPackageName=g.packageName:sn(b,"operation-not-supported-in-this-environment"),yield Nf(b,v)}),Pl.apply(this,arguments)}function $g(){return $g=(0,d.Z)(function*(b,g,v){const{cordova:S}=kl();let O=()=>{};try{yield new Promise(($,me)=>{let Qe=null;function wt(){var Qt;$();const Tn=null===(Qt=S.plugins.browsertab)||void 0===Qt?void 0:Qt.close;"function"==typeof Tn&&Tn(),"function"==typeof(null==v?void 0:v.close)&&v.close()}function yt(){Qe||(Qe=window.setTimeout(()=>{me(Cn(b,"redirect-cancelled-by-user"))},2e3))}function zt(){"visible"===(null==document?void 0:document.visibilityState)&&yt()}g.addPassiveListener(wt),document.addEventListener("resume",yt,!1),zu()&&document.addEventListener("visibilitychange",zt,!1),O=()=>{g.removePassiveListener(wt),document.removeEventListener("resume",yt,!1),document.removeEventListener("visibilitychange",zt,!1),Qe&&window.clearTimeout(Qe)}})}finally{O()}}),$g.apply(this,arguments)}function J0(b){return eh.apply(this,arguments)}function eh(){return eh=(0,d.Z)(function*(b){const g=eb(b),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(O=>O.toString(16).padStart(2,"0")).join("")}),eh.apply(this,arguments)}function eb(b){if(ar(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),v=new Uint8Array(g);for(let S=0;S<b.length;S++)v[S]=b.charCodeAt(S);return v}b="Browser",(0,ae._registerComponent)(new Y.wA("auth",(g,{options:v})=>{const S=g.getProvider("app").getImmediate(),{apiKey:O,authDomain:$}=S.options;return(me=>{ht(O&&!O.includes(":"),"invalid-api-key",{appName:me.name}),ht(!(null==$?void 0:$.includes(":")),"argument-error",{appName:me.name});const Qe={apiKey:O,authDomain:$,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ro(b)},wt=new io(me,Qe);return function(b,g){const v=(null==g?void 0:g.persistence)||[],S=(Array.isArray(v)?v:[v]).map(In);(null==g?void 0:g.errorMap)&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(S,null==g?void 0:g.popupRedirectResolver)}(wt,v),wt})(S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,S)=>{g.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new Y.wA("auth-internal",g=>{const v=Xr(g.getProvider("auth").getImmediate());return new sy(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Gc,"0.19.5",void 0),(0,ae.registerVersion)(Gc,"0.19.5","esm2017");class li extends jc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,d.Z)(function*(){yield g.initPromise})()}}function Hf(b){return _i.apply(this,arguments)}function _i(){return _i=(0,d.Z)(function*(b){const g=yield Wg()._get(zg(b));return g&&(yield Wg()._remove(zg(b))),g}),_i.apply(this,arguments)}function qg(){const b=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<20;v++){const S=Math.floor(Math.random()*g.length);b.push(g.charAt(S))}return b.join("")}function Wg(){return In(yl)}function zg(b){return os("authEvent",b.config.apiKey,b.name)}function qc(b){if(!(null==b?void 0:b.includes("?")))return{};const[g,...v]=b.split("?");return(0,B.zd)(v.join("?"))}function rh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Cn("no-auth-event")}}function Rl(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function uy(b=(0,B.z$)()){return!("file:"!==Rl()&&"ionic:"!==Rl()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function ly(){try{const b=self.localStorage,g=qa();if(b)return b.setItem(g,"1"),b.removeItem(g),!function(b=(0,B.z$)()){return(0,B.w1)()&&11===(null==document?void 0:document.documentMode)||function(b=(0,B.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,B.hl)()}catch(b){return Kg()&&(0,B.hl)()}return!1}function Kg(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yg(){return("http:"===Rl()||"https:"===Rl()||(0,B.ru)()||uy())&&!((0,B.b$)()||(0,B.UG)())&&ly()&&!Kg()}function qf(){return uy()&&"undefined"!=typeof document}function Qg(){return Qg=(0,d.Z)(function*(){return!!qf()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})}),Qg.apply(this,arguments)}const Ws={LOCAL:"local",NONE:"none",SESSION:"session"},sh=ht,Xg="persistence";function dy(b){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,d.Z)(function*(b){yield b._initializationPromise;const g=vo(),v=os(Xg,b.config.apiKey,b.name);(null==g?void 0:g.sessionStorage)&&g.sessionStorage.setItem(v,b._getPersistence())}),Wf.apply(this,arguments)}function vo(){return"undefined"!=typeof window?window:null}const cb=ht;class Nl{constructor(){this.browserResolver=In(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jr,this._completeRedirectFn=Wd}_openPopup(g,v,S,O){var $=this;return(0,d.Z)(function*(){var me;ar(null===(me=$.eventManagers[g._key()])||void 0===me?void 0:me.manager,"_initialize() not called before _openPopup()");const Qe=Fo(g,v,S,Rt(),O);return function(b,g,v,S=500,O=600){const $=Math.max((window.screen.availHeight-O)/2,0).toString(),me=Math.max((window.screen.availWidth-S)/2,0).toString();let Qe="";const wt=Object.assign(Object.assign({},Il),{width:S.toString(),height:O.toString(),top:$,left:me}),yt=(0,B.z$)().toLowerCase();v&&(Qe=si(yt)?"_blank":v),Wu(yt)&&(g=g||"http://localhost",wt.scrollbars="yes");const zt=Object.entries(wt).reduce((Tn,[ei,As])=>`${Tn}${ei}=${As},`,"");if(function(b=(0,B.z$)()){var g;return sa(b)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(yt)&&"_self"!==Qe)return function(b,g){const v=document.createElement("a");v.href=b,v.target=g;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(S)}(g||"",Qe),new Vg(null);const Qt=window.open(g||"",Qe,zt);ht(Qt,b,"popup-blocked");try{Qt.focus()}catch(Tn){}return new Vg(Qt)}(g,Qe,qa())})()}_openRedirect(g,v,S,O){var $=this;return(0,d.Z)(function*(){return yield $._originValidation(g),b=Fo(g,v,S,Rt(),O),lr().location.href=b,new Promise(()=>{});var b})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:O,promise:$}=this.eventManagers[v];return O?Promise.resolve(O):(ar($,"If manager is not set, promise should be"),$)}const S=this.initAndGetManager(g);return this.eventManagers[v]={promise:S},S.catch(()=>{delete this.eventManagers[v]}),S}initAndGetManager(g){var v=this;return(0,d.Z)(function*(){const S=yield function(b){return Bg.apply(this,arguments)}(g),O=new jc(g);return S.register("authEvent",$=>(ht(null==$?void 0:$.authEvent,g,"invalid-auth-event"),{status:O.onEvent($.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:O},v.iframes[g._key()]=S,O})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Xd,{type:Xd},O=>{var $;const me=null===($=null==O?void 0:O[0])||void 0===$?void 0:$[Xd];void 0!==me&&v(!!me),sn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(b){return No.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return xr()||ra()||sa()}}),this.cordovaResolver=In(class{constructor(){this._redirectPersistence=Jr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wd}_initialize(g){var v=this;return(0,d.Z)(function*(){const S=g._key();let O=v.eventManagers.get(S);return O||(O=new li(g),v.eventManagers.set(S,O),v.attachCallbackListeners(g,O)),O})()}_openPopup(g){sn(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,S,O){var $=this;return(0,d.Z)(function*(){!function(b){var g,v,S,O,$,me,Qe,wt,yt,zt;const Qt=kl();ht("function"==typeof(null===(g=null==Qt?void 0:Qt.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ht(void 0!==(null===(v=null==Qt?void 0:Qt.BuildInfo)||void 0===v?void 0:v.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ht("function"==typeof(null===($=null===(O=null===(S=null==Qt?void 0:Qt.cordova)||void 0===S?void 0:S.plugins)||void 0===O?void 0:O.browsertab)||void 0===$?void 0:$.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ht("function"==typeof(null===(wt=null===(Qe=null===(me=null==Qt?void 0:Qt.cordova)||void 0===me?void 0:me.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===wt?void 0:wt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ht("function"==typeof(null===(zt=null===(yt=null==Qt?void 0:Qt.cordova)||void 0===yt?void 0:yt.InAppBrowser)||void 0===zt?void 0:zt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const me=yield $._initialize(g);yield me.initialized(),me.resetRedirect(),go.clear(),yield $._originValidation(g);const Qe=function(b,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:qg(),postBody:null,tenantId:b.tenantId,error:Cn(b,"no-auth-event")}}(g,S,O);yield function(b,g){return Wg()._set(zg(b),g)}(g,Qe);const wt=yield function(b,g,v){return jf.apply(this,arguments)}(g,Qe,v),yt=yield function(b){const{cordova:g}=kl();return new Promise(v=>{g.plugins.browsertab.isAvailable(S=>{let O=null;S?g.plugins.browsertab.openUrl(b):O=g.InAppBrowser.open(b,function(b=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),v(O)})})}(wt);return function(b,g,v){return $g.apply(this,arguments)}(g,me,yt)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(b){return Pl.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:S,handleOpenURL:O,BuildInfo:$}=kl(),me=setTimeout((0,d.Z)(function*(){yield Hf(g),v.onEvent(rh())}),500),Qe=function(){var zt=(0,d.Z)(function*(Qt){clearTimeout(me);const Tn=yield Hf(g);let ei=null;Tn&&(null==Qt?void 0:Qt.url)&&(ei=function(b,g){var v,S;const O=function(b){const g=qc(b),v=g.link?decodeURIComponent(g.link):void 0,S=qc(v).link,O=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return qc(O).link||O||S||v||b}(g);if(O.includes("/__/auth/callback")){const $=qc(O),me=$.firebaseError?function(b){try{return JSON.parse(b)}catch(g){return null}}(decodeURIComponent($.firebaseError)):null,Qe=null===(S=null===(v=null==me?void 0:me.code)||void 0===v?void 0:v.split("auth/"))||void 0===S?void 0:S[1],wt=Qe?Cn(Qe):null;return wt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:wt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:O,postBody:null}}return null}(Tn,Qt.url)),v.onEvent(ei||rh())});return function(Tn){return zt.apply(this,arguments)}}();void 0!==S&&"function"==typeof S.subscribe&&S.subscribe(null,Qe);const wt=O,yt=`${$.packageName.toLowerCase()}://`;kl().handleOpenURL=function(){var zt=(0,d.Z)(function*(Qt){if(Qt.toLowerCase().startsWith(yt)&&Qe({url:Qt}),"function"==typeof wt)try{wt(Qt)}catch(Tn){console.error(Tn)}});return function(Qt){return zt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Jr,this._completeRedirectFn=Wd}_initialize(g){var v=this;return(0,d.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,S,O){var $=this;return(0,d.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._openPopup(g,v,S,O)})()}_openRedirect(g,v,S,O){var $=this;return(0,d.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._openRedirect(g,v,S,O)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return qf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,d.Z)(function*(){if(g.underlyingResolver)return;const v=yield function(){return Qg.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function Jg(b){return b.unwrap()}function va(b){return Wc(b)}function Wc(b){const{_tokenResponse:g}=b instanceof B.ZR?b.customData:b;if(!g)return null;if(!(b instanceof B.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return P.credentialFromResult(b);const v=g.providerId;if(!v||"password"===v)return null;let S;switch(v){case"google.com":S=La;break;case"facebook.com":S=yc;break;case"github.com":S=Fa;break;case"twitter.com":S=$i;break;default:const{oauthIdToken:O,oauthAccessToken:$,oauthTokenSecret:me,pendingToken:Qe,nonce:wt}=g;return $||me||O||Qe?Qe?v.startsWith("saml.")?Ao._create(v,Qe):gi._fromParams({providerId:v,signInMethod:v,pendingToken:Qe,idToken:O,accessToken:$}):new Rr(v).credential({idToken:O,accessToken:$,rawNonce:wt}):null}return b instanceof B.ZR?S.credentialFromError(b):S.credentialFromResult(b)}function Is(b,g){return g.catch(v=>{throw v instanceof B.ZR&&function(b,g){var v;const S=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Zf(b,function(b,g){var v;const S=(0,B.m9)(b),O=g;return ht(g.customData.operationType,S,"argument-error"),ht(null===(v=O.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,S,"argument-error"),ko._fromError(S,O)}(b,g));else if(S){const O=Wc(g),$=g;O&&($.credential=O,$.tenantId=S.tenantId||void 0,$.email=S.email||void 0,$.phoneNumber=S.phoneNumber||void 0)}}(b,v),v}).then(v=>{const O=v.user;return{operationType:v.operationType,credential:va(v),additionalUserInfo:$t(v),user:jo.getOrCreate(O)}})}function zf(b,g){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,d.Z)(function*(b,g){const v=yield g;return{verificationId:v.verificationId,confirm:S=>Is(b,v.confirm(S))}}),Ll.apply(this,arguments)}class Zf{constructor(g,v){this.resolver=v,this.auth=function(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Is(Jg(this.auth),this.resolver.resolveSignIn(g))}}class jo{constructor(g){this._delegate=g,this.multiFactor=function(b){const g=(0,B.m9)(b);return Sr.has(g)||Sr.set(g,xu._fromUser(g)),Sr.get(g)}(g)}static getOrCreate(g){return jo.USER_MAP.has(g)||jo.USER_MAP.set(g,new jo(g)),jo.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,d.Z)(function*(){return Is(v.auth,sl(v._delegate,g))})()}linkWithPhoneNumber(g,v){var S=this;return(0,d.Z)(function*(){return zf(S.auth,function(b,g,v){return ui.apply(this,arguments)}(S._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,d.Z)(function*(){return Is(v.auth,function(b,g,v){return yi.apply(this,arguments)}(v._delegate,g,Nl))})()}linkWithRedirect(g){var v=this;return(0,d.Z)(function*(){return yield dy(Xr(v.auth)),function(b,g,v){return function(b,g,v){return xs.apply(this,arguments)}(b,g,v)}(v._delegate,g,Nl)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,d.Z)(function*(){return Is(v.auth,oi(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return zf(this.auth,function(b,g,v){return Lc.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return Is(this.auth,function(b,g,v){return Ki.apply(this,arguments)}(this._delegate,g,Nl))}reauthenticateWithRedirect(g){var v=this;return(0,d.Z)(function*(){return yield dy(Xr(v.auth)),function(b,g,v){return function(b,g,v){return Rf.apply(this,arguments)}(b,g,v)}(v._delegate,g,Nl)})()}sendEmailVerification(g){return function(b,g){return fa.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,d.Z)(function*(){return yield function(b,g){return ft.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function(b,g){return _g((0,B.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function(b,g){return _g((0,B.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(b,g){return $d.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(b,g){return ur.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function(b,g,v){return gl.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jo.USER_MAP=new WeakMap;const Fl=ht;let Kf=(()=>{class b{constructor(v,S){if(this.app=v,S.isInitialized())return this._delegate=S.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:O}=v.options;Fl(O,"invalid-api-key",{appName:v.name}),Fl(O,"invalid-api-key",{appName:v.name});const $="undefined"!=typeof window?Nl:void 0;this._delegate=S.initialize({options:{persistence:Xw(O,v.name),popupRedirectResolver:$}}),this._delegate._updateErrorMap(Ht),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,S){!function(b,g,v){const S=Xr(b);ht(S._canInitEmulator,S,"emulator-config-failed"),ht(/^https?:\/\//.test(g),S,"invalid-emulator-scheme");const O=!!(null==v?void 0:v.disableWarnings),$=Ss(g),{host:me,port:Qe}=function(b){const g=Ss(b),v=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!v)return{host:"",port:null};const S=v[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(S);if(O){const $=O[1];return{host:$,port:$v(S.substr($.length+1))}}{const[$,me]=S.split(":");return{host:$,port:$v(me)}}}(g);S.config.emulator={url:`${$}//${me}${null===Qe?"":`:${Qe}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:me,port:Qe,protocol:$.replace(":",""),options:Object.freeze({disableWarnings:O})}),O||function(){function b(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,v,S)}applyActionCode(v){return function(b,g){return Cc.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return xc(this._delegate,v)}confirmPasswordReset(v,S){return function(b,g,v){return dl.apply(this,arguments)}(this._delegate,v,S)}createUserWithEmailAndPassword(v,S){var O=this;return(0,d.Z)(function*(){return Is(O._delegate,function(b,g,v){return pl.apply(this,arguments)}(O._delegate,v,S))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function(b,g){return yg.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function(b,g){const v=Oa.parseLink(g);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}(0,v)}getRedirectResult(){var v=this;return(0,d.Z)(function*(){Fl(Yg(),v._delegate,"operation-not-supported-in-this-environment");const S=yield function(b,g){return Ya.apply(this,arguments)}(v._delegate,Nl);return S?Is(v._delegate,Promise.resolve(S)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function(b,g){Xr(b)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,S,O){const{next:$,error:me,complete:Qe}=tm(v,S,O);return this._delegate.onAuthStateChanged($,me,Qe)}onIdTokenChanged(v,S,O){const{next:$,error:me,complete:Qe}=tm(v,S,O);return this._delegate.onIdTokenChanged($,me,Qe)}sendSignInLinkToEmail(v,S){return function(b,g,v){return rr.apply(this,arguments)}(this._delegate,v,S)}sendPasswordResetEmail(v,S){return function(b,g,v){return Tu.apply(this,arguments)}(this._delegate,v,S||void 0)}setPersistence(v){var S=this;return(0,d.Z)(function*(){let O;switch(function(b,g){sh(Object.values(Ws).includes(g),b,"invalid-persistence-type"),(0,B.b$)()?sh(g!==Ws.SESSION,b,"unsupported-persistence-type"):(0,B.UG)()?sh(g===Ws.NONE,b,"unsupported-persistence-type"):Kg()?sh(g===Ws.NONE||g===Ws.LOCAL&&(0,B.hl)(),b,"unsupported-persistence-type"):sh(g===Ws.NONE||ly(),b,"unsupported-persistence-type")}(S._delegate,v),v){case Ws.SESSION:O=Jr;break;case Ws.LOCAL:O=(yield In(Mo)._isAvailable())?Mo:yl;break;case Ws.NONE:O=ss;break;default:return sn("argument-error",{appName:S._delegate.name})}return S._delegate.setPersistence(O)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Is(this._delegate,function(b){return bu.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return Is(this._delegate,Rd(this._delegate,v))}signInWithCustomToken(v){return Is(this._delegate,function(b,g){return al.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,S){return Is(this._delegate,function(b,g,v){return Rd((0,B.m9)(b),Na.credential(g,v))}(this._delegate,v,S))}signInWithEmailLink(v,S){return Is(this._delegate,function(b,g,v){return Eu.apply(this,arguments)}(this._delegate,v,S))}signInWithPhoneNumber(v,S){return zf(this._delegate,function(b,g,v){return po.apply(this,arguments)}(this._delegate,v,S))}signInWithPopup(v){var S=this;return(0,d.Z)(function*(){return Fl(Yg(),S._delegate,"operation-not-supported-in-this-environment"),Is(S._delegate,function(b,g,v){return Wn.apply(this,arguments)}(S._delegate,v,Nl))})()}signInWithRedirect(v){var S=this;return(0,d.Z)(function*(){return Fl(Yg(),S._delegate,"operation-not-supported-in-this-environment"),yield dy(S._delegate),function(b,g,v){return function(b,g,v){return Mf.apply(this,arguments)}(b,g,v)}(S._delegate,v,Nl)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function(b,g){return fl.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Ws,b})();function tm(b,g,v){let S=b;"function"!=typeof b&&({next:S,error:g,complete:v}=b);const O=S;return{next:me=>O(me&&jo.getOrCreate(me)),error:g,complete:v}}function Xw(b,g){const v=function(b,g){const v=vo();if(!(null==v?void 0:v.sessionStorage))return[];const S=os(Xg,b,g);switch(v.sessionStorage.getItem(S)){case Ws.NONE:return[ss];case Ws.LOCAL:return[Mo,Jr];case Ws.SESSION:return[Jr];default:return[]}}(b,g);if("undefined"!=typeof self&&!v.includes(Mo)&&v.push(Mo),"undefined"!=typeof window)for(const S of[yl,Jr])v.includes(S)||v.push(S);return v.includes(ss)||v.push(ss),v}class Xa{constructor(){this.providerId="phone",this._delegate=new P(Jg(ee.Z.auth()))}static credential(g,v){return P.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}Xa.PHONE_SIGN_IN_METHOD=P.PHONE_SIGN_IN_METHOD,Xa.PROVIDER_ID=P.PROVIDER_ID;const nm=ht;class hy{constructor(g,v,S=ee.Z.app()){var O;nm(null===(O=S.options)||void 0===O?void 0:O.apiKey,"invalid-api-key",{appName:S.name}),this._delegate=new Ri(g,v,S.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(b){b.INTERNAL.registerComponent(new Y.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),S=g.getProvider("auth");return new Kf(v,S)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Na,FacebookAuthProvider:yc,GithubAuthProvider:Fa,GoogleAuthProvider:La,OAuthProvider:Rr,SAMLAuthProvider:ja,PhoneAuthProvider:Xa,PhoneMultiFactorGenerator:Y0,RecaptchaVerifier:hy,TwitterAuthProvider:$i,Auth:Kf,AuthCredential:mu,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.5")}(ee.Z)},2449:(Ye,_e,U)=>{var B,d="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},ee=U(5893);"undefined"!=typeof document?B=document:(B=d["__GLOBAL_DOCUMENT_CACHE@4"])||(B=d["__GLOBAL_DOCUMENT_CACHE@4"]=ee),Ye.exports=B},397:Ye=>{var _e;_e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ye.exports=_e},4995:function(Ye,_e){!function(U){"use strict";function d(ye){return Array.prototype.slice.call(ye)}function ee(ye){return new Promise(function(le,Ie){ye.onsuccess=function(){le(ye.result)},ye.onerror=function(){Ie(ye.error)}})}function B(ye,le,Ie){var Ve,He=new Promise(function(Je,Ke){ee(Ve=ye[le].apply(ye,Ie)).then(Je,Ke)});return He.request=Ve,He}function ae(ye,le,Ie){var Ve=B(ye,le,Ie);return Ve.then(function(He){if(He)return new Q(He,Ve.request)})}function ie(ye,le,Ie){Ie.forEach(function(Ve){Object.defineProperty(ye.prototype,Ve,{get:function(){return this[le][Ve]},set:function(He){this[le][Ve]=He}})})}function he(ye,le,Ie,Ve){Ve.forEach(function(He){He in Ie.prototype&&(ye.prototype[He]=function(){return B(this[le],He,arguments)})})}function pe(ye,le,Ie,Ve){Ve.forEach(function(He){He in Ie.prototype&&(ye.prototype[He]=function(){return this[le][He].apply(this[le],arguments)})})}function ce(ye,le,Ie,Ve){Ve.forEach(function(He){He in Ie.prototype&&(ye.prototype[He]=function(){return ae(this[le],He,arguments)})})}function fe(ye){this._index=ye}function Q(ye,le){this._cursor=ye,this._request=le}function ue(ye){this._store=ye}function ne(ye){this._tx=ye,this.complete=new Promise(function(le,Ie){ye.oncomplete=function(){le()},ye.onerror=function(){Ie(ye.error)},ye.onabort=function(){Ie(ye.error)}})}function et(ye,le,Ie){this._db=ye,this.oldVersion=le,this.transaction=new ne(Ie)}function Ze(ye){this._db=ye}ie(fe,"_index",["name","keyPath","multiEntry","unique"]),he(fe,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ce(fe,"_index",IDBIndex,["openCursor","openKeyCursor"]),ie(Q,"_cursor",["direction","key","primaryKey","value"]),he(Q,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ye){ye in IDBCursor.prototype&&(Q.prototype[ye]=function(){var le=this,Ie=arguments;return Promise.resolve().then(function(){return le._cursor[ye].apply(le._cursor,Ie),ee(le._request).then(function(Ve){if(Ve)return new Q(Ve,le._request)})})})}),ue.prototype.createIndex=function(){return new fe(this._store.createIndex.apply(this._store,arguments))},ue.prototype.index=function(){return new fe(this._store.index.apply(this._store,arguments))},ie(ue,"_store",["name","keyPath","indexNames","autoIncrement"]),he(ue,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ce(ue,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),pe(ue,"_store",IDBObjectStore,["deleteIndex"]),ne.prototype.objectStore=function(){return new ue(this._tx.objectStore.apply(this._tx,arguments))},ie(ne,"_tx",["objectStoreNames","mode"]),pe(ne,"_tx",IDBTransaction,["abort"]),et.prototype.createObjectStore=function(){return new ue(this._db.createObjectStore.apply(this._db,arguments))},ie(et,"_db",["name","version","objectStoreNames"]),pe(et,"_db",IDBDatabase,["deleteObjectStore","close"]),Ze.prototype.transaction=function(){return new ne(this._db.transaction.apply(this._db,arguments))},ie(Ze,"_db",["name","version","objectStoreNames"]),pe(Ze,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ye){[ue,fe].forEach(function(le){ye in le.prototype&&(le.prototype[ye.replace("open","iterate")]=function(){var Ie=d(arguments),Ve=Ie[Ie.length-1],He=this._store||this._index,Je=He[ye].apply(He,Ie.slice(0,-1));Je.onsuccess=function(){Ve(Je.result)}})})}),[fe,ue].forEach(function(ye){ye.prototype.getAll||(ye.prototype.getAll=function(le,Ie){var Ve=this,He=[];return new Promise(function(Je){Ve.iterateCursor(le,function(Ke){Ke?(He.push(Ke.value),void 0===Ie||He.length!=Ie?Ke.continue():Je(He)):Je(He)})})})}),U.openDb=function(ye,le,Ie){var Ve=B(indexedDB,"open",[ye,le]),He=Ve.request;return He&&(He.onupgradeneeded=function(Je){Ie&&Ie(new et(He.result,Je.oldVersion,He.transaction))}),Ve.then(function(Je){return new Ze(Je)})},U.deleteDb=function(ye){return B(indexedDB,"deleteDatabase",[ye])},Object.defineProperty(U,"__esModule",{value:!0})}(_e)},985:Ye=>{Ye.exports=function(d){if(!d)return!1;var ee=_e.call(d);return"[object Function]"===ee||"function"==typeof d&&"[object RegExp]"!==ee||"undefined"!=typeof window&&(d===window.setTimeout||d===window.alert||d===window.confirm||d===window.prompt)};var _e=Object.prototype.toString},6444:(Ye,_e)=>{function U(he){if(he&&"object"==typeof he){var pe=he.which||he.keyCode||he.charCode;pe&&(he=pe)}if("number"==typeof he)return ae[he];var fe,ce=String(he);return(fe=d[ce.toLowerCase()])?fe:(fe=ee[ce.toLowerCase()])||(1===ce.length?ce.charCodeAt(0):void 0)}U.isEventKey=function(pe,ce){if(pe&&"object"==typeof pe){var fe=pe.which||pe.keyCode||pe.charCode;if(null==fe)return!1;if("string"==typeof ce){var Q;if(Q=d[ce.toLowerCase()])return Q===fe;if(Q=ee[ce.toLowerCase()])return Q===fe}else if("number"==typeof ce)return ce===fe;return!1}};var d=(_e=Ye.exports=U).code=_e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},ee=_e.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(B=97;B<123;B++)d[String.fromCharCode(B)]=B-32;for(var B=48;B<58;B++)d[B-48]=B;for(B=1;B<13;B++)d["f"+B]=B+111;for(B=0;B<10;B++)d["numpad "+B]=B+96;var ae=_e.names=_e.title={};for(B in d)ae[d[B]]=B;for(var ie in ee)d[ie]=ee[ie]},2307:Ye=>{var _e=Math.pow(2,32);Ye.exports=function(d){var ee=new DataView(d.buffer,d.byteOffset,d.byteLength),B={version:d[0],flags:new Uint8Array(d.subarray(1,4)),references:[],referenceId:ee.getUint32(4),timescale:ee.getUint32(8)},ae=12;0===B.version?(B.earliestPresentationTime=ee.getUint32(ae),B.firstOffset=ee.getUint32(ae+4),ae+=8):(B.earliestPresentationTime=ee.getUint32(ae)*_e+ee.getUint32(ae+4),B.firstOffset=ee.getUint32(ae+8)*_e+ee.getUint32(ae+12),ae+=16);var ie=ee.getUint16(ae+=2);for(ae+=2;ie>0;ae+=12,ie--)B.references.push({referenceType:(128&d[ae])>>>7,referencedSize:2147483647&ee.getUint32(ae),subsegmentDuration:ee.getUint32(ae+4),startsWithSap:!!(128&d[ae+8]),sapType:(112&d[ae+8])>>>4,sapDeltaTime:268435455&ee.getUint32(ae+8)});return B}},4421:Ye=>{var U,d,ee,B,ae,ie,he;ae=function(pe,ce){return U(B(pe,ce))},ie=function(pe,ce){return d(ee(pe),ce)},he=function(pe,ce,fe){return ee(fe?pe:pe-ce)},Ye.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:U=function(pe){return 9e4*pe},secondsToAudioTs:d=function(pe,ce){return pe*ce},videoTsToSeconds:ee=function(pe){return pe/9e4},audioTsToSeconds:B=function(pe,ce){return pe/ce},audioTsToVideoTs:ae,videoTsToAudioTs:ie,metadataTsToSeconds:he}},7503:Ye=>{var _e=function(U){"use strict";var B,d=Object.prototype,ee=d.hasOwnProperty,ae="function"==typeof Symbol?Symbol:{},ie=ae.iterator||"@@iterator",he=ae.asyncIterator||"@@asyncIterator",pe=ae.toStringTag||"@@toStringTag";function ce(Y,ge,Pe){return Object.defineProperty(Y,ge,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),Y[ge]}try{ce({},"")}catch(Y){ce=function(ge,Pe,Ge){return ge[Pe]=Ge}}function fe(Y,ge,Pe,Ge){var qe=Object.create((ge&&ge.prototype instanceof St?ge:St).prototype),ot=new Te(Ge||[]);return qe._invoke=function(Y,ge,Pe){var Ge=ue;return function(qe,ot){if(Ge===et)throw new Error("Generator is already running");if(Ge===Ze){if("throw"===qe)throw ot;return Ue()}for(Pe.method=qe,Pe.arg=ot;;){var kt=Pe.delegate;if(kt){var Ht=Z(kt,Pe);if(Ht){if(Ht===rt)continue;return Ht}}if("next"===Pe.method)Pe.sent=Pe._sent=Pe.arg;else if("throw"===Pe.method){if(Ge===ue)throw Ge=Ze,Pe.arg;Pe.dispatchException(Pe.arg)}else"return"===Pe.method&&Pe.abrupt("return",Pe.arg);Ge=et;var Lt=Q(Y,ge,Pe);if("normal"===Lt.type){if(Ge=Pe.done?Ze:ne,Lt.arg===rt)continue;return{value:Lt.arg,done:Pe.done}}"throw"===Lt.type&&(Ge=Ze,Pe.method="throw",Pe.arg=Lt.arg)}}}(Y,Pe,ot),qe}function Q(Y,ge,Pe){try{return{type:"normal",arg:Y.call(ge,Pe)}}catch(Ge){return{type:"throw",arg:Ge}}}U.wrap=fe;var ue="suspendedStart",ne="suspendedYield",et="executing",Ze="completed",rt={};function St(){}function ye(){}function le(){}var Ie={};ce(Ie,ie,function(){return this});var Ve=Object.getPrototypeOf,He=Ve&&Ve(Ve(Ee([])));He&&He!==d&&ee.call(He,ie)&&(Ie=He);var Je=le.prototype=St.prototype=Object.create(Ie);function Ke(Y){["next","throw","return"].forEach(function(ge){ce(Y,ge,function(Pe){return this._invoke(ge,Pe)})})}function st(Y,ge){function Pe(qe,ot,kt,Ht){var Lt=Q(Y[qe],Y,ot);if("throw"!==Lt.type){var Pt=Lt.arg,Yn=Pt.value;return Yn&&"object"==typeof Yn&&ee.call(Yn,"__await")?ge.resolve(Yn.__await).then(function(pn){Pe("next",pn,kt,Ht)},function(pn){Pe("throw",pn,kt,Ht)}):ge.resolve(Yn).then(function(pn){Pt.value=pn,kt(Pt)},function(pn){return Pe("throw",pn,kt,Ht)})}Ht(Lt.arg)}var Ge;this._invoke=function(qe,ot){function kt(){return new ge(function(Ht,Lt){Pe(qe,ot,Ht,Lt)})}return Ge=Ge?Ge.then(kt,kt):kt()}}function Z(Y,ge){var Pe=Y.iterator[ge.method];if(Pe===B){if(ge.delegate=null,"throw"===ge.method){if(Y.iterator.return&&(ge.method="return",ge.arg=B,Z(Y,ge),"throw"===ge.method))return rt;ge.method="throw",ge.arg=new TypeError("The iterator does not provide a 'throw' method")}return rt}var Ge=Q(Pe,Y.iterator,ge.arg);if("throw"===Ge.type)return ge.method="throw",ge.arg=Ge.arg,ge.delegate=null,rt;var Me=Ge.arg;return Me?Me.done?(ge[Y.resultName]=Me.value,ge.next=Y.nextLoc,"return"!==ge.method&&(ge.method="next",ge.arg=B),ge.delegate=null,rt):Me:(ge.method="throw",ge.arg=new TypeError("iterator result is not an object"),ge.delegate=null,rt)}function G(Y){var ge={tryLoc:Y[0]};1 in Y&&(ge.catchLoc=Y[1]),2 in Y&&(ge.finallyLoc=Y[2],ge.afterLoc=Y[3]),this.tryEntries.push(ge)}function re(Y){var ge=Y.completion||{};ge.type="normal",delete ge.arg,Y.completion=ge}function Te(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(G,this),this.reset(!0)}function Ee(Y){if(Y){var ge=Y[ie];if(ge)return ge.call(Y);if("function"==typeof Y.next)return Y;if(!isNaN(Y.length)){var Pe=-1,Ge=function Me(){for(;++Pe<Y.length;)if(ee.call(Y,Pe))return Me.value=Y[Pe],Me.done=!1,Me;return Me.value=B,Me.done=!0,Me};return Ge.next=Ge}}return{next:Ue}}function Ue(){return{value:B,done:!0}}return ye.prototype=le,ce(Je,"constructor",le),ce(le,"constructor",ye),ye.displayName=ce(le,pe,"GeneratorFunction"),U.isGeneratorFunction=function(Y){var ge="function"==typeof Y&&Y.constructor;return!!ge&&(ge===ye||"GeneratorFunction"===(ge.displayName||ge.name))},U.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,le):(Y.__proto__=le,ce(Y,pe,"GeneratorFunction")),Y.prototype=Object.create(Je),Y},U.awrap=function(Y){return{__await:Y}},Ke(st.prototype),ce(st.prototype,he,function(){return this}),U.AsyncIterator=st,U.async=function(Y,ge,Pe,Ge,Me){void 0===Me&&(Me=Promise);var qe=new st(fe(Y,ge,Pe,Ge),Me);return U.isGeneratorFunction(ge)?qe:qe.next().then(function(ot){return ot.done?ot.value:qe.next()})},Ke(Je),ce(Je,pe,"Generator"),ce(Je,ie,function(){return this}),ce(Je,"toString",function(){return"[object Generator]"}),U.keys=function(Y){var ge=[];for(var Pe in Y)ge.push(Pe);return ge.reverse(),function Ge(){for(;ge.length;){var Me=ge.pop();if(Me in Y)return Ge.value=Me,Ge.done=!1,Ge}return Ge.done=!0,Ge}},U.values=Ee,Te.prototype={constructor:Te,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=B,this.done=!1,this.delegate=null,this.method="next",this.arg=B,this.tryEntries.forEach(re),!Y)for(var ge in this)"t"===ge.charAt(0)&&ee.call(this,ge)&&!isNaN(+ge.slice(1))&&(this[ge]=B)},stop:function(){this.done=!0;var ge=this.tryEntries[0].completion;if("throw"===ge.type)throw ge.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var ge=this;function Pe(Ht,Lt){return qe.type="throw",qe.arg=Y,ge.next=Ht,Lt&&(ge.method="next",ge.arg=B),!!Lt}for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var Me=this.tryEntries[Ge],qe=Me.completion;if("root"===Me.tryLoc)return Pe("end");if(Me.tryLoc<=this.prev){var ot=ee.call(Me,"catchLoc"),kt=ee.call(Me,"finallyLoc");if(ot&&kt){if(this.prev<Me.catchLoc)return Pe(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return Pe(Me.finallyLoc)}else if(ot){if(this.prev<Me.catchLoc)return Pe(Me.catchLoc,!0)}else{if(!kt)throw new Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return Pe(Me.finallyLoc)}}}},abrupt:function(Y,ge){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Ge=this.tryEntries[Pe];if(Ge.tryLoc<=this.prev&&ee.call(Ge,"finallyLoc")&&this.prev<Ge.finallyLoc){var Me=Ge;break}}Me&&("break"===Y||"continue"===Y)&&Me.tryLoc<=ge&&ge<=Me.finallyLoc&&(Me=null);var qe=Me?Me.completion:{};return qe.type=Y,qe.arg=ge,Me?(this.method="next",this.next=Me.finallyLoc,rt):this.complete(qe)},complete:function(Y,ge){if("throw"===Y.type)throw Y.arg;return"break"===Y.type||"continue"===Y.type?this.next=Y.arg:"return"===Y.type?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):"normal"===Y.type&&ge&&(this.next=ge),rt},finish:function(Y){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Pe=this.tryEntries[ge];if(Pe.finallyLoc===Y)return this.complete(Pe.completion,Pe.afterLoc),re(Pe),rt}},catch:function(Y){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Pe=this.tryEntries[ge];if(Pe.tryLoc===Y){var Ge=Pe.completion;if("throw"===Ge.type){var Me=Ge.arg;re(Pe)}return Me}}throw new Error("illegal catch attempt")},delegateYield:function(Y,ge,Pe){return this.delegate={iterator:Ee(Y),resultName:ge,nextLoc:Pe},"next"===this.method&&(this.arg=B),rt}},U}(Ye.exports);try{regeneratorRuntime=_e}catch(U){"object"==typeof globalThis?globalThis.regeneratorRuntime=_e:Function("r","regeneratorRuntime = r")(_e)}},9969:function(Ye,_e,U){var d,ee;d=function(){return function(){var ae=arguments.length;if(0===ae)throw new Error("resolveUrl requires at least one argument; got none.");var ie=document.createElement("base");if(ie.href=arguments[0],1===ae)return ie.href;var he=document.getElementsByTagName("head")[0];he.insertBefore(ie,he.firstChild);for(var ce,pe=document.createElement("a"),fe=1;fe<ae;fe++)pe.href=arguments[fe],ie.href=ce=pe.href;return he.removeChild(ie),ce}},void 0!==(ee=d.call(_e,U,_e,Ye))&&(Ye.exports=ee)},8410:(Ye,_e,U)=>{"use strict";U.d(_e,{y:()=>ce});var d=U(584),ee=U(7908),B=U(4816),ae=U(7979),ie=U(5367),he=U(5044),pe=U(8706);let ce=(()=>{class ne{constructor(Ze){Ze&&(this._subscribe=Ze)}lift(Ze){const rt=new ne;return rt.source=this,rt.operator=Ze,rt}subscribe(Ze,rt,St){const ye=function(ne){return ne&&ne instanceof d.Lv||function(ne){return ne&&(0,he.m)(ne.next)&&(0,he.m)(ne.error)&&(0,he.m)(ne.complete)}(ne)&&(0,ee.Nn)(ne)}(Ze)?Ze:new d.Hp(Ze,rt,St);return(0,pe.x)(()=>{const{operator:le,source:Ie}=this;ye.add(le?le.call(ye,Ie):Ie?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Ze){try{return this._subscribe(Ze)}catch(rt){Ze.error(rt)}}forEach(Ze,rt){return new(rt=fe(rt))((St,ye)=>{let le;le=this.subscribe(Ie=>{try{Ze(Ie)}catch(Ve){ye(Ve),null==le||le.unsubscribe()}},ye,St)})}_subscribe(Ze){var rt;return null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(Ze)}[B.L](){return this}pipe(...Ze){return(0,ae.U)(Ze)(this)}toPromise(Ze){return new(Ze=fe(Ze))((rt,St)=>{let ye;this.subscribe(le=>ye=le,le=>St(le),()=>rt(ye))})}}return ne.create=et=>new ne(et),ne})();function fe(ne){var et;return null!==(et=null!=ne?ne:ie.v.Promise)&&void 0!==et?et:Promise}},273:(Ye,_e,U)=>{"use strict";U.d(_e,{x:()=>pe});var d=U(8410),ee=U(7908);const ae=(0,U(4893).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=U(3980),he=U(8706);let pe=(()=>{class fe extends d.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const ne=new ce(this,this);return ne.operator=ue,ne}_throwIfClosed(){if(this.closed)throw new ae}next(ue){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ne=this.observers.slice();for(const et of ne)et.next(ue)}})}error(ue){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:ne}=this;for(;ne.length;)ne.shift().error(ue)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:ne,isStopped:et,observers:Ze}=this;return ne||et?ee.Lc:(Ze.push(ue),new ee.w0(()=>(0,ie.P)(Ze,ue)))}_checkFinalizedStatuses(ue){const{hasError:ne,thrownError:et,isStopped:Ze}=this;ne?ue.error(et):Ze&&ue.complete()}asObservable(){const ue=new d.y;return ue.source=this,ue}}return fe.create=(Q,ue)=>new ce(Q,ue),fe})();class ce extends pe{constructor(Q,ue){super(),this.destination=Q,this.source=ue}next(Q){var ue,ne;null===(ne=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===ne||ne.call(ue,Q)}error(Q){var ue,ne;null===(ne=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===ne||ne.call(ue,Q)}complete(){var Q,ue;null===(ue=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===ue||ue.call(Q)}_subscribe(Q){var ue,ne;return null!==(ne=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(Q))&&void 0!==ne?ne:ee.Lc}}},584:(Ye,_e,U)=>{"use strict";U.d(_e,{Hp:()=>et,Lv:()=>ne});var d=U(5044),ee=U(7908),B=U(5367),ae=U(5160),ie=U(6921);const he=fe("C",void 0,void 0);function fe(le,Ie,Ve){return{kind:le,value:Ie,error:Ve}}var Q=U(2496),ue=U(8706);class ne extends ee.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,ee.Nn)(Ie)&&Ie.add(this)):this.destination=ye}static create(Ie,Ve,He){return new et(Ie,Ve,He)}next(Ie){this.isStopped?St(fe("N",Ie,void 0),this):this._next(Ie)}error(Ie){this.isStopped?St(fe("E",void 0,Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?St(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class et extends ne{constructor(Ie,Ve,He){let Je;if(super(),(0,d.m)(Ie))Je=Ie;else if(Ie){let Ke;({next:Je,error:Ve,complete:He}=Ie),this&&B.v.useDeprecatedNextContext?(Ke=Object.create(Ie),Ke.unsubscribe=()=>this.unsubscribe()):Ke=Ie,Je=null==Je?void 0:Je.bind(Ke),Ve=null==Ve?void 0:Ve.bind(Ke),He=null==He?void 0:He.bind(Ke)}this.destination={next:Je?Ze(Je):ie.Z,error:Ze(null!=Ve?Ve:rt),complete:He?Ze(He):ie.Z}}}function Ze(le,Ie){return(...Ve)=>{try{le(...Ve)}catch(He){B.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(He):(0,ae.h)(He)}}}function rt(le){throw le}function St(le,Ie){const{onStoppedNotification:Ve}=B.v;Ve&&Q.z.setTimeout(()=>Ve(le,Ie))}const ye={closed:!0,next:ie.Z,error:rt,complete:ie.Z}},7908:(Ye,_e,U)=>{"use strict";U.d(_e,{Lc:()=>he,w0:()=>ie,Nn:()=>pe});var d=U(5044);const B=(0,U(4893).d)(fe=>function(ue){fe(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((ne,et)=>`${et+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var ae=U(3980);class ie{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const Ze of ue)Ze.remove(this);else ue.remove(this);const{initialTeardown:ne}=this;if((0,d.m)(ne))try{ne()}catch(Ze){Q=Ze instanceof B?Ze.errors:[Ze]}const{_teardowns:et}=this;if(et){this._teardowns=null;for(const Ze of et)try{ce(Ze)}catch(rt){Q=null!=Q?Q:[],rt instanceof B?Q=[...Q,...rt.errors]:Q.push(rt)}}if(Q)throw new B(Q)}}add(Q){var ue;if(Q&&Q!==this)if(this.closed)ce(Q);else{if(Q instanceof ie){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._teardowns=null!==(ue=this._teardowns)&&void 0!==ue?ue:[]).push(Q)}}_hasParent(Q){const{_parentage:ue}=this;return ue===Q||Array.isArray(ue)&&ue.includes(Q)}_addParent(Q){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(Q),ue):ue?[ue,Q]:Q}_removeParent(Q){const{_parentage:ue}=this;ue===Q?this._parentage=null:Array.isArray(ue)&&(0,ae.P)(ue,Q)}remove(Q){const{_teardowns:ue}=this;ue&&(0,ae.P)(ue,Q),Q instanceof ie&&Q._removeParent(this)}}ie.EMPTY=(()=>{const fe=new ie;return fe.closed=!0,fe})();const he=ie.EMPTY;function pe(fe){return fe instanceof ie||fe&&"closed"in fe&&(0,d.m)(fe.remove)&&(0,d.m)(fe.add)&&(0,d.m)(fe.unsubscribe)}function ce(fe){(0,d.m)(fe)?fe():fe.unsubscribe()}},5367:(Ye,_e,U)=>{"use strict";U.d(_e,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(Ye,_e,U)=>{"use strict";U.d(_e,{E:()=>ee});const ee=new(U(8410).y)(ie=>ie.complete())},5947:(Ye,_e,U)=>{"use strict";U.d(_e,{D:()=>Je});var d=U(9985),ee=U(4763),B=U(5222),he=U(8410),ce=U(5497),fe=U(5044),Q=U(8395);function ne(Ke,st){if(!Ke)throw new Error("Iterable cannot be null");return new he.y(Tt=>{(0,Q.f)(Tt,st,()=>{const Z=Ke[Symbol.asyncIterator]();(0,Q.f)(Tt,st,()=>{Z.next().then(G=>{G.done?Tt.complete():Tt.next(G.value)})},0,!0)})})}var et=U(1073),Ze=U(2442),rt=U(1537),St=U(2317),ye=U(9908),le=U(3754),Ie=U(7751);function Je(Ke,st){return st?function(Ke,st){if(null!=Ke){if((0,et.c)(Ke))return function(Ke,st){return(0,d.Xf)(Ke).pipe((0,B.R)(st),(0,ee.Q)(st))}(Ke,st);if((0,rt.z)(Ke))return function(Ke,st){return new he.y(Tt=>{let Z=0;return st.schedule(function(){Z===Ke.length?Tt.complete():(Tt.next(Ke[Z++]),Tt.closed||this.schedule())})})}(Ke,st);if((0,Ze.t)(Ke))return function(Ke,st){return(0,d.Xf)(Ke).pipe((0,B.R)(st),(0,ee.Q)(st))}(Ke,st);if((0,ye.D)(Ke))return ne(Ke,st);if((0,St.T)(Ke))return function(Ke,st){return new he.y(Tt=>{let Z;return(0,Q.f)(Tt,st,()=>{Z=Ke[ce.h](),(0,Q.f)(Tt,st,()=>{let G,re;try{({value:G,done:re}=Z.next())}catch(Te){return void Tt.error(Te)}re?Tt.complete():Tt.next(G)},0,!0)}),()=>(0,fe.m)(null==Z?void 0:Z.return)&&Z.return()})}(Ke,st);if((0,Ie.L)(Ke))return function(Ke,st){return ne((0,Ie.Q)(Ke),st)}(Ke,st)}throw(0,le.z)(Ke)}(Ke,st):(0,d.Xf)(Ke)}},9985:(Ye,_e,U)=>{"use strict";U.d(_e,{Xf:()=>et});var d=U(9162),ee=U(1537),B=U(2442),ae=U(8410),ie=U(1073),he=U(9908),pe=U(3754),ce=U(2317),fe=U(7751),Q=U(5044),ue=U(5160),ne=U(4816);function et(He){if(He instanceof ae.y)return He;if(null!=He){if((0,ie.c)(He))return function(He){return new ae.y(Je=>{const Ke=He[ne.L]();if((0,Q.m)(Ke.subscribe))return Ke.subscribe(Je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(He);if((0,ee.z)(He))return function(He){return new ae.y(Je=>{for(let Ke=0;Ke<He.length&&!Je.closed;Ke++)Je.next(He[Ke]);Je.complete()})}(He);if((0,B.t)(He))return function(He){return new ae.y(Je=>{He.then(Ke=>{Je.closed||(Je.next(Ke),Je.complete())},Ke=>Je.error(Ke)).then(null,ue.h)})}(He);if((0,he.D)(He))return le(He);if((0,ce.T)(He))return function(He){return new ae.y(Je=>{for(const Ke of He)if(Je.next(Ke),Je.closed)return;Je.complete()})}(He);if((0,fe.L)(He))return function(He){return le((0,fe.Q)(He))}(He)}throw(0,pe.z)(He)}function le(He){return new ae.y(Je=>{(function(He,Je){var Ke,st,Tt,Z;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ke=(0,d.KL)(He);!(st=yield Ke.next()).done;)if(Je.next(st.value),Je.closed)return}catch(G){Tt={error:G}}finally{try{st&&!st.done&&(Z=Ke.return)&&(yield Z.call(Ke))}finally{if(Tt)throw Tt.error}}Je.complete()})})(He,Je).catch(Ke=>Je.error(Ke))})}},3719:(Ye,_e,U)=>{"use strict";U.d(_e,{T:()=>he});var d=U(5373),ee=U(9985),B=U(5583),ae=U(7613),ie=U(5947);function he(...pe){const ce=(0,ae.yG)(pe),fe=(0,ae._6)(pe,1/0),Q=pe;return Q.length?1===Q.length?(0,ee.Xf)(Q[0]):(0,d.J)(fe)((0,ie.D)(Q,ce)):B.E}},8889:(Ye,_e,U)=>{"use strict";U.d(_e,{Q:()=>ee});var d=U(584);class ee extends d.Lv{constructor(ae,ie,he,pe,ce){super(ae),this.onFinalize=ce,this._next=ie?function(fe){try{ie(fe)}catch(Q){ae.error(Q)}}:super._next,this._error=pe?function(fe){try{pe(fe)}catch(Q){ae.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(fe){ae.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}},4753:(Ye,_e,U)=>{"use strict";U.d(_e,{U:()=>B});var d=U(9947),ee=U(8889);function B(ae,ie){return(0,d.e)((he,pe)=>{let ce=0;he.subscribe(new ee.Q(pe,fe=>{pe.next(ae.call(ie,fe,ce++))}))})}},5373:(Ye,_e,U)=>{"use strict";U.d(_e,{J:()=>B});var d=U(5724),ee=U(4623);function B(ae=1/0){return(0,d.z)(ee.y,ae)}},5724:(Ye,_e,U)=>{"use strict";U.d(_e,{z:()=>ce});var d=U(4753),ee=U(9985),B=U(9947),ie=(U(8395),U(8889)),pe=U(5044);function ce(fe,Q,ue=1/0){return(0,pe.m)(Q)?ce((ne,et)=>(0,d.U)((Ze,rt)=>Q(ne,Ze,et,rt))((0,ee.Xf)(fe(ne,et))),ue):("number"==typeof Q&&(ue=Q),(0,B.e)((ne,et)=>function(fe,Q,ue,ne,et,Ze,rt,St){const ye=[];let le=0,Ie=0,Ve=!1;const He=()=>{Ve&&!ye.length&&!le&&Q.complete()},Je=st=>le<ne?Ke(st):ye.push(st),Ke=st=>{le++;let Tt=!1;(0,ee.Xf)(ue(st,Ie++)).subscribe(new ie.Q(Q,Z=>{Q.next(Z)},()=>{Tt=!0},void 0,()=>{if(Tt)try{for(le--;ye.length&&le<ne;){const Z=ye.shift();Ke(Z)}He()}catch(Z){Q.error(Z)}}))};return fe.subscribe(new ie.Q(Q,Je,()=>{Ve=!0,He()})),()=>{}}(ne,et,fe,ue)))}},4763:(Ye,_e,U)=>{"use strict";U.d(_e,{Q:()=>ae});var d=U(8395),ee=U(9947),B=U(8889);function ae(ie,he=0){return(0,ee.e)((pe,ce)=>{pe.subscribe(new B.Q(ce,fe=>(0,d.f)(ce,ie,()=>ce.next(fe),he),()=>(0,d.f)(ce,ie,()=>ce.complete(),he),fe=>(0,d.f)(ce,ie,()=>ce.error(fe),he)))})}},3174:(Ye,_e,U)=>{"use strict";U.d(_e,{B:()=>he});var d=U(5947),ee=U(9468),B=U(273),ae=U(584),ie=U(9947);function he(ce={}){const{connector:fe=(()=>new B.x),resetOnError:Q=!0,resetOnComplete:ue=!0,resetOnRefCountZero:ne=!0}=ce;return et=>{let Ze=null,rt=null,St=null,ye=0,le=!1,Ie=!1;const Ve=()=>{null==rt||rt.unsubscribe(),rt=null},He=()=>{Ve(),Ze=St=null,le=Ie=!1},Je=()=>{const Ke=Ze;He(),null==Ke||Ke.unsubscribe()};return(0,ie.e)((Ke,st)=>{ye++,!Ie&&!le&&Ve();const Tt=St=null!=St?St:fe();st.add(()=>{ye--,0===ye&&!Ie&&!le&&(rt=pe(Je,ne))}),Tt.subscribe(st),Ze||(Ze=new ae.Hp({next:Z=>Tt.next(Z),error:Z=>{Ie=!0,Ve(),rt=pe(He,Q,Z),Tt.error(Z)},complete:()=>{le=!0,Ve(),rt=pe(He,ue),Tt.complete()}}),(0,d.D)(Ke).subscribe(Ze))})(et)}}function pe(ce,fe,...Q){return!0===fe?(ce(),null):!1===fe?null:fe(...Q).pipe((0,ee.q)(1)).subscribe(()=>ce())}},5222:(Ye,_e,U)=>{"use strict";U.d(_e,{R:()=>ee});var d=U(9947);function ee(B,ae=0){return(0,d.e)((ie,he)=>{he.add(B.schedule(()=>ie.subscribe(he),ae))})}},9468:(Ye,_e,U)=>{"use strict";U.d(_e,{q:()=>ae});var d=U(5583),ee=U(9947),B=U(8889);function ae(ie){return ie<=0?()=>d.E:(0,ee.e)((he,pe)=>{let ce=0;he.subscribe(new B.Q(pe,fe=>{++ce<=ie&&(pe.next(fe),ie<=ce&&pe.complete())}))})}},7384:(Ye,_e,U)=>{"use strict";U.d(_e,{b:()=>ie});var d=U(5044),ee=U(9947),B=U(8889),ae=U(4623);function ie(he,pe,ce){const fe=(0,d.m)(he)||pe||ce?{next:he,error:pe,complete:ce}:he;return fe?(0,ee.e)((Q,ue)=>{var ne;null===(ne=fe.subscribe)||void 0===ne||ne.call(fe);let et=!0;Q.subscribe(new B.Q(ue,Ze=>{var rt;null===(rt=fe.next)||void 0===rt||rt.call(fe,Ze),ue.next(Ze)},()=>{var Ze;et=!1,null===(Ze=fe.complete)||void 0===Ze||Ze.call(fe),ue.complete()},Ze=>{var rt;et=!1,null===(rt=fe.error)||void 0===rt||rt.call(fe,Ze),ue.error(Ze)},()=>{var Ze,rt;et&&(null===(Ze=fe.unsubscribe)||void 0===Ze||Ze.call(fe)),null===(rt=fe.finalize)||void 0===rt||rt.call(fe)}))}):ae.y}},2869:(Ye,_e,U)=>{"use strict";U.d(_e,{o:()=>ie});var d=U(7908);class ee extends d.w0{constructor(pe,ce){super()}schedule(pe,ce=0){return this}}const B={setInterval(...he){const{delegate:pe}=B;return((null==pe?void 0:pe.setInterval)||setInterval)(...he)},clearInterval(he){const{delegate:pe}=B;return((null==pe?void 0:pe.clearInterval)||clearInterval)(he)},delegate:void 0};var ae=U(3980);class ie extends ee{constructor(pe,ce){super(pe,ce),this.scheduler=pe,this.work=ce,this.pending=!1}schedule(pe,ce=0){if(this.closed)return this;this.state=pe;const fe=this.id,Q=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(Q,fe,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(Q,this.id,ce),this}requestAsyncId(pe,ce,fe=0){return B.setInterval(pe.flush.bind(pe,this),fe)}recycleAsyncId(pe,ce,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ce;B.clearInterval(ce)}execute(pe,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(pe,ce);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ce){let Q,fe=!1;try{this.work(pe)}catch(ue){fe=!0,Q=ue||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ce}=this,{actions:fe}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(fe,this),null!=pe&&(this.id=this.recycleAsyncId(ce,pe,null)),this.delay=null,super.unsubscribe()}}}},8843:(Ye,_e,U)=>{"use strict";U.d(_e,{v:()=>B});var d=U(1733);class ee{constructor(ie,he=ee.now){this.schedulerActionCtor=ie,this.now=he}schedule(ie,he=0,pe){return new this.schedulerActionCtor(this,ie).schedule(pe,he)}}ee.now=d.l.now;class B extends ee{constructor(ie,he=ee.now){super(ie,he),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:he}=this;if(this._active)return void he.push(ie);let pe;this._active=!0;do{if(pe=ie.execute(ie.state,ie.delay))break}while(ie=he.shift());if(this._active=!1,pe){for(;ie=he.shift();)ie.unsubscribe();throw pe}}}},2210:(Ye,_e,U)=>{"use strict";U.d(_e,{z:()=>B,P:()=>ae});var d=U(2869);const B=new(U(8843).v)(d.o),ae=B},1733:(Ye,_e,U)=>{"use strict";U.d(_e,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},2496:(Ye,_e,U)=>{"use strict";U.d(_e,{z:()=>d});const d={setTimeout(...ee){const{delegate:B}=d;return((null==B?void 0:B.setTimeout)||setTimeout)(...ee)},clearTimeout(ee){const{delegate:B}=d;return((null==B?void 0:B.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},5497:(Ye,_e,U)=>{"use strict";U.d(_e,{h:()=>ee});const ee="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(Ye,_e,U)=>{"use strict";U.d(_e,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(Ye,_e,U)=>{"use strict";U.d(_e,{jO:()=>ae,yG:()=>ie,_6:()=>he});var d=U(5044),ee=U(7398);function B(pe){return pe[pe.length-1]}function ae(pe){return(0,d.m)(B(pe))?pe.pop():void 0}function ie(pe){return(0,ee.K)(B(pe))?pe.pop():void 0}function he(pe,ce){return"number"==typeof B(pe)?pe.pop():ce}},3980:(Ye,_e,U)=>{"use strict";function d(ee,B){if(ee){const ae=ee.indexOf(B);0<=ae&&ee.splice(ae,1)}}U.d(_e,{P:()=>d})},4893:(Ye,_e,U)=>{"use strict";function d(ee){const ae=ee(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}U.d(_e,{d:()=>d})},8706:(Ye,_e,U)=>{"use strict";U.d(_e,{x:()=>B,O:()=>ae});var d=U(5367);let ee=null;function B(ie){if(d.v.useDeprecatedSynchronousErrorHandling){const he=!ee;if(he&&(ee={errorThrown:!1,error:null}),ie(),he){const{errorThrown:pe,error:ce}=ee;if(ee=null,pe)throw ce}}else ie()}function ae(ie){d.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ie)}},8395:(Ye,_e,U)=>{"use strict";function d(ee,B,ae,ie=0,he=!1){const pe=B.schedule(function(){ae(),he?ee.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ee.add(pe),!he)return pe}U.d(_e,{f:()=>d})},4623:(Ye,_e,U)=>{"use strict";function d(ee){return ee}U.d(_e,{y:()=>d})},1537:(Ye,_e,U)=>{"use strict";U.d(_e,{z:()=>d});const d=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},9908:(Ye,_e,U)=>{"use strict";U.d(_e,{D:()=>ee});var d=U(5044);function ee(B){return Symbol.asyncIterator&&(0,d.m)(null==B?void 0:B[Symbol.asyncIterator])}},5044:(Ye,_e,U)=>{"use strict";function d(ee){return"function"==typeof ee}U.d(_e,{m:()=>d})},1073:(Ye,_e,U)=>{"use strict";U.d(_e,{c:()=>B});var d=U(4816),ee=U(5044);function B(ae){return(0,ee.m)(ae[d.L])}},2317:(Ye,_e,U)=>{"use strict";U.d(_e,{T:()=>B});var d=U(5497),ee=U(5044);function B(ae){return(0,ee.m)(null==ae?void 0:ae[d.h])}},2442:(Ye,_e,U)=>{"use strict";U.d(_e,{t:()=>ee});var d=U(5044);function ee(B){return(0,d.m)(null==B?void 0:B.then)}},7751:(Ye,_e,U)=>{"use strict";U.d(_e,{Q:()=>B,L:()=>ae});var d=U(9162),ee=U(5044);function B(ie){return(0,d.FC)(this,arguments,function*(){const pe=ie.getReader();try{for(;;){const{value:ce,done:fe}=yield(0,d.qq)(pe.read());if(fe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ce)}}finally{pe.releaseLock()}})}function ae(ie){return(0,ee.m)(null==ie?void 0:ie.getReader)}},7398:(Ye,_e,U)=>{"use strict";U.d(_e,{K:()=>ee});var d=U(5044);function ee(B){return B&&(0,d.m)(B.schedule)}},9947:(Ye,_e,U)=>{"use strict";U.d(_e,{A:()=>ee,e:()=>B});var d=U(5044);function ee(ae){return(0,d.m)(null==ae?void 0:ae.lift)}function B(ae){return ie=>{if(ee(ie))return ie.lift(function(he){try{return ae(he,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(Ye,_e,U)=>{"use strict";function d(){}U.d(_e,{Z:()=>d})},7979:(Ye,_e,U)=>{"use strict";U.d(_e,{z:()=>ee,U:()=>B});var d=U(4623);function ee(...ae){return B(ae)}function B(ae){return 0===ae.length?d.y:1===ae.length?ae[0]:function(he){return ae.reduce((pe,ce)=>ce(pe),he)}}},5160:(Ye,_e,U)=>{"use strict";U.d(_e,{h:()=>B});var d=U(5367),ee=U(2496);function B(ae){ee.z.setTimeout(()=>{const{onUnhandledError:ie}=d.v;if(!ie)throw ae;ie(ae)})}},3754:(Ye,_e,U)=>{"use strict";function d(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(_e,{z:()=>d})},1879:Ye=>{Ye.exports=function(U,d){var ee,B=null;try{ee=JSON.parse(U,d)}catch(ae){B=ae}return[B,ee]}},9916:function(Ye){var U,d,ee,B,ae;U=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,d=/^([^\/?#]*)([^]*)$/,ee=/(?:\/|^)\.(?=\/)/g,B=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Ye.exports=ae={buildAbsoluteURL:function(ie,he,pe){if(pe=pe||{},ie=ie.trim(),!(he=he.trim())){if(!pe.alwaysNormalize)return ie;var ce=ae.parseURL(ie);if(!ce)throw new Error("Error trying to parse base URL.");return ce.path=ae.normalizePath(ce.path),ae.buildURLFromParts(ce)}var fe=ae.parseURL(he);if(!fe)throw new Error("Error trying to parse relative URL.");if(fe.scheme)return pe.alwaysNormalize?(fe.path=ae.normalizePath(fe.path),ae.buildURLFromParts(fe)):he;var Q=ae.parseURL(ie);if(!Q)throw new Error("Error trying to parse base URL.");if(!Q.netLoc&&Q.path&&"/"!==Q.path[0]){var ue=d.exec(Q.path);Q.netLoc=ue[1],Q.path=ue[2]}Q.netLoc&&!Q.path&&(Q.path="/");var ne={scheme:Q.scheme,netLoc:fe.netLoc,path:null,params:fe.params,query:fe.query,fragment:fe.fragment};if(!fe.netLoc&&(ne.netLoc=Q.netLoc,"/"!==fe.path[0]))if(fe.path){var et=Q.path,Ze=et.substring(0,et.lastIndexOf("/")+1)+fe.path;ne.path=ae.normalizePath(Ze)}else ne.path=Q.path,fe.params||(ne.params=Q.params,fe.query||(ne.query=Q.query));return null===ne.path&&(ne.path=pe.alwaysNormalize?ae.normalizePath(fe.path):fe.path),ae.buildURLFromParts(ne)},parseURL:function(ie){var he=U.exec(ie);return he?{scheme:he[1]||"",netLoc:he[2]||"",path:he[3]||"",params:he[4]||"",query:he[5]||"",fragment:he[6]||""}:null},normalizePath:function(ie){for(ie=ie.split("").reverse().join("").replace(ee,"");ie.length!==(ie=ie.replace(B,"")).length;);return ie.split("").reverse().join("")},buildURLFromParts:function(ie){return ie.scheme+ie.netLoc+ie.path+ie.params+ie.query+ie.fragment}}},6605:(Ye,_e,U)=>{var d=U(397),ee=Ye.exports={WebVTT:U(586),VTTCue:U(7772),VTTRegion:U(4348)};d.vttjs=ee,d.WebVTT=ee.WebVTT;var B=ee.VTTCue,ae=ee.VTTRegion,ie=d.VTTCue,he=d.VTTRegion;ee.shim=function(){d.VTTCue=B,d.VTTRegion=ae},ee.restore=function(){d.VTTCue=ie,d.VTTRegion=he},d.VTTCue||ee.shim()},586:(Ye,_e,U)=>{var d=U(2449),ee=Object.create||function(){function Z(){}return function(G){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Z.prototype=G,new Z}}();function B(Z,G){this.name="ParsingError",this.code=Z.code,this.message=G||Z.message}function ae(Z){function G(Te,Ee,Ue,Y){return 3600*(0|Te)+60*(0|Ee)+(0|Ue)+(0|Y)/1e3}var re=Z.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return re?re[3]?G(re[1],re[2],re[3].replace(":",""),re[4]):re[1]>59?G(re[1],re[2],0,re[4]):G(0,re[1],re[2],re[4]):null}function ie(){this.values=ee(null)}function he(Z,G,re,Te){var Ee=Te?Z.split(Te):[Z];for(var Ue in Ee)if("string"==typeof Ee[Ue]){var Y=Ee[Ue].split(re);2===Y.length&&G(Y[0],Y[1])}}function pe(Z,G,re){var Te=Z;function Ee(){var ge=ae(Z);if(null===ge)throw new B(B.Errors.BadTimeStamp,"Malformed timestamp: "+Te);return Z=Z.replace(/^[^\sa-zA-Z-]+/,""),ge}function Y(){Z=Z.replace(/^\s+/,"")}if(Y(),G.startTime=Ee(),Y(),"--\x3e"!==Z.substr(0,3))throw new B(B.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+Te);Z=Z.substr(3),Y(),G.endTime=Ee(),Y(),function(ge,Pe){var Ge=new ie;he(ge,function(Me,qe){switch(Me){case"region":for(var ot=re.length-1;ot>=0;ot--)if(re[ot].id===qe){Ge.set(Me,re[ot].region);break}break;case"vertical":Ge.alt(Me,qe,["rl","lr"]);break;case"line":var kt=qe.split(","),Ht=kt[0];Ge.integer(Me,Ht),Ge.percent(Me,Ht)&&Ge.set("snapToLines",!1),Ge.alt(Me,Ht,["auto"]),2===kt.length&&Ge.alt("lineAlign",kt[1],["start","center","end"]);break;case"position":kt=qe.split(","),Ge.percent(Me,kt[0]),2===kt.length&&Ge.alt("positionAlign",kt[1],["start","center","end"]);break;case"size":Ge.percent(Me,qe);break;case"align":Ge.alt(Me,qe,["start","center","end","left","right"])}},/:/,/\s/),Pe.region=Ge.get("region",null),Pe.vertical=Ge.get("vertical","");try{Pe.line=Ge.get("line","auto")}catch(Me){}Pe.lineAlign=Ge.get("lineAlign","start"),Pe.snapToLines=Ge.get("snapToLines",!0),Pe.size=Ge.get("size",100);try{Pe.align=Ge.get("align","center")}catch(Me){Pe.align=Ge.get("align","middle")}try{Pe.position=Ge.get("position","auto")}catch(Me){Pe.position=Ge.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Pe.align)}Pe.positionAlign=Ge.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Pe.align)}(Z,G)}(B.prototype=ee(Error.prototype)).constructor=B,B.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ie.prototype={set:function(Z,G){!this.get(Z)&&""!==G&&(this.values[Z]=G)},get:function(Z,G,re){return re?this.has(Z)?this.values[Z]:G[re]:this.has(Z)?this.values[Z]:G},has:function(Z){return Z in this.values},alt:function(Z,G,re){for(var Te=0;Te<re.length;++Te)if(G===re[Te]){this.set(Z,G);break}},integer:function(Z,G){/^-?\d+$/.test(G)&&this.set(Z,parseInt(G,10))},percent:function(Z,G){return!!(G.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(G=parseFloat(G),G>=0&&G<=100))&&(this.set(Z,G),!0)}};var ce=d.createElement&&d.createElement("textarea"),fe={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Q={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},ue={v:"title",lang:"lang"},ne={rt:"ruby"};function et(Z,G){function re(){if(!G)return null;var Pt,Lt=G.match(/^([^<]*)(<[^>]*>?)?/);return G=G.substr((Pt=Lt[1]?Lt[1]:Lt[2]).length),Pt}function Te(Ht){return ce.innerHTML=Ht,Ht=ce.textContent,ce.textContent="",Ht}function Ue(Ht,Lt){var Pt=fe[Ht];if(!Pt)return null;var Yn=Z.document.createElement(Pt),pn=ue[Ht];return pn&&Lt&&(Yn[pn]=Lt.trim()),Yn}for(var Pe,Y=Z.document.createElement("div"),ge=Y,Ge=[];null!==(Pe=re());)if("<"!==Pe[0])ge.appendChild(Z.document.createTextNode(Te(Pe)));else{if("/"===Pe[1]){Ge.length&&Ge[Ge.length-1]===Pe.substr(2).replace(">","")&&(Ge.pop(),ge=ge.parentNode);continue}var qe,Me=ae(Pe.substr(1,Pe.length-2));if(Me){qe=Z.document.createProcessingInstruction("timestamp",Me),ge.appendChild(qe);continue}var ot=Pe.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ot||!(qe=Ue(ot[1],ot[3]))||ne[(Lt=qe).localName]&&ne[Lt.localName]!==ge.localName)continue;if(ot[2]){var kt=ot[2].split(".");kt.forEach(function(Ht){var Lt=/^bg_/.test(Ht),Pt=Lt?Ht.slice(3):Ht;Q.hasOwnProperty(Pt)&&(qe.style[Lt?"background-color":"color"]=Q[Pt])}),qe.className=kt.join(" ")}Ge.push(ot[1]),ge.appendChild(qe),ge=qe}var Lt;return Y}var Ze=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function rt(Z){for(var G=0;G<Ze.length;G++){var re=Ze[G];if(Z>=re[0]&&Z<=re[1])return!0}return!1}function St(Z){var G=[],re="";if(!Z||!Z.childNodes)return"ltr";function Ee(ge,Pe){for(var Ge=Pe.childNodes.length-1;Ge>=0;Ge--)ge.push(Pe.childNodes[Ge])}function Ue(ge){if(!ge||!ge.length)return null;var Pe=ge.pop(),Ge=Pe.textContent||Pe.innerText;if(Ge){var Me=Ge.match(/^.*(\n|\r)/);return Me?(ge.length=0,Me[0]):Ge}return"ruby"===Pe.tagName?Ue(ge):Pe.childNodes?(Ee(ge,Pe),Ue(ge)):void 0}for(Ee(G,Z);re=Ue(G);)for(var Y=0;Y<re.length;Y++)if(rt(re.charCodeAt(Y)))return"rtl";return"ltr"}function le(){}function Ie(Z,G,re){le.call(this),this.cue=G,this.cueDiv=et(Z,G.text);var Te={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===G.vertical?"horizontal-tb":"lr"===G.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Te,this.cueDiv),this.div=Z.document.createElement("div"),Te={direction:St(this.cueDiv),writingMode:""===G.vertical?"horizontal-tb":"lr"===G.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===G.align?"center":G.align,font:re.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Te),this.div.appendChild(this.cueDiv);var Ee=0;switch(G.positionAlign){case"start":Ee=G.position;break;case"center":Ee=G.position-G.size/2;break;case"end":Ee=G.position-G.size}this.applyStyles(""===G.vertical?{left:this.formatStyle(Ee,"%"),width:this.formatStyle(G.size,"%")}:{top:this.formatStyle(Ee,"%"),height:this.formatStyle(G.size,"%")}),this.move=function(Ue){this.applyStyles({top:this.formatStyle(Ue.top,"px"),bottom:this.formatStyle(Ue.bottom,"px"),left:this.formatStyle(Ue.left,"px"),right:this.formatStyle(Ue.right,"px"),height:this.formatStyle(Ue.height,"px"),width:this.formatStyle(Ue.width,"px")})}}function Ve(Z){var G,re,Te,Ee;if(Z.div){re=Z.div.offsetHeight,Te=Z.div.offsetWidth,Ee=Z.div.offsetTop;var Ue=(Ue=Z.div.childNodes)&&(Ue=Ue[0])&&Ue.getClientRects&&Ue.getClientRects();Z=Z.div.getBoundingClientRect(),G=Ue?Math.max(Ue[0]&&Ue[0].height||0,Z.height/Ue.length):0}this.left=Z.left,this.right=Z.right,this.top=Z.top||Ee,this.height=Z.height||re,this.bottom=Z.bottom||Ee+(Z.height||re),this.width=Z.width||Te,this.lineHeight=void 0!==G?G:Z.lineHeight}function He(Z,G,re,Te){var Ue=new Ve(G),Y=G.cue,ge=function(Z){if("number"==typeof Z.line&&(Z.snapToLines||Z.line>=0&&Z.line<=100))return Z.line;if(!Z.track||!Z.track.textTrackList||!Z.track.textTrackList.mediaElement)return-1;for(var G=Z.track,re=G.textTrackList,Te=0,Ee=0;Ee<re.length&&re[Ee]!==G;Ee++)"showing"===re[Ee].mode&&Te++;return-1*++Te}(Y),Pe=[];if(Y.snapToLines){var Ge;switch(Y.vertical){case"":Pe=["+y","-y"],Ge="height";break;case"rl":Pe=["+x","-x"],Ge="width";break;case"lr":Pe=["-x","+x"],Ge="width"}var Me=Ue.lineHeight,qe=Me*Math.round(ge),ot=re[Ge]+Me,kt=Pe[0];Math.abs(qe)>ot&&(qe=qe<0?-1:1,qe*=Math.ceil(ot/Me)*Me),ge<0&&(qe+=""===Y.vertical?re.height:re.width,Pe=Pe.reverse()),Ue.move(kt,qe)}else{var Ht=Ue.lineHeight/re.height*100;switch(Y.lineAlign){case"center":ge-=Ht/2;break;case"end":ge-=Ht}switch(Y.vertical){case"":G.applyStyles({top:G.formatStyle(ge,"%")});break;case"rl":G.applyStyles({left:G.formatStyle(ge,"%")});break;case"lr":G.applyStyles({right:G.formatStyle(ge,"%")})}Pe=["+y","-x","+x","-y"],Ue=new Ve(G)}var Lt=function(Pt,Yn){for(var pn,On=new Ve(Pt),sn=1,Cn=0;Cn<Yn.length;Cn++){for(;Pt.overlapsOppositeAxis(re,Yn[Cn])||Pt.within(re)&&Pt.overlapsAny(Te);)Pt.move(Yn[Cn]);if(Pt.within(re))return Pt;var Di=Pt.intersectPercentage(re);sn>Di&&(pn=new Ve(Pt),sn=Di),Pt=new Ve(On)}return pn||On}(Ue,Pe);G.move(Lt.toCSSCompatValues(re))}function Je(){}le.prototype.applyStyles=function(Z,G){for(var re in G=G||this.div,Z)Z.hasOwnProperty(re)&&(G.style[re]=Z[re])},le.prototype.formatStyle=function(Z,G){return 0===Z?0:Z+G},(Ie.prototype=ee(le.prototype)).constructor=Ie,Ve.prototype.move=function(Z,G){switch(G=void 0!==G?G:this.lineHeight,Z){case"+x":this.left+=G,this.right+=G;break;case"-x":this.left-=G,this.right-=G;break;case"+y":this.top+=G,this.bottom+=G;break;case"-y":this.top-=G,this.bottom-=G}},Ve.prototype.overlaps=function(Z){return this.left<Z.right&&this.right>Z.left&&this.top<Z.bottom&&this.bottom>Z.top},Ve.prototype.overlapsAny=function(Z){for(var G=0;G<Z.length;G++)if(this.overlaps(Z[G]))return!0;return!1},Ve.prototype.within=function(Z){return this.top>=Z.top&&this.bottom<=Z.bottom&&this.left>=Z.left&&this.right<=Z.right},Ve.prototype.overlapsOppositeAxis=function(Z,G){switch(G){case"+x":return this.left<Z.left;case"-x":return this.right>Z.right;case"+y":return this.top<Z.top;case"-y":return this.bottom>Z.bottom}},Ve.prototype.intersectPercentage=function(Z){return Math.max(0,Math.min(this.right,Z.right)-Math.max(this.left,Z.left))*Math.max(0,Math.min(this.bottom,Z.bottom)-Math.max(this.top,Z.top))/(this.height*this.width)},Ve.prototype.toCSSCompatValues=function(Z){return{top:this.top-Z.top,bottom:Z.bottom-this.bottom,left:this.left-Z.left,right:Z.right-this.right,height:this.height,width:this.width}},Ve.getSimpleBoxPosition=function(Z){var G=Z.div?Z.div.offsetHeight:Z.tagName?Z.offsetHeight:0,re=Z.div?Z.div.offsetWidth:Z.tagName?Z.offsetWidth:0,Te=Z.div?Z.div.offsetTop:Z.tagName?Z.offsetTop:0;return{left:(Z=Z.div?Z.div.getBoundingClientRect():Z.tagName?Z.getBoundingClientRect():Z).left,right:Z.right,top:Z.top||Te,height:Z.height||G,bottom:Z.bottom||Te+(Z.height||G),width:Z.width||re}},Je.StringDecoder=function(){return{decode:function(Z){if(!Z)return"";if("string"!=typeof Z)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Z))}}},Je.convertCueToDOMTree=function(Z,G){return Z&&G?et(Z,G):null},Je.processCues=function(Z,G,re){if(!Z||!G||!re)return null;for(;re.firstChild;)re.removeChild(re.firstChild);var Te=Z.document.createElement("div");if(Te.style.position="absolute",Te.style.left="0",Te.style.right="0",Te.style.top="0",Te.style.bottom="0",Te.style.margin="1.5%",re.appendChild(Te),function(Me){for(var qe=0;qe<Me.length;qe++)if(Me[qe].hasBeenReset||!Me[qe].displayState)return!0;return!1}(G)){var Y=[],ge=Ve.getSimpleBoxPosition(Te),Ge={font:Math.round(.05*ge.height*100)/100+"px sans-serif"};!function(){for(var Me,qe,ot=0;ot<G.length;ot++)Me=new Ie(Z,qe=G[ot],Ge),Te.appendChild(Me.div),He(0,Me,ge,Y),qe.displayState=Me.div,Y.push(Ve.getSimpleBoxPosition(Me))}()}else for(var Ue=0;Ue<G.length;Ue++)Te.appendChild(G[Ue].displayState)},(Je.Parser=function(Z,G,re){re||(re=G,G={}),G||(G={}),this.window=Z,this.vttjs=G,this.state="INITIAL",this.buffer="",this.decoder=re||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(Z){if(!(Z instanceof B))throw Z;this.onparsingerror&&this.onparsingerror(Z)},parse:function(Z){var Me,G=this;function re(){for(var Me=G.buffer,qe=0;qe<Me.length&&"\r"!==Me[qe]&&"\n"!==Me[qe];)++qe;var ot=Me.substr(0,qe);return"\r"===Me[qe]&&++qe,"\n"===Me[qe]&&++qe,G.buffer=Me.substr(qe),ot}Z&&(G.buffer+=G.decoder.decode(Z,{stream:!0}));try{var Y;if("INITIAL"===G.state){if(!/\r\n|\n/.test(G.buffer))return this;var ge=(Y=re()).match(/^WEBVTT([ \t].*)?$/);if(!ge||!ge[0])throw new B(B.Errors.BadSignature);G.state="HEADER"}for(var Pe=!1;G.buffer;){if(!/\r\n|\n/.test(G.buffer))return this;switch(Pe?Pe=!1:Y=re(),G.state){case"HEADER":/:/.test(Y)?(Me=Y).match(/X-TIMESTAMP-MAP/)?he(Me,function(qe,ot){"X-TIMESTAMP-MAP"===qe&&function(Me){var qe=new ie;he(Me,function(ot,kt){switch(ot){case"MPEGT":qe.integer(ot+"S",kt);break;case"LOCA":qe.set(ot+"L",ae(kt))}},/[^\d]:/,/,/),G.ontimestampmap&&G.ontimestampmap({MPEGTS:qe.get("MPEGTS"),LOCAL:qe.get("LOCAL")})}(ot)},/=/):he(Me,function(qe,ot){"Region"===qe&&function(Me){var qe=new ie;if(he(Me,function(kt,Ht){switch(kt){case"id":qe.set(kt,Ht);break;case"width":qe.percent(kt,Ht);break;case"lines":qe.integer(kt,Ht);break;case"regionanchor":case"viewportanchor":var Lt=Ht.split(",");if(2!==Lt.length)break;var Pt=new ie;if(Pt.percent("x",Lt[0]),Pt.percent("y",Lt[1]),!Pt.has("x")||!Pt.has("y"))break;qe.set(kt+"X",Pt.get("x")),qe.set(kt+"Y",Pt.get("y"));break;case"scroll":qe.alt(kt,Ht,["up"])}},/=/,/\s/),qe.has("id")){var ot=new(G.vttjs.VTTRegion||G.window.VTTRegion);ot.width=qe.get("width",100),ot.lines=qe.get("lines",3),ot.regionAnchorX=qe.get("regionanchorX",0),ot.regionAnchorY=qe.get("regionanchorY",100),ot.viewportAnchorX=qe.get("viewportanchorX",0),ot.viewportAnchorY=qe.get("viewportanchorY",100),ot.scroll=qe.get("scroll",""),G.onregion&&G.onregion(ot),G.regionList.push({id:qe.get("id"),region:ot})}}(ot)},/:/):Y||(G.state="ID");continue;case"NOTE":Y||(G.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Y)){G.state="NOTE";break}if(!Y)continue;G.cue=new(G.vttjs.VTTCue||G.window.VTTCue)(0,0,"");try{G.cue.align="center"}catch(Me){G.cue.align="middle"}if(G.state="CUE",-1===Y.indexOf("--\x3e")){G.cue.id=Y;continue}case"CUE":try{pe(Y,G.cue,G.regionList)}catch(Me){G.reportOrThrowError(Me),G.cue=null,G.state="BADCUE";continue}G.state="CUETEXT";continue;case"CUETEXT":var Ge=-1!==Y.indexOf("--\x3e");if(!Y||Ge&&(Pe=!0)){G.oncue&&G.oncue(G.cue),G.cue=null,G.state="ID";continue}G.cue.text&&(G.cue.text+="\n"),G.cue.text+=Y.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":Y||(G.state="ID");continue}}}catch(Me){G.reportOrThrowError(Me),"CUETEXT"===G.state&&G.cue&&G.oncue&&G.oncue(G.cue),G.cue=null,G.state="INITIAL"===G.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var Z=this;try{if(Z.buffer+=Z.decoder.decode(),(Z.cue||"HEADER"===Z.state)&&(Z.buffer+="\n\n",Z.parse()),"INITIAL"===Z.state)throw new B(B.Errors.BadSignature)}catch(G){Z.reportOrThrowError(G)}return Z.onflush&&Z.onflush(),this}},Ye.exports=Je},7772:Ye=>{var U={"":1,lr:1,rl:1},d={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function B(ie){return"string"==typeof ie&&!!d[ie.toLowerCase()]&&ie.toLowerCase()}function ae(ie,he,pe){this.hasBeenReset=!1;var ce="",fe=!1,Q=ie,ue=he,ne=pe,et=null,Ze="",rt=!0,St="auto",ye="start",le="auto",Ie="auto",Ve=100,He="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return ce},set:function(Je){ce=""+Je}},pauseOnExit:{enumerable:!0,get:function(){return fe},set:function(Je){fe=!!Je}},startTime:{enumerable:!0,get:function(){return Q},set:function(Je){if("number"!=typeof Je)throw new TypeError("Start time must be set to a number.");Q=Je,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return ue},set:function(Je){if("number"!=typeof Je)throw new TypeError("End time must be set to a number.");ue=Je,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return ne},set:function(Je){ne=""+Je,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return et},set:function(Je){et=Je,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Ze},set:function(Je){var Ke=function(ie){return"string"==typeof ie&&!!U[ie.toLowerCase()]&&ie.toLowerCase()}(Je);if(!1===Ke)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Ze=Ke,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return rt},set:function(Je){rt=!!Je,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return St},set:function(Je){if("number"!=typeof Je&&"auto"!==Je)throw new SyntaxError("Line: an invalid number or illegal string was specified.");St=Je,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return ye},set:function(Je){var Ke=B(Je);Ke?(ye=Ke,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return le},set:function(Je){if(Je<0||Je>100)throw new Error("Position must be between 0 and 100.");le=Je,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Ie},set:function(Je){var Ke=B(Je);Ke?(Ie=Ke,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Ve},set:function(Je){if(Je<0||Je>100)throw new Error("Size must be between 0 and 100.");Ve=Je,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return He},set:function(Je){var Ke=B(Je);if(!Ke)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");He=Ke,this.hasBeenReset=!0}}}),this.displayState=void 0}ae.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Ye.exports=ae},4348:Ye=>{var _e={"":!0,up:!0};function d(B){return"number"==typeof B&&B>=0&&B<=100}Ye.exports=function(){var B=100,ae=3,ie=0,he=100,pe=0,ce=100,fe="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return B},set:function(Q){if(!d(Q))throw new Error("Width must be between 0 and 100.");B=Q}},lines:{enumerable:!0,get:function(){return ae},set:function(Q){if("number"!=typeof Q)throw new TypeError("Lines must be set to a number.");ae=Q}},regionAnchorY:{enumerable:!0,get:function(){return he},set:function(Q){if(!d(Q))throw new Error("RegionAnchorX must be between 0 and 100.");he=Q}},regionAnchorX:{enumerable:!0,get:function(){return ie},set:function(Q){if(!d(Q))throw new Error("RegionAnchorY must be between 0 and 100.");ie=Q}},viewportAnchorY:{enumerable:!0,get:function(){return ce},set:function(Q){if(!d(Q))throw new Error("ViewportAnchorY must be between 0 and 100.");ce=Q}},viewportAnchorX:{enumerable:!0,get:function(){return pe},set:function(Q){if(!d(Q))throw new Error("ViewportAnchorX must be between 0 and 100.");pe=Q}},scroll:{enumerable:!0,get:function(){return fe},set:function(Q){var ue=function(B){return"string"==typeof B&&!!_e[B.toLowerCase()]&&B.toLowerCase()}(Q);!1===ue?console.warn("Scroll: an invalid or illegal string was specified."):fe=ue}}})}},6907:(Ye,_e,U)=>{"use strict";var d=U(3668);let ee=null;function B(){return ee}const pe=new d.OlP("DocumentToken");let ce=(()=>{class r{historyGo(t){throw new Error("Not implemented")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=d.Yz7({token:r,factory:function(){return(0,d.LFG)(ue)},providedIn:"platform"}),r})();const Q=new d.OlP("Location Initialized");let ue=(()=>{class r extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(t){const n=B().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=B().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,i){ne()?this._history.pushState(t,n,i):this.location.hash=i}replaceState(t,n,i){ne()?this._history.replaceState(t,n,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(pe))},r.\u0275prov=d.Yz7({token:r,factory:function(){return new ue((0,d.LFG)(pe))},providedIn:"platform"}),r})();function ne(){return!!window.history.pushState}function Ze(r,e){if(0==r.length)return e;if(0==e.length)return r;let t=0;return r.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?r+e.substring(1):1==t?r+e:r+"/"+e}function rt(r){const e=r.match(/#|\?|$/),t=e&&e.index||r.length;return r.slice(0,t-("/"===r[t-1]?1:0))+r.slice(t)}function St(r){return r&&"?"!==r[0]?"?"+r:r}let ye=(()=>{class r{historyGo(t){throw new Error("Not implemented")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=d.Yz7({token:r,factory:function(){return function(r){const e=(0,d.LFG)(pe).location;return new Ve((0,d.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),r})();const Ie=new d.OlP("appBaseHref");let Ve=(()=>{class r extends ye{constructor(t,n){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ze(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+St(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${n}${i}`:n}pushState(t,n,i,s){const o=this.prepareExternalUrl(i+St(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,i,s){const o=this.prepareExternalUrl(i+St(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var n,i;null==(i=(n=this._platformLocation).historyGo)||i.call(n,t)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(ce),d.LFG(Ie,8))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})(),He=(()=>{class r extends ye{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=Ze(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,i,s){let o=this.prepareExternalUrl(i+St(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,i,s){let o=this.prepareExternalUrl(i+St(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var n,i;null==(i=(n=this._platformLocation).historyGo)||i.call(n,t)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(ce),d.LFG(Ie,8))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})(),Je=(()=>{class r{constructor(t,n){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=rt(Tt(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+St(n))}normalize(t){return r.stripTrailingSlash(function(r,e){return r&&e.startsWith(r)?e.substring(r.length):e}(this._baseHref,Tt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,n="",i=null){this._platformStrategy.pushState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+St(n)),i)}replaceState(t,n="",i=null){this._platformStrategy.replaceState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+St(n)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var n,i;null==(i=(n=this._platformStrategy).historyGo)||i.call(n,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(i=>i(t,n))}subscribe(t,n,i){return this._subject.subscribe({next:t,error:n,complete:i})}}return r.normalizeQueryParams=St,r.joinWithSlash=Ze,r.stripTrailingSlash=rt,r.\u0275fac=function(t){return new(t||r)(d.LFG(ye),d.LFG(ce))},r.\u0275prov=d.Yz7({token:r,factory:function(){return new Je((0,d.LFG)(ye),(0,d.LFG)(ce))},providedIn:"root"}),r})();function Tt(r){return r.replace(/\/index.html$/,"")}var G=(()=>((G=G||{})[G.Decimal=0]="Decimal",G[G.Percent=1]="Percent",G[G.Currency=2]="Currency",G[G.Scientific=3]="Scientific",G))(),re=(()=>((re=re||{})[re.Zero=0]="Zero",re[re.One=1]="One",re[re.Two=2]="Two",re[re.Few=3]="Few",re[re.Many=4]="Many",re[re.Other=5]="Other",re))(),Te=(()=>((Te=Te||{})[Te.Format=0]="Format",Te[Te.Standalone=1]="Standalone",Te))(),Ee=(()=>((Ee=Ee||{})[Ee.Narrow=0]="Narrow",Ee[Ee.Abbreviated=1]="Abbreviated",Ee[Ee.Wide=2]="Wide",Ee[Ee.Short=3]="Short",Ee))(),Ue=(()=>((Ue=Ue||{})[Ue.Short=0]="Short",Ue[Ue.Medium=1]="Medium",Ue[Ue.Long=2]="Long",Ue[Ue.Full=3]="Full",Ue))(),Y=(()=>((Y=Y||{})[Y.Decimal=0]="Decimal",Y[Y.Group=1]="Group",Y[Y.List=2]="List",Y[Y.PercentSign=3]="PercentSign",Y[Y.PlusSign=4]="PlusSign",Y[Y.MinusSign=5]="MinusSign",Y[Y.Exponential=6]="Exponential",Y[Y.SuperscriptingExponent=7]="SuperscriptingExponent",Y[Y.PerMille=8]="PerMille",Y[Y.Infinity=9]="Infinity",Y[Y.NaN=10]="NaN",Y[Y.TimeSeparator=11]="TimeSeparator",Y[Y.CurrencyDecimal=12]="CurrencyDecimal",Y[Y.CurrencyGroup=13]="CurrencyGroup",Y))();function Lt(r,e){return In((0,d.cg1)(r)[d.wAp.DateFormat],e)}function Pt(r,e){return In((0,d.cg1)(r)[d.wAp.TimeFormat],e)}function Yn(r,e){return In((0,d.cg1)(r)[d.wAp.DateTimeFormat],e)}function pn(r,e){const t=(0,d.cg1)(r),n=t[d.wAp.NumberSymbols][e];if(void 0===n){if(e===Y.CurrencyDecimal)return t[d.wAp.NumberSymbols][Y.Decimal];if(e===Y.CurrencyGroup)return t[d.wAp.NumberSymbols][Y.Group]}return n}const ki=d.kL8;function ht(r){if(!r[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${r[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function In(r,e){for(let t=e;t>-1;t--)if(void 0!==r[t])return r[t];throw new Error("Locale data API: locale data undefined")}function Yr(r){const[e,t]=r.split(":");return{hours:+e,minutes:+t}}const vn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yn={},ii=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Mn=(()=>((Mn=Mn||{})[Mn.Short=0]="Short",Mn[Mn.ShortGMT=1]="ShortGMT",Mn[Mn.Long=2]="Long",Mn[Mn.Extended=3]="Extended",Mn))(),jt=(()=>((jt=jt||{})[jt.FullYear=0]="FullYear",jt[jt.Month=1]="Month",jt[jt.Date=2]="Date",jt[jt.Hours=3]="Hours",jt[jt.Minutes=4]="Minutes",jt[jt.Seconds=5]="Seconds",jt[jt.FractionalSeconds=6]="FractionalSeconds",jt[jt.Day=7]="Day",jt))(),Yt=(()=>((Yt=Yt||{})[Yt.DayPeriods=0]="DayPeriods",Yt[Yt.Days=1]="Days",Yt[Yt.Months=2]="Months",Yt[Yt.Eras=3]="Eras",Yt))();function pu(r,e,t,n){let i=function(r){if(rs(r))return r;if("number"==typeof r&&!isNaN(r))return new Date(r);if("string"==typeof r){if(r=r.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(r)){const[i,s=1,o=1]=r.split("-").map(c=>+c);return js(i,s-1,o)}const t=parseFloat(r);if(!isNaN(r-t))return new Date(t);let n;if(n=r.match(vn))return function(r){const e=new Date(0);let t=0,n=0;const i=r[8]?e.setUTCFullYear:e.setFullYear,s=r[8]?e.setUTCHours:e.setHours;r[9]&&(t=Number(r[9]+r[10]),n=Number(r[9]+r[11])),i.call(e,Number(r[1]),Number(r[2])-1,Number(r[3]));const o=Number(r[4]||0)-t,c=Number(r[5]||0)-n,f=Number(r[6]||0),m=Math.floor(1e3*parseFloat("0."+(r[7]||0)));return s.call(e,o,c,f,m),e}(n)}const e=new Date(r);if(!rs(e))throw new Error(`Unable to convert "${r}" into a date`);return e}(r);e=Nn(t,e)||e;let c,o=[];for(;e;){if(c=ii.exec(e),!c){o.push(e);break}{o=o.concat(c.slice(1));const _=o.pop();if(!_)break;e=_}}let f=i.getTimezoneOffset();n&&(f=bn(n,f),i=function(r,e,t){const i=r.getTimezoneOffset();return function(r,e){return(r=new Date(r.getTime())).setMinutes(r.getMinutes()+e),r}(r,-1*(bn(e,i)-i))}(i,n));let m="";return o.forEach(_=>{const w=function(r){if(We[r])return We[r];let e;switch(r){case"G":case"GG":case"GGG":e=ke(Yt.Eras,Ee.Abbreviated);break;case"GGGG":e=ke(Yt.Eras,Ee.Wide);break;case"GGGGG":e=ke(Yt.Eras,Ee.Narrow);break;case"y":e=xe(jt.FullYear,1,0,!1,!0);break;case"yy":e=xe(jt.FullYear,2,0,!0,!0);break;case"yyy":e=xe(jt.FullYear,3,0,!1,!0);break;case"yyyy":e=xe(jt.FullYear,4,0,!1,!0);break;case"Y":e=De(1);break;case"YY":e=De(2,!0);break;case"YYY":e=De(3);break;case"YYYY":e=De(4);break;case"M":case"L":e=xe(jt.Month,1,1);break;case"MM":case"LL":e=xe(jt.Month,2,1);break;case"MMM":e=ke(Yt.Months,Ee.Abbreviated);break;case"MMMM":e=ke(Yt.Months,Ee.Wide);break;case"MMMMM":e=ke(Yt.Months,Ee.Narrow);break;case"LLL":e=ke(Yt.Months,Ee.Abbreviated,Te.Standalone);break;case"LLLL":e=ke(Yt.Months,Ee.Wide,Te.Standalone);break;case"LLLLL":e=ke(Yt.Months,Ee.Narrow,Te.Standalone);break;case"w":e=X(1);break;case"ww":e=X(2);break;case"W":e=X(1,!0);break;case"d":e=xe(jt.Date,1);break;case"dd":e=xe(jt.Date,2);break;case"c":case"cc":e=xe(jt.Day,1);break;case"ccc":e=ke(Yt.Days,Ee.Abbreviated,Te.Standalone);break;case"cccc":e=ke(Yt.Days,Ee.Wide,Te.Standalone);break;case"ccccc":e=ke(Yt.Days,Ee.Narrow,Te.Standalone);break;case"cccccc":e=ke(Yt.Days,Ee.Short,Te.Standalone);break;case"E":case"EE":case"EEE":e=ke(Yt.Days,Ee.Abbreviated);break;case"EEEE":e=ke(Yt.Days,Ee.Wide);break;case"EEEEE":e=ke(Yt.Days,Ee.Narrow);break;case"EEEEEE":e=ke(Yt.Days,Ee.Short);break;case"a":case"aa":case"aaa":e=ke(Yt.DayPeriods,Ee.Abbreviated);break;case"aaaa":e=ke(Yt.DayPeriods,Ee.Wide);break;case"aaaaa":e=ke(Yt.DayPeriods,Ee.Narrow);break;case"b":case"bb":case"bbb":e=ke(Yt.DayPeriods,Ee.Abbreviated,Te.Standalone,!0);break;case"bbbb":e=ke(Yt.DayPeriods,Ee.Wide,Te.Standalone,!0);break;case"bbbbb":e=ke(Yt.DayPeriods,Ee.Narrow,Te.Standalone,!0);break;case"B":case"BB":case"BBB":e=ke(Yt.DayPeriods,Ee.Abbreviated,Te.Format,!0);break;case"BBBB":e=ke(Yt.DayPeriods,Ee.Wide,Te.Format,!0);break;case"BBBBB":e=ke(Yt.DayPeriods,Ee.Narrow,Te.Format,!0);break;case"h":e=xe(jt.Hours,1,-12);break;case"hh":e=xe(jt.Hours,2,-12);break;case"H":e=xe(jt.Hours,1);break;case"HH":e=xe(jt.Hours,2);break;case"m":e=xe(jt.Minutes,1);break;case"mm":e=xe(jt.Minutes,2);break;case"s":e=xe(jt.Seconds,1);break;case"ss":e=xe(jt.Seconds,2);break;case"S":e=xe(jt.FractionalSeconds,1);break;case"SS":e=xe(jt.FractionalSeconds,2);break;case"SSS":e=xe(jt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ze(Mn.Short);break;case"ZZZZZ":e=ze(Mn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ze(Mn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ze(Mn.Long);break;default:return null}return We[r]=e,e}(_);m+=w?w(i,t,f):"''"===_?"'":_.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function js(r,e,t){const n=new Date(0);return n.setFullYear(r,e,t),n.setHours(0,0,0),n}function Nn(r,e){const t=function(r){return(0,d.cg1)(r)[d.wAp.LocaleId]}(r);if(yn[t]=yn[t]||{},yn[t][e])return yn[t][e];let n="";switch(e){case"shortDate":n=Lt(r,Ue.Short);break;case"mediumDate":n=Lt(r,Ue.Medium);break;case"longDate":n=Lt(r,Ue.Long);break;case"fullDate":n=Lt(r,Ue.Full);break;case"shortTime":n=Pt(r,Ue.Short);break;case"mediumTime":n=Pt(r,Ue.Medium);break;case"longTime":n=Pt(r,Ue.Long);break;case"fullTime":n=Pt(r,Ue.Full);break;case"short":const i=Nn(r,"shortTime"),s=Nn(r,"shortDate");n=ln(Yn(r,Ue.Short),[i,s]);break;case"medium":const o=Nn(r,"mediumTime"),c=Nn(r,"mediumDate");n=ln(Yn(r,Ue.Medium),[o,c]);break;case"long":const f=Nn(r,"longTime"),m=Nn(r,"longDate");n=ln(Yn(r,Ue.Long),[f,m]);break;case"full":const _=Nn(r,"fullTime"),w=Nn(r,"fullDate");n=ln(Yn(r,Ue.Full),[_,w])}return n&&(yn[t][e]=n),n}function ln(r,e){return e&&(r=r.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),r}function Qr(r,e,t="-",n,i){let s="";(r<0||i&&r<=0)&&(i?r=1-r:(r=-r,s=t));let o=String(r);for(;o.length<e;)o="0"+o;return n&&(o=o.substr(o.length-e)),s+o}function xe(r,e,t=0,n=!1,i=!1){return function(s,o){let c=function(r,e){switch(r){case jt.FullYear:return e.getFullYear();case jt.Month:return e.getMonth();case jt.Date:return e.getDate();case jt.Hours:return e.getHours();case jt.Minutes:return e.getMinutes();case jt.Seconds:return e.getSeconds();case jt.FractionalSeconds:return e.getMilliseconds();case jt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${r}".`)}}(r,s);if((t>0||c>-t)&&(c+=t),r===jt.Hours)0===c&&-12===t&&(c=12);else if(r===jt.FractionalSeconds)return function(r,e){return Qr(r,3).substr(0,e)}(c,e);const f=pn(o,Y.MinusSign);return Qr(c,e,f,n,i)}}function ke(r,e,t=Te.Format,n=!1){return function(i,s){return function(r,e,t,n,i,s){switch(t){case Yt.Months:return function(r,e,t){const n=(0,d.cg1)(r),s=In([n[d.wAp.MonthsFormat],n[d.wAp.MonthsStandalone]],e);return In(s,t)}(e,i,n)[r.getMonth()];case Yt.Days:return function(r,e,t){const n=(0,d.cg1)(r),s=In([n[d.wAp.DaysFormat],n[d.wAp.DaysStandalone]],e);return In(s,t)}(e,i,n)[r.getDay()];case Yt.DayPeriods:const o=r.getHours(),c=r.getMinutes();if(s){const m=function(r){const e=(0,d.cg1)(r);return ht(e),(e[d.wAp.ExtraData][2]||[]).map(n=>"string"==typeof n?Yr(n):[Yr(n[0]),Yr(n[1])])}(e),_=function(r,e,t){const n=(0,d.cg1)(r);ht(n);const s=In([n[d.wAp.ExtraData][0],n[d.wAp.ExtraData][1]],e)||[];return In(s,t)||[]}(e,i,n),w=m.findIndex(C=>{if(Array.isArray(C)){const[M,L]=C,V=o>=M.hours&&c>=M.minutes,H=o<L.hours||o===L.hours&&c<L.minutes;if(M.hours<L.hours){if(V&&H)return!0}else if(V||H)return!0}else if(C.hours===o&&C.minutes===c)return!0;return!1});if(-1!==w)return _[w]}return function(r,e,t){const n=(0,d.cg1)(r),s=In([n[d.wAp.DayPeriodsFormat],n[d.wAp.DayPeriodsStandalone]],e);return In(s,t)}(e,i,n)[o<12?0:1];case Yt.Eras:return function(r,e){return In((0,d.cg1)(r)[d.wAp.Eras],e)}(e,n)[r.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,r,e,t,n)}}function ze(r){return function(e,t,n){const i=-1*n,s=pn(t,Y.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(r){case Mn.Short:return(i>=0?"+":"")+Qr(o,2,s)+Qr(Math.abs(i%60),2,s);case Mn.ShortGMT:return"GMT"+(i>=0?"+":"")+Qr(o,1,s);case Mn.Long:return"GMT"+(i>=0?"+":"")+Qr(o,2,s)+":"+Qr(Math.abs(i%60),2,s);case Mn.Extended:return 0===n?"Z":(i>=0?"+":"")+Qr(o,2,s)+":"+Qr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${r}"`)}}}function K(r){return js(r.getFullYear(),r.getMonth(),r.getDate()+(4-r.getDay()))}function X(r,e=!1){return function(t,n){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=K(t),o=function(r){const e=js(r,0,1).getDay();return js(r,0,1+(e<=4?4:11)-e)}(s.getFullYear()),c=s.getTime()-o.getTime();i=1+Math.round(c/6048e5)}return Qr(i,r,pn(n,Y.MinusSign))}}function De(r,e=!1){return function(t,n){return Qr(K(t).getFullYear(),r,pn(n,Y.MinusSign),e)}}const We={};function bn(r,e){r=r.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+r)/6e4;return isNaN(t)?e:t}function rs(r){return r instanceof Date&&!isNaN(r.valueOf())}const Bn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ss(r){const e=parseInt(r);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+r);return e}class os{}let zn=(()=>{class r extends os{constructor(t){super(),this.locale=t}getPluralCategory(t,n){switch(ki(n||this.locale)(t)){case re.Zero:return"zero";case re.One:return"one";case re.Two:return"two";case re.Few:return"few";case re.Many:return"many";default:return"other"}}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(d.soG))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})(),si=(()=>{class r{constructor(t,n,i,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{n?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},r.\u0275dir=d.lG2({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class zu{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ia=(()=>{class r{constructor(t,n,i){this._viewContainer=t,this._template=n,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(n){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(r){return r.name||typeof r}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=[];t.forEachOperation((i,s,o)=>{if(null==i.previousIndex){const c=this._viewContainer.createEmbeddedView(this._template,new zu(null,this._ngForOf,-1,-1),null===o?void 0:o),f=new Zu(i,c);n.push(f)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const c=this._viewContainer.get(s);this._viewContainer.move(c,o);const f=new Zu(i,c);n.push(f)}});for(let i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const o=this._viewContainer.get(i);o.context.index=i,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,n){t.context.$implicit=n.item}static ngTemplateContextGuard(t,n){return!0}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},r.\u0275dir=d.lG2({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class Zu{constructor(e,t){this.record=e,this.view=t}}let Hi=(()=>{class r{constructor(t,n){this._viewContainer=t,this._context=new pc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.s_b),d.Y36(d.Rgc))},r.\u0275dir=d.lG2({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class pc{constructor(){this.$implicit=null,this.ngIf=null}}function oa(r,e){if(e&&!e.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function Bs(r,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,d.AaK)(r)}'`)}class mu{createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class fg{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}onDestroy(e){}}const hf=new fg,pg=new mu;let gc=(()=>{class r{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if((0,d.QGY)(t))return hf;if((0,d.F4k)(t))return pg;throw Bs(r,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.sBO,16))},r.\u0275pipe=d.Yjl({name:"async",type:r,pure:!1}),r})();const Ad=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Yu=(()=>{class r{constructor(t,n){this.locale=t,this.defaultTimezone=n}transform(t,n="mediumDate",i,s){var o;if(null==t||""===t||t!=t)return null;try{return pu(t,n,s||this.locale,null!=(o=null!=i?i:this.defaultTimezone)?o:void 0)}catch(c){throw Bs(r,c.message)}}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.soG,16),d.Y36(Ad,24))},r.\u0275pipe=d.Yjl({name:"date",type:r,pure:!0}),r})(),gf=(()=>{class r{transform(t){return JSON.stringify(t,null,2)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=d.Yjl({name:"json",type:r,pure:!1}),r})(),gg=(()=>{class r{constructor(t){this._locale=t}transform(t,n,i){if(!function(r){return!(null==r||""===r||r!=r)}(t))return null;i=i||this._locale;try{return function(r,e,t){return function(r,e,t,n,i,s,o=!1){let c="",f=!1;if(isFinite(r)){let m=function(r){let n,i,s,o,c,e=Math.abs(r)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(c=e.length))n=[0],i=1;else{for(c--;"0"===e.charAt(c);)c--;for(i-=s,n=[],o=0;s<=c;s++,o++)n[o]=Number(e.charAt(s))}return i>22&&(n=n.splice(0,21),t=i-1,i=1),{digits:n,exponent:t,integerLen:i}}(r);o&&(m=function(r){if(0===r.digits[0])return r;const e=r.digits.length-r.integerLen;return r.exponent?r.exponent+=2:(0===e?r.digits.push(0,0):1===e&&r.digits.push(0),r.integerLen+=2),r}(m));let _=e.minInt,w=e.minFrac,C=e.maxFrac;if(s){const be=s.match(Bn);if(null===be)throw new Error(`${s} is not a valid digit info`);const je=be[1],Ne=be[3],$e=be[5];null!=je&&(_=ss(je)),null!=Ne&&(w=ss(Ne)),null!=$e?C=ss($e):null!=Ne&&w>C&&(C=w)}!function(r,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=r.digits,i=n.length-r.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+r.integerLen,c=n[o];if(o>0){n.splice(Math.max(r.integerLen,o));for(let w=o;w<n.length;w++)n[w]=0}else{i=Math.max(0,i),r.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let w=1;w<o;w++)n[w]=0}if(c>=5)if(o-1<0){for(let w=0;w>o;w--)n.unshift(0),r.integerLen++;n.unshift(1),r.integerLen++}else n[o-1]++;for(;i<Math.max(0,s);i++)n.push(0);let f=0!==s;const m=e+r.integerLen,_=n.reduceRight(function(w,C,M,L){return L[M]=(C+=w)<10?C:C-10,f&&(0===L[M]&&M>=m?L.pop():f=!1),C>=10?1:0},0);_&&(n.unshift(_),r.integerLen++)}(m,w,C);let M=m.digits,L=m.integerLen;const V=m.exponent;let H=[];for(f=M.every(be=>!be);L<_;L++)M.unshift(0);for(;L<0;L++)M.unshift(0);L>0?H=M.splice(L,M.length):(H=M,M=[0]);const Se=[];for(M.length>=e.lgSize&&Se.unshift(M.splice(-e.lgSize,M.length).join(""));M.length>e.gSize;)Se.unshift(M.splice(-e.gSize,M.length).join(""));M.length&&Se.unshift(M.join("")),c=Se.join(pn(t,n)),H.length&&(c+=pn(t,i)+H.join("")),V&&(c+=pn(t,Y.Exponential)+"+"+V)}else c=pn(t,Y.Infinity);return c=r<0&&!f?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf,c}(r,function(r,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=r.split(";"),i=n[0],s=n[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],c=o[0],f=o[1]||"";t.posPre=c.substr(0,c.indexOf("#"));for(let _=0;_<f.length;_++){const w=f.charAt(_);"0"===w?t.minFrac=t.maxFrac=_+1:"#"===w?t.maxFrac=_+1:t.posSuf+=w}const m=c.split(",");if(t.gSize=m[1]?m[1].length:0,t.lgSize=m[2]||m[1]?(m[2]||m[1]).length:0,s){const _=i.length-t.posPre.length-t.posSuf.length,w=s.indexOf("#");t.negPre=s.substr(0,w).replace(/'/g,""),t.negSuf=s.substr(w+_).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function(r,e){return(0,d.cg1)(r)[d.wAp.NumberFormats][e]}(e,G.Percent),pn(e,Y.MinusSign)),e,Y.Group,Y.Decimal,t,!0).replace(new RegExp("%","g"),pn(e,Y.PercentSign))}(function(r){if("string"==typeof r&&!isNaN(Number(r)-parseFloat(r)))return Number(r);if("number"!=typeof r)throw new Error(`${r} is not a number`);return r}(t),i,n)}catch(s){throw Bs(r,s.message)}}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.soG,16))},r.\u0275pipe=d.Yjl({name:"percent",type:r,pure:!0}),r})();let _u=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({providers:[{provide:os,useClass:zn}]}),r})();function Pi(r){return"server"===r}let mg=(()=>{class r{}return r.\u0275prov=(0,d.Yz7)({token:r,providedIn:"root",factory:()=>new Ju((0,d.LFG)(pe),window)}),r})();class Ju{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(r,e){const t=r.getElementById(e)||r.getElementsByName(e)[0];if(t)return t;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ra(this.window.history)||Ra(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ra(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class Na extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var r;r=new Na,ee||(ee=r)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Gi=Gi||document.querySelector("base"),Gi?Gi.getAttribute("href"):null);return null==t?null:function(r){Rr=Rr||document.createElement("a"),Rr.setAttribute("href",r);const e=Rr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(r,e){e=encodeURIComponent(e);for(const t of r.split(";")){const n=t.indexOf("="),[i,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Rr,Gi=null;const La=new d.OlP("TRANSITION_ID"),$n=[{provide:d.ip1,useFactory:function(r,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const n=B(),i=e.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<i.length;s++)n.remove(i[s])})}},deps:[La,pe,d.zs3],multi:!0}];class Ao{static init(){(0,d.VLi)(new Ao)}addToWindow(e){d.dqk.getAngularTestability=(n,i=!0)=>{const s=e.findTestabilityInTree(n,i);if(null==s)throw new Error("Could not find testability for element.");return s},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(n=>{const i=d.dqk.getAllAngularTestabilities();let s=i.length,o=!1;const c=function(f){o=o||f,s--,0==s&&n(o)};i.forEach(function(f){f.whenStable(c)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?B().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let el=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();const ja=new d.OlP("EventManagerPlugins");let $i=(()=>{class r{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,i){return this._findPluginFor(n).addEventListener(t,n,i)}addGlobalEventListener(t,n,i){return this._findPluginFor(n).addGlobalEventListener(t,n,i)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(ja),d.LFG(d.R0b))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();class tl{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=B().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let la=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),n.add(i))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})(),Wt=(()=>{class r extends la{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(_c),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,i)=>{this._addStylesToHost(t,i,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_c))}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(pe))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();function _c(r){B().remove(r)}const nl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bu=/%COMP%/g;function Do(r,e,t){for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?Do(r,i,t):(i=i.replace(bu,r),t.push(i))}return t}function fr(r){return e=>{if("__ngUnwrap__"===e)return r;!1===r(e)&&(e.preventDefault(),e.returnValue=!1)}}let ca=(()=>{class r{constructor(t,n,i){this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new mi(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(n.id);return i||(i=new Rd(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Od(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const i=Do(n.id,n.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(t){return new(t||r)(d.LFG($i),d.LFG(Wt),d.LFG(d.AFp))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();class mi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(nl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const s=nl[i];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=nl[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,n,i&d.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fr(n)):this.eventManager.addEventListener(e,t,fr(n))}}class Rd extends mi{constructor(e,t,n,i){super(e),this.component=n;const s=Do(i+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(bu,i+"-"+n.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(bu,r)}(i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Od extends mi{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Do(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const c=document.createElement("style");c.textContent=s[o],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sl=(()=>{class r extends tl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,i){return t.addEventListener(n,i,!1),()=>this.removeEventListener(t,n,i)}removeEventListener(t,n,i){return t.removeEventListener(n,i)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(pe))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();const Ba=["alt","control","meta","shift"],Hs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ol={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},da={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let oo=(()=>{class r extends tl{constructor(t){super(t)}supports(t){return null!=r.parseEventName(t)}addEventListener(t,n,i){const s=r.parseEventName(n),o=r.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const s=r._normalizeKey(n.pop());let o="";if(Ba.forEach(f=>{const m=n.indexOf(f);m>-1&&(n.splice(m,1),o+=f+".")}),o+=s,0!=n.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static getEventFullKey(t){let n="",i=function(r){let e=r.key;if(null==e){if(e=r.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===r.location&&ol.hasOwnProperty(e)&&(e=ol[e]))}return Hs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ba.forEach(s=>{s!=i&&da[s](t)&&(n+=s+".")}),n+=i,n}static eventCallback(t,n,i){return s=>{r.getEventFullKey(s)===t&&i.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(pe))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();const Tu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function(){Na.makeCurrent(),Ao.init()},multi:!0},{provide:pe,useFactory:function(){return(0,d.RDi)(document),document},deps:[]}]),Sc=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function(){return new d.qLn},deps:[]},{provide:ja,useClass:sl,multi:!0,deps:[pe,d.R0b,d.Lbi]},{provide:ja,useClass:oo,multi:!0,deps:[pe]},{provide:ca,useClass:ca,deps:[$i,Wt,d.AFp]},{provide:d.FYo,useExisting:ca},{provide:la,useExisting:Wt},{provide:Wt,useClass:Wt,deps:[pe]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:$i,useClass:$i,deps:[ja,d.R0b]},{provide:class{},useClass:el,deps:[]}];let dl=(()=>{class r{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:r,providers:[{provide:d.AFp,useValue:t.appId},{provide:La,useExisting:d.AFp},$n]}}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(r,12))},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({providers:Sc,imports:[_u,d.hGG]}),r})();"undefined"!=typeof window&&window;let Va=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=d.Yz7({token:r,factory:function(t){let n=null;return n=t?new(t||r):d.LFG(bg),n},providedIn:"root"}),r})(),bg=(()=>{class r extends Va{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case d.q3G.NONE:return n;case d.q3G.HTML:return(0,d.qzn)(n,"HTML")?(0,d.z3N)(n):(0,d.EiD)(this._doc,String(n)).toString();case d.q3G.STYLE:return(0,d.qzn)(n,"Style")?(0,d.z3N)(n):n;case d.q3G.SCRIPT:if((0,d.qzn)(n,"Script"))return(0,d.z3N)(n);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.yhl)(n),(0,d.qzn)(n,"URL")?(0,d.z3N)(n):(0,d.mCW)(String(n));case d.q3G.RESOURCE_URL:if((0,d.qzn)(n,"ResourceURL"))return(0,d.z3N)(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(pe))},r.\u0275prov=d.Yz7({token:r,factory:function(t){let n=null;return n=t?new t:function(r){return new bg(r.get(pe))}(d.LFG(d.zs3)),n},providedIn:"root"}),r})();var qn=U(5947),Ha=U(7613);function $t(...r){const e=(0,Ha.yG)(r);return(0,qn.D)(r,e)}var ao=U(273);class Cs extends ao.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}var qi=U(8410);const{isArray:Su}=Array,{getPrototypeOf:Qv,prototype:vl,keys:kc}=Object;function Ga(r){if(1===r.length){const e=r[0];if(Su(e))return{args:e,keys:null};if(function(r){return r&&"object"==typeof r&&Qv(r)===vl}(e)){const t=kc(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:r,keys:null}}var ko=U(4623),un=U(4753);const{isArray:Tg}=Array;function Cu(r){return(0,un.U)(e=>function(r,e){return Tg(e)?r(...e):r(e)}(r,e))}function xu(r,e){return r.reduce((t,n,i)=>(t[n]=e[i],t),{})}var Sr=U(8889),Pc=U(8395);function Gs(...r){const e=(0,Ha.yG)(r),t=(0,Ha.jO)(r),{args:n,keys:i}=Ga(r);if(0===n.length)return(0,qn.D)([],e);const s=new qi.y(function(r,e,t=ko.y){return n=>{$s(e,()=>{const{length:i}=r,s=new Array(i);let o=i,c=i;for(let f=0;f<i;f++)$s(e,()=>{const m=(0,qn.D)(r[f],e);let _=!1;m.subscribe(new Sr.Q(n,w=>{s[f]=w,_||(_=!0,c--),c||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,i?o=>xu(i,o):ko.y));return t?s.pipe(Cu(t)):s}function $s(r,e,t){r?(0,Pc.f)(t,r,e):e()}const Iu=(0,U(4893).d)(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});var $a=U(5373);function Mc(...r){return(0,$a.J)(1)((0,qn.D)(r,(0,Ha.yG)(r)))}var Jr=U(9985);function ga(r){return new qi.y(e=>{(0,Jr.Xf)(r()).subscribe(e)})}var _l=U(5583),qa=U(7908),vi=U(9947);function lr(){return(0,vi.e)((r,e)=>{let t=null;r._refCount++;const n=new Sr.Q(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(t=null);const i=r._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});r.subscribe(n),n.closed||(t=r.connect())})}class Rc extends qi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qa.w0;const t=this.getSubject();e.add(this.source.subscribe(new Sr.Q(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qa.w0.EMPTY)}return e}refCount(){return lr()(this)}}function gr(r,e){return(0,vi.e)((t,n)=>{let i=null,s=0,o=!1;const c=()=>o&&!i&&n.complete();t.subscribe(new Sr.Q(n,f=>{null==i||i.unsubscribe();let m=0;const _=s++;(0,Jr.Xf)(r(f,_)).subscribe(i=new Sr.Q(n,w=>n.next(e?e(f,w,_,m++):w),()=>{i=null,c()}))},()=>{o=!0,c()}))})}var uo=U(9468);function qs(...r){const e=(0,Ha.yG)(r);return(0,vi.e)((t,n)=>{(e?Mc(r,t,e):Mc(r,t)).subscribe(n)})}function ma(r,e,t,n,i){return(s,o)=>{let c=t,f=e,m=0;s.subscribe(new Sr.Q(o,_=>{const w=m++;f=c?r(f,_,w):(c=!0,_),n&&o.next(f)},i&&(()=>{c&&o.next(f),o.complete()})))}}function lo(r,e){return(0,vi.e)(ma(r,e,arguments.length>=2,!0))}function ai(r,e){return(0,vi.e)((t,n)=>{let i=0;t.subscribe(new Sr.Q(n,s=>r.call(e,s,i++)&&n.next(s)))})}function co(r){return(0,vi.e)((e,t)=>{let s,n=null,i=!1;n=e.subscribe(new Sr.Q(t,void 0,void 0,o=>{s=(0,Jr.Xf)(r(o,co(r)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,s.subscribe(t))})}var Xn=U(5724),wg=U(5044);function Po(r,e){return(0,wg.m)(e)?(0,Xn.z)(r,e,1):(0,Xn.z)(r,1)}function Jn(r){return r<=0?()=>_l.E:(0,vi.e)((e,t)=>{let n=[];e.subscribe(new Sr.Q(t,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(const i of n)t.next(i);t.complete()},void 0,()=>{n=null}))})}function Oc(r=Sg){return(0,vi.e)((e,t)=>{let n=!1;e.subscribe(new Sr.Q(t,i=>{n=!0,t.next(i)},()=>n?t.complete():t.error(r())))})}function Sg(){return new Iu}function Cg(r){return(0,vi.e)((e,t)=>{let n=!1;e.subscribe(new Sr.Q(t,i=>{n=!0,t.next(i)},()=>{n||t.next(r),t.complete()}))})}function bl(r,e){const t=arguments.length>=2;return n=>n.pipe(r?ai((i,s)=>r(i,s,n)):ko.y,(0,uo.q)(1),t?Cg(e):Oc(()=>new Iu))}var Wi=U(7384);class zi{constructor(e,t){this.id=e,this.url=t}}class Df extends zi{constructor(e,t,n="imperative",i=null){super(e,t),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _r extends zi{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Mo extends zi{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tl extends zi{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xv extends zi{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ig extends zi{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class as extends zi{constructor(e,t,n,i,s){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ho extends zi{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ud extends zi{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wa{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Au{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kf{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class El{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ag{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vd{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const _n="primary";class Mi{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fo(r){return new Mi(r)}const Du="ngNavigationCancelingError";function Dg(r){const e=Error("NavigationCancelingError: "+r);return e[Du]=!0,e}function Pf(r,e,t){const n=t.path.split("/");if(n.length>r.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<r.length))return null;const i={};for(let s=0;s<n.length;s++){const o=n[s],c=r[s];if(o.startsWith(":"))i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function Ri(r,e){const t=r?Object.keys(r):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Hd(r[i],e[i]))return!1;return!0}function Hd(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;const t=[...r].sort(),n=[...e].sort();return t.every((i,s)=>n[s]===i)}return r===e}function Nc(r){return Array.prototype.concat.apply([],r)}function Gd(r){return r.length>0?r[r.length-1]:null}function Or(r,e){for(const t in r)r.hasOwnProperty(t)&&e(r[t],t)}function ui(r){return(0,d.CqO)(r)?r:(0,d.QGY)(r)?(0,qn.D)(Promise.resolve(r)):$t(r)}const Lc={exact:function $d(r,e,t){if(!Nt(r.segments,e.segments)||!se(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!r.children[n]||!$d(r.children[n],e.children[n],t))return!1;return!0},subset:R},Ro={exact:function(r,e){return Ri(r,e)},subset:function(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>Hd(r[t],e[t]))},ignored:()=>!0};function Fc(r,e,t){return Lc[t.paths](r.root,e.root,t.matrixParams)&&Ro[t.queryParams](r.queryParams,e.queryParams)&&!("exact"===t.fragment&&r.fragment!==e.fragment)}function R(r,e,t){return z(r,e,e.segments,t)}function z(r,e,t,n){if(r.segments.length>t.length){const i=r.segments.slice(0,t.length);return!(!Nt(i,t)||e.hasChildren()||!se(i,t,n))}if(r.segments.length===t.length){if(!Nt(r.segments,t)||!se(r.segments,t,n))return!1;for(const i in e.children)if(!r.children[i]||!R(r.children[i],e.children[i],n))return!1;return!0}{const i=t.slice(0,r.segments.length),s=t.slice(r.segments.length);return!!(Nt(r.segments,i)&&se(r.segments,i,n)&&r.children[_n])&&z(r.children[_n],e,s,n)}}function se(r,e,t){return e.every((n,i)=>Ro[t](r[i].parameters,n.parameters))}class Le{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fo(this.queryParams)),this._queryParamMap}toString(){return Ki.serialize(this)}}class Oe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Or(t,(n,i)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mr(this)}}class gt{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fo(this.parameters)),this._parameterMap}toString(){return qd(this)}}function Nt(r,e){return r.length===e.length&&r.every((t,n)=>t.path===e[n].path)}class Wn{}class Zi{parse(e){const t=new Zw(e);return new Le(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${yi(e.root,!0)}`,n=function(r){const e=Object.keys(r).map(t=>{const n=r[t];return Array.isArray(n)?n.map(i=>`${us(t)}=${us(i)}`).join("&"):`${us(t)}=${us(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var r;return`${t}${n}${"string"==typeof e.fragment?`#${r=e.fragment,encodeURI(r)}`:""}`}}const Ki=new Zi;function mr(r){return r.segments.map(e=>qd(e)).join("/")}function yi(r,e){if(!r.hasChildren())return mr(r);if(e){const t=r.children[_n]?yi(r.children[_n],!1):"",n=[];return Or(r.children,(i,s)=>{s!==_n&&n.push(`${s}:${yi(i,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(r,e){let t=[];return Or(r.children,(n,i)=>{i===_n&&(t=t.concat(e(n,i)))}),Or(r.children,(n,i)=>{i!==_n&&(t=t.concat(e(n,i)))}),t}(r,(n,i)=>i===_n?[yi(r.children[_n],!1)]:[`${i}:${yi(n,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[_n]?`${mr(r)}/${t[0]}`:`${mr(r)}/(${t.join("//")})`}}function za(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function us(r){return za(r).replace(/%3B/gi,";")}function Oo(r){return za(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Za(r){return decodeURIComponent(r)}function Sl(r){return Za(r.replace(/\+/g,"%20"))}function qd(r){return`${Oo(r.path)}${function(r){return Object.keys(r).map(e=>`;${Oo(e)}=${Oo(r[e])}`).join("")}(r.parameters)}`}const Cl=/^[^\/()?;=#]+/;function Ka(r){const e=r.match(Cl);return e?e[0]:""}const V0=/^[^=?&#]+/,Mf=/^[^&#]+/;class Zw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[_n]=new Oe(e,t)),n}parseSegment(){const e=Ka(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new gt(Za(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ka(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const i=Ka(this.remaining);i&&(n=i,this.capture(n))}e[Za(t)]=Za(n)}parseQueryParam(e){const t=function(r){const e=r.match(V0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function(r){const e=r.match(Mf);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const i=Sl(t),s=Sl(n);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ka(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=_n);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[_n]:new Oe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Rf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Og(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=Og(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ng(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ng(e,this._root).map(t=>t.value)}}function Og(r,e){if(r===e.value)return e;for(const t of e.children){const n=Og(r,t);if(n)return n}return null}function Ng(r,e){if(r===e.value)return[e];for(const t of e.children){const n=Ng(r,t);if(n.length)return n.unshift(e),n}return[]}class xs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ku(r){const e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}class Ya extends Rf{constructor(e,t){super(e),this.snapshot=t,zd(this,e)}toString(){return this.snapshot.toString()}}function Wd(r,e){const t=function(r,e){const o=new jc([],{},{},"",{},_n,e,null,r.root,-1,{});return new Of("",new xs(o,[]))}(r,e),n=new Cs([new gt("",{})]),i=new Cs({}),s=new Cs({}),o=new Cs({}),c=new Cs(""),f=new Qa(n,i,o,c,s,_n,e,t.root);return f.snapshot=t.root,new Ya(new xs(f,[]),t)}class Qa{constructor(e,t,n,i,s,o,c,f){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,un.U)(e=>fo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,un.U)(e=>fo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xl(r,e="emptyOnly"){const t=r.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const i=t[n],s=t[n-1];if(i.routeConfig&&""===i.routeConfig.path)n--;else{if(s.component)break;n--}}return function(r){return r.reduce((e,t)=>({params:rn(rn({},e.params),t.params),data:rn(rn({},e.data),t.data),resolve:rn(rn({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(n))}class jc{constructor(e,t,n,i,s,o,c,f,m,_,w){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=f,this._urlSegment=m,this._lastPathIndex=_,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Of extends Rf{constructor(e,t){super(t),this.url=e,zd(this,t)}toString(){return Pu(this._root)}}function zd(r,e){e.value._routerState=r,e.children.forEach(t=>zd(r,t))}function Pu(r){const e=r.children.length>0?` { ${r.children.map(Pu).join(", ")} } `:"";return`${r.value}${e}`}function Nf(r){if(r.snapshot){const e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,Ri(e.queryParams,t.queryParams)||r.queryParams.next(t.queryParams),e.fragment!==t.fragment&&r.fragment.next(t.fragment),Ri(e.params,t.params)||r.params.next(t.params),function(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!Ri(r[t],e[t]))return!1;return!0}(e.url,t.url)||r.url.next(t.url),Ri(e.data,t.data)||r.data.next(t.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function Zd(r,e){const t=Ri(r.params,e.params)&&function(r,e){return Nt(r,e)&&r.every((t,n)=>Ri(t.parameters,e[n].parameters))}(r.url,e.url);return t&&!(!r.parent!=!e.parent)&&(!r.parent||Zd(r.parent,e.parent))}function Kd(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const i=function(r,e,t){return e.children.map(n=>{for(const i of t.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return Kd(r,n,i);return Kd(r,n)})}(r,e,t);return new xs(n,i)}{if(r.shouldAttach(e.value)){const s=r.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Kd(r,c)),o}}const n=function(r){return new Qa(new Cs(r.url),new Cs(r.params),new Cs(r.queryParams),new Cs(r.fragment),new Cs(r.data),r.outlet,r.component,r)}(e.value),i=e.children.map(s=>Kd(r,s));return new xs(n,i)}}function Yd(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function Bc(r){return"object"==typeof r&&null!=r&&r.outlets}function jg(r,e,t,n,i){let s={};return n&&Or(n,(o,c)=>{s[c]=Array.isArray(o)?o.map(f=>`${f}`):`${o}`}),new Le(t.root===r?e:Qd(t.root,r,e),s,i)}function Qd(r,e,t){const n={};return Or(r.children,(i,s)=>{n[s]=i===e?t:Qd(i,e,t)}),new Oe(r.segments,n)}class Jv{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Yd(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(Bc);if(i&&i!==Gd(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Lf{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function ey(r,e,t){if(r||(r=new Oe([],{})),0===r.segments.length&&r.hasChildren())return Ug(r,e,t);const n=function(r,e,t){let n=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=t.length)return s;const o=r.segments[i],c=t[n];if(Bc(c))break;const f=`${c}`,m=n<t.length-1?t[n+1]:null;if(i>0&&void 0===f)break;if(f&&m&&"object"==typeof m&&void 0===m.outlets){if(!Vc(f,m,o))return s;n+=2}else{if(!Vc(f,{},o))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}(r,e,t),i=t.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){const s=new Oe(r.segments.slice(0,n.pathIndex),{});return s.children[_n]=new Oe(r.segments.slice(n.pathIndex),r.children),Ug(s,0,i)}return n.match&&0===i.length?new Oe(r.segments,{}):n.match&&!r.hasChildren()?Il(r,e,t):n.match?Ug(r,0,i):Il(r,e,t)}function Ug(r,e,t){if(0===t.length)return new Oe(r.segments,{});{const n=function(r){return Bc(r[0])?r[0].outlets:{[_n]:r}}(t),i={};return Or(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=ey(r.children[o],e,s))}),Or(r.children,(s,o)=>{void 0===n[o]&&(i[o]=s)}),new Oe(r.segments,i)}}function Il(r,e,t){const n=r.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Bc(s)){const f=ty(s.outlets);return new Oe(n,f)}if(0===i&&Yd(t[0])){n.push(new gt(r.segments[e].path,Lo(t[0]))),i++;continue}const o=Bc(s)?s.outlets[_n]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Yd(c)?(n.push(new gt(o,Lo(c))),i+=2):(n.push(new gt(o,{})),i++)}return new Oe(n,{})}function ty(r){const e={};return Or(r,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Il(new Oe([],{}),0,t))}),e}function Lo(r){const e={};return Or(r,(t,n)=>e[n]=`${t}`),e}function Vc(r,e,t){return r==t.path&&Ri(e,t.parameters)}class Vg{constructor(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Nf(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const i=ku(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],n),delete i[o]}),Or(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=ku(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(n&&n.outlet){const o=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=ku(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const i=ku(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],n),this.forwardEvent(new Ag(s.value.snapshot))}),e.children.length&&this.forwardEvent(new El(e.value.snapshot))}activateRoutes(e,t,n){const i=e.value,s=t?t.value:null;if(Nf(i),i===s)if(i.component){const o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(i.component){const o=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Nf(c.route.value),this.activateChildRoutes(e,null,o.children)}else{const c=function(r){for(let e=r.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),f=c?c.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=f,o.outlet&&o.outlet.activateWith(i,f),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class iy{constructor(e,t){this.routes=e,this.module=t}}function Al(r){return"function"==typeof r}function Fo(r){return r instanceof Le}const Hc=Symbol("INITIAL_VALUE");function Dl(){return gr(r=>Gs(r.map(e=>e.pipe((0,uo.q)(1),qs(Hc)))).pipe(lo((e,t)=>{let n=!1;return t.reduce((i,s,o)=>i!==Hc?i:(s===Hc&&(n=!0),n||!1!==s&&o!==t.length-1&&!Fo(s)?i:s),e)},Hc),ai(e=>e!==Hc),(0,un.U)(e=>Fo(e)?e:!0===e),(0,uo.q)(1)))}class Y0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gc,this.attachRef=null}}class Gc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Y0,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ff=(()=>{class r{constructor(t,n,i,s,o){this.parentContexts=t,this.location=n,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=s||_n,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(n=n||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),c=this.parentContexts.getOrCreateContext(this.name).children,f=new sy(t,c,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Gc),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},r.\u0275dir=d.lG2({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),r})();class sy{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Qa?this.route:e===Gc?this.childContexts:this.parent.get(e,t)}}let Jd=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,n){1&t&&d._UZ(0,"router-outlet")},directives:[Ff],encapsulation:2}),r})();function Gg(r,e=""){for(let t=0;t<r.length;t++){const n=r[t];oy(n,kl(e,n))}}function oy(r,e){r.children&&Gg(r.children,e)}function kl(r,e){return e?r||e.path?r&&!e.path?`${r}/`:!r&&e.path?e.path:`${r}/${e.path}`:"":r}function Ir(r){const e=r.children&&r.children.map(Ir),t=e?Fs(rn({},r),{children:e}):rn({},r);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_n&&(t.component=Jd),t}function mo(r){return r.outlet||_n}function jf(r,e){const t=r.filter(n=>mo(n)===e);return t.push(...r.filter(n=>mo(n)!==e)),t}const Uf={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Pl(r,e,t){var c;if(""===e.path)return"full"===e.pathMatch&&(r.hasChildren()||t.length>0)?rn({},Uf):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Pf)(t,r,e);if(!i)return rn({},Uf);const s={};Or(i.posParams,(f,m)=>{s[m]=f.path});const o=i.consumed.length>0?rn(rn({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!=(c=i.posParams)?c:{}}}function Bf(r,e,t,n,i="corrected"){if(t.length>0&&function(r,e,t){return t.some(n=>eh(r,e,n)&&mo(n)!==_n)}(r,t,n)){const o=new Oe(e,function(r,e,t,n){const i={};i[_n]=n,n._sourceSegment=r,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&mo(s)!==_n){const o=new Oe([],{});o._sourceSegment=r,o._segmentIndexShift=e.length,i[mo(s)]=o}return i}(r,e,n,new Oe(t,r.children)));return o._sourceSegment=r,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(r,e,t){return t.some(n=>eh(r,e,n))}(r,t,n)){const o=new Oe(r.segments,function(r,e,t,n,i,s){const o={};for(const c of n)if(eh(r,t,c)&&!i[mo(c)]){const f=new Oe([],{});f._sourceSegment=r,f._segmentIndexShift="legacy"===s?r.segments.length:e.length,o[mo(c)]=f}return rn(rn({},i),o)}(r,e,t,n,r.children,i));return o._sourceSegment=r,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Oe(r.segments,r.children);return s._sourceSegment=r,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function eh(r,e,t){return(!(r.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function eb(r,e,t,n){return!!(mo(r)===n||n!==_n&&eh(e,t,r))&&("**"===r.path||Pl(e,r,t).matched)}function $c(r,e,t){return 0===e.length&&!r.children[t]}class li{constructor(e){this.segmentGroup=e||null}}class Vf{constructor(e){this.urlTree=e}}function th(r){return new qi.y(e=>e.error(new li(r)))}function Hf(r){return new qi.y(e=>e.error(new Vf(r)))}function _i(r){return new qi.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class Wg{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Bf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Oe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,_n).pipe((0,un.U)(s=>this.createUrlTree(Gf(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(co(s=>{if(s instanceof Vf)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof li?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,_n).pipe((0,un.U)(i=>this.createUrlTree(Gf(i),e.queryParams,e.fragment))).pipe(co(i=>{throw i instanceof li?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const i=e.segments.length>0?new Oe([],{[_n]:e}):e;return new Le(i,t,n)}expandSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,un.U)(s=>new Oe([],s))):this.expandSegment(e,n,t,n.segments,i,!0)}expandChildren(e,t,n){const i=[];for(const s of Object.keys(n.children))"primary"===s?i.unshift(s):i.push(s);return(0,qn.D)(i).pipe(Po(s=>{const o=n.children[s],c=jf(t,s);return this.expandSegmentGroup(e,c,o,s).pipe((0,un.U)(f=>({segment:f,outlet:s})))}),lo((s,o)=>(s[o.outlet]=o.segment,s),{}),function(r,e){const t=arguments.length>=2;return n=>n.pipe(r?ai((i,s)=>r(i,s,n)):ko.y,Jn(1),t?Cg(e):Oc(()=>new Iu))}())}expandSegment(e,t,n,i,s,o){return(0,qn.D)(n).pipe(Po(c=>this.expandSegmentAgainstRoute(e,t,n,c,i,s,o).pipe(co(m=>{if(m instanceof li)return $t(null);throw m}))),bl(c=>!!c),co((c,f)=>{if(c instanceof Iu||"EmptyError"===c.name){if($c(t,i,s))return $t(new Oe([],{}));throw new li(t)}throw c}))}expandSegmentAgainstRoute(e,t,n,i,s,o,c){return eb(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o):th(t):th(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,i){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Hf(s):this.lineralizeSegments(n,s).pipe((0,Xn.z)(o=>{const c=new Oe(o,{});return this.expandSegment(e,c,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o){const{matched:c,consumedSegments:f,lastChild:m,positionalParamSegments:_}=Pl(t,i,s);if(!c)return th(t);const w=this.applyRedirectCommands(f,i.redirectTo,_);return i.redirectTo.startsWith("/")?Hf(w):this.lineralizeSegments(i,w).pipe((0,Xn.z)(C=>this.expandSegment(e,t,n,C.concat(s.slice(m)),o,!1)))}matchSegmentAgainstRoute(e,t,n,i,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?$t(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,un.U)(C=>(n._loadedConfig=C,new Oe(i,{})))):$t(new Oe(i,{}));const{matched:o,consumedSegments:c,lastChild:f}=Pl(t,n,i);if(!o)return th(t);const m=i.slice(f);return this.getChildConfig(e,n,i).pipe((0,Xn.z)(w=>{const C=w.module,M=w.routes,{segmentGroup:L,slicedSegments:V}=Bf(t,c,m,M),H=new Oe(L.segments,L.children);if(0===V.length&&H.hasChildren())return this.expandChildren(C,M,H).pipe((0,un.U)(Ne=>new Oe(c,Ne)));if(0===M.length&&0===V.length)return $t(new Oe(c,{}));const Se=mo(n)===s;return this.expandSegment(C,H,M,V,Se?_n:s,!0).pipe((0,un.U)(je=>new Oe(c.concat(je.segments),je.children)))}))}getChildConfig(e,t,n){return t.children?$t(new iy(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?$t(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Xn.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,un.U)(s=>(t._loadedConfig=s,s))):(r=t,new qi.y(e=>e.error(Dg(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`))));var r})):$t(new iy([],e))}runCanLoadGuards(e,t,n){const i=t.canLoad;return i&&0!==i.length?$t(i.map(o=>{const c=e.get(o);let f;if((r=c)&&Al(r.canLoad))f=c.canLoad(t,n);else{if(!Al(c))throw new Error("Invalid CanLoad guard");f=c(t,n)}var r;return ui(f)})).pipe(Dl(),(0,Wi.b)(o=>{if(!Fo(o))return;const c=Dg(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw c.url=o,c}),(0,un.U)(o=>!0===o)):$t(!0)}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return $t(n);if(i.numberOfChildren>1||!i.children[_n])return _i(e.redirectTo);i=i.children[_n]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,i){const s=this.createSegmentGroup(e,t.root,n,i);return new Le(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Or(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);n[s]=t[c]}else n[s]=i}),n}createSegmentGroup(e,t,n,i){const s=this.createSegments(e,t.segments,n,i);let o={};return Or(t.children,(c,f)=>{o[f]=this.createSegmentGroup(e,c,n,i)}),new Oe(s,o)}createSegments(e,t,n,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,n))}findPosParam(e,t,n){const i=n[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let n=0;for(const i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}}function Gf(r){const e={};for(const n of Object.keys(r.children)){const s=Gf(r.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function(r){if(1===r.numberOfChildren&&r.children[_n]){const e=r.children[_n];return new Oe(r.segments.concat(e.segments),e.children)}return r}(new Oe(r.segments,e))}class qc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $f{constructor(e,t){this.component=e,this.route=t}}function ay(r,e,t){const n=r._root;return Ml(n,e?e._root:null,t,[n.value])}function rh(r,e,t){const n=function(r){if(!r)return null;for(let e=r.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(n?n.module.injector:t).get(r)}function Ml(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ku(e);return r.children.forEach(o=>{(function(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=r.value,o=e?e.value:null,c=t?t.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const f=function(r,e,t){if("function"==typeof t)return t(r,e);switch(t){case"pathParamsChange":return!Nt(r.url,e.url);case"pathParamsOrQueryParamsChange":return!Nt(r.url,e.url)||!Ri(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zd(r,e)||!Ri(r.queryParams,e.queryParams);default:return!Zd(r,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new qc(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Ml(r,e,s.component?c?c.children:null:t,n,i),f&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new $f(c.outlet.component,o))}else o&&Rl(e,c,i),i.canActivateChecks.push(new qc(n)),Ml(r,null,s.component?c?c.children:null:t,n,i)})(o,s[o.value.outlet],t,n.concat([o.value]),i),delete s[o.value.outlet]}),Or(s,(o,c)=>Rl(o,t.getContext(c),i)),i}function Rl(r,e,t){const n=ku(r),i=r.value;Or(n,(s,o)=>{Rl(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new $f(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Yg{}function qf(r){return new qi.y(e=>e.error(r))}class Qg{constructor(e,t,n,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Bf(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,_n);if(null===t)return null;const n=new jc([],Object.freeze({}),Object.freeze(rn({},this.urlTree.queryParams)),this.urlTree.fragment,{},_n,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xs(n,t),s=new Of(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,n=xl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const s of Object.keys(t.children)){const o=t.children[s],c=jf(e,s),f=this.processSegmentGroup(c,o,s);if(null===f)return null;n.push(...f)}const i=cy(n);return i.sort((e,t)=>e.value.outlet===_n?-1:t.value.outlet===_n?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,n,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,n,i);if(null!==o)return o}return $c(t,n,i)?[]:null}processSegmentAgainstRoute(e,t,n,i){if(e.redirectTo||!eb(e,t,n,i))return null;let s,o=[],c=[];if("**"===e.path){const M=n.length>0?Gd(n).parameters:{};s=new jc(n,M,Object.freeze(rn({},this.urlTree.queryParams)),this.urlTree.fragment,vo(e),mo(e),e.component,e,Wf(t),Ol(t)+n.length,cb(e))}else{const M=Pl(t,e,n);if(!M.matched)return null;o=M.consumedSegments,c=n.slice(M.lastChild),s=new jc(o,M.parameters,Object.freeze(rn({},this.urlTree.queryParams)),this.urlTree.fragment,vo(e),mo(e),e.component,e,Wf(t),Ol(t)+o.length,cb(e))}const f=(r=e).children?r.children:r.loadChildren?r._loadedConfig.routes:[],{segmentGroup:m,slicedSegments:_}=Bf(t,o,c,f.filter(M=>void 0===M.redirectTo),this.relativeLinkResolution);var r;if(0===_.length&&m.hasChildren()){const M=this.processChildren(f,m);return null===M?null:[new xs(s,M)]}if(0===f.length&&0===_.length)return[new xs(s,[])];const w=mo(e)===i,C=this.processSegment(f,m,_,w?_n:i);return null===C?null:[new xs(s,C)]}}function Xg(r){const e=r.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function cy(r){const e=[],t=new Set;for(const n of r){if(!Xg(n)){e.push(n);continue}const i=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...n.children),t.add(i)):e.push(n)}for(const n of t){const i=cy(n.children);e.push(new xs(n.value,i))}return e.filter(n=>!t.has(n))}function Wf(r){let e=r;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ol(r){let e=r,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function vo(r){return r.data||{}}function cb(r){return r.resolve||{}}function Wc(r){return gr(e=>{const t=r(e);return t?(0,qn.D)(t).pipe((0,un.U)(()=>e)):$t(e)})}class Ll extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Zf=new d.OlP("ROUTES");class jo{constructor(e,t,n,i){this.injector=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,un.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new iy(Nc(o.injector.get(Zf,void 0,d.XFs.Self|d.XFs.Optional)).map(Ir),o)}),co(s=>{throw t._loader$=void 0,s}));return t._loader$=new Rc(i,()=>new ao.x).pipe(lr()),t._loader$}loadModuleFactory(e){return ui(e()).pipe((0,Xn.z)(t=>t instanceof d.YKP?$t(t):(0,qn.D)(this.compiler.compileModuleAsync(t))))}}class Kf{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function tm(r){throw r}function Xw(r,e,t){return e.parse("/")}function Xa(r,e){return $t(null)}const nm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class r{constructor(t,n,i,s,o,c,f){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=i,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ao.x,this.errorHandler=tm,this.malformedUriErrorHandler=Xw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xa,afterPreactivation:Xa},this.urlHandlingStrategy=new Kf,this.routeReuseStrategy=new Ll,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(d.h0i),this.console=o.get(d.c2e);const w=o.get(d.R0b);this.isNgZoneEnabled=w instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=new Le(new Oe([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jo(o,c,C=>this.triggerEvent(new Wa(C)),C=>this.triggerEvent(new Au(C))),this.routerState=Wd(this.currentUrlTree,this.rootComponentType),this.transitions=new Cs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(ai(i=>0!==i.id),(0,un.U)(i=>Fs(rn({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),gr(i=>{let s=!1,o=!1;return $t(i).pipe((0,Wi.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.currentRawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Fs(rn({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gr(c=>{const f=this.browserUrlTree.toString(),m=!this.navigated||c.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||m)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return b(c.source)&&(this.browserUrlTree=c.extractedUrl),$t(c).pipe(gr(w=>{const C=this.transitions.getValue();return n.next(new Df(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),C!==this.transitions.getValue()?_l.E:Promise.resolve(w)}),function(r,e,t,n){return gr(i=>function(r,e,t,n,i){return new Wg(r,e,t,n,i).apply()}(r,e,t,i.extractedUrl,n).pipe((0,un.U)(s=>Fs(rn({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wi.b)(w=>{this.currentNavigation=Fs(rn({},this.currentNavigation),{finalUrl:w.urlAfterRedirects})}),function(r,e,t,n,i){return(0,Xn.z)(s=>function(r,e,t,n,i="emptyOnly",s="legacy"){try{const o=new Qg(r,e,t,n,i,s).recognize();return null===o?qf(new Yg):$t(o)}catch(o){return qf(o)}}(r,e,s.urlAfterRedirects,t(s.urlAfterRedirects),n,i).pipe((0,un.U)(o=>Fs(rn({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,w=>this.serializeUrl(w),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wi.b)(w=>{if("eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(M,w)}this.browserUrlTree=w.urlAfterRedirects}const C=new Xv(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);n.next(C)}));if(m&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:C,extractedUrl:M,source:L,restoredState:V,extras:H}=c,Se=new Df(C,this.serializeUrl(M),L,V);n.next(Se);const be=Wd(M,this.rootComponentType).snapshot;return $t(Fs(rn({},c),{targetSnapshot:be,urlAfterRedirects:M,extras:Fs(rn({},H),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=c.rawUrl,c.resolve(null),_l.E}),Wc(c=>{const{targetSnapshot:f,id:m,extractedUrl:_,rawUrl:w,extras:{skipLocationChange:C,replaceUrl:M}}=c;return this.hooks.beforePreactivation(f,{navigationId:m,appliedUrlTree:_,rawUrlTree:w,skipLocationChange:!!C,replaceUrl:!!M})}),(0,Wi.b)(c=>{const f=new Ig(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(f)}),(0,un.U)(c=>Fs(rn({},c),{guards:ay(c.targetSnapshot,c.currentSnapshot,this.rootContexts)})),function(r,e){return(0,Xn.z)(t=>{const{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?$t(Fs(rn({},t),{guardsResult:!0})):function(r,e,t,n){return(0,qn.D)(r).pipe((0,Xn.z)(i=>function(r,e,t,n,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?$t(s.map(c=>{const f=rh(c,e,i);let m;if(function(r){return r&&Al(r.canDeactivate)}(f))m=ui(f.canDeactivate(r,e,t,n));else{if(!Al(f))throw new Error("Invalid CanDeactivate guard");m=ui(f(r,e,t,n))}return m.pipe(bl())})).pipe(Dl()):$t(!0)}(i.component,i.route,t,e,n)),bl(i=>!0!==i,!0))}(o,n,i,r).pipe((0,Xn.z)(c=>c&&function(r){return"boolean"==typeof r}(c)?function(r,e,t,n){return(0,qn.D)(e).pipe(Po(i=>Mc(function(r,e){return null!==r&&e&&e(new kf(r)),$t(!0)}(i.route.parent,n),function(r,e){return null!==r&&e&&e(new Bd(r)),$t(!0)}(i.route,n),function(r,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function(r){const e=r.routeConfig?r.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:r,guards:e}:null}(o)).filter(o=>null!==o).map(o=>ga(()=>$t(o.guards.map(f=>{const m=rh(f,o.node,t);let _;if(function(r){return r&&Al(r.canActivateChild)}(m))_=ui(m.canActivateChild(n,r));else{if(!Al(m))throw new Error("Invalid CanActivateChild guard");_=ui(m(n,r))}return _.pipe(bl())})).pipe(Dl())));return $t(s).pipe(Dl())}(r,i.path,t),function(r,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return $t(!0);const i=n.map(s=>ga(()=>{const o=rh(s,e,t);let c;if(function(r){return r&&Al(r.canActivate)}(o))c=ui(o.canActivate(e,r));else{if(!Al(o))throw new Error("Invalid CanActivate guard");c=ui(o(e,r))}return c.pipe(bl())}));return $t(i).pipe(Dl())}(r,i.route,t))),bl(i=>!0!==i,!0))}(n,s,r,e):$t(c)),(0,un.U)(c=>Fs(rn({},t),{guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),(0,Wi.b)(c=>{if(Fo(c.guardsResult)){const m=Dg(`Redirecting to "${this.serializeUrl(c.guardsResult)}"`);throw m.url=c.guardsResult,m}const f=new as(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(f)}),ai(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,""),!1)),Wc(c=>{if(c.guards.canActivateChecks.length)return $t(c).pipe((0,Wi.b)(f=>{const m=new ho(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),gr(f=>{let m=!1;return $t(f).pipe(function(r,e){return(0,Xn.z)(t=>{const{targetSnapshot:n,guards:{canActivateChecks:i}}=t;if(!i.length)return $t(t);let s=0;return(0,qn.D)(i).pipe(Po(o=>function(r,e,t,n){return function(r,e,t,n){const i=Object.keys(r);if(0===i.length)return $t({});const s={};return(0,qn.D)(i).pipe((0,Xn.z)(o=>function(r,e,t,n){const i=rh(r,e,n);return ui(i.resolve?i.resolve(e,t):i(e,t))}(r[o],e,t,n).pipe((0,Wi.b)(c=>{s[o]=c}))),Jn(1),(0,Xn.z)(()=>Object.keys(s).length===i.length?$t(s):_l.E))}(r._resolve,r,e,n).pipe((0,un.U)(s=>(r._resolvedData=s,r.data=rn(rn({},r.data),xl(r,t).resolve),null)))}(o.route,n,r,e)),(0,Wi.b)(()=>s++),Jn(1),(0,Xn.z)(o=>s===i.length?$t(t):_l.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wi.b)({next:()=>m=!0,complete:()=>{m||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),(0,Wi.b)(f=>{const m=new Ud(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}))}),Wc(c=>{const{targetSnapshot:f,id:m,extractedUrl:_,rawUrl:w,extras:{skipLocationChange:C,replaceUrl:M}}=c;return this.hooks.afterPreactivation(f,{navigationId:m,appliedUrlTree:_,rawUrlTree:w,skipLocationChange:!!C,replaceUrl:!!M})}),(0,un.U)(c=>{const f=function(r,e,t){const n=Kd(r,e._root,t?t._root:void 0);return new Ya(n,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return Fs(rn({},c),{targetRouterState:f})}),(0,Wi.b)(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((r,e,t)=>(0,un.U)(n=>(new Vg(e,n.targetRouterState,n.currentRouterState,t).activate(r),n)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),(0,Wi.b)({next(){s=!0},complete(){s=!0}}),function(r){return(0,vi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}(()=>{var c;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(c=this.currentNavigation)?void 0:c.id)===i.id&&(this.currentNavigation=null)}),co(c=>{if(o=!0,function(r){return r&&r[Du]}(c)){const f=Fo(c.url);f||(this.navigated=!0,this.restoreHistory(i,!0));const m=new Mo(i.id,this.serializeUrl(i.extractedUrl),c.message);n.next(m),f?setTimeout(()=>{const _=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),w={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||b(i.source)};this.scheduleNavigation(_,"imperative",null,w,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new Tl(i.id,this.serializeUrl(i.extractedUrl),c);n.next(f);try{i.resolve(this.errorHandler(c))}catch(m){i.reject(m)}}return _l.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(rn(rn({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var c;const i={replaceUrl:!0},s=(null==(c=t.state)?void 0:c.navigationId)?t.state:null;if(s){const f=rn({},s);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,n,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Gg(t),this.config=t.map(Ir),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:f}=n,m=i||this.routerState.root,_=f?this.currentUrlTree.fragment:o;let w=null;switch(c){case"merge":w=rn(rn({},this.currentUrlTree.queryParams),s);break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),function(r,e,t,n,i){if(0===t.length)return jg(e.root,e.root,e,n,i);const s=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new Jv(!0,0,r);let e=0,t=!1;const n=r.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return Or(s.outlets,(f,m)=>{c[m]="string"==typeof f?f.split("/"):f}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((c,f)=>{0==f&&"."===c||(0==f&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,s]},[]);return new Jv(t,e,n)}(t);if(s.toRoot())return jg(e.root,new Oe([],{}),e,n,i);const o=function(r,e,t){if(r.isAbsolute)return new Lf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Lf(s,s===e.root,0)}const n=Yd(r.commands[0])?0:1;return function(r,e,t){let n=r,i=e,s=t;for(;s>i;){if(s-=i,n=n.parent,!n)throw new Error("Invalid number of '../'");i=n.segments.length}return new Lf(n,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+n,r.numberOfDoubleDots)}(s,e,r),c=o.processChildren?Ug(o.segmentGroup,o.index,s.commands):ey(o.segmentGroup,o.index,s.commands);return jg(o.segmentGroup,c,e,n,i)}(m,this.currentUrlTree,t,w,null!=_?_:null)}navigateByUrl(t,n={skipLocationChange:!1}){const i=Fo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function(r){for(let e=0;e<r.length;e++){const t=r[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(i){n=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return n}isActive(t,n){let i;if(i=!0===n?rn({},nm):!1===n?rn({},hy):n,Fo(t))return Fc(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Fc(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((n,i)=>{const s=t[i];return null!=s&&(n[i]=s),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new _r(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,i,s,o){var Se,be,je;if(this.disposed)return Promise.resolve(!1);const c=this.transitions.value,f=b(n)&&c&&!b(c.source),m=c.rawUrl.toString()===t.toString(),_=c.id===(null==(Se=this.currentNavigation)?void 0:Se.id);if(f&&m&&_)return Promise.resolve(!0);let C,M,L;o?(C=o.resolve,M=o.reject,L=o.promise):L=new Promise((Ne,$e)=>{C=Ne,M=$e});const V=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),H=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(be=this.browserPageId)?be:0:(null!=(je=this.browserPageId)?je:0)+1):H=0,this.setTransition({id:V,targetPageId:H,source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:C,reject:M,promise:L,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),L.catch(Ne=>Promise.reject(Ne))}setBrowserUrl(t,n){const i=this.urlSerializer.serialize(t),s=rn(rn({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,n=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n){const i=new Mo(t.id,this.serializeUrl(t.extractedUrl),n);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return r.\u0275fac=function(t){d.$Z()},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();function b(r){return"imperative"!==r}let g=(()=>{class r{constructor(t,n,i,s,o){this.router=t,this.route=n,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new ao.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const n=this.renderer,i=this.el.nativeElement;null!==t?n.setAttribute(i,"tabindex",t):n.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:S(this.skipLocationChange),replaceUrl:S(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:S(this.preserveFragment)})}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(bi),d.Y36(Qa),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},r.\u0275dir=d.lG2({type:r,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,n){1&t&&d.NdJ("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),r})(),v=(()=>{class r{constructor(t,n,i){this.router=t,this.route=n,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ao.x,this.subscription=t.events.subscribe(s=>{s instanceof _r&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,n,i,s,o){if(0!==t||n||i||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const c={skipLocationChange:S(this.skipLocationChange),replaceUrl:S(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,c),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:S(this.preserveFragment)})}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(bi),d.Y36(Qa),d.Y36(ye))},r.\u0275dir=d.lG2({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,n){1&t&&d.NdJ("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&d.uIk("target",n.target)("href",n.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),r})();function S(r){return""===r||!!r}let O=(()=>{class r{constructor(t,n,i,s,o,c){this.router=t,this.element=n,this.renderer=i,this.cdr=s,this.link=o,this.linkWithHref=c,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof _r&&this.update()})}ngAfterContentInit(){$t(this.links.changes,this.linksWithHrefs.changes,$t(null)).pipe((0,$a.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var n;null==(n=this.linkInputChangesSubscription)||n.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,qn.D)(t).pipe((0,$a.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const n=Array.isArray(t)?t:t.split(" ");this.classes=n.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null==(t=this.linkInputChangesSubscription)||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(n=>{t?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),this.isActiveChange.emit(t))})}isLinkActive(t){const n=function(r){return!!r.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,n)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(bi),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(g,8),d.Y36(v,8))},r.\u0275dir=d.lG2({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(t,n,i){if(1&t&&(d.Suo(i,g,5),d.Suo(i,v,5)),2&t){let s;d.iGM(s=d.CRH())&&(n.links=s),d.iGM(s=d.CRH())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[d.TTD]}),r})();class me{}class wt{preload(e,t){return $t(null)}}let yt=(()=>{class r{constructor(t,n,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new jo(i,n,f=>t.triggerEvent(new Wa(f)),f=>t.triggerEvent(new Au(f)))}setUpPreloading(){this.subscription=this.router.events.pipe(ai(t=>t instanceof _r),Po(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const i=[];for(const s of n)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,qn.D)(i).pipe((0,$a.J)(),(0,un.U)(s=>{}))}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?$t(n._loadedConfig):this.loader.load(t.injector,n)).pipe((0,Xn.z)(s=>(n._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(bi),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(me))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})(),zt=(()=>{class r{constructor(t,n,i={}){this.router=t,this.viewportScroller=n,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Df?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _r&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new Vd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(t){d.$Z()},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();const Tn=new d.OlP("ROUTER_CONFIGURATION"),ei=new d.OlP("ROUTER_FORROOT_GUARD"),As=[Je,{provide:Wn,useClass:Zi},{provide:bi,useFactory:function(r,e,t,n,i,s,o={},c,f){const m=new bi(null,r,e,t,n,i,Nc(s));return c&&(m.urlHandlingStrategy=c),f&&(m.routeReuseStrategy=f),function(r,e){r.errorHandler&&(e.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(e.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(e.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(e.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(e.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(e.canceledNavigationResolution=r.canceledNavigationResolution)}(o,m),o.enableTracing&&m.events.subscribe(_=>{var w,C;null==(w=console.group)||w.call(console,`Router Event: ${_.constructor.name}`),console.log(_.toString()),console.log(_),null==(C=console.groupEnd)||C.call(console)}),m},deps:[Wn,Gc,Je,d.zs3,d.Sil,Zf,Tn,[class{},new d.FiY],[class{},new d.FiY]]},Gc,{provide:Qa,useFactory:function(r){return r.routerState.root},deps:[bi]},yt,wt,class{preload(e,t){return t().pipe(co(()=>$t(null)))}},{provide:Tn,useValue:{enableTracing:!1}}];function oh(){return new d.PXZ("Router",bi)}let jl=(()=>{class r{constructor(t,n){}static forRoot(t,n){return{ngModule:r,providers:[As,Yf(t),{provide:ei,useFactory:im,deps:[[bi,new d.FiY,new d.tp0]]},{provide:Tn,useValue:n||{}},{provide:ye,useFactory:ah,deps:[ce,[new d.tBr(Ie),new d.FiY],Tn]},{provide:zt,useFactory:fy,deps:[bi,mg,Tn]},{provide:me,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:wt},{provide:d.PXZ,multi:!0,useFactory:oh},[Jf,{provide:d.ip1,multi:!0,useFactory:zc,deps:[Jf]},{provide:db,useFactory:ep,deps:[Jf]},{provide:d.tb,multi:!0,useExisting:db}]]}}static forChild(t){return{ngModule:r,providers:[Yf(t)]}}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(ei,8),d.LFG(bi,8))},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({}),r})();function fy(r,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new zt(r,e,t)}function ah(r,e,t={}){return t.useHash?new He(r,e):new Ve(r,e)}function im(r){return"guarded"}function Yf(r){return[{provide:d.deG,multi:!0,useValue:r},{provide:Zf,multi:!0,useValue:r}]}let Jf=(()=>{class r{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ao.x}appInitializer(){return this.injector.get(Q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const i=new Promise(c=>n=c),s=this.injector.get(bi),o=this.injector.get(Tn);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),n(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?$t(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),s.initialNavigation()):n(!0),i})}bootstrapListener(t){const n=this.injector.get(Tn),i=this.injector.get(yt),s=this.injector.get(zt),o=this.injector.get(bi),c=this.injector.get(d.z2F);t===c.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(c.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(d.zs3))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})();function zc(r){return r.appInitializer.bind(r)}function ep(r){return r.bootstrapListener.bind(r)}const db=new d.OlP("Router Initializer");let fb=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-about"]],decls:3,vars:0,consts:[[1,"bg-main","text-gray-200"],[1,"container","mx-auto","mt-4"]],template:function(t,n){1&t&&(d.TgZ(0,"body",0),d.TgZ(1,"p",1),d._uU(2," This is a basic about page to demonstrate basic routing capabilities. "),d.qZA(),d.qZA())},styles:[""]}),r})();var Xe=U(8239),py=U(2210),Ar=U(7233);function pb(){return(0,vi.e)((r,e)=>{let t,n=!1;r.subscribe(new Sr.Q(e,i=>{const s=t;t=i,n&&e.next([s,i]),n=!0}))})}function Jw(r,e){return r===e}var Zt,ls=U(7905),YA=(U(4891),U(6293)),ya=U(1572),tp=U(1177),Ul=U(3855),mn=U(4213),QA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Oi={},gy=gy||{},En=QA||self;function my(){}function gb(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function om(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var mb="closure_uid_"+(1e9*Math.random()>>>0),XA=0;function JA(r,e,t){return r.call.apply(r.bind,arguments)}function xn(r,e,t){if(!r)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),r.apply(e,i)}}return function(){return r.apply(e,arguments)}}function Yi(r,e,t){return(Yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?JA:xn).apply(null,arguments)}function am(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),r.apply(this,n)}}function Qi(r,e){function t(){}t.prototype=e.prototype,r.Z=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.Vb=function(n,i,s){for(var o=Array(arguments.length-2),c=2;c<arguments.length;c++)o[c-2]=arguments[c];return e.prototype[i].apply(n,o)}}function Ja(){this.s=this.s,this.o=this.o}var tS={};Ja.prototype.s=!1,Ja.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var r=function(r){return Object.prototype.hasOwnProperty.call(r,mb)&&r[mb]||(r[mb]=++XA)}(this);delete tS[r]}},Ja.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nS=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1},vy=Array.prototype.forEach?function(r,e,t){Array.prototype.forEach.call(r,e,t)}:function(r,e,t){const n=r.length,i="string"==typeof r?r.split(""):r;for(let s=0;s<n;s++)s in i&&e.call(t,i[s],s,r)};function yy(r){return Array.prototype.concat.apply([],arguments)}function _y(r){const e=r.length;if(0<e){const t=Array(e);for(let n=0;n<e;n++)t[n]=r[n];return t}return[]}function np(r){return/^[\s\xa0]*$/.test(r)}var Xi,eD=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function Ds(r,e){return-1!=r.indexOf(e)}function rS(r,e){return r<e?-1:r>e?1:0}e:{var um=En.navigator;if(um){var by=um.userAgent;if(by){Xi=by;break e}}Xi=""}function lm(r,e,t){for(const n in r)e.call(t,r[n],n,r)}function Ty(r){const e={};for(const t in r)e[t]=r[t];return e}var tD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iS(r,e){let t,n;for(let i=1;i<arguments.length;i++){for(t in n=arguments[i],n)r[t]=n[t];for(let s=0;s<tD.length;s++)t=tD[s],Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}}function vb(r){return vb[" "](r),r}vb[" "]=my;var Ey,r,rD=Ds(Xi,"Opera"),uh=Ds(Xi,"Trident")||Ds(Xi,"MSIE"),iD=Ds(Xi,"Edge"),yb=iD||uh,sD=Ds(Xi,"Gecko")&&!(Ds(Xi.toLowerCase(),"webkit")&&!Ds(Xi,"Edge"))&&!(Ds(Xi,"Trident")||Ds(Xi,"MSIE"))&&!Ds(Xi,"Edge"),sS=Ds(Xi.toLowerCase(),"webkit")&&!Ds(Xi,"Edge");function _b(){var r=En.document;return r?r.documentMode:void 0}e:{var cm="",oS=(r=Xi,sD?/rv:([^\);]+)(\)|;)/.exec(r):iD?/Edge\/([\d\.]+)/.exec(r):uh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):sS?/WebKit\/(\S+)/.exec(r):rD?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(oS&&(cm=oS?oS[1]:""),uh){var aS=_b();if(null!=aS&&aS>parseFloat(cm)){Ey=String(aS);break e}}Ey=cm}var rR={};function iR(){return e=rR,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let r=0;const e=eD(String(Ey)).split("."),t=eD("9").split("."),n=Math.max(e.length,t.length);for(let o=0;0==r&&o<n;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;r=rS(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||rS(0==i[2].length,0==s[2].length)||rS(i[2],s[2]),i=i[3],s=s[3]}while(0==r)}return 0<=r}();var e}var sR=En.document&&uh&&(_b()||parseInt(Ey,10))||void 0,oR=function(){if(!En.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{En.addEventListener("test",my,e),En.removeEventListener("test",my,e)}catch(t){}return r}();function zs(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}function wy(r,e){if(zs.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,n=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(sD){e:{try{vb(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Zc[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&wy.Z.h.call(this)}}zs.prototype.h=function(){this.defaultPrevented=!0},Qi(wy,zs);var Zc={2:"touch",3:"pen",4:"mouse"};wy.prototype.h=function(){wy.Z.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var lh="closure_listenable_"+(1e6*Math.random()|0),aD=0;function lS(r,e,t,n,i){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!n,this.ia=i,this.key=++aD,this.ca=this.fa=!1}function rp(r){r.ca=!0,r.listener=null,r.proxy=null,r.src=null,r.ia=null}function dm(r){this.src=r,this.g={},this.h=0}function hm(r,e){var t=e.type;if(t in r.g){var s,n=r.g[t],i=nS(n,e);(s=0<=i)&&Array.prototype.splice.call(n,i,1),s&&(rp(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function bb(r,e,t,n){for(var i=0;i<r.length;++i){var s=r[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==n)return i}return-1}dm.prototype.add=function(r,e,t,n,i){var s=r.toString();(r=this.g[s])||(r=this.g[s]=[],this.h++);var o=bb(r,e,n,i);return-1<o?(e=r[o],t||(e.fa=!1)):((e=new lS(e,this.src,s,!!n,i)).fa=t,r.push(e)),e};var Mu="closure_lm_"+(1e6*Math.random()|0),Sy={};function cS(r,e,t,n,i){if(n&&n.once)return Tb(r,e,t,n,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)cS(r,e[s],t,n,i);return null}return t=ch(t),r&&r[lh]?r.N(e,t,om(n)?!!n.capture:!!n,i):Cy(r,e,t,!1,n,i)}function Cy(r,e,t,n,i,s){if(!e)throw Error("Invalid event type");var o=om(i)?!!i.capture:!!i,c=fm(r);if(c||(r[Mu]=c=new dm(r)),(t=c.add(e,t,n,o,s)).proxy)return t;if(n=function(){var e=sp;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=n,n.src=r,n.listener=t,r.addEventListener)oR||(i=o),void 0===i&&(i=!1),r.addEventListener(e.toString(),n,i);else if(r.attachEvent)r.attachEvent(ip(e.toString()),n);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(n)}return t}function Tb(r,e,t,n,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Tb(r,e[s],t,n,i);return null}return t=ch(t),r&&r[lh]?r.O(e,t,om(n)?!!n.capture:!!n,i):Cy(r,e,t,!0,n,i)}function dS(r,e,t,n,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)dS(r,e[s],t,n,i);else n=om(n)?!!n.capture:!!n,t=ch(t),r&&r[lh]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=bb(s=r.g[e],t,n,i))&&(rp(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete r.g[e],r.h--))):r&&(r=fm(r))&&(e=r.g[e.toString()],r=-1,e&&(r=bb(e,t,n,i)),(t=-1<r?e[r]:null)&&Eb(t))}function Eb(r){if("number"!=typeof r&&r&&!r.ca){var e=r.src;if(e&&e[lh])hm(e.i,r);else{var t=r.type,n=r.proxy;e.removeEventListener?e.removeEventListener(t,n,r.capture):e.detachEvent?e.detachEvent(ip(t),n):e.addListener&&e.removeListener&&e.removeListener(n),(t=fm(e))?(hm(t,r),0==t.h&&(t.src=null,e[Mu]=null)):rp(r)}}}function ip(r){return r in Sy?Sy[r]:Sy[r]="on"+r}function sp(r,e){if(r.ca)r=!0;else{e=new wy(e,this);var t=r.listener,n=r.ia||r.src;r.fa&&Eb(r),r=t.call(n,e)}return r}function fm(r){return(r=r[Mu])instanceof dm?r:null}var Kc="__closure_events_fn_"+(1e9*Math.random()>>>0);function ch(r){return"function"==typeof r?r:(r[Kc]||(r[Kc]=function(e){return r.handleEvent(e)}),r[Kc])}function Gr(){Ja.call(this),this.i=new dm(this),this.P=this,this.I=null}function cs(r,e){var t,n=r.I;if(n)for(t=[];n;n=n.I)t.push(n);if(r=r.P,n=e.type||e,"string"==typeof e)e=new zs(e,r);else if(e instanceof zs)e.target=e.target||r;else{var i=e;iS(e=new zs(n,r),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=pm(o,n,!0,e)&&i}if(i=pm(o=e.g=r,n,!0,e)&&i,i=pm(o,n,!1,e)&&i,t)for(s=0;s<t.length;s++)i=pm(o=e.g=t[s],n,!1,e)&&i}function pm(r,e,t,n){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==t){var c=o.listener,f=o.ia||o.src;o.fa&&hm(r.i,o),i=!1!==c.call(f,n)&&i}}return i&&!n.defaultPrevented}Qi(Gr,Ja),Gr.prototype[lh]=!0,Gr.prototype.removeEventListener=function(r,e,t,n){dS(this,r,e,t,n)},Gr.prototype.M=function(){if(Gr.Z.M.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],n=0;n<t.length;n++)rp(t[n]);delete r.g[e],r.h--}}this.I=null},Gr.prototype.N=function(r,e,t,n){return this.i.add(String(r),e,!1,t,n)},Gr.prototype.O=function(r,e,t,n){return this.i.add(String(r),e,!0,t,n)};var xy=En.JSON.stringify;function wb(){var r=pS;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var hS,Cb=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new Iy,r=>r.reset());class Iy{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lD(r){En.setTimeout(()=>{throw r},0)}function Ay(r,e){hS||function(){var r=En.Promise.resolve(void 0);hS=function(){r.then(gS)}}(),Dy||(hS(),Dy=!0),pS.add(r,e)}var Dy=!1,pS=new class{constructor(){this.h=this.g=null}add(e,t){const n=Cb.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function gS(){for(var r;r=wb();){try{r.h.call(r.g)}catch(t){lD(t)}var e=Cb;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Dy=!1}function ky(r,e){Gr.call(this),this.h=r||1,this.g=e||En,this.j=Yi(this.kb,this),this.l=Date.now()}function xb(r){r.da=!1,r.S&&(r.g.clearTimeout(r.S),r.S=null)}function Zs(r,e,t){if("function"==typeof r)t&&(r=Yi(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Yi(r.handleEvent,r)}return 2147483647<Number(e)?-1:En.setTimeout(r,e||0)}function mS(r){r.g=Zs(()=>{r.g=null,r.i&&(r.i=!1,mS(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Qi(ky,Gr),(Zt=ky.prototype).da=!1,Zt.S=null,Zt.kb=function(){if(this.da){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-r):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cs(this,"tick"),this.da&&(xb(this),this.start()))}},Zt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zt.M=function(){ky.Z.M.call(this),xb(this),delete this.g};class cD extends Ja{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mS(this)}M(){super.M(),this.g&&(En.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Py(r){Ja.call(this),this.h=r,this.g={}}Qi(Py,Ja);var dD=[];function Ib(r,e,t,n){Array.isArray(t)||(t&&(dD[0]=t.toString()),t=dD);for(var i=0;i<t.length;i++){var s=cS(e,t[i],n||r.handleEvent,!1,r.h||r);if(!s)break;r.g[s.key]=s}}function hD(r){lm(r.g,function(e,t){this.g.hasOwnProperty(t)&&Eb(e)},r),r.g={}}function My(){this.g=!0}function op(r,e,t,n){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var n=t[r];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return xy(t)}catch(c){return e}}(r,t)+(n?" "+n:"")})}Py.prototype.M=function(){Py.Z.M.call(this),hD(this)},Py.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},My.prototype.Aa=function(){this.g=!1},My.prototype.info=function(){};var Yc={},yS=null;function gm(){return yS=yS||new Gr}function _S(r){zs.call(this,Yc.Ma,r)}function mm(r){const e=gm();cs(e,new _S(e,r))}function Db(r,e){zs.call(this,Yc.STAT_EVENT,r),this.stat=e}function ks(r){const e=gm();cs(e,new Db(e,r))}function bS(r,e){zs.call(this,Yc.Na,r),this.size=e}function yo(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return En.setTimeout(function(){r()},e)}Yc.Ma="serverreachability",Qi(_S,zs),Yc.STAT_EVENT="statevent",Qi(Db,zs),Yc.Na="timingevent",Qi(bS,zs);var ap={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},TS={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kb(){}function Pb(){}kb.prototype.h=null;var ym,vm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Mb(){zs.call(this,"d")}function Rb(){zs.call(this,"c")}function Ry(){}function _m(r,e,t,n){this.l=r,this.j=e,this.m=t,this.X=n||1,this.V=new Py(this),this.P=Ob,this.W=new ky(r=yb?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bm}function bm(){this.i=null,this.g="",this.h=!1}Qi(Mb,zs),Qi(Rb,zs),Qi(Ry,kb),Ry.prototype.g=function(){return new XMLHttpRequest},Ry.prototype.i=function(){return{}},ym=new Ry;var Ob=45e3,Nb={},up={};function Tm(r,e,t){r.K=1,r.v=wm(nu(e)),r.s=t,r.U=!0,Lb(r,null)}function Lb(r,e){r.F=Date.now(),Oy(r),r.A=nu(r.v);var t=r.A,n=r.X;Array.isArray(n)||(n=[String(n)]),Uo(t.h,"t",n),r.C=0,t=r.l.H,r.h=new bm,r.g=yh(r.l,t?e:null,!r.s),0<r.O&&(r.L=new cD(Yi(r.Ia,r,r.g),r.O)),Ib(r.V,r.g,"readystatechange",r.gb),e=r.H?Ty(r.H):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.s,e)):(r.u="GET",r.g.ea(r.A,r.u,null,e)),mm(1),function(r,e,t,n,i,s){r.info(function(){if(r.g)if(s)for(var o="",c=s.split("&"),f=0;f<c.length;f++){var m=c[f].split("=");if(1<m.length){var _=m[0];m=m[1];var w=_.split("_");o=2<=w.length&&"type"==w[1]?o+(_+"=")+m+"&":o+(_+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(r.j,r.u,r.A,r.m,r.X,r.s)}function ES(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Ba}function wS(r,e,t){let i,n=!0;for(;!r.I&&r.C<t.length;){if(i=Fb(r,t),i==up){4==e&&(r.o=4,ks(14),n=!1),op(r.j,r.m,null,"[Incomplete Response]");break}if(i==Nb){r.o=4,ks(15),op(r.j,r.m,t,"[Invalid Chunk]"),n=!1;break}op(r.j,r.m,i,null),Ny(r,i)}ES(r)&&i!=up&&i!=Nb&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,ks(16),n=!1),r.i=r.i&&n,n?0<t.length&&!r.aa&&(r.aa=!0,(e=r.l).g==r&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),_o(e),e.L=!0,ks(11))):(op(r.j,r.m,t,"[Invalid Chunked Response]"),Qc(r),lp(r))}function Fb(r,e){var t=r.C,n=e.indexOf("\n",t);return-1==n?up:(t=Number(e.substring(t,n)),isNaN(t)?Nb:(n+=1)+t>e.length?up:(e=e.substr(n,t),r.C=n+t,e))}function Oy(r){r.Y=Date.now()+r.P,SS(r,r.P)}function SS(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=yo(Yi(r.eb,r),e)}function Em(r){r.B&&(En.clearTimeout(r.B),r.B=null)}function lp(r){0==r.l.G||r.I||ph(r.l,r)}function Qc(r){Em(r);var e=r.L;e&&"function"==typeof e.na&&e.na(),r.L=null,xb(r.W),hD(r.V),r.g&&(e=r.g,r.g=null,e.abort(),e.na())}function Ny(r,e){try{var t=r.l;if(0!=t.G&&(t.g==r||Gb(t.i,r)))if(t.I=r.N,!r.J&&Gb(t.i,r)&&3==t.G){try{var n=t.Ca.g.parse(e)}catch(m){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=yo(Yi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<r.F))break e;$l(t),Hy(t)}pp(t),ks(18)}if(1>=OS(t.i)&&t.ka){try{t.ka()}catch(m){}t.ka=void 0}}else _a(t,11)}else if((r.J||t.g==r)&&$l(t),!np(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let m=i[e];if(t.U=m[0],m=m[1],2==t.G)if("c"==m[0]){t.J=m[1],t.la=m[2];const _=m[3];null!=_&&(t.ma=_,t.h.info("VER="+t.ma));const w=m[4];null!=w&&(t.za=w,t.h.info("SVER="+t.za));const C=m[5];null!=C&&"number"==typeof C&&0<C&&(t.K=n=1.5*C,t.h.info("backChannelRequestTimeoutMs_="+n)),n=t;const M=r.g;if(M){const L=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L){var s=n.i;!s.g&&(Ds(L,"spdy")||Ds(L,"quic")||Ds(L,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&($b(s,s.h),s.h=null))}if(n.D){const V=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(n.sa=V,Dr(n.F,n.D,V))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-r.F,t.h.info("Handshake RTT: "+t.O+"ms"));var o=r;if((n=t).oa=vh(n,n.H?n.la:null,n.W),o.J){qb(n.i,o);var c=o,f=n.K;f&&c.setTimeout(f),c.B&&(Em(c),Oy(c)),n.g=o}else rd(n);0<t.l.length&&Gy(t)}else"stop"!=m[0]&&"close"!=m[0]||_a(t,7);else 3==t.G&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?_a(t,7):nd(t):"noop"!=m[0]&&t.j&&t.j.wa(m),t.A=0)}mm(4)}catch(m){}}function tu(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(gb(r)||"string"==typeof r)vy(r,e,void 0);else{if(r.T&&"function"==typeof r.T)var t=r.T();else if(r.R&&"function"==typeof r.R)t=void 0;else if(gb(r)||"string"==typeof r){t=[];for(var n=r.length,i=0;i<n;i++)t.push(i)}else for(i in t=[],n=0,r)t[n++]=i;n=function(r){if(r.R&&"function"==typeof r.R)return r.R();if("string"==typeof r)return r.split("");if(gb(r)){for(var e=[],t=r.length,n=0;n<t;n++)e.push(r[n]);return e}for(n in e=[],t=0,r)e[t++]=r[n];return e}(r),i=n.length;for(var s=0;s<i;s++)e.call(void 0,n[s],t&&t[s],r)}}function Vl(r,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var n=0;n<t;n+=2)this.set(arguments[n],arguments[n+1])}else if(r)if(r instanceof Vl)for(t=r.T(),n=0;n<t.length;n++)this.set(t[n],r.get(t[n]));else for(n in r)this.set(n,r[n])}function jb(r){if(r.i!=r.g.length){for(var e=0,t=0;e<r.g.length;){var n=r.g[e];dh(r.h,n)&&(r.g[t++]=n),e++}r.g.length=t}if(r.i!=r.g.length){var i={};for(t=e=0;e<r.g.length;)dh(i,n=r.g[e])||(r.g[t++]=n,i[n]=1),e++;r.g.length=t}}function dh(r,e){return Object.prototype.hasOwnProperty.call(r,e)}(Zt=_m.prototype).setTimeout=function(r){this.P=r},Zt.gb=function(r){r=r.target;const e=this.L;e&&3==Hl(r)?e.l():this.Ia(r)},Zt.Ia=function(r){try{if(r==this.g)e:{const _=Hl(this.g);var e=this.g.Da();const w=this.g.ba();if(!(3>_)&&(3!=_||yb||this.g&&(this.h.h||this.g.ga()||US(this.g)))){this.I||4!=_||7==e||mm(8==e||0>=w?3:2),Em(this);var t=this.g.ba();this.N=t;t:if(ES(this)){var n=US(this.g);r="";var i=n.length,s=4==Hl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qc(this),lp(this);var o="";break t}this.h.i=new En.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,r+=this.h.i.decode(n[e],{stream:s&&e==i-1});n.splice(0,i),this.h.g+=r,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==t,function(r,e,t,n,i,s,o){r.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,_,t),this.i){if(this.$&&!this.J){t:{if(this.g){var c,f=this.g;if((c=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!np(c)){var m=c;break t}}m=null}if(!(t=m)){this.i=!1,this.o=3,ks(12),Qc(this),lp(this);break e}op(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ny(this,t)}this.U?(wS(this,_,o),yb&&this.i&&3==_&&(Ib(this.V,this.W,"tick",this.fb),this.W.start())):(op(this.j,this.m,o,null),Ny(this,o)),4==_&&Qc(this),this.i&&!this.I&&(4==_?ph(this.l,this):(this.i=!1,Oy(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,ks(12)):(this.o=0,ks(13)),Qc(this),lp(this)}}}catch(_){}},Zt.fb=function(){if(this.g){var r=Hl(this.g),e=this.g.ga();this.C<e.length&&(Em(this),wS(this,r,e),this.i&&4!=r&&Oy(this))}},Zt.cancel=function(){this.I=!0,Qc(this)},Zt.eb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(mm(3),ks(17)),Qc(this),this.o=2,lp(this)):SS(this,this.Y-r)},(Zt=Vl.prototype).R=function(){jb(this);for(var r=[],e=0;e<this.g.length;e++)r.push(this.h[this.g[e]]);return r},Zt.T=function(){return jb(this),this.g.concat()},Zt.get=function(r,e){return dh(this.h,r)?this.h[r]:e},Zt.set=function(r,e){dh(this.h,r)||(this.i++,this.g.push(r)),this.h[r]=e},Zt.forEach=function(r,e){for(var t=this.T(),n=0;n<t.length;n++){var i=t[n],s=this.get(i);r.call(e,s,i,this)}};var mD=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xc(r,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,r instanceof Xc){this.g=void 0!==e?e:r.g,Jc(this,r.j),this.s=r.s,Ly(this,r.i),cp(this,r.m),this.l=r.l,e=r.h;var t=new xm;t.i=e.i,e.g&&(t.g=new Vl(e.g),t.h=e.h),Bb(this,t),this.o=r.o}else r&&(t=String(r).match(mD))?(this.g=!!e,Jc(this,t[1]||"",!0),this.s=Sm(t[2]||""),Ly(this,t[3]||"",!0),cp(this,t[4]),this.l=Sm(t[5]||"",!0),Bb(this,t[6]||"",!0),this.o=Sm(t[7]||"")):(this.g=!!e,this.h=new xm(null,this.g))}function nu(r){return new Xc(r)}function Jc(r,e,t){r.j=t?Sm(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Ly(r,e,t){r.i=t?Sm(e,!0):e}function cp(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Bb(r,e,t){e instanceof xm?(r.h=e,function(r,e){e&&!r.j&&(ed(r),r.i=null,r.g.forEach(function(t,n){var i=n.toLowerCase();n!=i&&(AS(this,n),Uo(this,i,t))},r)),r.j=e}(r.h,r.g)):(t||(e=Cm(e,_D)),r.h=new xm(e,r.g))}function Dr(r,e,t){r.h.set(e,t)}function wm(r){return Dr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Sm(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Cm(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,xS),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function xS(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Xc.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Cm(e,hh,!0),":");var t=this.i;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Cm(e,hh,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&r.push("/"),r.push(Cm(t,"/"==t.charAt(0)?yD:IS,!0))),(t=this.h.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Cm(t,dp)),r.join("")};var hh=/[#\/\?@]/g,IS=/[#\?:]/g,yD=/[#\?]/g,_D=/[#\?@]/g,dp=/#/g;function xm(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function ed(r){r.g||(r.g=new Vl,r.h=0,r.i&&function(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var n=r[t].indexOf("="),i=null;if(0<=n){var s=r[t].substring(0,n);i=r[t].substring(n+1)}else s=r[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function AS(r,e){ed(r),e=td(r,e),dh(r.g.h,e)&&(r.i=null,r.h-=r.g.get(e).length,dh((r=r.g).h,e)&&(delete r.h[e],r.i--,r.g.length>2*r.i&&jb(r)))}function DS(r,e){return ed(r),e=td(r,e),dh(r.g.h,e)}function Uo(r,e,t){AS(r,e),0<t.length&&(r.i=null,r.g.set(td(r,e),_y(t)),r.h+=t.length)}function td(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Hb(r){this.l=r||MS,r=En.PerformanceNavigationTiming?0<(r=En.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(En.g&&En.g.Ea&&En.g.Ea()&&En.g.Ea().Zb),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Zt=xm.prototype).add=function(r,e){ed(this),this.i=null,r=td(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Zt.forEach=function(r,e){ed(this),this.g.forEach(function(t,n){vy(t,function(i){r.call(e,i,n,this)},this)},this)},Zt.T=function(){ed(this);for(var r=this.g.R(),e=this.g.T(),t=[],n=0;n<e.length;n++)for(var i=r[n],s=0;s<i.length;s++)t.push(e[n]);return t},Zt.R=function(r){ed(this);var e=[];if("string"==typeof r)DS(this,r)&&(e=yy(e,this.g.get(td(this,r))));else{r=this.g.R();for(var t=0;t<r.length;t++)e=yy(e,r[t])}return e},Zt.set=function(r,e){return ed(this),this.i=null,DS(this,r=td(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Zt.get=function(r,e){return r&&0<(r=this.R(r)).length?String(r[0]):e},Zt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var r=[],e=this.g.T(),t=0;t<e.length;t++){var n=e[t],i=encodeURIComponent(String(n));n=this.R(n);for(var s=0;s<n.length;s++){var o=i;""!==n[s]&&(o+="="+encodeURIComponent(String(n[s]))),r.push(o)}}return this.i=r.join("&")};var MS=10;function RS(r){return!!r.h||!!r.g&&r.g.size>=r.j}function OS(r){return r.h?1:r.g?r.g.size:0}function Gb(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function $b(r,e){r.g?r.g.add(e):r.h=e}function qb(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function bD(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.D);return e}return _y(r.i)}function Fy(){}function TD(){this.g=new Fy}function ED(r,e,t){const n=t||"";try{tu(r,function(i,s){let o=i;om(i)&&(o=xy(i)),e.push(n+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function Wb(r,e,t,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch(s){}}function fh(r){this.l=r.$b||null,this.j=r.ib||!1}function jy(r,e){Gr.call(this),this.D=r,this.u=e,this.m=void 0,this.readyState=Uy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hb.prototype.cancel=function(){if(this.i=bD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},Fy.prototype.stringify=function(r){return En.JSON.stringify(r,void 0)},Fy.prototype.parse=function(r){return En.JSON.parse(r,void 0)},Qi(fh,kb),fh.prototype.g=function(){return new jy(this.l,this.j)},fh.prototype.i=function(r){return function(){return r}}({}),Qi(jy,Gr);var Uy=0;function zb(r){r.j.read().then(r.Sa.bind(r)).catch(r.ha.bind(r))}function By(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Ks(r)}function Ks(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Zt=jy.prototype).open=function(r,e){if(this.readyState!=Uy)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Ks(this)},Zt.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.D||En).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Zt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,By(this)),this.readyState=Uy},Zt.Va=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==En.ReadableStream&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zb(this)}else r.text().then(this.Ua.bind(this),this.ha.bind(this))},Zt.Sa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?By(this):Ks(this),3==this.readyState&&zb(this)}},Zt.Ua=function(r){this.g&&(this.response=this.responseText=r,By(this))},Zt.Ta=function(r){this.g&&(this.response=r,By(this))},Zt.ha=function(){this.g&&By(this)},Zt.setRequestHeader=function(r,e){this.v.append(r,e)},Zt.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Zt.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(jy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var uR=En.JSON.parse;function Ni(r){Gr.call(this),this.headers=new Vl,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zb,this.K=this.L=!1}Qi(Ni,Gr);var Zb="",NS=/^https?$/i,LS=["POST","PUT"];function lR(r){return"content-type"==r.toLowerCase()}function Kb(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Vy(r),hp(r)}function Vy(r){r.D||(r.D=!0,cs(r,"complete"),cs(r,"error"))}function FS(r){if(r.h&&void 0!==gy&&(!r.C[1]||4!=Hl(r)||2!=r.ba()))if(r.v&&4==Hl(r))Zs(r.Fa,0,r);else if(cs(r,"readystatechange"),4==Hl(r)){r.h=!1;try{const c=r.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var n;if(n=0===c){var i=String(r.H).match(mD)[1]||null;if(!i&&En.self&&En.self.location){var s=En.self.location.protocol;i=s.substr(0,s.length-1)}n=!NS.test(i?i.toLowerCase():"")}t=n}if(t)cs(r,"complete"),cs(r,"success");else{r.m=6;try{var o=2<Hl(r)?r.g.statusText:""}catch(f){o=""}r.j=o+" ["+r.ba()+"]",Vy(r)}}finally{hp(r)}}}function hp(r,e){if(r.g){jS(r);const t=r.g,n=r.C[0]?my:null;r.g=null,r.C=null,e||cs(r,"ready");try{t.onreadystatechange=n}catch(i){}}}function jS(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(En.clearTimeout(r.A),r.A=null)}function Hl(r){return r.g?r.g.readyState:0}function US(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case Zb:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Yb(r,e,t){e:{for(n in t){var n=!1;break e}n=!0}n||(t=function(r){let e="";return lm(r,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Dr(r,e,t))}function Im(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Am(r){this.za=0,this.l=[],this.h=new My,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Im("failFast",!1,r),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Im("baseRetryDelayMs",5e3,r),this.$a=Im("retryDelaySeedMs",1e4,r),this.Ya=Im("forwardChannelMaxRetries",2,r),this.ra=Im("forwardChannelRequestTimeoutMs",2e4,r),this.qa=r&&r.xmlHttpFactory||void 0,this.Ba=r&&r.Yb||!1,this.K=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.J="",this.i=new Hb(r&&r.concurrentRequestLimit),this.Ca=new TD,this.ja=r&&r.fastHandshake||!1,this.Ra=r&&r.Wb||!1,r&&r.Aa&&this.h.Aa(),r&&r.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&r&&r.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!r||!1!==r.Xb}function nd(r){if(fp(r),3==r.G){var e=r.V++,t=nu(r.F);Dr(t,"SID",r.J),Dr(t,"RID",e),Dr(t,"TYPE","terminate"),Gl(r,t),(e=new _m(r,r.h,e,void 0)).K=2,e.v=wm(nu(t)),t=!1,En.navigator&&En.navigator.sendBeacon&&(t=En.navigator.sendBeacon(e.v.toString(),"")),!t&&En.Image&&((new Image).src=e.v,t=!0),t||(e.g=yh(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Oy(e)}mh(r)}function Hy(r){r.g&&(_o(r),r.g.cancel(),r.g=null)}function fp(r){Hy(r),r.u&&(En.clearTimeout(r.u),r.u=null),$l(r),r.i.cancel(),r.m&&("number"==typeof r.m&&En.clearTimeout(r.m),r.m=null)}function Qb(r,e){r.l.push(new class{constructor(r,e){this.h=r,this.g=e}}(r.Za++,e)),3==r.G&&Gy(r)}function Gy(r){RS(r.i)||r.m||(r.m=!0,Ay(r.Ha,r),r.C=0)}function ru(r,e){var t;t=e?e.m:r.V++;const n=nu(r.F);Dr(n,"SID",r.J),Dr(n,"RID",t),Dr(n,"AID",r.U),Gl(r,n),r.o&&r.s&&Yb(n,r.o,r.s),t=new _m(r,r.h,t,r.C+1),null===r.o&&(t.H=r.s),e&&(r.l=e.D.concat(r.l)),e=ds(r,t,1e3),t.setTimeout(Math.round(.5*r.ra)+Math.round(.5*r.ra*Math.random())),$b(r.i,t),Tm(t,n,e)}function Gl(r,e){r.j&&tu({},function(t,n){Dr(e,n,t)})}function ds(r,e,t){t=Math.min(r.l.length,t);var n=r.j?Yi(r.j.Oa,r.j,r):null;e:{var i=r.l;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let c=!0;for(let f=0;f<t;f++){let m=i[f].h;const _=i[f].g;if(m-=s,0>m)s=Math.max(0,i[f].h-100),c=!1;else try{ED(_,o,"req"+m+"_")}catch(w){n&&n(_)}}if(c){n=o.join("&");break e}}}return r=r.l.splice(0,t),e.D=r,n}function rd(r){r.g||r.u||(r.Y=1,Ay(r.Ga,r),r.A=0)}function pp(r){return!(r.g||r.u||3<=r.A||(r.Y++,r.u=yo(Yi(r.Ga,r),gh(r,r.A)),r.A++,0))}function _o(r){null!=r.B&&(En.clearTimeout(r.B),r.B=null)}function $y(r){r.g=new _m(r,r.h,"rpc",r.Y),null===r.o&&(r.g.H=r.s),r.g.O=0;var e=nu(r.oa);Dr(e,"RID","rpc"),Dr(e,"SID",r.J),Dr(e,"CI",r.N?"0":"1"),Dr(e,"AID",r.U),Gl(r,e),Dr(e,"TYPE","xmlhttp"),r.o&&r.s&&Yb(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.la,t.K=1,t.v=wm(nu(e)),t.s=null,t.U=!0,Lb(t,r)}function $l(r){null!=r.v&&(En.clearTimeout(r.v),r.v=null)}function ph(r,e){var t=null;if(r.g==e){$l(r),_o(r),r.g=null;var n=2}else{if(!Gb(r.i,e))return;t=e.D,qb(r.i,e),n=1}if(r.I=e.N,0!=r.G)if(e.i)if(1==n){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=r.C;cs(n=gm(),new bS(n,t,e,i)),Gy(r)}else rd(r);else if(3==(i=e.o)||0==i&&0<r.I||!(1==n&&function(r,e){return!(OS(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.l=e.D.concat(r.l),0):1==r.G||2==r.G||r.C>=(r.Xa?0:r.Ya)||(r.m=yo(Yi(r.Ha,r,e),gh(r,r.C)),r.C++,0)))}(r,e)||2==n&&pp(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),i){case 1:_a(r,5);break;case 4:_a(r,10);break;case 3:_a(r,6);break;default:_a(r,2)}}function gh(r,e){let t=r.Pa+Math.floor(Math.random()*r.$a);return r.j||(t*=2),t*e}function _a(r,e){if(r.h.info("Error code "+e),2==e){var t=null;r.j&&(t=null);var n=Yi(r.jb,r);t||(t=new Xc("//www.google.com/images/cleardot.gif"),En.location&&"http"==En.location.protocol||Jc(t,"https"),wm(t)),function(r,e){const t=new My;if(En.Image){const n=new Image;n.onload=am(Wb,t,n,"TestLoadImage: loaded",!0,e),n.onerror=am(Wb,t,n,"TestLoadImage: error",!1,e),n.onabort=am(Wb,t,n,"TestLoadImage: abort",!1,e),n.ontimeout=am(Wb,t,n,"TestLoadImage: timeout",!1,e),En.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=r}else e(!1)}(t.toString(),n)}else ks(2);r.G=0,r.j&&r.j.va(e),mh(r),fp(r)}function mh(r){r.G=0,r.I=-1,r.j&&((0!=bD(r.i).length||0!=r.l.length)&&(r.i.i.length=0,_y(r.l),r.l.length=0),r.j.ua())}function vh(r,e,t){let n=function(r){return r instanceof Xc?nu(r):new Xc(r,void 0)}(t);if(""!=n.i)e&&Ly(n,e+"."+n.i),cp(n,n.m);else{const i=En.location;n=function(r,e,t,n){var i=new Xc(null,void 0);return r&&Jc(i,r),e&&Ly(i,e),t&&cp(i,t),n&&(i.l=n),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return r.aa&&lm(r.aa,function(i,s){Dr(n,s,i)}),t=r.sa,(e=r.D)&&t&&Dr(n,e,t),Dr(n,"VER",r.ma),Gl(r,n),n}function yh(r,e,t){if(e&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ni(t&&r.Ba&&!r.qa?new fh({ib:!0}):r.qa)).L=r.H,e}function _h(){}function ql(){if(uh&&!(10<=Number(sR)))throw Error("Environmental error: no available transport.")}function bo(r,e){Gr.call(this),this.g=new Am(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(r?r["X-WebChannel-Client-Profile"]=e.ya:r={"X-WebChannel-Client-Profile":e.ya}),this.g.P=r,(r=e&&e.httpHeadersOverwriteParam)&&!np(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!np(e)&&(this.g.D=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new bh(this)}function Jb(r){Mb.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function eT(){Rb.call(this),this.status=1}function bh(r){this.g=r}(Zt=Ni.prototype).ea=function(r,e,t,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);e=e?e.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ym.g(),this.C=function(r){return r.h||(r.h=r.i())}(this.u?this.u:ym),this.g.onreadystatechange=Yi(this.Fa,this);try{this.F=!0,this.g.open(e,String(r),!0),this.F=!1}catch(s){return void Kb(this,s)}r=t||"";const i=new Vl(this.headers);n&&tu(n,function(s,o){i.set(o,s)}),n=function(r){e:{var e=lR;const t=r.length,n="string"==typeof r?r.split(""):r;for(let i=0;i<t;i++)if(i in n&&e.call(void 0,n[i],i,r)){e=i;break e}e=-1}return 0>e?null:"string"==typeof r?r.charAt(e):r[e]}(i.T()),t=En.FormData&&r instanceof En.FormData,!(0<=nS(LS,e))||n||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jS(this),0<this.B&&((this.K=function(r){return uh&&iR()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yi(this.pa,this)):this.A=Zs(this.pa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(s){Kb(this,s)}},Zt.pa=function(){void 0!==gy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cs(this,"timeout"),this.abort(8))},Zt.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,cs(this,"complete"),cs(this,"abort"),hp(this))},Zt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hp(this,!0)),Ni.Z.M.call(this)},Zt.Fa=function(){this.s||(this.F||this.v||this.l?FS(this):this.cb())},Zt.cb=function(){FS(this)},Zt.ba=function(){try{return 2<Hl(this)?this.g.status:-1}catch(r){return-1}},Zt.ga=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},Zt.Qa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),uR(e)}},Zt.Da=function(){return this.m},Zt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Zt=Am.prototype).ma=8,Zt.G=1,Zt.hb=function(r){try{this.h.info("Origin Trials invoked: "+r)}catch(e){}},Zt.Ha=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.V=Math.floor(1e5*Math.random()),r=this.V++;const i=new _m(this,this.h,r,void 0);let s=this.s;if(this.P&&(s?(s=Ty(s),iS(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var n=this.l[t];if(void 0===(n="__data__"in n.g&&"string"==typeof(n=n.g.__data__)?n.length:void 0))break;if(4096<(e+=n)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ds(this,i,e),Dr(t=nu(this.F),"RID",r),Dr(t,"CVER",22),this.D&&Dr(t,"X-HTTP-Session-Id",this.D),Gl(this,t),this.o&&s&&Yb(t,this.o,s),$b(this.i,i),this.Ra&&Dr(t,"TYPE","init"),this.ja?(Dr(t,"$req",e),Dr(t,"SID","null"),i.$=!0,Tm(i,t,null)):Tm(i,t,e),this.G=2}}else 3==this.G&&(r?ru(this,r):0==this.l.length||RS(this.i)||ru(this))},Zt.Ga=function(){if(this.u=null,$y(this),this.$&&!(this.L||null==this.g||0>=this.O)){var r=2*this.O;this.h.info("BP detection timer enabled: "+r),this.B=yo(Yi(this.bb,this),r)}},Zt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ks(10),Hy(this),$y(this))},Zt.ab=function(){null!=this.v&&(this.v=null,Hy(this),pp(this),ks(19))},Zt.jb=function(r){r?(this.h.info("Successfully pinged google.com"),ks(2)):(this.h.info("Failed to ping google.com"),ks(1))},(Zt=_h.prototype).xa=function(){},Zt.wa=function(){},Zt.va=function(){},Zt.ua=function(){},Zt.Oa=function(){},ql.prototype.g=function(r,e){return new bo(r,e)},Qi(bo,Gr),bo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var r=this.g,e=this.l,t=this.h||void 0;r.Wa&&(r.h.info("Origin Trials enabled."),Ay(Yi(r.hb,r,e))),ks(0),r.W=e,r.aa=t||{},r.N=r.X,r.F=vh(r,null,r.W),Gy(r)},bo.prototype.close=function(){nd(this.g)},bo.prototype.u=function(r){if("string"==typeof r){var e={};e.__data__=r,Qb(this.g,e)}else this.v?((e={}).__data__=xy(r),Qb(this.g,e)):Qb(this.g,r)},bo.prototype.M=function(){this.g.j=null,delete this.j,nd(this.g),delete this.g,bo.Z.M.call(this)},Qi(Jb,Mb),Qi(eT,Rb),Qi(bh,_h),bh.prototype.xa=function(){cs(this.g,"a")},bh.prototype.wa=function(r){cs(this.g,new Jb(r))},bh.prototype.va=function(r){cs(this.g,new eT(r))},bh.prototype.ua=function(){cs(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,bo.prototype.send=bo.prototype.u,bo.prototype.open=bo.prototype.m,bo.prototype.close=bo.prototype.close,ap.NO_ERROR=0,ap.TIMEOUT=8,ap.HTTP_ERROR=6,TS.COMPLETE="complete",Pb.EventType=vm,vm.OPEN="a",vm.CLOSE="b",vm.ERROR="c",vm.MESSAGE="d",Gr.prototype.listen=Gr.prototype.N,Ni.prototype.listenOnce=Ni.prototype.O,Ni.prototype.getLastError=Ni.prototype.La,Ni.prototype.getLastErrorCode=Ni.prototype.Da,Ni.prototype.getStatus=Ni.prototype.ba,Ni.prototype.getResponseJson=Ni.prototype.Qa,Ni.prototype.getResponseText=Ni.prototype.ga,Ni.prototype.send=Ni.prototype.ea;var BS=Oi.createWebChannelTransport=function(){return new ql},VS=Oi.getStatEventTarget=function(){return gm()},qy=Oi.ErrorCode=ap,HS=Oi.EventType=TS,GS=Oi.Event=Yc,$S=Oi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qS=Oi.FetchXmlHttpFactory=fh,Wy=Oi.WebChannel=Pb,WS=Oi.XhrIo=Ni;const tT="@firebase/firestore";class hs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hs.UNAUTHENTICATED=new hs(null),hs.GOOGLE_CREDENTIALS=new hs("google-credentials-uid"),hs.FIRST_PARTY=new hs("first-party-uid"),hs.MOCK_USER=new hs("mock-user");let gp="9.6.2";const Wl=new Ul.Yd("@firebase/firestore");function nT(){return Wl.logLevel}function It(r,...e){if(Wl.logLevel<=Ul.in.DEBUG){const t=e.map(rT);Wl.debug(`Firestore (${gp}): ${r}`,...t)}}function Ti(r,...e){if(Wl.logLevel<=Ul.in.ERROR){const t=e.map(rT);Wl.error(`Firestore (${gp}): ${r}`,...t)}}function zy(r,...e){if(Wl.logLevel<=Ul.in.WARN){const t=e.map(rT);Wl.warn(`Firestore (${gp}): ${r}`,...t)}}function rT(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function en(r="Unexpected state"){const e=`FIRESTORE (${gp}) INTERNAL ASSERTION FAILED: `+r;throw Ti(e),new Error(e)}function fn(r,e){r||en()}function Ut(r,e){return r}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends mn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ji{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class iT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hs.UNAUTHENTICATED))}shutdown(){}}class xD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mp{constructor(e){this.t=e,this.currentUser=hs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let i=this.i;const s=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let o=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ji,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const m=o;e.enqueueRetryable((0,Xe.Z)(function*(){yield m.promise,yield s(n.currentUser)}))},f=m=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ji)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(fn("string"==typeof n.accessToken),new iT(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fn(null===e||"string"==typeof e),new hs(e)}}class ID{constructor(e,t,n){this.type="FirstParty",this.user=hs.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class ZS{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ID(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YS{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=i=>{e.enqueueRetryable(()=>{return null!=(s=i).error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`),t(s.token);var s})};const n=i=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?n(i):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fn("string"==typeof t.token),new KS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Bo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.p(n),this.T=n=>t.writeSequenceNumber(n))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function QS(r){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}Bo.I=-1;class XS{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=QS(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function Fn(r,e){return r<e?-1:r>e?1:0}function vp(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}function JS(r){return r+"\0"}class es{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return es.fromMillis(Date.now())}static fromDate(e){return es.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new es(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fn(this.nanoseconds,e.nanoseconds):Fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wn(e)}static min(){return new wn(new es(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function eC(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function id(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function oT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Th{constructor(e,t,n){void 0===t?t=0:t>e.length&&en(),void 0===n?n=e.length-t:n>e.length-t&&en(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Th.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Th?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ir extends Th{construct(e,t,n){return new ir(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new bt(tt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new ir(t)}static emptyPath(){return new ir([])}}const aT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends Th{construct(e,t,n){return new fs(e,t,n)}static isValidIdentifier(e){return aT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fs(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(0===n.length)throw new bt(tt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new bt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new bt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,i+=2}else"`"===c?(o=!o,i++):"."!==c||o?(n+=c,i++):(s(),i++)}if(s(),o)throw new bt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(t)}static emptyPath(){return new fs([])}}class Dm{constructor(e){this.fields=e,e.sort(fs.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vp(this.fields,e.fields,(t,n)=>t.isEqual(n))}}class Ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ei(t)}static fromUint8Array(e){const t=function(n){let i="";for(let s=0;s<n.length;++s)i+=String.fromCharCode(n[s]);return i}(e);return new Ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ei.EMPTY_BYTE_STRING=new Ei("");const uT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ru(r){if(fn(!!r),"string"==typeof r){let e=0;const t=uT.exec(r);if(fn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:wi(r.seconds),nanos:wi(r.nanos)}}function wi(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function sd(r){return"string"==typeof r?Ei.fromBase64String(r):Ei.fromUint8Array(r)}function Pm(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function lT(r){const e=r.mapValue.fields.__previous_value__;return Pm(e)?lT(e):e}function Zy(r){const e=Ru(r.mapValue.fields.__local_write_time__.timestampValue);return new es(e.seconds,e.nanos)}function Eh(r){return null==r}function yp(r){return 0===r&&1/r==-1/0}function Ky(r){return"number"==typeof r&&Number.isInteger(r)&&!yp(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}class tn{constructor(e){this.path=e}static fromPath(e){return new tn(ir.fromString(e))}static fromName(e){return new tn(ir.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===ir.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tn(new ir(e.slice()))}}function od(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Pm(r)?4:10:en()}function ba(r,e){if(r===e)return!0;const t=od(r);if(t!==od(e))return!1;switch(t){case 0:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Zy(r).isEqual(Zy(e));case 3:return function(n,i){if("string"==typeof n.timestampValue&&"string"==typeof i.timestampValue&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const s=Ru(n.timestampValue),o=Ru(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return i=e,sd(r.bytesValue).isEqual(sd(i.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(n,i){return wi(n.geoPointValue.latitude)===wi(i.geoPointValue.latitude)&&wi(n.geoPointValue.longitude)===wi(i.geoPointValue.longitude)}(r,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return wi(n.integerValue)===wi(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const s=wi(n.doubleValue),o=wi(i.doubleValue);return s===o?yp(s)===yp(o):isNaN(s)&&isNaN(o)}return!1}(r,e);case 9:return vp(r.arrayValue.values||[],e.arrayValue.values||[],ba);case 10:return function(n,i){const s=n.mapValue.fields||{},o=i.mapValue.fields||{};if(eC(s)!==eC(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===o[c]||!ba(s[c],o[c])))return!1;return!0}(r,e);default:return en()}var i}function _p(r,e){return void 0!==(r.values||[]).find(t=>ba(t,e))}function wh(r,e){if(r===e)return 0;const t=od(r),n=od(e);if(t!==n)return Fn(t,n);switch(t){case 0:return 0;case 1:return Fn(r.booleanValue,e.booleanValue);case 2:return function(i,s){const o=wi(i.integerValue||i.doubleValue),c=wi(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(r,e);case 3:return Yy(r.timestampValue,e.timestampValue);case 4:return Yy(Zy(r),Zy(e));case 5:return Fn(r.stringValue,e.stringValue);case 6:return function(i,s){const o=sd(i),c=sd(s);return o.compareTo(c)}(r.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),c=s.split("/");for(let f=0;f<o.length&&f<c.length;f++){const m=Fn(o[f],c[f]);if(0!==m)return m}return Fn(o.length,c.length)}(r.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Fn(wi(i.latitude),wi(s.latitude));return 0!==o?o:Fn(wi(i.longitude),wi(s.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],c=s.values||[];for(let f=0;f<o.length&&f<c.length;++f){const m=wh(o[f],c[f]);if(m)return m}return Fn(o.length,c.length)}(r.arrayValue,e.arrayValue);case 10:return function(i,s){const o=i.fields||{},c=Object.keys(o),f=s.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let _=0;_<c.length&&_<m.length;++_){const w=Fn(c[_],m[_]);if(0!==w)return w;const C=wh(o[c[_]],f[m[_]]);if(0!==C)return C}return Fn(c.length,m.length)}(r.mapValue,e.mapValue);default:throw en()}}function Yy(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Fn(r,e);const t=Ru(r),n=Ru(e),i=Fn(t.seconds,n.seconds);return 0!==i?i:Fn(t.nanos,n.nanos)}function Qy(r){return cT(r)}function cT(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const i=Ru(n);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?sd(r.bytesValue).toBase64():"referenceValue"in r?tn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=cT(o);return i+"]"}(r.arrayValue):"mapValue"in r?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${cT(n.fields[c])}`;return s+"}"}(r.mapValue):en();var e}function Mm(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Xy(r){return!!r&&"integerValue"in r}function Rm(r){return!!r&&"arrayValue"in r}function dT(r){return!!r&&"nullValue"in r}function tC(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Om(r){return!!r&&"mapValue"in r}function bp(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return id(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=bp(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bp(r.arrayValue.values[t]);return e}return Object.assign({},r)}class ps{constructor(e){this.value=e}static empty(){return new ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bp(t)}setAll(e){let t=fs.emptyPath(),n={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,n,i),n={},i=[],t=c.popLast()}o?n[c.lastSegment()]=bp(o):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());Om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Om(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){id(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new ps(bp(this.value))}}function Jy(r){const e=[];return id(r.fields,(t,n)=>{const i=new fs([t]);if(Om(n)){const s=Jy(n.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Dm(e)}class kr{constructor(e,t,n,i,s){this.key=e,this.documentType=t,this.version=n,this.data=i,this.documentState=s}static newInvalidDocument(e){return new kr(e,0,wn.min(),ps.empty(),0)}static newFoundDocument(e,t,n){return new kr(e,1,t,n,0)}static newNoDocument(e,t){return new kr(e,2,t,ps.empty(),0)}static newUnknownDocument(e,t){return new kr(e,3,t,ps.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nC{constructor(e,t=null,n=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.R=null}}function hT(r,e=null,t=[],n=[],i=null,s=null,o=null){return new nC(r,e,t,n,i,s,o)}function Tp(r){const e=Ut(r);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>function(r){return r.field.canonicalString()+r.op.toString()+Qy(r.value)}(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>{return(i=n).field.canonicalString()+i.dir;var i}).join(","),Eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e_(e.startAt)),e.endAt&&(t+="|ub:",t+=e_(e.endAt)),e.R=t}return e.R}function Nm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!aC(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if((t=r.filters[i]).op!==(n=e.filters[i]).op||!t.field.isEqual(n.field)||!ba(t.value,n.value))return!1;var t,n;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!uC(r.startAt,e.startAt)&&uC(r.endAt,e.endAt)}function Lm(r){return tn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}class Ps extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,n):new AD(e,t,n):"array-contains"===t?new Li(e,n):"in"===t?new oC(e,n):"not-in"===t?new kD(e,n):"array-contains-any"===t?new PD(e,n):new Ps(e,t,n)}static P(e,t,n){return"in"===t?new DD(e,n):new iC(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(wh(t,this.value)):null!==t&&od(this.value)===od(t)&&this.v(wh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return en()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class AD extends Ps{constructor(e,t,n){super(e,t,n),this.key=tn.fromName(n.referenceValue)}matches(e){const t=tn.comparator(e.key,this.key);return this.v(t)}}class DD extends Ps{constructor(e,t){super(e,"in",t),this.keys=sC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iC extends Ps{constructor(e,t){super(e,"not-in",t),this.keys=sC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sC(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(n=>tn.fromName(n.referenceValue))}class Li extends Ps{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rm(t)&&_p(t.arrayValue,this.value)}}class oC extends Ps{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_p(this.value.arrayValue,t)}}class kD extends Ps{constructor(e,t){super(e,"not-in",t)}matches(e){if(_p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_p(this.value.arrayValue,t)}}class PD extends Ps{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>_p(this.value.arrayValue,n))}}class Ep{constructor(e,t){this.position=e,this.before=t}}function e_(r){return`${r.before?"b":"a"}:${r.position.map(e=>Qy(e)).join(",")}`}class Sh{constructor(e,t="asc"){this.field=e,this.dir=t}}function aC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}function Ch(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],o=r.position[i];if(n=s.field.isKeyField()?tn.comparator(tn.fromName(o.referenceValue),t.key):wh(o,t.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return r.before?n<=0:n<0}function uC(r,e){if(null===r)return null===e;if(null===e||r.before!==e.before||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ba(r.position[t],e.position[t]))return!1;return!0}class zl{constructor(e,t=null,n=[],i=[],s=null,o="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=f,this.S=null,this.D=null}}function fT(r,e,t,n,i,s,o,c){return new zl(r,e,t,n,i,s,o,c)}function wp(r){return new zl(r)}function Fm(r){return!Eh(r.limit)&&"F"===r.limitType}function pT(r){return!Eh(r.limit)&&"L"===r.limitType}function t_(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function jm(r){for(const e of r.filters)if(e.V())return e.field;return null}function Ta(r){return null!==r.collectionGroup}function Sp(r){const e=Ut(r);if(null===e.S){e.S=[];const t=jm(e),n=t_(e);if(null!==t&&null===n)t.isKeyField()||e.S.push(new Sh(t)),e.S.push(new Sh(fs.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.S.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Sh(fs.keyField(),s))}}}return e.S}function Ea(r){const e=Ut(r);if(!e.D)if("F"===e.limitType)e.D=hT(e.path,e.collectionGroup,Sp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Sp(e))t.push(new Sh(s.field,"desc"===s.dir?"asc":"desc"));const n=e.endAt?new Ep(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Ep(e.startAt.position,!e.startAt.before):null;e.D=hT(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.D}function iu(r,e,t){return new zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ys(r,e){return Nm(Ea(r),Ea(e))&&r.limitType===e.limitType}function wa(r){return`${Tp(Ea(r))}|lt:${r.limitType}`}function n_(r){return`Query(target=${function(r){let e=r.path.canonicalString();return null!==r.collectionGroup&&(e+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(e+=`, filters: [${r.filters.map(t=>{return`${(n=t).field.canonicalString()} ${n.op} ${Qy(n.value)}`;var n}).join(", ")}]`),Eh(r.limit)||(e+=", limit: "+r.limit),r.orderBy.length>0&&(e+=`, orderBy: [${r.orderBy.map(t=>{return`${(n=t).field.canonicalString()} (${n.dir})`;var n}).join(", ")}]`),r.startAt&&(e+=", startAt: "+e_(r.startAt)),r.endAt&&(e+=", endAt: "+e_(r.endAt)),`Target(${e})`}(Ea(r))}; limitType=${r.limitType})`}function Cp(r,e){return e.isFoundDocument()&&function(t,n){const i=n.key.path;return null!==t.collectionGroup?n.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tn.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(r,e)&&function(t,n){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===n.data.field(i.field))return!1;return!0}(r,e)&&function(t,n){for(const i of t.filters)if(!i.matches(n))return!1;return!0}(r,e)&&(n=e,!((t=r).startAt&&!Ch(t.startAt,Sp(t),n)||t.endAt&&Ch(t.endAt,Sp(t),n)));var t,n}function lC(r){return(e,t)=>{let n=!1;for(const i of Sp(r)){const s=MD(i,e,t);if(0!==s)return s;n=n||i.field.isKeyField()}return 0}}function MD(r,e,t){const n=r.field.isKeyField()?tn.comparator(e.key,t.key):function(i,s,o){const c=s.data.field(i),f=o.data.field(i);return null!==c&&null!==f?wh(c,f):en()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return en()}}function cC(r,e){if(r.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yp(e)?"-0":e}}function dC(r){return{integerValue:""+r}}function r_(r,e){return Ky(e)?dC(e):cC(r,e)}class ad{constructor(){this._=void 0}}function RD(r,e,t){return r instanceof xh?function(n,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):r instanceof ud?Um(r,e):r instanceof Ih?gT(r,e):function(n,i){const s=fC(n,i),o=i_(s)+i_(n.N);return Xy(s)&&Xy(n.N)?dC(o):cC(n.k,o)}(r,e)}function hC(r,e,t){return r instanceof ud?Um(r,e):r instanceof Ih?gT(r,e):t}function fC(r,e){return r instanceof Ah?Xy(t=e)||(n=t)&&"doubleValue"in n?e:{integerValue:0}:null;var n,t}class xh extends ad{}class ud extends ad{constructor(e){super(),this.elements=e}}function Um(r,e){const t=Bm(e);for(const n of r.elements)t.some(i=>ba(i,n))||t.push(n);return{arrayValue:{values:t}}}class Ih extends ad{constructor(e){super(),this.elements=e}}function gT(r,e){let t=Bm(e);for(const n of r.elements)t=t.filter(i=>!ba(i,n));return{arrayValue:{values:t}}}class Ah extends ad{constructor(e,t){super(),this.k=e,this.N=t}}function i_(r){return wi(r.integerValue||r.doubleValue)}function Bm(r){return Rm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Dh{constructor(e,t){this.field=e,this.transform=t}}class gC{constructor(e,t){this.version=e,this.transformResults=t}}class ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vm(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Hm{}function mC(r,e,t){r instanceof Gm?function(n,i,s){const o=n.value.clone(),c=bC(n.fieldTransforms,i,s.transformResults);o.setAll(c),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(r,e,t):r instanceof ld?function(n,i,s){if(!Vm(n.precondition,i))return void i.convertToUnknownDocument(s.version);const o=bC(n.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(_C(n)),c.setAll(o),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function s_(r,e,t){var i;r instanceof Gm?function(n,i,s){if(!Vm(n.precondition,i))return;const o=n.value.clone(),c=TC(n.fieldTransforms,s,i);o.setAll(c),i.convertToFoundDocument(yC(i),o).setHasLocalMutations()}(r,e,t):r instanceof ld?function(n,i,s){if(!Vm(n.precondition,i))return;const o=TC(n.fieldTransforms,s,i),c=i.data;c.setAll(_C(n)),c.setAll(o),i.convertToFoundDocument(yC(i),c).setHasLocalMutations()}(r,e,t):Vm(r.precondition,i=e)&&i.convertToNoDocument(wn.min())}function OD(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=fC(n.transform,i||null);null!=s&&(null==t&&(t=ps.empty()),t.set(n.field,s))}return t||null}function vC(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(n=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===n||t&&n&&vp(t,n,(i,s)=>function(r,e){return r.field.isEqual(e.field)&&(n=e.transform,(t=r.transform)instanceof ud&&n instanceof ud||t instanceof Ih&&n instanceof Ih?vp(t.elements,n.elements,ba):t instanceof Ah&&n instanceof Ah?ba(t.N,n.N):t instanceof xh&&n instanceof xh);var t,n}(i,s))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,n}function yC(r){return r.isFoundDocument()?r.version:wn.min()}class Gm extends Hm{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}}class ld extends Hm{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function _C(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function bC(r,e,t){const n=new Map;fn(r.length===t.length);for(let i=0;i<t.length;i++){const s=r[i],o=s.transform,c=e.data.field(s.field);n.set(s.field,hC(o,c,t[i]))}return n}function TC(r,e,t){const n=new Map;for(const i of r){const s=i.transform,o=t.data.field(i.field);n.set(i.field,RD(s,o,e))}return n}class $m extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class mT extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ND{constructor(e){this.count=e}}var Si,Hn;function EC(r){switch(r){default:return en();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function wC(r){if(void 0===r)return Ti("GRPC error has no .code"),tt.UNKNOWN;switch(r){case Si.OK:return tt.OK;case Si.CANCELLED:return tt.CANCELLED;case Si.UNKNOWN:return tt.UNKNOWN;case Si.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case Si.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case Si.INTERNAL:return tt.INTERNAL;case Si.UNAVAILABLE:return tt.UNAVAILABLE;case Si.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case Si.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case Si.NOT_FOUND:return tt.NOT_FOUND;case Si.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case Si.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case Si.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case Si.ABORTED:return tt.ABORTED;case Si.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case Si.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case Si.DATA_LOSS:return tt.DATA_LOSS;default:return en()}}(Hn=Si||(Si={}))[Hn.OK=0]="OK",Hn[Hn.CANCELLED=1]="CANCELLED",Hn[Hn.UNKNOWN=2]="UNKNOWN",Hn[Hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hn[Hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hn[Hn.NOT_FOUND=5]="NOT_FOUND",Hn[Hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hn[Hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hn[Hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hn[Hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hn[Hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hn[Hn.ABORTED=10]="ABORTED",Hn[Hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hn[Hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hn[Hn.INTERNAL=13]="INTERNAL",Hn[Hn.UNAVAILABLE=14]="UNAVAILABLE",Hn[Hn.DATA_LOSS=15]="DATA_LOSS";class Fi{constructor(e,t){this.comparator=e,this.root=t||gs.EMPTY}insert(e,t){return new Fi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gs.BLACK,null,null))}remove(e){return new Fi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o_(this.root,e,this.comparator,!1)}getReverseIterator(){return new o_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o_(this.root,e,this.comparator,!0)}}class o_{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gs{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:gs.RED,this.left=null!=i?i:gs.EMPTY,this.right=null!=s?s:gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new gs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return gs.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw en();const e=this.left.check();if(e!==this.right.check())throw en();return e+(this.isRed()?0:1)}}gs.EMPTY=null,gs.RED=!0,gs.BLACK=!1,gs.EMPTY=new class{constructor(){this.size=0}get key(){throw en()}get value(){throw en()}get color(){throw en()}get left(){throw en()}get right(){throw en()}copy(r,e,t,n,i){return this}insert(r,e,t){return new gs(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $r{constructor(e){this.comparator=e,this.data=new Fi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vT(this.data.getIterator())}getIteratorFrom(e){return new vT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof $r)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $r(this.comparator);return t.data=e,t}}class vT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const SC=new Fi(tn.comparator);function Vo(){return SC}const CC=new Fi(tn.comparator);function a_(){return CC}const xC=new Fi(tn.comparator);function yT(){return xC}const IC=new $r(tn.comparator);function sr(...r){let e=IC;for(const t of r)e=e.add(t);return e}const AC=new $r(Fn);function Ou(){return AC}class qm{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Wm.createSynthesizedTargetChangeForCurrentChange(e,t)),new qm(wn.min(),n,Ou(),Vo(),sr())}}class Wm{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Wm(Ei.EMPTY_BYTE_STRING,t,sr(),sr(),sr())}}class Zl{constructor(e,t,n,i){this.$=e,this.removedTargetIds=t,this.key=n,this.O=i}}class LD{constructor(e,t){this.targetId=e,this.F=t}}class u_{constructor(e,t,n=Ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class FD{constructor(){this.M=0,this.L=jD(),this.B=Ei.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=sr(),t=sr(),n=sr();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:en()}}),new Wm(this.B,this.U,e,t,n)}H(){this.q=!1,this.L=jD()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class DC{constructor(e){this.et=e,this.nt=new Map,this.st=Vo(),this.it=_T(),this.rt=new $r(Fn)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.at(t,e.O):this.ct(t,e.key,e.O);for(const t of e.removedTargetIds)this.ct(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const n=this.ht(t);switch(e.state){case 0:this.lt(t)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(t);break;case 3:this.lt(t)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),n.W(e.resumeToken));break;default:en()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((n,i)=>{this.lt(i)&&t(i)})}dt(e){const t=e.targetId,n=e.F.count,i=this.wt(t);if(i){const s=i.target;if(Lm(s))if(0===n){const o=new tn(s.path);this.ct(t,o,kr.newNoDocument(o,wn.min()))}else fn(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((s,o)=>{const c=this.wt(o);if(c){if(s.current&&Lm(c.target)){const f=new tn(c.target.path);null!==this.st.get(f)||this.yt(o,f)||this.ct(o,f,kr.newNoDocument(f,e))}s.j&&(t.set(o,s.G()),s.H())}});let n=sr();this.it.forEach((s,o)=>{let c=!0;o.forEachWhile(f=>{const m=this.wt(f);return!m||2===m.purpose||(c=!1,!1)}),c&&(n=n.add(s))});const i=new qm(e,t,this.rt,this.st,n);return this.st=Vo(),this.it=_T(),this.rt=new $r(Fn),i}at(e,t){if(!this.lt(e))return;const n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.lt(e))return;const i=this.ht(e);this.yt(e,t)?i.J(t,1):i.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new FD,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new $r(Fn),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||It("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new FD),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function _T(){return new Fi(tn.comparator)}function jD(){return new Fi(tn.comparator)}const dn={asc:"ASCENDING",desc:"DESCENDING"},UD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BD{constructor(e,t){this.databaseId=e,this.C=t}}function zm(r,e){return r.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zm(r,e){return r.C?e.toBase64():e.toUint8Array()}function VD(r,e){return zm(r,e.toTimestamp())}function di(r){return fn(!!r),wn.fromTimestamp(function(e){const t=Ru(e);return new es(t.seconds,t.nanos)}(r))}function xp(r,e){return(t=r,new ir(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qr(r){const e=ir.fromString(r);return fn(xT(e)),e}function l_(r,e){return xp(r.databaseId,e.path)}function su(r,e){const t=qr(e);if(t.get(1)!==r.databaseId.projectId)throw new bt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new bt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new tn(TT(t))}function bT(r,e){return xp(r.databaseId,e)}function kC(r){const e=qr(r);return 4===e.length?ir.emptyPath():TT(e)}function Ip(r){return new ir(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function TT(r){return fn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function ET(r,e,t){return{name:l_(r,e),fields:t.value.mapValue.fields}}function wT(r,e,t){const n=su(r,e.name),i=di(e.updateTime),s=new ps({mapValue:{fields:e.fields}}),o=kr.newFoundDocument(n,i,s);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function c_(r,e){let t;if(e instanceof Gm)t={update:ET(r,e.key,e.value)};else if(e instanceof $m)t={delete:l_(r,e.key)};else if(e instanceof ld)t={update:ET(r,e.key,e.data),updateMask:LC(e.fieldMask)};else{if(!(e instanceof mT))return en();t={verify:l_(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const o=s.transform;if(o instanceof xh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ud)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ih)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ah)return{fieldPath:s.field.canonicalString(),increment:o.N};throw en()}(0,n))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:VD(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:en()),t;var i}function Ap(r,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ci.updateTime(di(i.updateTime)):void 0!==i.exists?ci.exists(i.exists):ci.none():ci.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let c=null;"setToServerValue"in o?(fn("REQUEST_TIME"===o.setToServerValue),c=new xh):"appendMissingElements"in o?c=new ud(o.appendMissingElements.values||[]):"removeAllFromArray"in o?c=new Ih(o.removeAllFromArray.values||[]):"increment"in o?c=new Ah(s,o.increment):en();const f=fs.fromServerFormat(o.fieldPath);return new Dh(f,c)}(r,i)):[];var i;if(e.update){const i=su(r,e.update.name),s=new ps({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Dm((e.updateMask.fieldPaths||[]).map(m=>fs.fromServerFormat(m)));return new ld(i,s,o,t,n)}return new Gm(i,s,t,n)}if(e.delete){const i=su(r,e.delete);return new $m(i,t)}if(e.verify){const i=su(r,e.verify);return new mT(i,t)}return en()}function PC(r,e){return{documents:[bT(r,e.path)]}}function MC(r,e){const t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(t.parent=bT(r,n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bT(r,n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(c){if(0===c.length)return;const f=c.map(m=>function(_){if("=="===_.op){if(tC(_.value))return{unaryFilter:{field:Dp(_.field),op:"IS_NAN"}};if(dT(_.value))return{unaryFilter:{field:Dp(_.field),op:"IS_NULL"}}}else if("!="===_.op){if(tC(_.value))return{unaryFilter:{field:Dp(_.field),op:"IS_NOT_NAN"}};if(dT(_.value))return{unaryFilter:{field:Dp(_.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dp(_.field),op:Qm(_.op),value:_.value}}}(m));return 1===f.length?f[0]:{compositeFilter:{op:"AND",filters:f}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(f=>{return{field:Dp((m=f).field),direction:Ym(m.dir)};var m})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(f=e.limit,r.C||Eh(f)?f:{value:f});var f;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=CT(e.startAt)),e.endAt&&(t.structuredQuery.endAt=CT(e.endAt)),t}function Km(r){let e=kC(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){fn(1===n);const _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let s=[];t.where&&(s=ST(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new Sh(kp((w=_).field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let c=null;t.limit&&(c=function(_){let w;return w="object"==typeof _?_.value:_,Eh(w)?null:w}(t.limit));let f=null;t.startAt&&(f=OC(t.startAt));let m=null;return t.endAt&&(m=OC(t.endAt)),fT(e,i,o,s,c,"F",f,m)}function ST(r){return r?void 0!==r.unaryFilter?[NC(r)]:void 0!==r.fieldFilter?[qD(r)]:void 0!==r.compositeFilter?r.compositeFilter.filters.map(e=>ST(e)).reduce((e,t)=>e.concat(t)):en():[]}function CT(r){return{before:r.before,values:r.position}}function OC(r){return new Ep(r.values||[],!!r.before)}function Ym(r){return dn[r]}function Qm(r){return UD[r]}function Dp(r){return{fieldPath:r.canonicalString()}}function kp(r){return fs.fromServerFormat(r.fieldPath)}function qD(r){return Ps.create(kp(r.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return en()}}(r.fieldFilter.op),r.fieldFilter.value)}function NC(r){switch(r.unaryFilter.op){case"IS_NAN":const e=kp(r.unaryFilter.field);return Ps.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=kp(r.unaryFilter.field);return Ps.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=kp(r.unaryFilter.field);return Ps.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=kp(r.unaryFilter.field);return Ps.create(i,"!=",{nullValue:"NULL_VALUE"});default:return en()}}function LC(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xT(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}function ou(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=jC(e)),e=FC(r.get(t),e);return jC(e)}function FC(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function jC(r){return r+"\x01\x01"}function Kl(r){const e=r.length;if(fn(e>=2),2===e)return fn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),ir.emptyPath();const t=e-2,n=[];let i="";for(let s=0;s<e;){const o=r.indexOf("\x01",s);switch((o<0||o>t)&&en(),r.charAt(o+1)){case"\x01":const c=r.substring(s,o);let f;0===i.length?f=c:(i+=c,f=i,i=""),n.push(f);break;case"\x10":i+=r.substring(s,o),i+="\0";break;case"\x11":i+=r.substring(s,o+1);break;default:en()}s=o+2}return new ir(n)}class hR{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Sa{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}Sa.store="owner",Sa.key="owner";class kh{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}kh.store="mutationQueues",kh.keyPath="userId";class Nr{constructor(e,t,n,i,s){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=s}}Nr.store="mutations",Nr.keyPath="batchId",Nr.userMutationsIndex="userMutationsIndex",Nr.userMutationsKeyPath=["userId","batchId"];class ms{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ou(t)]}static key(e,t,n){return[e,ou(t),n]}}ms.store="documentMutations",ms.PLACEHOLDER=new ms;class d_{constructor(e,t){this.path=e,this.readTime=t}}class WD{constructor(e,t){this.path=e,this.version=t}}class ti{constructor(e,t,n,i,s,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=i,this.readTime=s,this.parentPath=o}}ti.store="remoteDocuments",ti.readTimeIndex="readTimeIndex",ti.readTimeIndexPath="readTime",ti.collectionReadTimeIndex="collectionReadTimeIndex",ti.collectionReadTimeIndexPath=["parentPath","readTime"];class au{constructor(e){this.byteSize=e}}au.store="remoteDocumentGlobal",au.key="remoteDocumentGlobalKey";class ts{constructor(e,t,n,i,s,o,c){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=o,this.query=c}}ts.store="targets",ts.keyPath="targetId",ts.queryTargetsIndexName="queryTargetsIndex",ts.queryTargetsKeyPath=["canonicalId","targetId"];class vs{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}vs.store="targetDocuments",vs.keyPath=["targetId","path"],vs.documentTargetsIndex="documentTargetsIndex",vs.documentTargetsKeyPath=["path","targetId"];class Ho{constructor(e,t,n,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=i}}Ho.key="targetGlobalKey",Ho.store="targetGlobal";class Ph{constructor(e,t){this.collectionId=e,this.parent=t}}Ph.store="collectionParents",Ph.keyPath=["collectionId","parent"];class Yl{constructor(e,t,n,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=i}}Yl.store="clientMetadata",Yl.keyPath="clientId";class Pp{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Pp.store="bundles",Pp.keyPath="bundleId";class Mh{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Mh.store="namedQueries",Mh.keyPath="name";const zD=[kh.store,Nr.store,ms.store,ti.store,ts.store,Sa.store,Ho.store,vs.store,Yl.store,au.store,Ph.store,Pp.store,Mh.store],UC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class mt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&en(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new mt((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof mt?t:mt.resolve(t)}catch(t){return mt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):mt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):mt.reject(t)}static resolve(e){return new mt((t,n)=>{t(e)})}static reject(e){return new mt((t,n)=>{n(e)})}static waitFor(e){return new mt((t,n)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},f=>n(f))}),o=!0,s===i&&t()})}static or(e){let t=mt.resolve(!1);for(const n of e)t=t.next(i=>i?mt.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}}class Xm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Ji,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Jm(e,t.error)):this.It.resolve()},this.transaction.onerror=n=>{const i=h_(n.target.error);this.It.reject(new Jm(e,i))}}static open(e,t,n,i){try{return new Xm(t,e.transaction(i,n))}catch(s){throw new Jm(t,s)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new ZD(t)}}class uu{constructor(e,t,n){this.name=e,this.version=t,this.Rt=n,12.2===uu.bt((0,mn.z$)())&&Ti("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),Ql(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,mn.hl)())return!1;if(uu.vt())return!0;const e=(0,mn.z$)(),t=uu.bt(e),n=0<t&&t<10,i=uu.Vt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Ct(e){var t=this;return(0,Xe.Z)(function*(){return t.db||(It("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{n(o.target.result)},s.onblocked=()=>{i(new Jm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;i("VersionError"===c.name?new bt(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new bt(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new Jm(e,c))},s.onupgradeneeded=o=>{It("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.Rt.Nt(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{It("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=n=>t.kt(n)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,i){var s=this;return(0,Xe.Z)(function*(){const o="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.Ct(e);const f=Xm.open(s.db,e,o?"readonly":"readwrite",n),m=i(f).catch(_=>(f.abort(_),mt.reject(_))).toPromise();return m.catch(()=>{}),yield f.At,m}catch(f){const m="FirebaseError"!==f.name&&c<3;if(It("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),s.close(),!m)return Promise.reject(f)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class BC{constructor(e){this.$t=e,this.Ot=!1,this.Ft=null}get isDone(){return this.Ot}get Mt(){return this.Ft}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Ft=e}delete(){return Ql(this.$t.delete())}}class Jm extends bt{constructor(e,t){super(tt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cd(r){return"IndexedDbTransactionError"===r.name}class ZD{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(It("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ql(n)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),Ql(this.store.add(e))}get(e){return Ql(this.store.get(e)).next(t=>(void 0===t&&(t=null),It("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),Ql(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),Ql(this.store.count())}Bt(e,t){const n=this.cursor(this.options(e,t)),i=[];return this.Ut(n,(s,o)=>{i.push(o)}).next(()=>i)}qt(e,t){It("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Kt=!1;const i=this.cursor(n);return this.Ut(i,(s,o,c)=>c.delete())}jt(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.Ut(i,t)}Qt(e){const t=this.cursor({});return new mt((n,i)=>{t.onerror=s=>{const o=h_(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(c=>{c?o.continue():n()}):n()}})}Ut(e,t){const n=[];return new mt((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const f=new BC(c),m=t(c.primaryKey,c.value,f);if(m instanceof mt){const _=m.catch(w=>(f.done(),mt.reject(w)));n.push(_)}f.isDone?i():null===f.Mt?c.continue():c.continue(f.Mt)}}).next(()=>mt.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ql(r){return new mt((e,t)=>{r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{const i=h_(n.target.error);t(i)}})}let VC=!1;function h_(r){const e=uu.bt((0,mn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VC||(VC=!0,setTimeout(()=>{throw n},0)),n}}return r}class IT extends Rh{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function To(r,e){const t=Ut(r);return uu.Dt(t.Wt,e)}class AT{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mC(s,e,n[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&s_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&s_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(wn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sr())}isEqual(e){return this.batchId===e.batchId&&vp(this.mutations,e.mutations,(t,n)=>vC(t,n))&&vp(this.baseMutations,e.baseMutations,(t,n)=>vC(t,n))}}class DT{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){fn(e.mutations.length===n.length);let i=yT();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,n[o].version);return new DT(e,t,n,i)}}class Nu{constructor(e,t,n,i,s=wn.min(),o=wn.min(),c=Ei.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c}withSequenceNumber(e){return new Nu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class HC{constructor(e){this.Gt=e}}function f_(r,e){if(e.document)return wT(r.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=tn.fromSegments(e.noDocument.path),n=Rp(e.noDocument.readTime),i=kr.newNoDocument(t,n);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=tn.fromSegments(e.unknownDocument.path),n=Rp(e.unknownDocument.version);return kr.newUnknownDocument(t,n)}return en()}function GC(r,e,t){const n=kT(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const s={name:l_(c=r.Gt,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:zm(c,f.version.toTimestamp())};return new ti(null,null,s,e.hasCommittedMutations,n,i)}var c,f;if(e.isNoDocument()){const s=e.key.path.toArray(),o=Mp(e.version),c=e.hasCommittedMutations;return new ti(null,new d_(s,o),null,c,n,i)}if(e.isUnknownDocument()){const s=e.key.path.toArray(),o=Mp(e.version);return new ti(new WD(s,o),null,null,!0,n,i)}return en()}function kT(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function $C(r){const e=new es(r[0],r[1]);return wn.fromTimestamp(e)}function Mp(r){const e=r.toTimestamp();return new hR(e.seconds,e.nanoseconds)}function Rp(r){const e=new es(r.seconds,r.nanoseconds);return wn.fromTimestamp(e)}function Op(r,e){const t=(e.baseMutations||[]).map(s=>Ap(r.Gt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const n=e.mutations.map(s=>Ap(r.Gt,s)),i=es.fromMillis(e.localWriteTimeMs);return new AT(e.batchId,i,t,n)}function ev(r){const e=Rp(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Rp(r.lastLimboFreeSnapshotVersion):wn.min();let n;var i;return void 0!==r.query.documents?(fn(1===(i=r.query).documents.length),n=Ea(wp(kC(i.documents[0])))):n=Ea(Km(r.query)),new Nu(n,r.targetId,0,r.lastListenSequenceNumber,e,t,Ei.fromBase64String(r.resumeToken))}function qC(r,e){const t=Mp(e.snapshotVersion),n=Mp(e.lastLimboFreeSnapshotVersion);let i;i=Lm(e.target)?PC(r.Gt,e.target):MC(r.Gt,e.target);const s=e.resumeToken.toBase64();return new ts(e.targetId,Tp(e.target),t,s,e.sequenceNumber,n,i)}function p_(r){const e=Km({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?iu(e,e.limit,"L"):e}class WC{getBundleMetadata(e,t){return zC(e).get(t).next(n=>{if(n)return{id:(i=n).bundleId,createTime:Rp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return zC(e).put({bundleId:(n=t).id,createTime:Mp(di(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return ZC(e).get(t).next(n=>{if(n)return{name:(i=n).name,query:p_(i.bundledQuery),readTime:Rp(i.readTime)};var i})}saveNamedQuery(e,t){return ZC(e).put({name:(n=t).name,readTime:Mp(di(n.readTime)),bundledQuery:n.bundledQuery});var n}}function zC(r){return To(r,Pp.store)}function ZC(r){return To(r,Mh.store)}class KC{constructor(){this.zt=new PT}addToCollectionParentIndex(e,t){return this.zt.add(t),mt.resolve()}getCollectionParents(e,t){return mt.resolve(this.zt.getEntries(t))}}class PT{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new $r(ir.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new $r(ir.comparator)).toArray()}}class KD{constructor(){this.Ht=new PT}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const s={collectionId:n,parent:ou(i)};return YC(e).put(s)}return mt.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[JS(t),""],!1,!0);return YC(e).Bt(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;n.push(Kl(o.parent))}return n})}}function YC(r){return To(r,Ph.store)}const g_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ms{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ms(e,Ms.DEFAULT_COLLECTION_PERCENTILE,Ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function MT(r,e,t){const n=r.store(Nr.store),i=r.store(ms.store),s=[],o=IDBKeyRange.only(t.batchId);let c=0;const f=n.jt({range:o},(_,w,C)=>(c++,C.delete()));s.push(f.next(()=>{fn(1===c)}));const m=[];for(const _ of t.mutations){const w=ms.key(e,_.key.path,t.batchId);s.push(i.delete(w)),m.push(_.key)}return mt.waitFor(s).next(()=>m)}function Np(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw en();e=r.noDocument}return JSON.stringify(e).length}Ms.DEFAULT_COLLECTION_PERCENTILE=10,Ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ms.DEFAULT=new Ms(41943040,Ms.DEFAULT_COLLECTION_PERCENTILE,Ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ms.DISABLED=new Ms(-1,0,0);class RT{constructor(e,t,n,i){this.userId=e,this.k=t,this.Jt=n,this.referenceDelegate=i,this.Yt={}}static Xt(e,t,n,i){fn(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new RT(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lu(e).jt({index:Nr.userMutationsIndex,range:n},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const s=Lp(e),o=Lu(e);return o.add({}).next(c=>{fn("number"==typeof c);const f=new AT(c,t,n,i),m=function(C,M,L){const V=L.baseMutations.map(Se=>c_(C.Gt,Se)),H=L.mutations.map(Se=>c_(C.Gt,Se));return new Nr(M,L.batchId,L.localWriteTime.toMillis(),V,H)}(this.k,this.userId,f),_=[];let w=new $r((C,M)=>Fn(C.canonicalString(),M.canonicalString()));for(const C of i){const M=ms.key(this.userId,C.key.path,c);w=w.add(C.key.path.popLast()),_.push(o.put(m)),_.push(s.put(M,ms.PLACEHOLDER))}return w.forEach(C=>{_.push(this.Jt.addToCollectionParentIndex(e,C))}),e.addOnCommittedListener(()=>{this.Yt[c]=f.keys()}),mt.waitFor(_).next(()=>f)})}lookupMutationBatch(e,t){return Lu(e).get(t).next(n=>n?(fn(n.userId===this.userId),Op(this.k,n)):null)}Zt(e,t){return this.Yt[t]?mt.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const i=n.keys();return this.Yt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Lu(e).jt({index:Nr.userMutationsIndex,range:i},(o,c,f)=>{c.userId===this.userId&&(fn(c.batchId>=n),s=Op(this.k,c)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Lu(e).jt({index:Nr.userMutationsIndex,range:t,reverse:!0},(i,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lu(e).Bt(Nr.userMutationsIndex,t).next(n=>n.map(i=>Op(this.k,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ms.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return Lp(e).jt({range:i},(o,c,f)=>{const[m,_,w]=o,C=Kl(_);if(m===this.userId&&t.path.isEqual(C))return Lu(e).get(w).next(M=>{if(!M)throw en();fn(M.userId===this.userId),s.push(Op(this.k,M))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $r(Fn);const i=[];return t.forEach(s=>{const o=ms.prefixForPath(this.userId,s.path),c=IDBKeyRange.lowerBound(o),f=Lp(e).jt({range:c},(m,_,w)=>{const[C,M,L]=m,V=Kl(M);C===this.userId&&s.path.isEqual(V)?n=n.add(L):w.done()});i.push(f)}),mt.waitFor(i).next(()=>this.te(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=ms.prefixForPath(this.userId,n),o=IDBKeyRange.lowerBound(s);let c=new $r(Fn);return Lp(e).jt({range:o},(f,m,_)=>{const[w,C,M]=f,L=Kl(C);w===this.userId&&n.isPrefixOf(L)?L.length===i&&(c=c.add(M)):_.done()}).next(()=>this.te(e,c))}te(e,t){const n=[],i=[];return t.forEach(s=>{i.push(Lu(e).get(s).next(o=>{if(null===o)throw en();fn(o.userId===this.userId),n.push(Op(this.k,o))}))}),mt.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return MT(e.Wt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),mt.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return mt.resolve();const n=IDBKeyRange.lowerBound(ms.prefixForUser(this.userId)),i=[];return Lp(e).jt({range:n},(s,o,c)=>{if(s[0]===this.userId){const f=Kl(s[1]);i.push(f)}else c.done()}).next(()=>{fn(0===i.length)})})}containsKey(e,t){return QC(e,this.userId,t)}ne(e){return OT(e).get(this.userId).next(t=>t||new kh(this.userId,-1,""))}}function QC(r,e,t){const n=ms.prefixForPath(e,t.path),i=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return Lp(r).jt({range:s,Kt:!0},(c,f,m)=>{const[_,w,C]=c;_===e&&w===i&&(o=!0),m.done()}).next(()=>o)}function Lu(r){return To(r,Nr.store)}function Lp(r){return To(r,ms.store)}function OT(r){return To(r,kh.store)}class Oh{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new Oh(0)}static re(){return new Oh(-1)}}class XC{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const n=new Oh(t.highestTargetId);return t.highestTargetId=n.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>wn.fromTimestamp(new es(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.oe(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.ae(e,i)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(n=>(n.targetCount+=1,this.ue(t,n),this.ae(e,n))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fp(e).delete(t.targetId)).next(()=>this.oe(e)).next(n=>(fn(n.targetCount>0),n.targetCount-=1,this.ae(e,n)))}removeTargets(e,t,n){let i=0;const s=[];return Fp(e).jt((o,c)=>{const f=ev(c);f.sequenceNumber<=t&&null===n.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>mt.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Fp(e).jt((n,i)=>{const s=ev(i);t(s)})}oe(e){return NT(e).get(Ho.key).next(t=>(fn(null!==t),t))}ae(e,t){return NT(e).put(Ho.key,t)}ce(e,t){return Fp(e).put(qC(this.k,t))}ue(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const n=Tp(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Fp(e).jt({range:i,index:ts.queryTargetsIndexName},(o,c,f)=>{const m=ev(c);Nm(t,m.target)&&(s=m,f.done())}).next(()=>s)}addMatchingKeys(e,t,n){const i=[],s=Nh(e);return t.forEach(o=>{const c=ou(o.path);i.push(s.put(new vs(n,c))),i.push(this.referenceDelegate.addReference(e,n,o))}),mt.waitFor(i)}removeMatchingKeys(e,t,n){const i=Nh(e);return mt.forEach(t,s=>{const o=ou(s.path);return mt.waitFor([i.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,t){const n=Nh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nh(e);let s=sr();return i.jt({range:n,Kt:!0},(o,c,f)=>{const m=Kl(o[1]),_=new tn(m);s=s.add(_)}).next(()=>s)}containsKey(e,t){const n=ou(t.path),i=IDBKeyRange.bound([n],[JS(n)],!1,!0);let s=0;return Nh(e).jt({index:vs.documentTargetsIndex,Kt:!0,range:i},([o,c],f,m)=>{0!==o&&(s++,m.done())}).next(()=>s>0)}Et(e,t){return Fp(e).get(t).next(n=>n?ev(n):null)}}function Fp(r){return To(r,ts.store)}function NT(r){return To(r,Ho.store)}function Nh(r){return To(r,vs.store)}function Lh(r){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,Xe.Z)(function*(r){if(r.code!==tt.FAILED_PRECONDITION||r.message!==UC)throw r;It("LocalStore","Unexpectedly lost primary lease")}),Fh.apply(this,arguments)}function JC([r,e],[t,n]){const i=Fn(r,t);return 0===i?Fn(e,n):i}class jp{constructor(e){this.he=e,this.buffer=new $r(JC),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();JC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tv{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const n=this.we?3e5:6e4;It("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Xe.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){cd(i)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Lh(i)}yield t.me(e)}))}}class YD{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(0===t)return mt.resolve(Bo.I);const n=new jp(t);return this.ge.forEachTarget(e,i=>n.de(i.sequenceNumber)).next(()=>this.ge.pe(e,i=>n.de(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.ge.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),mt.resolve(g_)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g_):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let n,i,s,o,c,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,o=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(n=w,c=Date.now(),this.removeTargets(e,n,t))).next(w=>(s=w,f=Date.now(),this.removeOrphanedDocuments(e,n))).next(w=>(m=Date.now(),nT()<=Ul.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-_}ms\n\tDetermined least recently used ${i} in `+(c-o)+`ms\n\tRemoved ${s} targets in `+(f-c)+`ms\n\tRemoved ${w} documents in `+(m-f)+`ms\nTotal Duration: ${m-_}ms`),mt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:w})))}}class fR{constructor(e,t){this.db=e,this.garbageCollector=new YD(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}Ee(e){let t=0;return this.pe(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(n,i)=>t(i))}addReference(e,t,n){return nv(e,n)}removeReference(e,t,n){return nv(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return nv(e,t)}Ae(e,t){return function(n,i){let s=!1;return OT(n).Qt(o=>QC(n,o,i).next(c=>(c&&(s=!0),mt.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ie(e,(o,c)=>{if(c<=t){const f=this.Ae(e,o).next(m=>{if(!m)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o),Nh(e).delete([0,ou(o.path)])))});i.push(f)}}).next(()=>mt.waitFor(i)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return nv(e,t)}Ie(e,t){const n=Nh(e);let i,s=Bo.I;return n.jt({index:vs.documentTargetsIndex},([o,c],{path:f,sequenceNumber:m})=>{0===o?(s!==Bo.I&&t(new tn(Kl(i)),s),s=m,i=f):s=Bo.I}).next(()=>{s!==Bo.I&&t(new tn(Kl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nv(r,e){return Nh(r).put((n=r.currentSequenceNumber,new vs(0,ou(e.path),n)));var n}class Up{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,s]of n)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0!==i){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),!0;return!1}forEach(e){id(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return oT(this.inner)}}class ex{constructor(){this.changes=new Up(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:wn.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:kr.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?mt.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QD{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,n){return Xl(e).put(Bp(t),n)}removeEntry(e,t){const n=Xl(e),i=Bp(t);return n.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Re(e,n)))}getEntry(e,t){return Xl(e).get(Bp(t)).next(n=>this.be(t,n))}Pe(e,t){return Xl(e).get(Bp(t)).next(n=>({document:this.be(t,n),size:Np(n)}))}getEntries(e,t){let n=Vo();return this.ve(e,t,(i,s)=>{const o=this.be(i,s);n=n.insert(i,o)}).next(()=>n)}Ve(e,t){let n=Vo(),i=new Fi(tn.comparator);return this.ve(e,t,(s,o)=>{const c=this.be(s,o);n=n.insert(s,c),i=i.insert(s,Np(o))}).next(()=>({documents:n,Se:i}))}ve(e,t,n){if(t.isEmpty())return mt.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),s=t.getIterator();let o=s.getNext();return Xl(e).jt({range:i},(c,f,m)=>{const _=tn.fromSegments(c);for(;o&&tn.comparator(o,_)<0;)n(o,null),o=s.getNext();o&&o.isEqual(_)&&(n(o,f),o=s.hasNext()?s.getNext():null),o?m.Lt(o.path.toArray()):m.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n){let i=Vo();const s=t.path.length+1,o={};if(n.isEqual(wn.min())){const c=t.path.toArray();o.range=IDBKeyRange.lowerBound(c)}else{const c=t.path.toArray(),f=kT(n);o.range=IDBKeyRange.lowerBound([c,f],!0),o.index=ti.collectionReadTimeIndex}return Xl(e).jt(o,(c,f,m)=>{if(c.length!==s)return;const _=f_(this.k,f);t.path.isPrefixOf(_.key.path)?Cp(t,_)&&(i=i.insert(_.key,_)):m.done()}).next(()=>i)}newChangeBuffer(e){return new XD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LT(e).get(au.key).next(t=>(fn(!!t),t))}Re(e,t){return LT(e).put(au.key,t)}be(e,t){if(t){const n=f_(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(wn.min()))return n}return kr.newInvalidDocument(e)}}class XD extends ex{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Up(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const t=[];let n=0,i=new $r((s,o)=>Fn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const c=this.Ce.get(s);if(o.document.isValidDocument()){const f=GC(this.De.k,o.document,this.getReadTime(s));i=i.add(s.path.popLast()),n+=Np(f)-c,t.push(this.De.addEntry(e,s,f))}else if(n-=c,this.trackRemovals){const f=GC(this.De.k,kr.newNoDocument(s,wn.min()),this.getReadTime(s));t.push(this.De.addEntry(e,s,f))}else t.push(this.De.removeEntry(e,s))}),i.forEach(s=>{t.push(this.De.Jt.addToCollectionParentIndex(e,s))}),t.push(this.De.updateMetadata(e,n)),mt.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(n=>(this.Ce.set(t,n.size),n.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:n,Se:i})=>(i.forEach((s,o)=>{this.Ce.set(s,o)}),n))}}function LT(r){return To(r,au.store)}function Xl(r){return To(r,ti.store)}function Bp(r){return r.path.toArray()}class m_{constructor(e){this.k=e}Nt(e,t,n,i){fn(n<i&&n>=0&&i<=11);const s=new Xm("createOrUpgrade",t);var c;n<1&&i>=1&&(e.createObjectStore(Sa.store),(c=e).createObjectStore(kh.store,{keyPath:kh.keyPath}),c.createObjectStore(Nr.store,{keyPath:Nr.keyPath,autoIncrement:!0}).createIndex(Nr.userMutationsIndex,Nr.userMutationsKeyPath,{unique:!0}),c.createObjectStore(ms.store),Vp(e),function(c){c.createObjectStore(ti.store)}(e));let o=mt.resolve();return n<3&&i>=3&&(0!==n&&(function(c){c.deleteObjectStore(vs.store),c.deleteObjectStore(ts.store),c.deleteObjectStore(Ho.store)}(e),Vp(e)),o=o.next(()=>function(c){const f=c.store(Ho.store),m=new Ho(0,0,wn.min().toTimestamp(),0);return f.put(Ho.key,m)}(s))),n<4&&i>=4&&(0!==n&&(o=o.next(()=>function(c,f){return f.store(Nr.store).Bt().next(m=>{c.deleteObjectStore(Nr.store),c.createObjectStore(Nr.store,{keyPath:Nr.keyPath,autoIncrement:!0}).createIndex(Nr.userMutationsIndex,Nr.userMutationsKeyPath,{unique:!0});const _=f.store(Nr.store),w=m.map(C=>_.put(C));return mt.waitFor(w)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore(Yl.store,{keyPath:Yl.keyPath})}(e)})),n<5&&i>=5&&(o=o.next(()=>this.Ne(s))),n<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore(au.store)}(e),this.ke(s)))),n<7&&i>=7&&(o=o.next(()=>this.xe(s))),n<8&&i>=8&&(o=o.next(()=>this.$e(e,s))),n<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e),function(c){const f=c.objectStore(ti.store);f.createIndex(ti.readTimeIndex,ti.readTimeIndexPath,{unique:!1}),f.createIndex(ti.collectionReadTimeIndex,ti.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&i>=10&&(o=o.next(()=>this.Oe(s))),n<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(Pp.store,{keyPath:Pp.keyPath})})(e),function(c){c.createObjectStore(Mh.store,{keyPath:Mh.keyPath})}(e)})),o}ke(e){let t=0;return e.store(ti.store).jt((n,i)=>{t+=Np(i)}).next(()=>{const n=new au(t);return e.store(au.store).put(au.key,n)})}Ne(e){const t=e.store(kh.store),n=e.store(Nr.store);return t.Bt().next(i=>mt.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.Bt(Nr.userMutationsIndex,o).next(c=>mt.forEach(c,f=>{fn(f.userId===s.userId);const m=Op(this.k,f);return MT(e,s.userId,m).next(()=>{})}))}))}xe(e){const t=e.store(vs.store),n=e.store(ti.store);return e.store(Ho.store).get(Ho.key).next(i=>{const s=[];return n.jt((o,c)=>{const f=new ir(o),m=[0,ou(f)];s.push(t.get(m).next(_=>_?mt.resolve():t.put(new vs(0,ou(f),i.highestListenSequenceNumber))))}).next(()=>mt.waitFor(s))})}$e(e,t){e.createObjectStore(Ph.store,{keyPath:Ph.keyPath});const n=t.store(Ph.store),i=new PT,s=o=>{if(i.add(o)){const c=o.lastSegment(),f=o.popLast();return n.put({collectionId:c,parent:ou(f)})}};return t.store(ti.store).jt({Kt:!0},(o,c)=>{const f=new ir(o);return s(f.popLast())}).next(()=>t.store(ms.store).jt({Kt:!0},([o,c,f],m)=>{const _=Kl(c);return s(_.popLast())}))}Oe(e){const t=e.store(ts.store);return t.jt((n,i)=>{const s=ev(i),o=qC(this.k,s);return t.put(o)})}}function Vp(r){r.createObjectStore(vs.store,{keyPath:vs.keyPath}).createIndex(vs.documentTargetsIndex,vs.documentTargetsKeyPath,{unique:!0}),r.createObjectStore(ts.store,{keyPath:ts.keyPath}).createIndex(ts.queryTargetsIndexName,ts.queryTargetsKeyPath,{unique:!0}),r.createObjectStore(Ho.store)}const FT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class v_{constructor(e,t,n,i,s,o,c,f,m,_){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Fe=s,this.window=o,this.document=c,this.Me=m,this.Le=_,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=w=>Promise.resolve(),!v_.Pt())throw new bt(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fR(this,i),this.Ge=t+"main",this.k=new HC(f),this.ze=new uu(this.Ge,11,new m_(this.k)),this.He=new XC(this.referenceDelegate,this.k),this.Jt=new KD,this.Je=new QD(this.k,this.Jt),this.Ye=new WC,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===_&&Ti("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new bt(tt.FAILED_PRECONDITION,FT);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Bo(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var n=(0,Xe.Z)(function*(i){if(t.started)return e(i)});return function(i){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,Xe.Z)(function*(n){null===n.newVersion&&(yield e())});return function(n){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Fe.enqueueAndForget((0,Xe.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>y_(e).put(new Yl(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Fe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(cd(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Hp(e).get(Sa.key).next(t=>mt.resolve(this.un(t)))}hn(e){return y_(e).delete(this.clientId)}ln(){var e=this;return(0,Xe.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=To(n,Yl.store);return i.Bt().next(s=>{const o=e.dn(s,18e5),c=s.filter(f=>-1===o.indexOf(f));return mt.forEach(c,f=>i.delete(f.clientId)).next(()=>c)})}).catch(()=>[]);if(e.Xe)for(const n of t)e.Xe.removeItem(e.wn(n.clientId))}})()}nn(){this.je=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?mt.resolve(!0):Hp(e).get(Sa.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new bt(tt.FAILED_PRECONDITION,FT);return!1}}return!(!this.networkEnabled||!this.inForeground)||y_(e).Bt().next(n=>void 0===this.dn(n,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||o&&c)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&It("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Xe.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Sa.store,Yl.store],t=>{const n=new IT(t,Bo.I);return e.an(n).next(()=>e.hn(n))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(n=>this.fn(n.updateTimeMs,t)&&!this._n(n.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>y_(e).Bt().next(t=>this.dn(t,18e5).map(n=>n.clientId)))}get started(){return this.Ue}getMutationQueue(e){return RT.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,n){let s;return It("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",zD,o=>(s=new IT(o,this.Be?this.Be.next():Bo.I),"readwrite-primary"===t?this.rn(s).next(c=>!!c||this.on(s)).next(c=>{if(!c)throw Ti(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fe.enqueueRetryable(()=>this.We(!1)),new bt(tt.FAILED_PRECONDITION,UC);return n(s)}).next(c=>this.cn(s).next(()=>c)):this.En(s).next(()=>n(s)))).then(o=>(s.raiseOnCommittedEvent(),o))}En(e){return Hp(e).get(Sa.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new bt(tt.FAILED_PRECONDITION,FT)})}cn(e){const t=new Sa(this.clientId,this.allowTabSynchronization,Date.now());return Hp(e).put(Sa.key,t)}static Pt(){return uu.Pt()}an(e){const t=Hp(e);return t.get(Sa.key).next(n=>this.un(n)?(It("IndexedDbPersistence","Releasing primary lease."),t.delete(Sa.key)):mt.resolve())}fn(e,t){const n=Date.now();return!(e<n-t||e>n&&(Ti(`Detected an update time that is in the future: ${e} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Fe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,mn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Fe.enterRestrictedMode(!0),this.Fe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return It("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ti("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Ti("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hp(r){return To(r,Sa.store)}function y_(r){return To(r,Yl.store)}function jT(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class JD{constructor(e,t){this.progress=e,this.In=t}}class __{constructor(e,t,n){this.Je=e,this.An=t,this.Jt=n}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.bn(e,t,n))}bn(e,t,n){return this.Je.getEntry(e,t).next(i=>{for(const s of n)s.applyToLocalView(i);return i})}Pn(e,t){e.forEach((n,i)=>{for(const s of t)s.applyToLocalView(i)})}vn(e,t){return this.Je.getEntries(e,t).next(n=>this.Vn(e,n).next(()=>n))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(n=>this.Pn(t,n))}getDocumentsMatchingQuery(e,t,n){return tn.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Sn(e,t.path):Ta(t)?this.Dn(e,t,n):this.Cn(e,t,n);var i}Sn(e,t){return this.Rn(e,new tn(t)).next(n=>{let i=a_();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}Dn(e,t,n){const i=t.collectionGroup;let s=a_();return this.Jt.getCollectionParents(e,i).next(o=>mt.forEach(o,c=>{const f=(m=t,_=c.child(i),new zl(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.Cn(e,f,n).next(m=>{m.forEach((_,w)=>{s=s.insert(_,w)})})}).next(()=>s))}Cn(e,t,n){let i,s;return this.Je.getDocumentsMatchingQuery(e,t,n).next(o=>(i=o,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(o=>(s=o,this.Nn(e,s,i).next(c=>{i=c;for(const f of s)for(const m of f.mutations){const _=m.key;let w=i.get(_);null==w&&(w=kr.newInvalidDocument(_),i=i.insert(_,w)),s_(m,w,f.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}))).next(()=>(i.forEach((o,c)=>{Cp(t,c)||(i=i.remove(o))}),i))}Nn(e,t,n){let i=sr();for(const o of t)for(const c of o.mutations)c instanceof ld&&null===n.get(c.key)&&(i=i.add(c.key));let s=n;return this.Je.getEntries(e,i).next(o=>(o.forEach((c,f)=>{f.isFoundDocument()&&(s=s.insert(c,f))}),s))}}class UT{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.kn=n,this.xn=i}static $n(e,t){let n=sr(),i=sr();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new UT(e,t.fromCache,n,i)}}class e1{On(e){this.Fn=e}getDocumentsMatchingQuery(e,t,n,i){return 0===(s=t).filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())||n.isEqual(wn.min())?this.Mn(e,t):this.Fn.vn(e,i).next(s=>{const o=this.Ln(t,s);return(Fm(t)||pT(t))&&this.Bn(t.limitType,o,i,n)?this.Mn(e,t):(nT()<=Ul.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),n_(t)),this.Fn.getDocumentsMatchingQuery(e,t,n).next(c=>(o.forEach(f=>{c=c.insert(f.key,f)}),c)))});var s}Ln(e,t){let n=new $r(lC(e));return t.forEach((i,s)=>{Cp(e,s)&&(n=n.add(s))}),n}Bn(e,t,n,i){if(n.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mn(e,t){return nT()<=Ul.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",n_(t)),this.Fn.getDocumentsMatchingQuery(e,t,wn.min())}}class t1{constructor(e,t,n,i){this.persistence=e,this.Un=t,this.k=i,this.qn=new Fi(Fn),this.Kn=new Up(s=>Tp(s),Nm),this.jn=wn.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new __(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function tx(r,e,t,n){return new t1(r,e,t,n)}function jh(r,e){return b_.apply(this,arguments)}function b_(){return b_=(0,Xe.Z)(function*(r,e){const t=Ut(r);let n=t.An,i=t.Wn;const s=yield t.persistence.runTransaction("Handle user change","readonly",o=>{let c;return t.An.getAllMutationBatches(o).next(f=>(c=f,n=t.persistence.getMutationQueue(e),i=new __(t.Qn,n,t.persistence.getIndexManager()),n.getAllMutationBatches(o))).next(f=>{const m=[],_=[];let w=sr();for(const C of c){m.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}for(const C of f){_.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}return i.vn(o,w).next(C=>({Gn:C,removedBatchIds:m,addedBatchIds:_}))})});return t.An=n,t.Wn=i,t.Un.On(t.Wn),s}),b_.apply(this,arguments)}function Gp(r,e){const t=Ut(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.Qn.newChangeBuffer({trackRemovals:!0});return function(o,c,f,m){const _=f.batch,w=_.keys();let C=mt.resolve();return w.forEach(M=>{C=C.next(()=>m.getEntry(c,M)).next(L=>{const V=f.docVersions.get(M);fn(null!==V),L.version.compareTo(V)<0&&(_.applyToRemoteDocument(L,f),L.isValidDocument()&&m.addEntry(L,f.commitVersion))})}),C.next(()=>o.An.removeMutationBatch(c,_))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.An.performConsistencyCheck(n)).next(()=>t.Wn.vn(n,i))})}function n1(r){const e=Ut(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function nx(r,e){const t=Ut(r),n=e.snapshotVersion;let i=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Qn.newChangeBuffer({trackRemovals:!0});i=t.qn;const c=[];e.targetChanges.forEach((m,_)=>{const w=i.get(_);if(!w)return;c.push(t.He.removeMatchingKeys(s,m.removedDocuments,_).next(()=>t.He.addMatchingKeys(s,m.addedDocuments,_)));let C=w.withSequenceNumber(s.currentSequenceNumber);var M,L,V;e.targetMismatches.has(_)?C=C.withResumeToken(Ei.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):m.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(m.resumeToken,n)),i=i.insert(_,C),L=C,V=m,(0===(M=w).resumeToken.approximateByteSize()||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0)&&c.push(t.He.updateTargetData(s,C))});let f=Vo();if(e.documentUpdates.forEach((m,_)=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))}),c.push(rx(s,o,e.documentUpdates,n,void 0).next(m=>{f=m})),!n.isEqual(wn.min())){const m=t.He.getLastRemoteSnapshotVersion(s).next(_=>t.He.setTargetsMetadata(s,s.currentSequenceNumber,n));c.push(m)}return mt.waitFor(c).next(()=>o.apply(s)).next(()=>t.Wn.Vn(s,f)).next(()=>f)}).then(s=>(t.qn=i,s))}function rx(r,e,t,n,i){let s=sr();return t.forEach(o=>s=s.add(o)),e.getEntries(r,s).next(o=>{let c=Vo();return t.forEach((f,m)=>{const _=o.get(f),w=(null==i?void 0:i.get(f))||n;m.isNoDocument()&&m.version.isEqual(wn.min())?(e.removeEntry(f,w),c=c.insert(f,m)):!_.isValidDocument()||m.version.compareTo(_.version)>0||0===m.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(m,w),c=c.insert(f,m)):It("LocalStore","Ignoring outdated watch update for ",f,". Current version:",_.version," Watch version:",m.version)}),c})}function pR(r,e){const t=Ut(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(n,e)))}function Uh(r,e){const t=Ut(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.He.getTargetData(n,e).next(s=>s?(i=s,mt.resolve(i)):t.He.allocateTargetId(n).next(o=>(i=new Nu(e,o,0,n.currentSequenceNumber),t.He.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.qn.get(n.targetId);return(null===i||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qn=t.qn.insert(n.targetId,n),t.Kn.set(e,n.targetId)),n})}function rv(r,e,t){return T_.apply(this,arguments)}function T_(){return T_=(0,Xe.Z)(function*(r,e,t){const n=Ut(r),i=n.qn.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!cd(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.qn=n.qn.remove(e),n.Kn.delete(i.target)}),T_.apply(this,arguments)}function $p(r,e,t){const n=Ut(r);let i=wn.min(),s=sr();return n.persistence.runTransaction("Execute query","readonly",o=>function(c,f,m){const _=Ut(c),w=_.Kn.get(m);return void 0!==w?mt.resolve(_.qn.get(w)):_.He.getTargetData(f,m)}(n,o,Ea(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.He.getMatchingKeysForTargetId(o,c.targetId).next(f=>{s=f})}).next(()=>n.Un.getDocumentsMatchingQuery(o,e,t?i:wn.min(),t?s:sr())).next(c=>({documents:c,zn:s})))}function BT(r,e){const t=Ut(r),n=Ut(t.He),i=t.qn.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>n.Et(s,e).next(o=>o?o.target:null))}function VT(r){const e=Ut(r);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(n,i,s){const o=Ut(n);let c=Vo(),f=kT(s);const m=Xl(i),_=IDBKeyRange.lowerBound(f,!0);return m.jt({index:ti.readTimeIndex,range:_},(w,C)=>{const M=f_(o.k,C);c=c.insert(M.key,M),f=C.readTime}).next(()=>({In:c,readTime:$C(f)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:n})=>(e.jn=n,t))}function HT(){return HT=(0,Xe.Z)(function*(r){const e=Ut(r);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(n){const i=Xl(n);let s=wn.min();return i.jt({index:ti.readTimeIndex,reverse:!0},(o,c,f)=>{c.readTime&&(s=$C(c.readTime)),f.done()}).next(()=>s)}(t)).then(t=>{e.jn=t})}),HT.apply(this,arguments)}function GT(){return GT=(0,Xe.Z)(function*(r,e,t,n){const i=Ut(r);let s=sr(),o=Vo(),c=yT();for(const _ of t){const w=e.Hn(_.metadata.name);_.document&&(s=s.add(w)),o=o.insert(w,e.Jn(_)),c=c.insert(w,e.Yn(_.metadata.readTime))}const f=i.Qn.newChangeBuffer({trackRemovals:!0}),m=yield Uh(i,(_=n,Ea(wp(ir.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>rx(_,f,o,wn.min(),c).next(w=>(f.apply(_),w)).next(w=>i.He.removeMatchingKeysForTargetId(_,m.targetId).next(()=>i.He.addMatchingKeys(_,s,m.targetId)).next(()=>i.Wn.Vn(_,w)).next(()=>w)))}),GT.apply(this,arguments)}function i1(r,e){return $T.apply(this,arguments)}function $T(){return $T=(0,Xe.Z)(function*(r,e,t=sr()){const n=yield Uh(r,Ea(p_(e.bundledQuery))),i=Ut(r);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=di(e.readTime);if(n.snapshotVersion.compareTo(o)>=0)return i.Ye.saveNamedQuery(s,e);const c=n.withResumeToken(Ei.EMPTY_BYTE_STRING,o);return i.qn=i.qn.insert(c.targetId,c),i.He.updateTargetData(s,c).next(()=>i.He.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>i.He.addMatchingKeys(s,t,n.targetId)).next(()=>i.Ye.saveNamedQuery(s,e))})}),$T.apply(this,arguments)}class s1{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return mt.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:di(n.createTime)}),mt.resolve()}getNamedQuery(e,t){return mt.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(n=t).name,query:p_(n.bundledQuery),readTime:di(n.readTime)}),mt.resolve();var n}}class qT{constructor(){this.ts=new $r(ni.es),this.ns=new $r(ni.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const n=new ni(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.os(new ni(e,t))}cs(e,t){e.forEach(n=>this.removeReference(n,t))}us(e){const t=new tn(new ir([])),n=new ni(t,e),i=new ni(t,e+1),s=[];return this.ns.forEachInRange([n,i],o=>{this.os(o),s.push(o.key)}),s}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new tn(new ir([])),n=new ni(t,e),i=new ni(t,e+1);let s=sr();return this.ns.forEachInRange([n,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ni(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ni{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return tn.comparator(e.key,t.key)||Fn(e.fs,t.fs)}static ss(e,t){return Fn(e.fs,t.fs)||tn.comparator(e.key,t.key)}}class sx{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new $r(ni.es)}checkEmpty(e){return mt.resolve(0===this.An.length)}addMutationBatch(e,t,n,i){const s=this.ds;this.ds++;const o=new AT(s,t,n,i);this.An.push(o);for(const c of i)this.ws=this.ws.add(new ni(c.key,s)),this.Jt.addToCollectionParentIndex(e,c.key.path.popLast());return mt.resolve(o)}lookupMutationBatch(e,t){return mt.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.gs(t+1),s=i<0?0:i;return mt.resolve(this.An.length>s?this.An[s]:null)}getHighestUnacknowledgedBatchId(){return mt.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return mt.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ni(t,0),i=new ni(t,Number.POSITIVE_INFINITY),s=[];return this.ws.forEachInRange([n,i],o=>{const c=this._s(o.fs);s.push(c)}),mt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $r(Fn);return t.forEach(i=>{const s=new ni(i,0),o=new ni(i,Number.POSITIVE_INFINITY);this.ws.forEachInRange([s,o],c=>{n=n.add(c.fs)})}),mt.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;tn.isDocumentKey(s)||(s=s.child(""));const o=new ni(new tn(s),0);let c=new $r(Fn);return this.ws.forEachWhile(f=>{const m=f.key.path;return!!n.isPrefixOf(m)&&(m.length===i&&(c=c.add(f.fs)),!0)},o),mt.resolve(this.ys(c))}ys(e){const t=[];return e.forEach(n=>{const i=this._s(n);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){fn(0===this.ps(t.batchId,"removed")),this.An.shift();let n=this.ws;return mt.forEach(t.mutations,i=>{const s=new ni(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ws=n})}ee(e){}containsKey(e,t){const n=new ni(t,0),i=this.ws.firstAfterOrEqual(n);return mt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return mt.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class ox{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Fi(tn.comparator),this.size=0}addEntry(e,t,n){const i=t.key,s=this.docs.get(i),o=s?s.size:0,c=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c,readTime:n}),this.size+=c-o,this.Jt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return mt.resolve(n?n.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let n=Vo();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():kr.newInvalidDocument(i))}),mt.resolve(n)}getDocumentsMatchingQuery(e,t,n){let i=Vo();const s=new tn(t.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:c,value:{document:f,readTime:m}}=o.getNext();if(!t.path.isPrefixOf(c.path))break;m.compareTo(n)<=0||Cp(t,f)&&(i=i.insert(f.key,f.mutableCopy()))}return mt.resolve(i)}Es(e,t){return mt.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new ax(this)}getSize(e){return mt.resolve(this.size)}}class ax extends ex{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.document.isValidDocument()?t.push(this.De.addEntry(e,i.document,this.getReadTime(n))):this.De.removeEntry(n)}),mt.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class ux{constructor(e){this.persistence=e,this.Is=new Up(t=>Tp(t),Nm),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.As=0,this.Rs=new qT,this.targetCount=0,this.bs=Oh.ie()}forEachTarget(e,t){return this.Is.forEach((n,i)=>t(i)),mt.resolve()}getLastRemoteSnapshotVersion(e){return mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return mt.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),mt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),mt.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Oh(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,mt.resolve()}updateTargetData(e,t){return this.ce(t),mt.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,mt.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Is.forEach((o,c)=>{c.sequenceNumber<=t&&null===n.get(c.targetId)&&(this.Is.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),mt.waitFor(s).next(()=>i)}getTargetCount(e){return mt.resolve(this.targetCount)}getTargetData(e,t){const n=this.Is.get(t)||null;return mt.resolve(n)}addMatchingKeys(e,t,n){return this.Rs.rs(t,n),mt.resolve()}removeMatchingKeys(e,t,n){this.Rs.cs(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),mt.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),mt.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Rs.ls(t);return mt.resolve(n)}containsKey(e,t){return mt.resolve(this.Rs.containsKey(t))}}class lx{constructor(e,t){this.Ps={},this.Be=new Bo(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new ux(this),this.Jt=new KC,this.Je=new ox(this.Jt,n=>this.referenceDelegate.vs(n)),this.k=new HC(t),this.Ye=new s1(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new sx(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,n){It("MemoryPersistence","Starting transaction:",e);const i=new cx(this.Be.next());return this.referenceDelegate.Vs(),n(i).next(s=>this.referenceDelegate.Ss(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ds(e,t){return mt.or(Object.values(this.Ps).map(n=>()=>n.containsKey(e,t)))}}class cx extends Rh{constructor(e){super(),this.currentSequenceNumber=e}}class WT{constructor(e){this.persistence=e,this.Cs=new qT,this.Ns=null}static ks(e){return new WT(e)}get xs(){if(this.Ns)return this.Ns;throw en()}addReference(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),mt.resolve()}removeReference(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),mt.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),mt.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(i=>this.xs.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.xs.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.xs,n=>{const i=tn.fromPath(n);return this.$s(e,i).next(s=>{s||t.removeEntry(i)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(n=>{n?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return mt.or([()=>mt.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function zT(r,e){return`firestore_clients_${r}_${e}`}function dx(r,e,t){let n=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function ZT(r,e){return`firestore_targets_${r}_${e}`}class E_{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Os(e,t,n){const i=JSON.parse(n);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new bt(i.error.code,i.error.message))),o?new E_(e,t,i.state,s):(Ti("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Fs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Os(e,t){const n=JSON.parse(t);let i,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(i=new bt(n.error.code,n.error.message))),s?new iv(e,n.state,i):(Ti("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Fs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const n=JSON.parse(t);let i="object"==typeof n&&n.activeTargetIds instanceof Array,s=Ou();for(let o=0;i&&o<n.activeTargetIds.length;++o)i=Ky(n.activeTargetIds[o]),s=s.add(n.activeTargetIds[o]);return i?new dd(e,s):(Ti("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KT{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KT(t.clientId,t.onlineState):(Ti("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sv{constructor(){this.activeTargetIds=Ou()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Fs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ca{constructor(e,t,n,i,s){this.window=e,this.Fe=t,this.persistenceKey=n,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Fi(Fn),this.started=!1,this.js=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Qs=zT(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new sv),this.Gs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(c){return`firestore_bundle_loaded_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Xe.Z)(function*(){const t=yield e.syncEngine.Tn();for(const i of t){if(i===e.Bs)continue;const s=e.getItem(zT(e.persistenceKey,i));if(s){const o=dd.Os(i,s);o&&(e.Ks=e.Ks.insert(o.clientId,o))}}e.Xs();const n=e.storage.getItem(e.Js);if(n){const i=e.Zs(n);i&&e.ti(i)}for(const i of e.js)e.qs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,n){this.ni(e,t,n),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ZT(this.persistenceKey,e));if(n){const i=iv.Os(e,n);i&&(t=i.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZT(this.persistenceKey,e))}updateQueryState(e,t,n){this.ri(e,t,n)}handleUserChange(e,t,n){t.forEach(i=>{this.si(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return It("SharedClientState","READ",e,t),t}setItem(e,t){It("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const n=e;if(n.storageArea===this.storage){if(It("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Ti("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable((0,Xe.Z)(function*(){if(t.started){if(null!==n.key)if(t.Gs.test(n.key)){if(null==n.newValue){const i=t.ci(n.key);return t.ui(i,null)}{const i=t.hi(n.key,n.newValue);if(i)return t.ui(i.clientId,i)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const i=t.li(n.key,n.newValue);if(i)return t.fi(i)}}else if(t.Hs.test(n.key)){if(null!==n.newValue){const i=t.di(n.key,n.newValue);if(i)return t.wi(i)}}else if(n.key===t.Js){if(null!==n.newValue){const i=t.Zs(n.newValue);if(i)return t.ti(i)}}else if(n.key===t.Ws){const i=function(s){let o=Bo.I;if(null!=s)try{const c=JSON.parse(s);fn("number"==typeof c),o=c}catch(c){Ti("SharedClientState","Failed to read sequence number from WebStorage",c)}return o}(n.newValue);i!==Bo.I&&t.sequenceNumberHandler(i)}else if(n.key===t.Ys)return t.syncEngine._i()}else t.js.push(n)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Fs())}ni(e,t,n){const i=new E_(this.currentUser,e,t,n),s=dx(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Fs())}si(e){const t=dx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,n){const i=ZT(this.persistenceKey,e),s=new iv(e,t,n);this.setItem(i,s.Fs())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const n=this.ci(e);return dd.Os(n,t)}li(e,t){const n=this.zs.exec(e),i=Number(n[1]);return E_.Os(new hs(void 0!==n[2]?n[2]:null),i,t)}di(e,t){const n=this.Hs.exec(e),i=Number(n[1]);return iv.Os(i,t)}Zs(e){return KT.Os(e)}fi(e){var t=this;return(0,Xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const n=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),s=this.ei(n),o=[],c=[];return s.forEach(f=>{i.has(f)||o.push(f)}),i.forEach(f=>{s.has(f)||c.push(f)}),this.syncEngine.yi(o,c).then(()=>{this.Ks=n})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=Ou();return e.forEach((n,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class hx{constructor(){this.pi=new sv,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,n){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new sv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class w_{Ei(e){}shutdown(){}}class qp{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const o1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class a1{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Fi(e){this.xi(e)}}class u1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,n,i,s){const o=this.Ui(e,t);It("RestConnection","Sending: ",o,n);const c={};return this.qi(c,i,s),this.Ki(e,o,c,n).then(f=>(It("RestConnection","Received: ",f),f),f=>{throw zy("RestConnection",`${e} failed with error: `,f,"url: ",o,"request:",n),f})}ji(e,t,n,i,s){return this.Bi(e,t,n,i,s)}qi(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}Ui(e,t){return`${this.Mi}/v1/${t}:${o1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,n,i){return new Promise((s,o)=>{const c=new WS;c.listenOnce(HS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qy.NO_ERROR:const m=c.getResponseJson();It("Connection","XHR received:",JSON.stringify(m)),s(m);break;case qy.TIMEOUT:It("Connection",'RPC "'+e+'" timed out'),o(new bt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case qy.HTTP_ERROR:const _=c.getStatus();if(It("Connection",'RPC "'+e+'" failed with status:',_,"response text:",c.getResponseText()),_>0){const w=c.getResponseJson().error;if(w&&w.status&&w.message){const C=function(M){const L=M.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(L)>=0?L:tt.UNKNOWN}(w.status);o(new bt(C,w.message))}else o(new bt(tt.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new bt(tt.UNAVAILABLE,"Connection failed."));break;default:en()}}finally{It("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(i);c.send(t,"POST",f,n,15)})}Qi(e,t,n){const i=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=BS(),o=VS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new qS({})),this.qi(c.initMessageHeaders,t,n),(0,mn.uI)()||(0,mn.b$)()||(0,mn.d)()||(0,mn.w1)()||(0,mn.Mn)()||(0,mn.ru)()||(c.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");It("Connection","Creating WebChannel: "+f,c);const m=s.createWebChannel(f,c);let _=!1,w=!1;const C=new a1({Vi:L=>{w?It("Connection","Not sending because WebChannel is closed:",L):(_||(It("Connection","Opening WebChannel transport."),m.open(),_=!0),It("Connection","WebChannel sending:",L),m.send(L))},Si:()=>m.close()}),M=(L,V,H)=>{L.listen(V,Se=>{try{H(Se)}catch(be){setTimeout(()=>{throw be},0)}})};return M(m,Wy.EventType.OPEN,()=>{w||It("Connection","WebChannel transport opened.")}),M(m,Wy.EventType.CLOSE,()=>{w||(w=!0,It("Connection","WebChannel transport closed"),C.Oi())}),M(m,Wy.EventType.ERROR,L=>{w||(w=!0,zy("Connection","WebChannel transport errored:",L),C.Oi(new bt(tt.UNAVAILABLE,"The operation could not be completed")))}),M(m,Wy.EventType.MESSAGE,L=>{var V;if(!w){const H=L.data[0];fn(!!H);const Se=H,be=Se.error||(null===(V=Se[0])||void 0===V?void 0:V.error);if(be){It("Connection","WebChannel received error:",be);const je=be.status;let Ne=function(nt){const pt=Si[nt];if(void 0!==pt)return wC(pt)}(je),$e=be.message;void 0===Ne&&(Ne=tt.INTERNAL,$e="Unknown error status: "+je+" with message "+be.message),w=!0,C.Oi(new bt(Ne,$e)),m.close()}else It("Connection","WebChannel received:",H),C.Fi(H)}}),M(o,GS.STAT_EVENT,L=>{L.stat===$S.PROXY?It("Connection","Detected buffering proxy"):L.stat===$S.NOPROXY&&It("Connection","Detected no buffering proxy")}),setTimeout(()=>{C.$i()},0),C}}function ov(){return"undefined"!=typeof window?window:null}function Bh(){return"undefined"!=typeof document?document:null}function av(r){return new BD(r,!0)}class YT{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Fe=e,this.timerId=t,this.Wi=n,this.Gi=i,this.zi=s,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),i=Math.max(0,t-n);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Fe.enqueueAfterDelay(this.timerId,i,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class QT{constructor(e,t,n,i,s,o,c,f){this.Fe=e,this.nr=n,this.sr=i,this.ir=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new YT(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,Xe.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Fe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,Xe.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var n=this;return(0,Xe.Z)(function*(){n.yr(),n.pr(),n.ur.cancel(),n.rr++,4!==e?n.ur.reset():t&&t.code===tt.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),n.ur.Xi()):t&&t.code===tt.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Tr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.rr===t&&this.Ir(n,i)},n=>{e(()=>{const i=new bt(tt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Ar(i)})})}Ir(e,t){const n=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{n(()=>(this.state=2,this.cr=this.Fe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(i=>{n(()=>this.Ar(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}dr(){var e=this;this.state=5,this.ur.Zi((0,Xe.Z)(function*(){e.state=0,e.start()}))}Ar(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Fe.enqueueAndForget(()=>this.rr===e?t():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fx extends QT{constructor(e,t,n,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,o),this.k=s}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(r,e){let t;if("targetChange"in e){const n="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:en(),i=e.targetChange.targetIds||[],s=function(f,m){return f.C?(fn(void 0===m||"string"==typeof m),Ei.fromBase64String(m||"")):(fn(void 0===m||m instanceof Uint8Array),Ei.fromUint8Array(m||new Uint8Array))}(r,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(f){const m=void 0===f.code?tt.UNKNOWN:wC(f.code);return new bt(m,f.message||"")}(o);t=new u_(n,i,s,c||null)}else if("documentChange"in e){const n=e.documentChange,i=su(r,n.document.name),s=di(n.document.updateTime),o=new ps({mapValue:{fields:n.document.fields}}),c=kr.newFoundDocument(i,s,o);t=new Zl(n.targetIds||[],n.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const n=e.documentDelete,i=su(r,n.document),s=n.readTime?di(n.readTime):wn.min(),o=kr.newNoDocument(i,s);t=new Zl([],n.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const n=e.documentRemove,i=su(r,n.document);t=new Zl([],n.removedTargetIds||[],i,null)}else{if(!("filter"in e))return en();{const n=e.filter,s=new ND(n.count||0);t=new LD(n.targetId,s)}}var f;return t}(this.k,e),n=function(i){if(!("targetChange"in i))return wn.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?wn.min():s.readTime?di(s.readTime):wn.min()}(e);return this.listener.br(t,n)}Pr(e){const t={};t.database=Ip(this.k),t.addTarget=function(i,s){let o;const c=s.target;return o=Lm(c)?{documents:PC(i,c)}:{query:MC(i,c)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Zm(i,s.resumeToken):s.snapshotVersion.compareTo(wn.min())>0&&(o.readTime=zm(i,s.snapshotVersion.toTimestamp())),o}(this.k,e);const n=function(r,e){const t=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return en()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);n&&(t.labels=n),this.gr(t)}vr(e){const t={};t.database=Ip(this.k),t.removeTarget=e,this.gr(t)}}class XT extends QT{constructor(e,t,n,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,o),this.k=s,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(r,e){return r&&r.length>0?(fn(void 0!==e),r.map(t=>function(n,i){let s=di(n.updateTime?n.updateTime:i);return s.isEqual(wn.min())&&(s=di(i)),new gC(s,n.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),n=di(e.commitTime);return this.listener.Cr(n,t)}return fn(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Ip(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>c_(this.k,n))};this.gr(t)}}class px extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=n,this.k=i,this.$r=!1}Or(){if(this.$r)throw new bt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.ir.Bi(e,t,n,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new bt(tt.UNKNOWN,i.toString())})}ji(e,t,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.ir.ji(e,t,n,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new bt(tt.UNKNOWN,i.toString())})}terminate(){this.$r=!0}}class l1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Fr=0,this.Mr=null,this.Lr=!0}Br(){0===this.Fr&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Fr++,this.Fr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Fr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Ti(t),this.Lr=!1):It("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class c1{constructor(e,t,n,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=s,this.Hr.Ei(c=>{n.enqueueAndForget((0,Xe.Z)(function*(){var f;Jl(o)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Xe.Z)(function*(m){const _=Ut(m);_.Gr.add(4),yield hd(_),_.Jr.set("Unknown"),_.Gr.delete(4),yield S_(_)}),function(m){return f.apply(this,arguments)})(o))}))}),this.Jr=new l1(n,i)}}function S_(r){return uv.apply(this,arguments)}function uv(){return uv=(0,Xe.Z)(function*(r){if(Jl(r))for(const e of r.zr)yield e(!0)}),uv.apply(this,arguments)}function hd(r){return C_.apply(this,arguments)}function C_(){return C_=(0,Xe.Z)(function*(r){for(const e of r.zr)yield e(!1)}),C_.apply(this,arguments)}function Wp(r,e){const t=Ut(r);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),tE(t)?eE(t):ec(t).lr()&&JT(t,e))}function Vh(r,e){const t=Ut(r),n=ec(t);t.Wr.delete(e),n.lr()&&gx(t,e),0===t.Wr.size&&(n.lr()?n._r():Jl(t)&&t.Jr.set("Unknown"))}function JT(r,e){r.Yr.X(e.targetId),ec(r).Pr(e)}function gx(r,e){r.Yr.X(e),ec(r).vr(e)}function eE(r){r.Yr=new DC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Wr.get(e)||null}),ec(r).start(),r.Jr.Br()}function tE(r){return Jl(r)&&!ec(r).hr()&&r.Wr.size>0}function Jl(r){return 0===Ut(r).Gr.size}function x_(r){r.Yr=void 0}function mx(r){return I_.apply(this,arguments)}function I_(){return I_=(0,Xe.Z)(function*(r){r.Wr.forEach((e,t)=>{JT(r,e)})}),I_.apply(this,arguments)}function vx(r,e){return A_.apply(this,arguments)}function A_(){return A_=(0,Xe.Z)(function*(r,e){x_(r),tE(r)?(r.Jr.Kr(e),eE(r)):r.Jr.set("Unknown")}),A_.apply(this,arguments)}function d1(r,e,t){return D_.apply(this,arguments)}function D_(){return D_=(0,Xe.Z)(function*(r,e,t){if(r.Jr.set("Online"),e instanceof u_&&2===e.state&&e.cause)try{yield(n=(0,Xe.Z)(function*(i,s){const o=s.cause;for(const c of s.targetIds)i.Wr.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.Wr.delete(c),i.Yr.removeTarget(c))}),function(i,s){return n.apply(this,arguments)})(r,e)}catch(n){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield lv(r,n)}else if(e instanceof Zl?r.Yr.ot(e):e instanceof LD?r.Yr.dt(e):r.Yr.ut(e),!t.isEqual(wn.min()))try{const n=yield n1(r.localStore);t.compareTo(n)>=0&&(yield function(i,s){const o=i.Yr.gt(s);return o.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Wr.get(f);m&&i.Wr.set(f,m.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach(c=>{const f=i.Wr.get(c);if(!f)return;i.Wr.set(c,f.withResumeToken(Ei.EMPTY_BYTE_STRING,f.snapshotVersion)),gx(i,c);const m=new Nu(f.target,c,1,f.sequenceNumber);JT(i,m)}),i.remoteSyncer.applyRemoteEvent(o)}(r,t))}catch(n){It("RemoteStore","Failed to raise snapshot:",n),yield lv(r,n)}var n}),D_.apply(this,arguments)}function lv(r,e,t){return nE.apply(this,arguments)}function nE(){return nE=(0,Xe.Z)(function*(r,e,t){if(!cd(e))throw e;r.Gr.add(1),yield hd(r),r.Jr.set("Offline"),t||(t=()=>n1(r.localStore)),r.asyncQueue.enqueueRetryable((0,Xe.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield t(),r.Gr.delete(1),yield S_(r)}))}),nE.apply(this,arguments)}function rE(r,e){return e().catch(t=>lv(r,t,e))}function Hh(r){return ys.apply(this,arguments)}function ys(){return ys=(0,Xe.Z)(function*(r){const e=Ut(r),t=Fu(e);let n=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;zp(e);)try{const i=yield pR(e.localStore,n);if(null===i){0===e.Qr.length&&t._r();break}n=i.batchId,h1(e,i)}catch(i){yield lv(e,i)}yx(e)&&f1(e)}),ys.apply(this,arguments)}function zp(r){return Jl(r)&&r.Qr.length<10}function h1(r,e){r.Qr.push(e);const t=Fu(r);t.lr()&&t.Sr&&t.Dr(e.mutations)}function yx(r){return Jl(r)&&!Fu(r).hr()&&r.Qr.length>0}function f1(r){Fu(r).start()}function cv(r){return iE.apply(this,arguments)}function iE(){return iE=(0,Xe.Z)(function*(r){Fu(r).kr()}),iE.apply(this,arguments)}function sE(r){return oE.apply(this,arguments)}function oE(){return oE=(0,Xe.Z)(function*(r){const e=Fu(r);for(const t of r.Qr)e.Dr(t.mutations)}),oE.apply(this,arguments)}function _x(r,e,t){return aE.apply(this,arguments)}function aE(){return aE=(0,Xe.Z)(function*(r,e,t){const n=r.Qr.shift(),i=DT.from(n,e,t);yield rE(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),yield Hh(r)}),aE.apply(this,arguments)}function p1(r,e){return dv.apply(this,arguments)}function dv(){return dv=(0,Xe.Z)(function*(r,e){var t;e&&Fu(r).Sr&&(yield(t=(0,Xe.Z)(function*(n,i){if(EC(s=i.code)&&s!==tt.ABORTED){const o=n.Qr.shift();Fu(n).wr(),yield rE(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Hh(n)}var s}),function(n,i){return t.apply(this,arguments)})(r,e)),yx(r)&&f1(r)}),dv.apply(this,arguments)}function k_(r,e){return P_.apply(this,arguments)}function P_(){return P_=(0,Xe.Z)(function*(r,e){const t=Ut(r);e?(t.Gr.delete(2),yield S_(t)):e||(t.Gr.add(2),yield hd(t),t.Jr.set("Unknown"))}),P_.apply(this,arguments)}function ec(r){return r.Xr||(r.Xr=function(e,t,n){const i=Ut(e);return i.Or(),new fx(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,n)}(r.datastore,r.asyncQueue,{Di:mx.bind(null,r),Ni:vx.bind(null,r),br:d1.bind(null,r)}),r.zr.push(function(){var e=(0,Xe.Z)(function*(t){t?(r.Xr.wr(),tE(r)?eE(r):r.Jr.set("Unknown")):(yield r.Xr.stop(),x_(r))});return function(t){return e.apply(this,arguments)}}())),r.Xr}function Fu(r){return r.Zr||(r.Zr=function(e,t,n){const i=Ut(e);return i.Or(),new XT(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,n)}(r.datastore,r.asyncQueue,{Di:cv.bind(null,r),Ni:p1.bind(null,r),Nr:sE.bind(null,r),Cr:_x.bind(null,r)}),r.zr.push(function(){var e=(0,Xe.Z)(function*(t){t?(r.Zr.wr(),yield Hh(r)):(yield r.Zr.stop(),r.Qr.length>0&&(It("RemoteStore",`Stopping write stream with ${r.Qr.length} pending writes`),r.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),r.Zr}class bx{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,n,i,s){const o=Date.now()+n,c=new bx(e,t,o,i,s);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bt(tt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gh(r,e){if(Ti("AsyncQueue",`${e}: ${r}`),cd(r))return new bt(tt.UNAVAILABLE,`${e}: ${r}`);throw r}class Zp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||tn.comparator(t.key,n.key):(t,n)=>tn.comparator(t.key,n.key),this.keyedMap=a_(),this.sortedSet=new Fi(this.comparator)}static emptySet(e){return new Zp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class uE{constructor(){this.eo=new Fi(tn.comparator)}track(e){const t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):en():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,n)=>{e.push(n)}),e}}class tc{constructor(e,t,n,i,s,o,c,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=f}static fromInitialDocuments(e,t,n,i){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new tc(e,t,Zp.emptySet(t),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ys(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class Tx{constructor(){this.so=void 0,this.listeners=[]}}class g1{constructor(){this.queries=new Up(e=>wa(e),Ys),this.onlineState="Unknown",this.io=new Set}}function hv(r,e){return fv.apply(this,arguments)}function fv(){return fv=(0,Xe.Z)(function*(r,e){const t=Ut(r),n=e.query;let i=!1,s=t.queries.get(n);if(s||(i=!0,s=new Tx),i)try{s.so=yield t.onListen(n)}catch(o){const c=Gh(o,`Initialization of query '${n_(e.query)}' failed`);return void e.onError(c)}t.queries.set(n,s),s.listeners.push(e),e.ro(t.onlineState),s.so&&e.oo(s.so)&&M_(t)}),fv.apply(this,arguments)}function lE(r,e){return cE.apply(this,arguments)}function cE(){return cE=(0,Xe.Z)(function*(r,e){const t=Ut(r),n=e.query;let i=!1;const s=t.queries.get(n);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(n),t.onUnlisten(n)}),cE.apply(this,arguments)}function Ex(r,e){const t=Ut(r);let n=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const c of o.listeners)c.oo(i)&&(n=!0);o.so=i}}n&&M_(t)}function wx(r,e,t){const n=Ut(r),i=n.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);n.queries.delete(e)}function M_(r){r.io.forEach(e=>{e.next()})}class dE{constructor(e,t,n){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)3!==i.type&&n.push(i);e=new tc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class Sx{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class hE{constructor(e){this.k=e}Hn(e){return su(this.k,e)}Jn(e){return e.metadata.exists?wT(this.k,e.document,!1):kr.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return di(e)}}class m1{constructor(e,t,n){this.mo=e,this.localStore=t,this.k=n,this.queries=[],this.documents=[],this.progress=Cx(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,n=new hE(this.k);for(const i of e)if(i.metadata.queries){const s=n.Hn(i.metadata.name);for(const o of i.metadata.queries){const c=(t.get(o)||sr()).add(s);t.set(o,c)}}return t}complete(){var e=this;return(0,Xe.Z)(function*(){const t=yield function(r,e,t,n){return GT.apply(this,arguments)}(e.localStore,new hE(e.k),e.documents,e.mo.id),n=e.po(e.documents);for(const i of e.queries)yield i1(e.localStore,i,n.get(i.name));return e.progress.taskState="Success",new JD(Object.assign({},e.progress),t)})()}}function Cx(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class fE{constructor(e){this.key=e}}class xx{constructor(e){this.key=e}}class pE{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=sr(),this.mutatedKeys=sr(),this.Ao=lC(e),this.Ro=new Zp(this.Ao)}get bo(){return this.To}Po(e,t){const n=t?t.vo:new uE,i=t?t.Ro:this.Ro;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const f=Fm(this.query)&&i.size===this.query.limit?i.last():null,m=pT(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,w)=>{const C=i.get(_),M=Cp(this.query,w)?w:null,L=!!C&&this.mutatedKeys.has(C.key),V=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let H=!1;C&&M?C.data.isEqual(M.data)?L!==V&&(n.track({type:3,doc:M}),H=!0):this.Vo(C,M)||(n.track({type:2,doc:M}),H=!0,(f&&this.Ao(M,f)>0||m&&this.Ao(M,m)<0)&&(c=!0)):!C&&M?(n.track({type:0,doc:M}),H=!0):C&&!M&&(n.track({type:1,doc:C}),H=!0,(f||m)&&(c=!0)),H&&(M?(o=o.add(M),s=V?s.add(_):s.delete(_)):(o=o.delete(_),s=s.delete(_)))}),Fm(this.query)||pT(this.query))for(;o.size>this.query.limit;){const _=Fm(this.query)?o.last():o.first();o=o.delete(_.key),s=s.delete(_.key),n.track({type:1,doc:_})}return{Ro:o,vo:n,Bn:c,mutatedKeys:s}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const s=e.vo.no();s.sort((m,_)=>function(w,C){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en()}};return M(w)-M(C)}(m.type,_.type)||this.Ao(m.doc,_.doc)),this.So(n);const o=t?this.Do():[],c=0===this.Io.size&&this.current?1:0,f=c!==this.Eo;return this.Eo=c,0!==s.length||f?{snapshot:new tc(this.query,e.Ro,i,s,e.mutatedKeys,0===c,f,!1),Co:o}:{Co:o}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new uE,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=sr(),this.Ro.forEach(n=>{this.No(n.key)&&(this.Io=this.Io.add(n.key))});const t=[];return e.forEach(n=>{this.Io.has(n)||t.push(new xx(n))}),this.Io.forEach(n=>{e.has(n)||t.push(new fE(n))}),t}ko(e){this.To=e.zn,this.Io=sr();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return tc.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Ix{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ax{constructor(e){this.key=e,this.$o=!1}}class Dx{constructor(e,t,n,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Oo={},this.Fo=new Up(c=>wa(c),Ys),this.Mo=new Map,this.Lo=new Set,this.Bo=new Fi(tn.comparator),this.Uo=new Map,this.qo=new qT,this.Ko={},this.jo=new Map,this.Qo=Oh.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function v1(r,e){return gE.apply(this,arguments)}function gE(){return gE=(0,Xe.Z)(function*(r,e){const t=U_(r);let n,i;const s=t.Fo.get(e);if(s)n=s.targetId,t.sharedClientState.addLocalQueryTarget(n),i=s.view.xo();else{const o=yield Uh(t.localStore,Ea(e)),c=t.sharedClientState.addLocalQueryTarget(o.targetId);n=o.targetId,i=yield mE(t,e,n,"current"===c),t.isPrimaryClient&&Wp(t.remoteStore,o)}return i}),gE.apply(this,arguments)}function mE(r,e,t,n){return R_.apply(this,arguments)}function R_(){return R_=(0,Xe.Z)(function*(r,e,t,n){r.Go=(_,w,C)=>{return(M=(0,Xe.Z)(function*(L,V,H,Se){let be=V.view.Po(H);be.Bn&&(be=yield $p(L.localStore,V.query,!1).then(({documents:$e})=>V.view.Po($e,be)));const je=Se&&Se.targetChanges.get(V.targetId),Ne=V.view.applyChanges(be,L.isPrimaryClient,je);return Rx(L,V.targetId,Ne.Co),Ne.snapshot}),function(L,V,H,Se){return M.apply(this,arguments)})(r,_,w,C);var M};const i=yield $p(r.localStore,e,!0),s=new pE(e,i.zn),o=s.Po(i.documents),c=Wm.createSynthesizedTargetChangeForCurrentChange(t,n&&"Offline"!==r.onlineState),f=s.applyChanges(o,r.isPrimaryClient,c);Rx(r,t,f.Co);const m=new Ix(e,t,s);return r.Fo.set(e,m),r.Mo.has(t)?r.Mo.get(t).push(e):r.Mo.set(t,[e]),f.snapshot}),R_.apply(this,arguments)}function gR(r,e){return kx.apply(this,arguments)}function kx(){return kx=(0,Xe.Z)(function*(r,e){const t=Ut(r),n=t.Fo.get(e),i=t.Mo.get(n.targetId);if(i.length>1)return t.Mo.set(n.targetId,i.filter(s=>!Ys(s,e))),void t.Fo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(n.targetId),t.sharedClientState.isActiveQueryTarget(n.targetId)||(yield rv(t.localStore,n.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(n.targetId),Vh(t.remoteStore,n.targetId),$h(t,n.targetId)}).catch(Lh))):($h(t,n.targetId),yield rv(t.localStore,n.targetId,!0))}),kx.apply(this,arguments)}function Px(){return Px=(0,Xe.Z)(function*(r,e,t){const n=IE(r);try{const i=yield function(s,o){const c=Ut(s),f=es.now(),m=o.reduce((w,C)=>w.add(C.key),sr());let _;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>c.Wn.vn(w,m).next(C=>{_=C;const M=[];for(const L of o){const V=OD(L,_.get(L.key));null!=V&&M.push(new ld(L.key,V,Jy(V.value.mapValue),ci.exists(!0)))}return c.An.addMutationBatch(w,f,M,o)})).then(w=>(w.applyToLocalDocumentSet(_),{batchId:w.batchId,changes:_}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let f=s.Ko[s.currentUser.toKey()];f||(f=new Fi(Fn)),f=f.insert(o,c),s.Ko[s.currentUser.toKey()]=f}(n,i.batchId,t),yield ju(n,i.changes),yield Hh(n.remoteStore)}catch(i){const s=Gh(i,"Failed to persist write");t.reject(s)}}),Px.apply(this,arguments)}function y1(r,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,Xe.Z)(function*(r,e){const t=Ut(r);try{const n=yield nx(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Uo.get(s);o&&(fn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.$o=!0:i.modifiedDocuments.size>0?fn(o.$o):i.removedDocuments.size>0&&(fn(o.$o),o.$o=!1))}),yield ju(t,n,e)}catch(n){yield Lh(n)}}),Mx.apply(this,arguments)}function _1(r,e,t){const n=Ut(r);if(n.isPrimaryClient&&0===t||!n.isPrimaryClient&&1===t){const i=[];n.Fo.forEach((s,o)=>{const c=o.view.ro(e);c.snapshot&&i.push(c.snapshot)}),function(s,o){const c=Ut(s);c.onlineState=o;let f=!1;c.queries.forEach((m,_)=>{for(const w of _.listeners)w.ro(o)&&(f=!0)}),f&&M_(c)}(n.eventManager,e),i.length&&n.Oo.br(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}function vR(r,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,Xe.Z)(function*(r,e,t){const n=Ut(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Uo.get(e),s=i&&i.key;if(s){let o=new Fi(tn.comparator);o=o.insert(s,kr.newNoDocument(s,wn.min()));const c=sr().add(s),f=new qm(wn.min(),new Map,new $r(Fn),o,c);yield y1(n,f),n.Bo=n.Bo.remove(s),n.Uo.delete(e),Qp(n)}else yield rv(n.localStore,e,!1).then(()=>$h(n,e,t)).catch(Lh)}),Kp.apply(this,arguments)}function yR(r,e){return pv.apply(this,arguments)}function pv(){return pv=(0,Xe.Z)(function*(r,e){const t=Ut(r),n=e.batch.batchId;try{const i=yield Gp(t.localStore,e);N_(t,n,null),gv(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),yield ju(t,i)}catch(i){yield Lh(i)}}),pv.apply(this,arguments)}function Yp(r,e,t){return O_.apply(this,arguments)}function O_(){return O_=(0,Xe.Z)(function*(r,e,t){const n=Ut(r);try{const i=yield function(s,o){const c=Ut(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.An.lookupMutationBatch(f,o).next(_=>(fn(null!==_),m=_.keys(),c.An.removeMutationBatch(f,_))).next(()=>c.An.performConsistencyCheck(f)).next(()=>c.Wn.vn(f,m))})}(n.localStore,e);N_(n,e,t),gv(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),yield ju(n,i)}catch(i){yield Lh(i)}}),O_.apply(this,arguments)}function vE(){return vE=(0,Xe.Z)(function*(r,e){const t=Ut(r);Jl(t.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=yield function(s){const o=Ut(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.An.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===n)return void e.resolve();const i=t.jo.get(n)||[];i.push(e),t.jo.set(n,i)}catch(n){const i=Gh(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),vE.apply(this,arguments)}function gv(r,e){(r.jo.get(e)||[]).forEach(t=>{t.resolve()}),r.jo.delete(e)}function N_(r,e,t){const n=Ut(r);let i=n.Ko[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Ko[n.currentUser.toKey()]=i}}function $h(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Mo.get(e))r.Fo.delete(n),t&&r.Oo.zo(n,t);r.Mo.delete(e),r.isPrimaryClient&&r.qo.us(e).forEach(n=>{r.qo.containsKey(n)||yE(r,n)})}function yE(r,e){r.Lo.delete(e.path.canonicalString());const t=r.Bo.get(e);null!==t&&(Vh(r.remoteStore,t),r.Bo=r.Bo.remove(e),r.Uo.delete(t),Qp(r))}function Rx(r,e,t){for(const n of t)n instanceof fE?(r.qo.addReference(n.key,e),Ox(r,n)):n instanceof xx?(It("SyncEngine","Document no longer in limbo: "+n.key),r.qo.removeReference(n.key,e),r.qo.containsKey(n.key)||yE(r,n.key)):en()}function Ox(r,e){const t=e.key,n=t.path.canonicalString();r.Bo.get(t)||r.Lo.has(n)||(It("SyncEngine","New document in limbo: "+t),r.Lo.add(n),Qp(r))}function Qp(r){for(;r.Lo.size>0&&r.Bo.size<r.maxConcurrentLimboResolutions;){const e=r.Lo.values().next().value;r.Lo.delete(e);const t=new tn(ir.fromString(e)),n=r.Qo.next();r.Uo.set(n,new Ax(t)),r.Bo=r.Bo.insert(t,n),Wp(r.remoteStore,new Nu(Ea(wp(t.path)),n,2,Bo.I))}}function ju(r,e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,Xe.Z)(function*(r,e,t){const n=Ut(r),i=[],s=[],o=[];var c;n.Fo.isEmpty()||(n.Fo.forEach((c,f)=>{o.push(n.Go(f,e,t).then(m=>{if(m){n.isPrimaryClient&&n.sharedClientState.updateQueryState(f.targetId,m.fromCache?"not-current":"current"),i.push(m);const _=UT.$n(f.targetId,m);s.push(_)}}))}),yield Promise.all(o),n.Oo.br(i),yield(c=(0,Xe.Z)(function*(f,m){const _=Ut(f);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>mt.forEach(m,C=>mt.forEach(C.kn,M=>_.persistence.referenceDelegate.addReference(w,C.targetId,M)).next(()=>mt.forEach(C.xn,M=>_.persistence.referenceDelegate.removeReference(w,C.targetId,M)))))}catch(w){if(!cd(w))throw w;It("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const C=w.targetId;if(!w.fromCache){const M=_.qn.get(C),V=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);_.qn=_.qn.insert(C,V)}}}),function(f,m){return c.apply(this,arguments)})(n.localStore,s))}),Nx.apply(this,arguments)}function _R(r,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,Xe.Z)(function*(r,e){const t=Ut(r);if(!t.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const n=yield jh(t.localStore,e);t.currentUser=e,(i=t).jo.forEach(o=>{o.forEach(c=>{c.reject(new bt(tt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.jo.clear(),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),yield ju(t,n.Gn)}var i}),Lx.apply(this,arguments)}function T1(r,e){const t=Ut(r),n=t.Uo.get(e);if(n&&n.$o)return sr().add(n.key);{let i=sr();const s=t.Mo.get(e);if(!s)return i;for(const o of s){const c=t.Fo.get(o);i=i.unionWith(c.view.bo)}return i}}function _E(r,e){return bE.apply(this,arguments)}function bE(){return bE=(0,Xe.Z)(function*(r,e){const t=Ut(r),n=yield $p(t.localStore,e.query,!0),i=e.view.ko(n);return t.isPrimaryClient&&Rx(t,e.targetId,i.Co),i}),bE.apply(this,arguments)}function bR(r){return TE.apply(this,arguments)}function TE(){return TE=(0,Xe.Z)(function*(r){const e=Ut(r);return VT(e.localStore).then(t=>ju(e,t))}),TE.apply(this,arguments)}function EE(r,e,t,n){return wE.apply(this,arguments)}function wE(){return wE=(0,Xe.Z)(function*(r,e,t,n){const i=Ut(r),s=yield function(o,c){const f=Ut(o),m=Ut(f.An);return f.persistence.runTransaction("Lookup mutation documents","readonly",_=>m.Zt(_,c).next(w=>w?f.Wn.vn(_,w):mt.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield Hh(i.remoteStore):"acknowledged"===t||"rejected"===t?(N_(i,e,n||null),gv(i,e),c=e,Ut(Ut(i.localStore).An).ee(c)):en(),yield ju(i,s)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),wE.apply(this,arguments)}function SE(){return SE=(0,Xe.Z)(function*(r,e){const t=Ut(r);if(U_(t),IE(t),!0===e&&!0!==t.Wo){const n=t.sharedClientState.getAllActiveQueryTargets(),i=yield L_(t,n.toArray());t.Wo=!0,yield k_(t.remoteStore,!0);for(const s of i)Wp(t.remoteStore,s)}else if(!1===e&&!1!==t.Wo){const n=[];let i=Promise.resolve();t.Mo.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?n.push(o):i=i.then(()=>($h(t,o),rv(t.localStore,o,!0))),Vh(t.remoteStore,o)}),yield i,yield L_(t,n),function(s){const o=Ut(s);o.Uo.forEach((c,f)=>{Vh(o.remoteStore,f)}),o.qo.hs(),o.Uo=new Map,o.Bo=new Fi(tn.comparator)}(t),t.Wo=!1,yield k_(t.remoteStore,!1)}}),SE.apply(this,arguments)}function L_(r,e,t){return CE.apply(this,arguments)}function CE(){return CE=(0,Xe.Z)(function*(r,e,t){const n=Ut(r),i=[],s=[];for(const o of e){let c;const f=n.Mo.get(o);if(f&&0!==f.length){c=yield Uh(n.localStore,Ea(f[0]));for(const m of f){const _=n.Fo.get(m),w=yield _E(n,_);w.snapshot&&s.push(w.snapshot)}}else{const m=yield BT(n.localStore,o);c=yield Uh(n.localStore,m),yield mE(n,Fx(m),o,!1)}i.push(c)}return n.Oo.br(s),i}),CE.apply(this,arguments)}function Fx(r){return fT(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function xE(r){const e=Ut(r);return Ut(Ut(e.localStore).persistence).Tn()}function jx(r,e,t,n){return F_.apply(this,arguments)}function F_(){return F_=(0,Xe.Z)(function*(r,e,t,n){const i=Ut(r);if(i.Wo)It("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(e))switch(t){case"current":case"not-current":{const s=yield VT(i.localStore),o=qm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ju(i,s,o);break}case"rejected":yield rv(i.localStore,e,!0),$h(i,e,n);break;default:en()}}),F_.apply(this,arguments)}function E1(r,e,t){return j_.apply(this,arguments)}function j_(){return j_=(0,Xe.Z)(function*(r,e,t){const n=U_(r);if(n.Wo){for(const i of e){if(n.Mo.has(i)){It("SyncEngine","Adding an already active target "+i);continue}const s=yield BT(n.localStore,i),o=yield Uh(n.localStore,s);yield mE(n,Fx(s),o.targetId,!1),Wp(n.remoteStore,o)}for(const i of t)n.Mo.has(i)&&(yield rv(n.localStore,i,!1).then(()=>{Vh(n.remoteStore,i),$h(n,i)}).catch(Lh))}}),j_.apply(this,arguments)}function U_(r){const e=Ut(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=y1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vR.bind(null,e),e.Oo.br=Ex.bind(null,e.eventManager),e.Oo.zo=wx.bind(null,e.eventManager),e}function IE(r){const e=Ut(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yp.bind(null,e),e}class B_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Xe.Z)(function*(){t.k=av(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return tx(this.persistence,new e1,e.initialUser,this.k)}Yo(e){return new lx(WT.ks,this.k)}Jo(e){return new hx}terminate(){var e=this;return(0,Xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xa extends B_{constructor(e,t,n){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,Xe.Z)(function*(){yield t().call(n,e),yield function(r){return HT.apply(this,arguments)}(n.localStore),yield n.ta.initialize(n,e),yield IE(n.ta.syncEngine),yield Hh(n.ta.remoteStore),yield n.persistence.sn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Zo(e){return tx(this.persistence,new e1,e.initialUser,this.k)}Xo(e){return new tv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=jT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ms.withCacheSize(this.cacheSizeBytes):Ms.DEFAULT;return new v_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ov(),Bh(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new hx}}class S1 extends xa{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,Xe.Z)(function*(){yield t().call(n,e);const i=n.ta.syncEngine;n.sharedClientState instanceof Ca&&(n.sharedClientState.syncEngine={mi:EE.bind(null,i),gi:jx.bind(null,i),yi:E1.bind(null,i),Tn:xE.bind(null,i),_i:bR.bind(null,i)},yield n.sharedClientState.start()),yield n.persistence.sn(function(){var s=(0,Xe.Z)(function*(o){yield function(r,e){return SE.apply(this,arguments)}(n.ta.syncEngine,o),n.gcScheduler&&(o&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):o||n.gcScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Jo(e){const t=ov();if(!Ca.Pt(t))throw new bt(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=jT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ca(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class AE{initialize(e,t){var n=this;return(0,Xe.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=i=>_1(n.syncEngine,i,1),n.remoteStore.remoteSyncer.handleCredentialChange=_R.bind(null,n.syncEngine),yield k_(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new g1}createDatastore(e){const t=av(e.databaseInfo.databaseId),n=new u1(e.databaseInfo);return new px(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,s=c=>_1(this.syncEngine,c,0),o=qp.Pt()?new qp:new w_,new c1(t,n,i,s,o);var t,n,i,s,o}createSyncEngine(e,t){return function(n,i,s,o,c,f,m){const _=new Dx(n,i,s,o,c,f);return m&&(_.Wo=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Xe.Z)(function*(t){const n=Ut(t);It("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),yield hd(n),n.Hr.shutdown(),n.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ux(r,e=10240){let t=0;return{read:()=>(0,Xe.Z)(function*(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}})(),cancel:()=>(0,Xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class C1{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Ji,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(n=>{n&&n._o()?this.metadata.resolve(n.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==n?void 0:n.payload)}`))},n=>this.metadata.reject(n))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,Xe.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,Xe.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,Xe.Z)(function*(){const t=yield e.oa();if(null===t)return null;const n=e.ia.decode(t),i=Number(n);isNaN(i)&&e.aa(`length string (${n}) is not valid number`);const s=yield e.ca(i);return new Sx(JSON.parse(s),t.length+i)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,Xe.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ca(e){var t=this;return(0,Xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const n=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,Xe.Z)(function*(){const t=yield e.sa.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class x1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new bt(tt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(i=(0,Xe.Z)(function*(s,o){const c=Ut(s),f=Ip(c.k)+"/documents",m={documents:o.map(M=>l_(c.k,M))},_=yield c.ji("BatchGetDocuments",f,m),w=new Map;_.forEach(M=>{const L=function(r,e){return"found"in e?function(t,n){fn(!!n.found);const i=su(t,n.found.name),s=di(n.found.updateTime),o=new ps({mapValue:{fields:n.found.fields}});return kr.newFoundDocument(i,s,o)}(r,e):"missing"in e?function(t,n){fn(!!n.missing),fn(!!n.readTime);const i=su(t,n.missing),s=di(n.readTime);return kr.newNoDocument(i,s)}(r,e):en()}(c.k,M);w.set(L.key.toString(),L)});const C=[];return o.forEach(M=>{const L=w.get(M.toString());fn(!!L),C.push(L)}),C}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return n.forEach(i=>t.recordVersion(i)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new $m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=tn.fromPath(i);e.mutations.push(new mT(s,e.precondition(s)))}),yield(n=(0,Xe.Z)(function*(i,s){const o=Ut(i),c=Ip(o.k)+"/documents",f={writes:s.map(m=>c_(o.k,m))};yield o.Bi("Commit",c,f)}),function(i,s){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw en();t=wn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new bt(tt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ci.updateTime(t):ci.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wn.min()))throw new bt(tt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ci.updateTime(t)}return ci.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Bx{constructor(e,t,n,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=i,this.la=5,this.ur=new YT(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,Xe.Z)(function*(){const t=new x1(e.datastore),n=e.da(t);n&&n.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.wa(s)}))}).catch(i=>{e.wa(i)})}))}da(e){try{const t=this.updateFunction(e);return!Eh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!EC(t)}return!1}}class I1{constructor(e,t,n,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=hs.UNAUTHENTICATED,this.clientId=XS.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var o=(0,Xe.Z)(function*(c){It("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(n,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,Xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Gh(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function A1(r,e){return V_.apply(this,arguments)}function V_(){return V_=(0,Xe.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(function(){var i=(0,Xe.Z)(function*(s){n.isEqual(s)||(yield jh(e.localStore,s),n=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r.offlineComponents=e}),V_.apply(this,arguments)}function DE(r,e){return kE.apply(this,arguments)}function kE(){return kE=(0,Xe.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield PE(r);It("FirestoreClient","Initializing OnlineComponentProvider");const n=yield r.getConfiguration();yield e.initialize(t,n),r.setCredentialChangeListener(i=>{return(s=(0,Xe.Z)(function*(o,c){const f=Ut(o);f.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const m=Jl(f);f.Gr.add(3),yield hd(f),m&&f.Jr.set("Unknown"),yield f.remoteSyncer.handleCredentialChange(c),f.Gr.delete(3),yield S_(f)}),function(o,c){return s.apply(this,arguments)})(e.remoteStore,i);var s}),r.onlineComponents=e}),kE.apply(this,arguments)}function PE(r){return H_.apply(this,arguments)}function H_(){return H_=(0,Xe.Z)(function*(r){return r.offlineComponents||(It("FirestoreClient","Using default OfflineComponentProvider"),yield A1(r,new B_)),r.offlineComponents}),H_.apply(this,arguments)}function fd(r){return vv.apply(this,arguments)}function vv(){return vv=(0,Xe.Z)(function*(r){return r.onlineComponents||(It("FirestoreClient","Using default OnlineComponentProvider"),yield DE(r,new AE)),r.onlineComponents}),vv.apply(this,arguments)}function ME(r){return PE(r).then(e=>e.persistence)}function RE(r){return PE(r).then(e=>e.localStore)}function OE(r){return fd(r).then(e=>e.remoteStore)}function G_(r){return fd(r).then(e=>e.syncEngine)}function Xp(r){return NE.apply(this,arguments)}function NE(){return NE=(0,Xe.Z)(function*(r){const e=yield fd(r),t=e.eventManager;return t.onListen=v1.bind(null,e.syncEngine),t.onUnlisten=gR.bind(null,e.syncEngine),t}),NE.apply(this,arguments)}function Hx(r,e,t={}){const n=new Ji;return r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function(i,s,o,c,f){const m=new mv({next:w=>{s.enqueueAndForget(()=>lE(i,_));const C=w.docs.has(o);!C&&w.fromCache?f.reject(new bt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&c&&"server"===c.source?f.reject(new bt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),_=new dE(wp(o.path),m,{includeMetadataChanges:!0,wo:!0});return hv(i,_)}(yield Xp(r),r.asyncQueue,e,t,n)})),n.promise}function Gx(r,e,t={}){const n=new Ji;return r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function(i,s,o,c,f){const m=new mv({next:w=>{s.enqueueAndForget(()=>lE(i,_)),w.fromCache&&"server"===c.source?f.reject(new bt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),_=new dE(o,m,{includeMetadataChanges:!0,wo:!0});return hv(i,_)}(yield Xp(r),r.asyncQueue,e,t,n)})),n.promise}class IR{constructor(e,t,n,i,s,o,c,f){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.useFetchStreams=f}}class Jp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jp&&e.projectId===this.projectId&&e.database===this.database}}const yv=new Map;function LE(r,e,t){if(!t)throw new bt(tt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $x(r,e,t,n){if(!0===e&&!0===n)throw new bt(tt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function FE(r){if(!tn.isDocumentKey(r))throw new bt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function pd(r){if(tn.isDocumentKey(r))throw new bt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _v(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":en()}function jn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new bt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_v(r);throw new bt(tt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function $_(r,e){if(e<=0)throw new bt(tt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class qx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new bt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$x("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qx({}),this._settingsFrozen=!1,e instanceof Jp?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new bt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jp(i.options.projectId)}(e))}get app(){if(!this._app)throw new bt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cR;switch(t.type){case"gapi":const n=t.client;return fn(!("object"!=typeof n||null===n||!n.auth||!n.auth.getAuthHeaderValueForFirstParty)),new ZS(n,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new bt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yv.get(e);t&&(It("ComponentProvider","Removing Datastore"),yv.delete(e),t.terminate())}(this),Promise.resolve()}}class Cr{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cr(this.firestore,e,this._key)}}class _s{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class nc extends _s{constructor(e,t,n){super(e,t,wp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cr(this.firestore,null,new tn(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function k1(r,e,...t){if(r=(0,mn.m9)(r),LE("collection","path",e),r instanceof qh){const n=ir.fromString(e,...t);return pd(n),new nc(r,null,n)}{if(!(r instanceof Cr||r instanceof nc))throw new bt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ir.fromString(e,...t));return pd(n),new nc(r.firestore,null,n)}}function UE(r,e,...t){if(r=(0,mn.m9)(r),1===arguments.length&&(e=XS.A()),LE("doc","path",e),r instanceof qh){const n=ir.fromString(e,...t);return FE(n),new Cr(r,null,new tn(n))}{if(!(r instanceof Cr||r instanceof nc))throw new bt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ir.fromString(e,...t));return FE(n),new Cr(r.firestore,r instanceof nc?r.converter:null,new tn(n))}}function P1(r,e){return r=(0,mn.m9)(r),e=(0,mn.m9)(e),(r instanceof Cr||r instanceof nc)&&(e instanceof Cr||e instanceof nc)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function M1(r,e){return r=(0,mn.m9)(r),e=(0,mn.m9)(e),r instanceof _s&&e instanceof _s&&r.firestore===e.firestore&&Ys(r._query,e._query)&&r.converter===e.converter}class DR{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new YT(this,"async_queue_retry"),this.Ra=()=>{const t=Bh();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=Bh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ba(),this.Pa(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=Bh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.ba(),this.ya)return new Promise(()=>{});const t=new Ji;return this.Pa(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,Xe.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!cd(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}Pa(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(n=>{throw this.Ta=n,this.Ea=!1,Ti("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(n)),n}).then(n=>(this.Ea=!1,n))));return this.ma=t,t}enqueueAfterDelay(e,t,n){this.ba(),this.Aa.indexOf(e)>-1&&(t=0);const i=bx.createAndSchedule(this,e,t,n,s=>this.Va(s));return this.pa.push(i),i}ba(){this.Ta&&en()}verifyOperationInProgress(){}Sa(){var e=this;return(0,Xe.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function q_(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(r)}class R1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ji,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wr extends qh{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new DR,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||BE(this),this._firestoreClient.terminate()}}function Ci(r){return r._firestoreClient||BE(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function BE(r){var e;const t=r._freezeSettings(),n=(s=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new IR(r._databaseId,s,r._persistenceKey,(c=t).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));var s,c;r._firestoreClient=new I1(r._authCredentials,r._appCheckCredentials,r._queue,n)}function VE(r,e,t){const n=new Ji;return r.asyncQueue.enqueue((0,Xe.Z)(function*(){try{yield A1(r,t),yield DE(r,e),n.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===tt.FAILED_PRECONDITION||s.code===tt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),n.reject(i)}var s})).then(()=>n.promise)}function zx(r){if(r._initialized||r._terminated)throw new bt(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new bt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uu(Ei.fromBase64String(e))}catch(t){throw new bt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uu(Ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wh{constructor(e){this._methodName=e}}class Z_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fn(this._lat,e._lat)||Fn(this._long,e._long)}}const V1=/^__.*__$/;class H1{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gm(e,this.data,t,this.fieldTransforms)}}class Zx{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ld(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kx(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en()}}class HE{constructor(e,t,n,i,s,o){this.settings=e,this.databaseId=t,this.k=n,this.ignoreUndefinedProperties=i,void 0===s&&this.ka(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new HE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oa(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$a({path:n,Fa:!1});return i.Ma(e),i}La(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$a({path:n,Fa:!1});return i.ka(),i}Ba(e){return this.$a({path:void 0,Fa:!0})}Ua(e){return q(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(Kx(this.xa)&&V1.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class RR{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=n||av(e)}ja(e,t,n,i=!1){return new HE({xa:e,methodName:t,Ka:n,path:fs.emptyPath(),Fa:!1,qa:i},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function eg(r){const e=r._freezeSettings(),t=av(r._databaseId);return new RR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function GE(r,e,t,n,i,s={}){const o=r.ja(s.merge||s.mergeFields?2:0,e,t,i);T("Data must be an object, but it was:",o,n);const c=p(n,o);let f,m;if(s.merge)f=new Dm(o.fieldMask),m=o.fieldTransforms;else if(s.mergeFields){const _=[];for(const w of s.mergeFields){const C=x(e,w,t);if(!o.contains(C))throw new bt(tt.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);te(_,C)||_.push(C)}f=new Dm(_),m=o.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=o.fieldTransforms;return new H1(new ps(c),f,m)}class K_ extends Wh{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof K_}}function Yx(r,e,t){return new HE({xa:3,Ka:e.settings.Ka,methodName:r._methodName,Fa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class Qx extends Wh{_toFieldTransform(e){return new Dh(e.path,new xh)}isEqual(e){return e instanceof Qx}}class OR extends Wh{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Yx(this,e,!0),n=this.Qa.map(s=>h(s,t)),i=new ud(n);return new Dh(e.path,i)}isEqual(e){return this===e}}class NR extends Wh{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Yx(this,e,!0),n=this.Qa.map(s=>h(s,t)),i=new Ih(n);return new Dh(e.path,i)}isEqual(e){return this===e}}class LR extends Wh{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Ah(e.k,r_(e.k,this.Wa));return new Dh(e.path,t)}isEqual(e){return this===e}}function a(r,e,t,n){const i=r.ja(1,e,t);T("Data must be an object, but it was:",i,n);const s=[],o=ps.empty();id(n,(f,m)=>{const _=j(e,f,t);m=(0,mn.m9)(m);const w=i.La(_);if(m instanceof K_)s.push(_);else{const C=h(m,w);null!=C&&(s.push(_),o.set(_,C))}});const c=new Dm(s);return new Zx(o,c,i.fieldTransforms)}function u(r,e,t,n,i,s){const o=r.ja(1,e,t),c=[x(e,n,t)],f=[i];if(s.length%2!=0)throw new bt(tt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<s.length;C+=2)c.push(x(e,s[C])),f.push(s[C+1]);const m=[],_=ps.empty();for(let C=c.length-1;C>=0;--C)if(!te(m,c[C])){const M=c[C];let L=f[C];L=(0,mn.m9)(L);const V=o.La(M);if(L instanceof K_)m.push(M);else{const H=h(L,V);null!=H&&(m.push(M),_.set(M,H))}}const w=new Dm(m);return new Zx(_,w,o.fieldTransforms)}function l(r,e,t,n=!1){return h(t,r.ja(n?4:3,e))}function h(r,e){if(y(r=(0,mn.m9)(r)))return T("Unsupported field value:",e,r),p(r,e);if(r instanceof Wh)return function(t,n){if(!Kx(n.xa))throw n.Ua(`${t._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Ua(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Fa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,n){const i=[];let s=0;for(const o of t){let c=h(o,n.Ba(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(r,e)}return function(t,n){if(null===(t=(0,mn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return r_(n.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=es.fromDate(t);return{timestampValue:zm(n.k,i)}}if(t instanceof es){const i=new es(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zm(n.k,i)}}if(t instanceof Z_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Uu)return{bytesValue:Zm(n.k,t._byteString)};if(t instanceof Cr){const i=n.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw n.Ua(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xp(t.firestore._databaseId||n.databaseId,t._key.path)}}throw n.Ua(`Unsupported field value: ${_v(t)}`)}(r,e)}function p(r,e){const t={};return oT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):id(r,(n,i)=>{const s=h(i,e.Oa(n));null!=s&&(t[n]=s)}),{mapValue:{fields:t}}}function y(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof es||r instanceof Z_||r instanceof Uu||r instanceof Cr||r instanceof Wh)}function T(r,e,t){if(!y(t)||"object"!=typeof(n=t)||null===n||Object.getPrototypeOf(n)!==Object.prototype&&null!==Object.getPrototypeOf(n)){const n=_v(t);throw e.Ua("an object"===n?r+" a custom object":r+" "+n)}var n}function x(r,e,t){if((e=(0,mn.m9)(e))instanceof gd)return e._internalPath;if("string"==typeof e)return j(r,e);throw q("Field path arguments must be of type string or FieldPath.",r,!1,void 0,t)}const k=new RegExp("[~\\*/\\[\\]]");function j(r,e,t){if(e.search(k)>=0)throw q(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new gd(...e.split("."))._internalPath}catch(n){throw q(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function q(r,e,t,n,i){const s=n&&!n.isEmpty(),o=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(s||o)&&(f+=" (found",s&&(f+=` in field ${n}`),o&&(f+=` in document ${i}`),f+=")"),new bt(tt.INVALID_ARGUMENT,c+r+f)}function te(r,e){return r.some(t=>t.isEqual(e))}class we{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Be(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(it("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Be extends we{data(){return super.data()}}function it(r,e){return"string"==typeof e?j(r,e):e instanceof gd?e._internalPath:e._delegate._internalPath}class Et{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class At extends we{constructor(e,t,n,i,s,o){super(e,t,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gt(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(it("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Gt extends At{data(e={}){return super.data(e)}}class lt{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Et(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Gt(this._firestore,this._userDataWriter,n.key,n,new Et(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let s=0;return n._snapshot.docChanges.map(o=>({type:"added",doc:new Gt(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Et(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter),oldIndex:-1,newIndex:s++}))}{let s=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const c=new Gt(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Et(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let f=-1,m=-1;return 0!==o.type&&(f=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),m=s.indexOf(o.doc.key)),{type:on(o.type),doc:c,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function on(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en()}}function Rn(r,e){return r instanceof At&&e instanceof At?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof lt&&e instanceof lt&&r._firestore===e._firestore&&M1(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function er(r){if(pT(r)&&0===r.explicitOrderBy.length)throw new bt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bs{}function Eo(r,...e){for(const t of e)r=t._apply(r);return r}class $E extends bs{constructor(e,t,n){super(),this.Ga=e,this.za=t,this.Ha=n,this.type="where"}_apply(e){const t=eg(e.firestore),n=function(i,s,o,c,f,m,_){let w;if(f.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new bt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on FieldPath.documentId().`);if("in"===m||"not-in"===m){BR(_,m);const M=[];for(const L of _)M.push(UR(c,i,L));w={arrayValue:{values:M}}}else w=UR(c,i,_)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||BR(_,m),w=l(o,"where",_,"in"===m||"not-in"===m);const C=Ps.create(f,m,w);return function(M,L){if(L.V()){const H=jm(M);if(null!==H&&!H.isEqual(L.field))throw new bt(tt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${H.toString()}' and '${L.field.toString()}'`);const Se=t_(M);null!==Se&&VR(0,L.field,Se)}const V=function(H,Se){for(const be of H.filters)if(Se.indexOf(be.op)>=0)return be.op;return null}(M,function(H){switch(H){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(L.op));if(null!==V)throw new bt(tt.INVALID_ARGUMENT,V===L.op?`Invalid query. You cannot use more than one '${L.op.toString()}' filter.`:`Invalid query. You cannot use '${L.op.toString()}' filters with '${V.toString()}' filters.`)}(i,C),C}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new _s(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new zl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class WE extends bs{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(n,i,s){if(null!==n.startAt)throw new bt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==n.endAt)throw new bt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Sh(i,s);return function(c,f){if(null===t_(c)){const m=jm(c);null!==m&&VR(0,m,f.field)}}(n,o),o}(e._query,this.Ga,this.Ja);return new _s(e.firestore,e.converter,function(n,i){const s=n.explicitOrderBy.concat([i]);return new zl(n.path,n.collectionGroup,s,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,t))}}class Y_ extends bs{constructor(e,t,n){super(),this.type=e,this.Ya=t,this.Xa=n}_apply(e){return new _s(e.firestore,e.converter,iu(e._query,this.Ya,this.Xa))}}class Q_ extends bs{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=jR(e,this.type,this.Za,this.tc);return new _s(e.firestore,e.converter,(i=t,new zl((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,i,n.endAt)));var n,i}}class FR extends bs{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=jR(e,this.type,this.Za,this.tc);return new _s(e.firestore,e.converter,(i=t,new zl((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,i)));var n,i}}function jR(r,e,t,n){if(t[0]=(0,mn.m9)(t[0]),t[0]instanceof we)return function(i,s,o,c,f){if(!c)throw new bt(tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const m=[];for(const _ of Sp(i))if(_.field.isKeyField())m.push(Mm(s,c.key));else{const w=c.data.field(_.field);if(Pm(w))throw new bt(tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===w){const C=_.field.canonicalString();throw new bt(tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}m.push(w)}return new Ep(m,f)}(r._query,r.firestore._databaseId,e,t[0]._document,n);{const i=eg(r.firestore);return function(s,o,c,f,m,_){const w=s.explicitOrderBy;if(m.length>w.length)throw new bt(tt.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let M=0;M<m.length;M++){const L=m[M];if(w[M].field.isKeyField()){if("string"!=typeof L)throw new bt(tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof L}`);if(!Ta(s)&&-1!==L.indexOf("/"))throw new bt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${f}() must be a plain document ID, but '${L}' contains a slash.`);const V=s.path.child(ir.fromString(L));if(!tn.isDocumentKey(V))throw new bt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${f}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const H=new tn(V);C.push(Mm(o,H))}else{const V=l(c,f,L);C.push(V)}}return new Ep(C,_)}(r._query,r.firestore._databaseId,i,e,t,n)}}function UR(r,e,t){if("string"==typeof(t=(0,mn.m9)(t))){if(""===t)throw new bt(tt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ta(e)&&-1!==t.indexOf("/"))throw new bt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ir.fromString(t));if(!tn.isDocumentKey(n))throw new bt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Mm(r,new tn(n))}if(t instanceof Cr)return Mm(r,t._key);throw new bt(tt.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${_v(t)}.`)}function BR(r,e){if(!Array.isArray(r)||0===r.length)throw new bt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(r.length>10)throw new bt(tt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function VR(r,e,t){if(!t.isEqual(e))throw new bt(tt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class G1{convertValue(e,t="none"){switch(od(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw en()}}convertObject(e,t){const n={};return id(e.fields,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertGeoPoint(e){return new Z_(wi(e.latitude),wi(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=lT(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zy(e));default:return null}}convertTimestamp(e){const t=Ru(e);return new es(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ir.fromString(e);fn(xT(n));const i=new Jp(n.get(1),n.get(3)),s=new tn(n.popFirst(5));return i.isEqual(t)||Ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Xx(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class U2 extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}class HR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eg(e)}set(e,t,n){this._verifyNotCommitted();const i=tg(e,this._firestore),s=Xx(i.converter,t,n),o=GE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,n);return this._mutations.push(o.toMutation(i._key,ci.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=tg(e,this._firestore);let o;return o="string"==typeof(t=(0,mn.m9)(t))||t instanceof gd?u(this._dataReader,"WriteBatch.update",s._key,t,n,i):a(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ci.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tg(e,this._firestore);return this._mutations=this._mutations.concat(new $m(t._key,ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tg(r,e){if((r=(0,mn.m9)(r)).firestore!==e)throw new bt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class bv extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}function GR(r,e,t){r=jn(r,Cr);const n=jn(r.firestore,Wr),i=Xx(r.converter,e,t);return X_(n,[GE(eg(n),"setDoc",r._key,i,null!==r.converter,t).toMutation(r._key,ci.none())])}function $R(r,e,t,...n){r=jn(r,Cr);const i=jn(r.firestore,Wr),s=eg(i);let o;return o="string"==typeof(e=(0,mn.m9)(e))||e instanceof gd?u(s,"updateDoc",r._key,e,t,n):a(s,"updateDoc",r._key,e),X_(i,[o.toMutation(r._key,ci.exists(!0))])}function qR(r,...e){var t,n,i;r=(0,mn.m9)(r);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||q_(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges};if(q_(e[o])){const w=e[o];e[o]=null===(t=w.next)||void 0===t?void 0:t.bind(w),e[o+1]=null===(n=w.error)||void 0===n?void 0:n.bind(w),e[o+2]=null===(i=w.complete)||void 0===i?void 0:i.bind(w)}let f,m,_;if(r instanceof Cr)m=jn(r.firestore,Wr),_=wp(r._key.path),f={next:w=>{e[o]&&e[o]($1(m,r,w))},error:e[o+1],complete:e[o+2]};else{const w=jn(r,_s);m=jn(w.firestore,Wr),_=w._query;const C=new bv(m);f={next:M=>{e[o]&&e[o](new lt(m,C,w,M))},error:e[o+1],complete:e[o+2]},er(r._query)}return function(w,C,M,L){const V=new mv(L),H=new dE(C,V,M);return w.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return hv(yield Xp(w),H)})),()=>{V.na(),w.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return lE(yield Xp(w),H)}))}}(Ci(m),_,c,f)}function X_(r,e){return function(t,n){const i=new Ji;return t.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function(r,e,t){return Px.apply(this,arguments)}(yield G_(t),n,i)})),i.promise}(Ci(r),e)}function $1(r,e,t){const n=t.docs.get(e._key),i=new bv(r);return new At(r,i,e._key,n,new Et(t.hasPendingWrites,t.fromCache),e.converter)}class K2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=eg(e)}get(e){const t=tg(e,this._firestore),n=new U2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return en();const s=i[0];if(s.isFoundDocument())return new we(this._firestore,n,s.key,s,t.converter);if(s.isNoDocument())return new we(this._firestore,n,t._key,null,t.converter);throw en()})}set(e,t,n){const i=tg(e,this._firestore),s=Xx(i.converter,t,n),o=GE(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,n);return this._transaction.set(i._key,o),this}update(e,t,n,...i){const s=tg(e,this._firestore);let o;return o="string"==typeof(t=(0,mn.m9)(t))||t instanceof gd?u(this._dataReader,"Transaction.update",s._key,t,n,i):a(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=tg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tg(e,this._firestore),n=new bv(this._firestore);return super.get(e).then(i=>new At(this._firestore,n,t._key,i._document,new Et(!1,!1),t.converter))}}function q1(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new bt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function WR(){if("undefined"==typeof Uint8Array)throw new bt("unimplemented","Uint8Arrays are not available in this environment.")}function zR(){if("undefined"==typeof atob)throw new bt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){gp=ya.SDK_VERSION,(0,ya._registerComponent)(new tp.wA("firestore",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=new Wr(i,new mp(t.getProvider("auth-internal")),new YS(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s},"PUBLIC")),(0,ya.registerVersion)(tT,"3.4.2",r),(0,ya.registerVersion)(tT,"3.4.2","esm2017")}();class QE{constructor(e){this._delegate=e}static fromBase64String(e){return zR(),new QE(Uu.fromBase64String(e))}static fromUint8Array(e){return WR(),new QE(Uu.fromUint8Array(e))}toBase64(){return zR(),this._delegate.toBase64()}toUint8Array(){return WR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function W1(r){return function(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(r)}class sB{enableIndexedDbPersistence(e,t){return function(r,e){zx(r=jn(r,Wr));const t=Ci(r),n=r._freezeSettings(),i=new AE;return VE(t,i,new xa(i,n.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(r){zx(r=jn(r,Wr));const e=Ci(r),t=r._freezeSettings(),n=new AE;return VE(e,n,new S1(n,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(r){if(r._initialized&&!r._terminated)throw new bt(tt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ji;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Xe.Z)(function*(){try{yield(t=(0,Xe.Z)(function*(n){if(!uu.Pt())return Promise.resolve();const i=n+"main";yield uu.delete(i)}),function(n){return t.apply(this,arguments)})(jT(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZR{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(r,e,t,n={}){var i;const s=(r=jn(r,qh))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&zy("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),n.mockUserToken){let o,c;if("string"==typeof n.mockUserToken)o=n.mockUserToken,c=hs.MOCK_USER;else{o=(0,mn.Sg)(n.mockUserToken,null===(i=r._app)||void 0===i?void 0:i.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new bt(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new hs(f)}r._authCredentials=new xD(new iT(o,c))}}(this._delegate,e,t,n)}enableNetwork(){return function(r){return function(r){return r.asyncQueue.enqueue((0,Xe.Z)(function*(){const e=yield ME(r),t=yield OE(r);return e.setNetworkEnabled(!0),function(n){const i=Ut(n);return i.Gr.delete(0),S_(i)}(t)}))}(Ci(r=jn(r,Wr)))}(this._delegate)}disableNetwork(){return function(r){return function(r){return r.asyncQueue.enqueue((0,Xe.Z)(function*(){const e=yield ME(r),t=yield OE(r);return e.setNetworkEnabled(!1),(n=(0,Xe.Z)(function*(i){const s=Ut(i);s.Gr.add(0),yield hd(s),s.Jr.set("Offline")}),function(i){return n.apply(this,arguments)})(t);var n}))}(Ci(r=jn(r,Wr)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,$x("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(r){return function(e){const t=new Ji;return e.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function(r,e){return vE.apply(this,arguments)}(yield G_(e),t)})),t.promise}(Ci(r=jn(r,Wr)))}(this._delegate)}onSnapshotsInSync(e){return function(r,e){return function(r,e){const t=new mv(e);return r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return n=yield Xp(r),i=t,Ut(n).io.add(i),void i.next();var n,i})),()=>{t.na(),r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return n=yield Xp(r),i=t,void Ut(n).io.delete(i);var n,i}))}}(Ci(r=jn(r,Wr)),q_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new bt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new J_(this,k1(this._delegate,e))}catch(t){throw $o(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bu(this,UE(this._delegate,e))}catch(t){throw $o(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qo(this,function(r,e){if(r=jn(r,qh),LE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new bt(tt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _s(r,null,(t=e,new zl(ir.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw $o(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(r,e){return function(r,e){const t=new Ji;return r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){const n=yield(i=r,fd(i).then(s=>s.datastore));var i;new Bx(r.asyncQueue,n,e,t).run()})),t.promise}(Ci(r=jn(r,Wr)),t=>e(new K2(r,t)))}(this._delegate,t=>e(new KR(this,t)))}batch(){return Ci(this._delegate),new YR(new HR(this._delegate,e=>X_(this._delegate,e)))}loadBundle(e){return function(r,e){const t=Ci(r=jn(r,Wr)),n=new R1;return function(r,e,t,n){const i=function(s,o){let c;return c="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,m){if(f instanceof Uint8Array)return Ux(f,m);if(f instanceof ArrayBuffer)return Ux(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new C1(f,o);var f}(t,av(e));r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){!function(r,e,t){const n=Ut(r);var i;(i=(0,Xe.Z)(function*(s,o,c){try{const f=yield o.getMetadata();if(yield function(C,M){const L=Ut(C),V=di(M.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",H=>L.Ye.getBundleMetadata(H,M.id)).then(H=>!!H&&H.createTime.compareTo(V)>=0)}(s.localStore,f))return yield o.close(),void c._completeWith((C=f,{taskState:"Success",documentsLoaded:C.totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}));c._updateProgress(Cx(f));const m=new m1(f,s.localStore,o.k);let _=yield o.Ho();for(;_;){const C=yield m.yo(_);C&&c._updateProgress(C),_=yield o.Ho()}const w=yield m.complete();yield ju(s,w.In,void 0),yield function(C,M){const L=Ut(C);return L.persistence.runTransaction("Save bundle","readwrite",V=>L.Ye.saveBundleMetadata(V,M))}(s.localStore,f),c._completeWith(w.progress)}catch(f){zy("SyncEngine",`Loading bundle failed with ${f}`),c._failWith(f)}var C}),function(s,o,c){return i.apply(this,arguments)})(n,e,t).then(()=>{n.sharedClientState.notifyBundleLoaded()})}(yield G_(r),i,n)}))}(t,r._databaseId,e,n),n}(this._delegate,e)}namedQuery(e){return function(r,e){return function(r,e){return r.asyncQueue.enqueue((0,Xe.Z)(function*(){return function(t,n){const i=Ut(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ye.getNamedQuery(s,n))}(yield RE(r),e)}))}(Ci(r=jn(r,Wr)),e).then(t=>t?new _s(r,null,t.query):null)}(this._delegate,e).then(t=>t?new qo(this,t):null)}}class Jx extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new QE(new Uu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bu.forKey(t,this.firestore,null)}}class KR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jx(e)}get(e){const t=Ev(e);return this._delegate.get(t).then(n=>new XE(this._firestore,new At(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const i=Ev(e);return n?(q1("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=Ev(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Ev(e);return this._delegate.delete(t),this}}class YR{constructor(e){this._delegate=e}set(e,t,n){const i=Ev(e);return n?(q1("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=Ev(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Ev(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Gt(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new JE(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Tv.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let s=i.get(t);return s||(s=new Tv(e,new Jx(e),t),i.set(t,s)),s}}Tv.INSTANCES=new WeakMap;class Bu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jx(e)}static forPath(e,t,n){if(e.length%2!=0)throw new bt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bu(t,new Cr(t._delegate,n,new tn(e)))}static forKey(e,t,n){return new Bu(t,new Cr(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new J_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new J_(this.firestore,k1(this._delegate,e))}catch(t){throw $o(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,mn.m9)(e))instanceof Cr&&P1(this._delegate,e)}set(e,t){t=q1("DocumentReference.set",t);try{return t?GR(this._delegate,e,t):GR(this._delegate,e)}catch(n){throw $o(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?$R(this._delegate,e):$R(this._delegate,e,t,...n)}catch(i){throw $o(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(r){return X_(jn(r.firestore,Wr),[new $m(r._key,ci.none())])}(this._delegate)}onSnapshot(...e){const t=QR(e),n=XR(e,i=>new XE(this.firestore,new At(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return qR(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(r){r=jn(r,Cr);const e=jn(r.firestore,Wr),t=Ci(e),n=new bv(e);return function(r,e){const t=new Ji;return r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return(n=(0,Xe.Z)(function*(i,s,o){try{const c=yield function(f,m){const _=Ut(f);return _.persistence.runTransaction("read document","readonly",w=>_.Wn.Rn(w,m))}(i,s);c.isFoundDocument()?o.resolve(c):c.isNoDocument()?o.resolve(null):o.reject(new bt(tt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const f=Gh(c,`Failed to get document '${s} from cache`);o.reject(f)}}),function(i,s,o){return n.apply(this,arguments)})(yield RE(r),e,t);var n})),t.promise}(t,r._key).then(i=>new At(e,n,r._key,i,new Et(null!==i&&i.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(r){r=jn(r,Cr);const e=jn(r.firestore,Wr);return Hx(Ci(e),r._key,{source:"server"}).then(t=>$1(e,r,t))}(this._delegate):function(r){r=jn(r,Cr);const e=jn(r.firestore,Wr);return Hx(Ci(e),r._key).then(t=>$1(e,r,t))}(this._delegate),t.then(n=>new XE(this.firestore,new At(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new Bu(this.firestore,this._delegate.withConverter(e?Tv.getInstance(this.firestore,e):null))}}function $o(r,e,t){return r.message=r.message.replace(e,t),r}function QR(r){for(const e of r)if("object"==typeof e&&!W1(e))return e;return{}}function XR(r,e){var t,n;let i;return i=W1(r[0])?r[0]:W1(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(n=i.complete)||void 0===n?void 0:n.bind(i)}}class XE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Rn(this._delegate,e._delegate)}}class JE extends XE{data(e){const t=this._delegate.data(e);return function(r,e){r||en()}(void 0!==t),t}}class qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jx(e)}where(e,t,n){try{return new qo(this.firestore,Eo(this._delegate,function(r,e,t){const n=e,i=it("where",r);return new $E(i,n,t)}(e,t,n)))}catch(i){throw $o(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new qo(this.firestore,Eo(this._delegate,function(r,e="asc"){const t=e,n=it("orderBy",r);return new WE(n,t)}(e,t)))}catch(n){throw $o(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qo(this.firestore,Eo(this._delegate,function(r){return $_("limit",r),new Y_("limit",r,"F")}(e)))}catch(t){throw $o(t,"limit()","Query.limit()")}}limitToLast(e){try{return new qo(this.firestore,Eo(this._delegate,function(r){return $_("limitToLast",r),new Y_("limitToLast",r,"L")}(e)))}catch(t){throw $o(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qo(this.firestore,Eo(this._delegate,function(...r){return new Q_("startAt",r,!0)}(...e)))}catch(t){throw $o(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qo(this.firestore,Eo(this._delegate,function(...r){return new Q_("startAfter",r,!1)}(...e)))}catch(t){throw $o(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qo(this.firestore,Eo(this._delegate,function(...r){return new FR("endBefore",r,!0)}(...e)))}catch(t){throw $o(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qo(this.firestore,Eo(this._delegate,function(...r){return new FR("endAt",r,!1)}(...e)))}catch(t){throw $o(t,"endAt()","Query.endAt()")}}isEqual(e){return M1(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(r){r=jn(r,_s);const e=jn(r.firestore,Wr),t=Ci(e),n=new bv(e);return function(r,e){const t=new Ji;return r.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return(n=(0,Xe.Z)(function*(i,s,o){try{const c=yield $p(i,s,!0),f=new pE(s,c.zn),m=f.Po(c.documents),_=f.applyChanges(m,!1);o.resolve(_.snapshot)}catch(c){const f=Gh(c,`Failed to execute query '${s} against cache`);o.reject(f)}}),function(i,s,o){return n.apply(this,arguments)})(yield RE(r),e,t);var n})),t.promise}(t,r._query).then(i=>new lt(e,n,r,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(r){r=jn(r,_s);const e=jn(r.firestore,Wr),t=Ci(e),n=new bv(e);return Gx(t,r._query,{source:"server"}).then(i=>new lt(e,n,r,i))}(this._delegate):function(r){r=jn(r,_s);const e=jn(r.firestore,Wr),t=Ci(e),n=new bv(e);return er(r._query),Gx(t,r._query).then(i=>new lt(e,n,r,i))}(this._delegate),t.then(n=>new z1(this.firestore,new lt(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=QR(e),n=XR(e,i=>new z1(this.firestore,new lt(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return qR(this._delegate,t,n)}withConverter(e){return new qo(this.firestore,this._delegate.withConverter(e?Tv.getInstance(this.firestore,e):null))}}class aB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new JE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class z1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new qo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new JE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new aB(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new JE(this._firestore,n))})}isEqual(e){return Rn(this._delegate,e._delegate)}}class J_ extends qo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bu(this.firestore,e):null}doc(e){try{return new Bu(this.firestore,void 0===e?UE(this._delegate):UE(this._delegate,e))}catch(t){throw $o(t,"doc()","CollectionReference.doc()")}}add(e){return function(r,e){const t=jn(r.firestore,Wr),n=UE(r),i=Xx(r.converter,e);return X_(t,[GE(eg(r.firestore),"addDoc",n._key,i,null!==r.converter,{}).toMutation(n._key,ci.exists(!1))]).then(()=>n)}(this._delegate,e).then(t=>new Bu(this.firestore,t))}isEqual(e){return P1(this._delegate,e._delegate)}withConverter(e){return new J_(this.firestore,this._delegate.withConverter(e?Tv.getInstance(this.firestore,e):null))}}function Ev(r){return jn(r,Cr)}class Z1{constructor(...e){this._delegate=new gd(...e)}static documentId(){return new Z1(fs.keyField().canonicalString())}isEqual(e){return(e=(0,mn.m9)(e))instanceof gd&&this._delegate._internalPath.isEqual(e._internalPath)}}class wv{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Qx("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new wv(e)}static delete(){const e=new K_("deleteField");return e._methodName="FieldValue.delete",new wv(e)}static arrayUnion(...e){const t=function(...r){return new OR("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new wv(t)}static arrayRemove(...e){const t=function(...r){return new NR("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new wv(t)}static increment(e){const t=function(r){return new LR("increment",r)}(e);return t._methodName="FieldValue.increment",new wv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uB={Firestore:ZR,GeoPoint:Z_,Timestamp:es,Blob:QE,Transaction:KR,WriteBatch:YR,DocumentReference:Bu,DocumentSnapshot:XE,Query:qo,QueryDocumentSnapshot:JE,QuerySnapshot:z1,CollectionReference:J_,FieldPath:Z1,FieldValue:wv,setLogLevel:function(r){!function(r){Wl.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function(r){(function(r,e){r.INTERNAL.registerComponent(new tp.wA("firestore-compat",t=>((e,t)=>new ZR(e,t,new sB))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},uB)))})(r),r.registerVersion("@firebase/firestore-compat","0.1.11")}(YA.Z);var dB=U(3719),eI=U(4763),hB=U(1733);class fB extends ao.x{constructor(e=1/0,t=1/0,n=hB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(n.push(e),!i&&n.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:n,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=n?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<n.length&&n.splice(0,n.length-s),!i){const o=t.now();let c=0;for(let f=1;f<n.length&&n[f]<=o;f+=2)c=f;c&&n.splice(0,c+1)}}}var pB=U(3174);function JR(r,e,t){var n,i;let s,o=!1;return r&&"object"==typeof r?(s=null!==(n=r.bufferSize)&&void 0!==n?n:1/0,e=null!==(i=r.windowTime)&&void 0!==i?i:1/0,o=!!r.refCount,t=r.scheduler):s=null!=r?r:1/0,(0,pB.B)({connector:()=>new fB(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function eO(r,e){return(0,wg.m)(e)?gr(()=>r,e):gr(()=>r)}var K1=U(5222);U(7713);const nO=new Map,_B={activated:!1,tokenObservers:[]},bB={initialized:!1,enabled:!1};function Rs(r){return nO.get(r)||_B}function rc(r,e){nO.set(r,e)}function nI(){return bB}class CB{constructor(e,t,n,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Xe.Z)(function*(){t.stop();try{t.pending=new mn.BH,yield function(r){return new Promise(e=>{setTimeout(e,r)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new mn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(n){t.retryPolicy(n)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Wo=new mn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function iO(r){if(!Rs(r).activated)throw Wo.create("use-before-activation",{appName:r.name})}function J1(r,e){return ek.apply(this,arguments)}function ek(){return ek=(0,Xe.Z)(function*({url:r,body:e},t){const n={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(n["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:n};let o,c;try{o=yield fetch(r,s)}catch(w){throw Wo.create("fetch-network-error",{originalErrorMessage:w.message})}if(200!==o.status)throw Wo.create("fetch-status-error",{httpStatus:o.status});try{c=yield o.json()}catch(w){throw Wo.create("fetch-parse-error",{originalErrorMessage:w.message})}const f=c.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Wo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const m=1e3*Number(f[1]),_=Date.now();return{token:c.attestationToken,expireTimeMillis:_+m,issuedAtTimeMillis:_}}),ek.apply(this,arguments)}function PB(r,e){const{projectId:t,appId:n,apiKey:i}=r.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${n}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ew="firebase-app-check-store";let sI=null;function oO(){return sI||(sI=new Promise((r,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=n=>{r(n.target.result)},t.onerror=n=>{var i;e(Wo.create("storage-open",{originalErrorMessage:null===(i=n.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=n=>{0===n.oldVersion&&n.target.result.createObjectStore(ew,{keyPath:"compositeKey"})}}catch(t){e(Wo.create("storage-open",{originalErrorMessage:t.message}))}}),sI)}function tk(){return tk=(0,Xe.Z)(function*(r,e){const n=(yield oO()).transaction(ew,"readwrite"),s=n.objectStore(ew).put({compositeKey:r,value:e});return new Promise((o,c)=>{s.onsuccess=f=>{o()},n.onerror=f=>{var m;c(Wo.create("storage-set",{originalErrorMessage:null===(m=f.target.error)||void 0===m?void 0:m.message}))}})}),tk.apply(this,arguments)}const tw=new Ul.Yd("@firebase/app-check");function cO(r,e){return(0,mn.hl)()?function(r,e){return function(r,e){return tk.apply(this,arguments)}(function(r){return`${r.options.appId}-${r.name}`}(r),e)}(r,e).catch(t=>{tw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dO(){return nI().enabled}function hO(){return sk.apply(this,arguments)}function sk(){return sk=(0,Xe.Z)(function*(){const r=nI();if(r.enabled&&r.token)return r.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),sk.apply(this,arguments)}const VB={error:"UNKNOWN_ERROR"};function HB(r){return mn.US.encodeString(JSON.stringify(r),!1)}function oI(r){return ok.apply(this,arguments)}function ok(){return ok=(0,Xe.Z)(function*(r,e=!1){const t=r.app;iO(t);const n=Rs(t);let s,i=n.token;if(!i){const f=yield n.cachedTokenPromise;f&&aI(f)&&(i=f)}if(!e&&i&&aI(i))return{token:i.token};let c,o=!1;if(dO()){n.exchangeTokenPromise||(n.exchangeTokenPromise=J1(PB(t,yield hO()),r.platformLoggerProvider).then(m=>(n.exchangeTokenPromise=void 0,m)),o=!0);const f=yield n.exchangeTokenPromise;return yield cO(t,f),rc(t,Object.assign(Object.assign({},n),{token:f})),{token:f.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().then(f=>(n.exchangeTokenPromise=void 0,f)),o=!0),i=yield n.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?tw.warn(f.message):tw.error(f),s=f}return i?(c={token:i.token},rc(t,Object.assign(Object.assign({},n),{token:i})),yield cO(t,i)):c=$B(s),o&&pO(t,c),c}),ok.apply(this,arguments)}function uk(r,e){const t=Rs(r),n=t.tokenObservers.filter(i=>i.next!==e);0===n.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),rc(r,Object.assign(Object.assign({},t),{tokenObservers:n}))}function fO(r){const{app:e}=r,t=Rs(e);let n=t.tokenRefresher;n||(n=function(r){const{app:e}=r;return new CB((0,Xe.Z)(function*(){let n;if(n=Rs(e).token?yield oI(r,!0):yield oI(r),n.error)throw n.error}),()=>!0,()=>{const t=Rs(e);if(t.token){let n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,t.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(r),rc(e,Object.assign(Object.assign({},t),{tokenRefresher:n}))),!n.isRunning()&&t.isTokenAutoRefreshEnabled&&n.start()}function pO(r,e){const t=Rs(r).tokenObservers;for(const n of t)try{"EXTERNAL"===n.type&&null!=e.error?n.error(e.error):n.next(e)}catch(i){}}function aI(r){return r.expireTimeMillis-Date.now()>0}function $B(r){return{token:HB(VB),error:r}}class qB{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Rs(this.app);for(const t of e)uk(this.app,t.next);return Promise.resolve()}}const EO="app-check-internal";(0,ya._registerComponent)(new tp.wA("app-check",r=>function(r,e){return new qB(r,e)}(r.getProvider("app").getImmediate(),r.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,e,t)=>{r.getProvider(EO).initialize()})),(0,ya._registerComponent)(new tp.wA(EO,r=>function(r){return{getToken:e=>oI(r,e),addTokenListener:e=>function(r,e,t,n){const{app:i}=r,s=Rs(i),o={next:t,error:n,type:e};if(rc(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&aI(s.token)){const c=s.token;Promise.resolve().then(()=>{t({token:c.token}),fO(r)}).catch(()=>{})}s.cachedTokenPromise.then(()=>fO(r))}(r,"INTERNAL",e),removeTokenListener:e=>uk(r.app,e)}}(r.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ya.registerVersion)("@firebase/app-check","0.5.3");class lI{constructor(){return(0,Ar.vb)("app-check")}}"undefined"!=typeof window&&window;var e0=U(7892);const SO=new d.OlP("angularfire2.auth.use-emulator"),CO=new d.OlP("angularfire2.auth.settings"),xO=new d.OlP("angularfire2.auth.tenant-id"),IO=new d.OlP("angularfire2.auth.langugage-code"),AO=new d.OlP("angularfire2.auth.use-device-language"),DO=new d.OlP("angularfire.auth.persistence"),kO=(r,e,t,n,i,s,o,c)=>(0,ls.cc)(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{const f=e.runOutsideAngular(()=>r.auth());if(t&&f.useEmulator(...t),n&&(f.tenantId=n),f.languageCode=i,s&&f.useDeviceLanguage(),o)for(const[m,_]of Object.entries(o))f.settings[m]=_;return c&&f.setPersistence(c),f},[t,n,i,s,o,c]);let zh=(()=>{class r{constructor(t,n,i,s,o,c,f,m,_,w,C,M){const L=new ao.x,V=$t(void 0).pipe((0,eI.Q)(o.outsideAngular),gr(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,4891)))),(0,un.U)(()=>(0,ls.on)(t,s,n)),(0,un.U)(H=>kO(H,s,c,m,_,w,f,C)),JR({bufferSize:1,refCount:!1}));if(Pi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=$t(null);else{V.pipe(bl()).subscribe();const Se=V.pipe(gr(Ne=>Ne.getRedirectResult().then($e=>$e,()=>null)),Ar.iC,JR({bufferSize:1,refCount:!1})),be=V.pipe(gr(Ne=>new qi.y($e=>({unsubscribe:s.runOutsideAngular(()=>Ne.onAuthStateChanged(nt=>$e.next(nt),nt=>$e.error(nt),()=>$e.complete()))})))),je=V.pipe(gr(Ne=>new qi.y($e=>({unsubscribe:s.runOutsideAngular(()=>Ne.onIdTokenChanged(nt=>$e.next(nt),nt=>$e.error(nt),()=>$e.complete()))}))));this.authState=Se.pipe(eO(be),(0,K1.R)(o.outsideAngular),(0,eI.Q)(o.insideAngular)),this.user=Se.pipe(eO(je),(0,K1.R)(o.outsideAngular),(0,eI.Q)(o.insideAngular)),this.idToken=this.user.pipe(gr(Ne=>Ne?(0,qn.D)(Ne.getIdToken()):$t(null))),this.idTokenResult=this.user.pipe(gr(Ne=>Ne?(0,qn.D)(Ne.getIdTokenResult()):$t(null))),this.credential=(0,dB.T)(Se,L,this.authState.pipe(ai(Ne=>!Ne))).pipe((0,un.U)(Ne=>(null==Ne?void 0:Ne.user)?Ne:null),(0,K1.R)(o.outsideAngular),(0,eI.Q)(o.insideAngular))}return(0,ls.pX)(this,V,s,{spy:{apply:(H,Se,be)=>{(H.startsWith("signIn")||H.startsWith("createUser"))&&be.then(je=>L.next(je))}}})}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(ls.Dh),d.LFG(ls.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ar.HU),d.LFG(SO,8),d.LFG(CO,8),d.LFG(xO,8),d.LFG(IO,8),d.LFG(AO,8),d.LFG(DO,8),d.LFG(lI,8))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),dV=(()=>{class r{constructor(){e0.Z.registerVersion("angularfire",Ar.q4.full,"auth-compat")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({providers:[zh]}),r})();function PO(r,e){return function(r,e=py.z){return new qi.y(t=>{let n;return null!=e?e.schedule(()=>{n=r.onSnapshot({includeMetadataChanges:!0},t)}):n=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=n&&n()}})}(r,e)}function fk(r,e){return PO(r,e).pipe((0,un.U)(t=>({payload:t,type:"query"})))}function cI(r,e){return fk(r,e).pipe(qs(void 0),pb(),(0,un.U)(([t,n])=>{const i=n.payload.docChanges(),s=i.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(n.payload.metadata)&&n.payload.docs.forEach((o,c)=>{const f=i.find(_=>_.doc.ref.isEqual(o.ref)),m=null==t?void 0:t.payload.docs.find(_=>_.ref.isEqual(o.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(o.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:o}})}),s}))}function MO(r,e,t){return cI(r,t).pipe(lo((n,i)=>function(r,e,t){return e.forEach(n=>{t.indexOf(n.type)>-1&&(r=function(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return pk(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pk(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pk(r,e.oldIndex,1)}return r}(r,n))}),r}(n,i.map(s=>s.payload),e),[]),function(r,e=ko.y){return r=null!=r?r:Jw,(0,vi.e)((t,n)=>{let i,s=!0;t.subscribe(new Sr.Q(n,o=>{const c=e(o);(s||!r(i,c))&&(s=!1,i=c,n.next(o))}))})}(),(0,un.U)(n=>n.map(i=>({type:i.type,payload:i}))))}function pk(r,e,t,...n){const i=r.slice();return i.splice(e,t,...n),i}function RO(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class OO{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=cI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,un.U)(n=>n.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(qs(void 0),pb(),ai(([n,i])=>i.length>0||!n),(0,un.U)(([n,i])=>i),Ar.iC)}auditTrail(e){return this.stateChanges(e).pipe(lo((t,n)=>[...t,...n],[]))}snapshotChanges(e){const t=RO(e);return MO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return fk(this.query,this.afs.schedulers.outsideAngular).pipe((0,un.U)(t=>t.payload.docs.map(n=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data())),Ar.iC)}get(e){return(0,qn.D)(this.query.get(e)).pipe(Ar.iC)}add(e){return this.ref.add(e)}doc(e){return new NO(this.ref.doc(e),this.afs)}}class NO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:i,query:s}=jO(n,t);return new OO(i,s,this.afs)}snapshotChanges(){return function(r,e){return PO(r,e).pipe(qs(void 0),pb(),(0,un.U)(([t,n])=>n.exists?(null==t?void 0:t.exists)?{payload:n,type:"modified"}:{payload:n,type:"added"}:{payload:n,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,un.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,qn.D)(this.ref.get(e)).pipe(Ar.iC)}}class mV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cI(this.query,this.afs.schedulers.outsideAngular).pipe((0,un.U)(t=>t.filter(n=>e.indexOf(n.type)>-1)),ai(t=>t.length>0),Ar.iC):cI(this.query,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}auditTrail(e){return this.stateChanges(e).pipe(lo((t,n)=>[...t,...n],[]))}snapshotChanges(e){const t=RO(e);return MO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return fk(this.query,this.afs.schedulers.outsideAngular).pipe((0,un.U)(n=>n.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ar.iC)}get(e){return(0,qn.D)(this.query.get(e)).pipe(Ar.iC)}}const LO=new d.OlP("angularfire2.enableFirestorePersistence"),FO=new d.OlP("angularfire2.firestore.persistenceSettings"),vV=new d.OlP("angularfire2.firestore.settings"),yV=new d.OlP("angularfire2.firestore.use-emulator");function jO(r,e=(t=>t)){return{query:e(r),ref:r}}let gk=(()=>{class r{constructor(t,n,i,s,o,c,f,m,_,w,C,M,L,V,H,Se,be){this.schedulers=f;const je=(0,ls.on)(t,c,n),Ne=_;w&&kO(je,c,C,L,V,H,M,Se),[this.firestore,this.persistenceEnabled$]=(0,ls.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const $e=c.runOutsideAngular(()=>je.firestore());if(s&&$e.settings(s),Ne&&$e.useEmulator(...Ne),i&&!Pi(o)){const nt=()=>{try{return(0,qn.D)($e.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(pt){return"undefined"!=typeof console&&console.warn(pt),$t(!1)}};return[$e,c.runOutsideAngular(nt)]}return[$e,$t(!1)]},[s,Ne,i])}collection(t,n){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=jO(i,n),c=this.schedulers.ngZone.run(()=>s);return new OO(c,o,this)}collectionGroup(t,n){const i=n||(o=>o),s=this.firestore.collectionGroup(t);return new mV(i(s),this)}doc(t){let n;n="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>n);return new NO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(ls.Dh),d.LFG(ls.xv,8),d.LFG(LO,8),d.LFG(vV,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ar.HU),d.LFG(FO,8),d.LFG(yV,8),d.LFG(zh,8),d.LFG(SO,8),d.LFG(CO,8),d.LFG(xO,8),d.LFG(IO,8),d.LFG(AO,8),d.LFG(DO,8),d.LFG(lI,8))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),_V=(()=>{class r{constructor(){e0.Z.registerVersion("angularfire",Ar.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:LO,useValue:!0},{provide:FO,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({providers:[gk]}),r})();const UO="firebasestorage.googleapis.com",BO="storageBucket";class xi extends mn.ZR{constructor(e,t){super(mk(e),`Firebase Storage: ${t} (${mk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xi.prototype)}_codeEquals(e){return mk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function mk(r){return"storage/"+r}function vk(){return new xi("unknown","An unknown error occurred, please check the error payload for server response.")}function VO(){return new xi("canceled","User canceled the upload/download.")}function HO(){return new xi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function t0(r){return new xi("invalid-argument",r)}function GO(){return new xi("app-deleted","The Firebase app was deleted.")}function $O(r){return new xi("invalid-root-operation","The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nw(r,e){return new xi("invalid-format","String does not match format '"+r+"': "+e)}function rw(r){throw new xi("internal-error","Internal error: "+r)}class wo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=wo.makeFromUrl(e,t)}catch(i){return new wo(e,"")}if(""===n.path)return n;throw function(r){return new xi("invalid-default-bucket","Invalid default bucket '"+r+"'.")}(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function m(Ne){Ne.path_=decodeURIComponent(Ne.path)}const w=t.replace(/[.]/g,"\\."),je=[{regex:c,indices:{bucket:1,path:3},postModify:function(Ne){"/"===Ne.path.charAt(Ne.path.length-1)&&(Ne.path_=Ne.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${w}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp(`^https?://${t===UO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:m}];for(let Ne=0;Ne<je.length;Ne++){const $e=je[Ne],nt=$e.regex.exec(e);if(nt){let ct=nt[$e.indices.path];ct||(ct=""),n=new wo(nt[$e.indices.bucket],ct),$e.postModify(n);break}}if(null==n)throw function(r){return new xi("invalid-url","Invalid URL '"+r+"'.")}(e);return n}}class OV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dI(r){return"string"==typeof r||r instanceof String}function qO(r){return yk()&&r instanceof Blob}function yk(){return"undefined"!=typeof Blob}function _k(r,e,t,n){if(n<e)throw t0(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw t0(`Invalid value for '${r}'. Expected ${t} or less.`)}function Zh(r,e,t){let n=e;return null==t&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function WO(r){const e=encodeURIComponent;let t="?";for(const n in r)r.hasOwnProperty(n)&&(t=t+(e(n)+"=")+e(r[n])+"&");return t=t.slice(0,-1),t}var ng=(()=>(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"}(ng||(ng={})),ng))();class BV{constructor(e,t,n,i,s,o,c,f,m,_,w){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,M)=>{this.resolve_=C,this.reject_=M,this.start_()})}start_(){const t=(n,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());!function(r){return void 0!==r}(f)?s():s(f)}catch(f){o(f)}else if(null!==c){const f=vk();f.serverResponse=c.getErrorText(),o(this.errorCallback_?this.errorCallback_(c,f):f)}else o(i.canceled?this.appDelete_?GO():VO():new xi("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new hI(!1,null,!0)):this.backoffId_=function(r,e,t){let n=1,i=null,s=null,o=!1,c=0;function f(){return 2===c}let m=!1;function _(...H){m||(m=!0,e.apply(null,H))}function w(H){i=setTimeout(()=>{i=null,r(M,f())},H)}function C(){s&&clearTimeout(s)}function M(H,...Se){if(m)return void C();if(H)return C(),void _.call(null,H,...Se);if(f()||o)return C(),void _.call(null,H,...Se);let je;n<64&&(n*=2),1===c?(c=2,je=0):je=1e3*(n+Math.random()),w(je)}let L=!1;function V(H){L||(L=!0,C(),!m&&(null!==i?(H||(c=2),clearTimeout(i),w(0)):H||(c=1)))}return w(0),s=setTimeout(()=>{o=!0,V(!0)},t),V}((n,i)=>{if(i)return void n(!1,new hI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===ng.NO_ERROR,f=s.getStatus();if(!c||this.isRetryStatusCode_(f)){const _=s.getErrorCode()===ng.ABORT;return void n(!1,new hI(!1,null,_))}const m=-1!==this.successCodes_.indexOf(f);n(!0,new hI(m,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class hI{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function zV(...r){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}if(yk())return new Blob(r);throw new xi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const lu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bk{constructor(e,t){this.data=e,this.contentType=t||null}}function Tk(r,e){switch(r){case lu.RAW:return new bk(zO(e));case lu.BASE64:case lu.BASE64URL:return new bk(ZO(r,e));case lu.DATA_URL:return new bk(function(r){const e=new KO(r);return e.base64?ZO(lu.BASE64,e.rest):function(r){let e;try{e=decodeURIComponent(r)}catch(t){throw nw(lu.DATA_URL,"Malformed data URL.")}return zO(e)}(e.rest)}(e),function(r){return new KO(r).contentType}(e))}throw vk()}function zO(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);n<=127?e.push(n):n<=2047?e.push(192|n>>6,128|63&n):55296==(64512&n)?t<r.length-1&&56320==(64512&r.charCodeAt(t+1))?(n=65536|(1023&n)<<10|1023&r.charCodeAt(++t),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)):e.push(239,191,189):56320==(64512&n)?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(e)}function ZO(r,e){switch(r){case lu.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw nw(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case lu.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw nw(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(r){return atob(r)}(e)}catch(i){throw nw(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class KO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw nw(lu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(r,e){return r.length>=e.length&&r.substring(r.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class md{constructor(e,t){let n=0,i="";qO(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(qO(this.data_)){const i=function(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}(this.data_,e,t);return null===i?null:new md(i)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new md(n,!0)}}static getBlob(...e){if(yk()){const t=e.map(n=>n instanceof md?n.data_:n);return new md(zV.apply(null,t))}{const t=e.map(o=>dI(o)?Tk(lu.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const i=new Uint8Array(n);let s=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new md(i,!0)}}uploadData(){return this.data_}}function Ek(r){let e;try{e=JSON.parse(r)}catch(t){return null}return function(r){return"object"==typeof r&&!Array.isArray(r)}(e)?e:null}function YO(r){const e=r.lastIndexOf("/",r.length-2);return-1===e?r:r.slice(e+1)}function n3(r,e){return e}class zo{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||n3}}let fI=null;function iw(){if(fI)return fI;const r=[];r.push(new zo("bucket")),r.push(new zo("generation")),r.push(new zo("metageneration")),r.push(new zo("name","fullPath",!0));const t=new zo("name");t.xform=function(s,o){return function(r){return!dI(r)||r.length<2?r:YO(r)}(o)},r.push(t);const i=new zo("size");return i.xform=function(s,o){return void 0!==o?Number(o):o},r.push(i),r.push(new zo("timeCreated")),r.push(new zo("updated")),r.push(new zo("md5Hash",null,!0)),r.push(new zo("cacheControl",null,!0)),r.push(new zo("contentDisposition",null,!0)),r.push(new zo("contentEncoding",null,!0)),r.push(new zo("contentLanguage",null,!0)),r.push(new zo("contentType",null,!0)),r.push(new zo("metadata","customMetadata",!0)),fI=r,fI}function QO(r,e,t){const n=Ek(e);return null===n?null:function(r,e,t){const n={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];n[o.local]=o.xform(n,e[o.server])}return function(r,e){Object.defineProperty(r,"ref",{get:function(){const s=new wo(r.bucket,r.fullPath);return e._makeStorageReference(s)}})}(n,r),n}(r,n,t)}function wk(r,e){const t={},n=e.length;for(let i=0;i<n;i++){const s=e[i];s.writable&&(t[s.server]=r[s.local])}return JSON.stringify(t)}const XO="prefixes";class vd{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yd(r){if(!r)throw vk()}function pI(r,e){return function(n,i){const s=QO(r,i,e);return yd(null!==s),s}}function n0(r){return function(t,n){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new xi("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new xi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(r){return new xi("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===t.getStatus()?function(r){return new xi("unauthorized","User does not have permission to access '"+r+"'.")}(r.path):n,i.serverResponse=n.serverResponse,i}}function sw(r){const e=n0(r);return function(n,i){let s=e(n,i);return 404===n.getStatus()&&(s=function(r){return new xi("object-not-found","Object '"+r+"' does not exist.")}(r.path)),s.serverResponse=i.serverResponse,s}}function eN(r,e,t){const i=Zh(e.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,c=new vd(i,"GET",pI(r,t),o);return c.errorHandler=sw(e),c}function d3(r,e,t,n,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),n&&(s.pageToken=n),i&&(s.maxResults=i);const c=Zh(e.bucketOnlyServerUrl(),r.host,r._protocol),m=r.maxOperationRetryTime,_=new vd(c,"GET",function(r,e){return function(n,i){const s=function(r,e,t){const n=Ek(t);return null===n?null:function(r,e,t){const n={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[XO])for(const i of t[XO]){const s=i.replace(/\/$/,""),o=r._makeStorageReference(new wo(e,s));n.prefixes.push(o)}if(t.items)for(const i of t.items){const s=r._makeStorageReference(new wo(e,i.name));n.items.push(s)}return n}(r,e,n)}(r,e,i);return yd(null!==s),s}}(r,e.bucket),m);return _.urlParams=s,_.errorHandler=n0(e),_}function nN(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=function(r,e){return e&&e.type()||"application/octet-stream"}(0,e)),n}class gI{constructor(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null}}function Sk(r,e){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch(i){yd(!1)}return yd(!!t&&-1!==(e||["active"]).indexOf(t)),t}const _3={STATE_CHANGED:"state_changed"},Zo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ck(r){switch(r){case"running":case"pausing":case"canceling":return Zo.RUNNING;case"paused":return Zo.PAUSED;case"success":return Zo.SUCCESS;case"canceled":return Zo.CANCELED;default:return Zo.ERROR}}class b3{constructor(e,t,n){if(function(r){return"function"==typeof r}(e)||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function r0(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}class E3 extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ng.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ng.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ng.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw rw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw rw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ic(){return new E3}class oN{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=iw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(r,e,t,n,i){const s=e.bucketOnlyServerUrl(),o=nN(e,n,i),c={name:o.fullPath},f=Zh(s,r.host,r._protocol),_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},w=wk(o,t),L=new vd(f,"POST",function(V){let H;Sk(V);try{H=V.getResponseHeader("X-Goog-Upload-URL")}catch(Se){yd(!1)}return yd(dI(H)),H},r.maxUploadRetryTime);return L.urlParams=c,L.headers=_,L.body=w,L.errorHandler=n0(e),L}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,ic,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const i=function(r,e,t,n){const f=new vd(t,"POST",function(m){const _=Sk(m,["active","final"]);let w=null;try{w=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch(M){yd(!1)}w||yd(!1);const C=Number(w);return yd(!isNaN(C)),new gI(C,n.size(),"final"===_)},r.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=n0(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ic,t,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new gI(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function(r,e,t,n,i,s,o,c){const f=new gI(0,0);if(o?(f.current=o.current,f.total=o.total):(f.current=0,f.total=n.size()),n.size()!==f.total)throw new xi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const m=f.total-f.current;let _=m;i>0&&(_=Math.min(_,i));const w=f.current,L={"X-Goog-Upload-Command":_===m?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},V=n.slice(w,w+_);if(null===V)throw HO();const je=new vd(t,"POST",function(Ne,$e){const nt=Sk(Ne,["active","final"]),pt=f.current+_,ct=n.size();let ut;return ut="final"===nt?pI(e,s)(Ne,$e):null,new gI(pt,ct,"final"===nt,ut)},e.maxUploadRetryTime);return je.headers=L,je.body=V.uploadData(),je.progressCallback=c||null,je.errorHandler=n0(r),je}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const c=this._ref.storage._makeRequest(o,ic,i,s);this._request=c,c.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=eN(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,ic,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=function(r,e,t,n,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},f=function(){let je="";for(let Ne=0;Ne<2;Ne++)je+=Math.random().toString().slice(2);return je}();o["Content-Type"]="multipart/related; boundary="+f;const m=nN(e,n,i),_=wk(m,t),M=md.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_+"\r\n--"+f+"\r\nContent-Type: "+m.contentType+"\r\n\r\n",n,"\r\n--"+f+"--");if(null===M)throw HO();const L={name:m.fullPath},V=Zh(s,r.host,r._protocol),Se=r.maxUploadRetryTime,be=new vd(V,"POST",pI(r,t),Se);return be.urlParams=L,be.headers=o,be.body=M.uploadData(),be.errorHandler=n0(e),be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,ic,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=VO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ck(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,i){const s=new b3(t||void 0,n||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ck(this._state)){case Zo.SUCCESS:r0(this._resolve.bind(null,this.snapshot))();break;case Zo.CANCELED:case Zo.ERROR:r0(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ck(this._state)){case Zo.RUNNING:case Zo.PAUSED:e.next&&r0(e.next.bind(e,this.snapshot))();break;case Zo.SUCCESS:e.complete&&r0(e.complete.bind(e))();break;default:e.error&&r0(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Sv{constructor(e,t){this._service=e,this._location=t instanceof wo?t:wo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sv(e,t)}get root(){const e=new wo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YO(this._location.path)}get storage(){return this._service}get parent(){const e=function(r){if(0===r.length)return null;const e=r.lastIndexOf("/");return-1===e?"":r.slice(0,e)}(this._location.path);if(null===e)return null;const t=new wo(this._location.bucket,e);return new Sv(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw $O(e)}}function uN(r,e,t){return xk.apply(this,arguments)}function xk(){return xk=(0,Xe.Z)(function*(r,e,t){const i=yield lN(r,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield uN(r,e,i.nextPageToken))}),xk.apply(this,arguments)}function lN(r,e){null!=e&&"number"==typeof e.maxResults&&_k("options.maxResults",1,1e3,e.maxResults);const t=e||{},n=d3(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(n,ic)}function O3(r){r._throwIfRoot("getDownloadURL");const e=function(r,e,t){const i=Zh(e.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,c=new vd(i,"GET",function(r,e){return function(n,i){const s=QO(r,i,e);return yd(null!==s),function(r,e,t,n){const i=Ek(e);if(null===i||!dI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(m=>{const w=r.fullPath;return Zh("/b/"+o(r.bucket)+"/o/"+o(w),t,n)+WO({alt:"media",token:m})})[0]}(s,i,r.host,r._protocol)}}(r,t),o);return c.errorHandler=sw(e),c}(r.storage,r._location,iw());return r.storage.makeRequestWithTokens(e,ic).then(t=>{if(null===t)throw new xi("no-download-url","The given file does not have any download URLs.");return t})}function cN(r,e){const t=function(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return 0===r.length?t:r+"/"+t}(r._location.path,e),n=new wo(r._location.bucket,t);return new Sv(r.storage,n)}function dN(r,e){if(r instanceof Ik){const t=r;if(null==t._bucket)throw new xi("no-default-bucket","No default bucket found. Did you set the '"+BO+"' property when initializing the app?");const n=new Sv(t,t._bucket);return null!=e?dN(n,e):n}return void 0!==e?cN(r,e):r}function j3(r,e){if(e&&function(r){return/^[A-Za-z]+:\/\//.test(r)}(e)){if(r instanceof Ik)return function(r,e){return new Sv(r,e)}(r,e);throw t0("To use ref(service, url), the first argument must be a Storage instance.")}return dN(r,e)}function hN(r,e){const t=null==e?void 0:e[BO];return null==t?null:wo.makeFromBucketSpec(t,r)}class Ik{constructor(e,t,n,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=UO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?wo.makeFromBucketSpec(i,this._host):hN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?wo.makeFromBucketSpec(this._url,e):hN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_k("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_k("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Xe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const n=yield t.getToken();if(null!==n)return n.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Xe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sv(this,e)}_makeRequest(e,t,n,i){if(this._deleted)return new OV(GO());{const s=function(r,e,t,n,i,s){const o=WO(r.urlParams),c=r.url+o,f=Object.assign({},r.headers);return function(r,e){e&&(r["X-Firebase-GMPID"]=e)}(f,e),function(r,e){null!==e&&e.length>0&&(r.Authorization="Firebase "+e)}(f,t),function(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(f,s),function(r,e){null!==e&&(r["X-Firebase-AppCheck"]=e)}(f,n),new BV(c,r.method,f,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i)}(e,this._appId,n,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var n=this;return(0,Xe.Z)(function*(){const[i,s]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,i,s).getPromise()})()}}const fN="@firebase/storage";function mN(r,e){return j3(r=(0,mn.m9)(r),e)}(0,ya._registerComponent)(new tp.wA("storage",function(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new Ik(t,n,i,e,ya.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,ya.registerVersion)(fN,"0.9.1",""),(0,ya.registerVersion)(fN,"0.9.1","esm2017");class mI{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class vN{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new mI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(n=>{if(e)return e(new mI(n,this,this._ref))},t)}on(e,t,n,i){let s;return t&&(s="function"==typeof t?o=>t(new mI(o,this,this._ref)):{next:t.next?o=>t.next(new mI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,n||void 0,i||void 0)}}class yN{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Kh(e,this._service))}get items(){return this._delegate.items.map(e=>new Kh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Kh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(r,e){return cN(r,e)}(this._delegate,e);return new Kh(t,this.storage)}get root(){return new Kh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Kh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new vN(function(r,e,t){return function(r,e,t){return r._throwIfRoot("uploadBytesResumable"),new oN(r,new md(e),t)}(r=(0,mn.m9)(r),e,t)}(this._delegate,e,t),this)}putString(e,t=lu.RAW,n){this._throwIfRoot("putString");const i=Tk(t,e),s=Object.assign({},n);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new vN(new oN(this._delegate,new md(i.data,!0),s),this)}listAll(){return function(r){return function(r){const e={prefixes:[],items:[]};return uN(r,e).then(()=>e)}(r=(0,mn.m9)(r))}(this._delegate).then(e=>new yN(e,this.storage))}list(e){return function(r,e){return lN(r=(0,mn.m9)(r),e)}(this._delegate,e||void 0).then(t=>new yN(t,this.storage))}getMetadata(){return function(r){return function(r){r._throwIfRoot("getMetadata");const e=eN(r.storage,r._location,iw());return r.storage.makeRequestWithTokens(e,ic)}(r=(0,mn.m9)(r))}(this._delegate)}updateMetadata(e){return function(r,e){return function(r,e){r._throwIfRoot("updateMetadata");const t=function(r,e,t,n){const s=Zh(e.fullServerUrl(),r.host,r._protocol),c=wk(t,n),m=r.maxOperationRetryTime,_=new vd(s,"PATCH",pI(r,n),m);return _.headers={"Content-Type":"application/json; charset=utf-8"},_.body=c,_.errorHandler=sw(e),_}(r.storage,r._location,e,iw());return r.storage.makeRequestWithTokens(t,ic)}(r=(0,mn.m9)(r),e)}(this._delegate,e)}getDownloadURL(){return function(r){return O3(r=(0,mn.m9)(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(r){return function(r){r._throwIfRoot("deleteObject");const e=function(r,e){const n=Zh(e.fullServerUrl(),r.host,r._protocol),c=new vd(n,"DELETE",function(f,m){},r.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=sw(e),c}(r.storage,r._location);return r.storage.makeRequestWithTokens(e,ic)}(r=(0,mn.m9)(r))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw $O(e)}}class _N{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(bN(e))throw t0("ref() expected a child path but got a URL, use refFromURL instead.");return new Kh(mN(this._delegate,e),this)}refFromURL(e){if(!bN(e))throw t0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{wo.makeFromUrl(e,this._delegate.host)}catch(t){throw t0("refFromUrl() expected a valid full URL but got an invalid one.")}return new Kh(mN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function(r,e,t,n={}){!function(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken="string"==typeof i?i:(0,mn.Sg)(i,r.app.options.projectId))}(r,e,t,n)}(this._delegate,e,t,n)}}function bN(r){return/^[A-Za-z]+:\/\//.test(r)}function e4(r,{instanceIdentifier:e}){const t=r.getProvider("app-compat").getImmediate(),n=r.getProvider("storage").getImmediate({identifier:e});return new _N(t,n)}function TN(r){const e=function(r){return new qi.y(e=>{const t=o=>e.next(o);t(r.snapshot);const s=r.on("state_changed",t);return r.then(o=>{t(o),e.complete()},o=>{t(r.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function(r,e=py.z){return(0,vi.e)((t,n)=>{let i=null,s=null,o=null;const c=()=>{if(i){i.unsubscribe(),i=null;const m=s;s=null,n.next(m)}};function f(){const m=o+r,_=e.now();if(_<m)return i=this.schedule(void 0,m-_),void n.add(i);c()}t.subscribe(new Sr.Q(n,m=>{s=m,o=e.now(),i||(i=e.schedule(f,r),n.add(i))},()=>{c(),n.complete()},void 0,()=>{s=i=null}))})}(0))}(r);return{task:r,then:r.then.bind(r),catch:r.catch.bind(r),pause:r.pause.bind(r),cancel:r.cancel.bind(r),resume:r.resume.bind(r),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,un.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function vI(r){return{getDownloadURL:()=>$t(void 0).pipe(Ar.fc,gr(()=>r.getDownloadURL()),Ar.iC),getMetadata:()=>$t(void 0).pipe(Ar.fc,gr(()=>r.getMetadata()),Ar.iC),delete:()=>(0,qn.D)(r.delete()),child:e=>vI(r.child(e)),updateMetadata:e=>(0,qn.D)(r.updateMetadata(e)),put:(e,t)=>TN(r.put(e,t)),putString:(e,t,n)=>TN(r.putString(e,t,n)),list:e=>(0,qn.D)(r.list(e)),listAll:()=>(0,qn.D)(r.listAll())}}!function(r){const e={TaskState:Zo,TaskEvent:_3,StringFormat:lu,Storage:_N,Reference:Kh};r.INTERNAL.registerComponent(new tp.wA("storage-compat",e4,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.1.9")}(YA.Z);const r4=new d.OlP("angularfire2.storageBucket"),i4=new d.OlP("angularfire2.storage.maxUploadRetryTime"),s4=new d.OlP("angularfire2.storage.maxOperationRetryTime"),o4=new d.OlP("angularfire2.storage.use-emulator");let Ak=(()=>{class r{constructor(t,n,i,s,o,c,f,m,_,w){const C=(0,ls.on)(t,o,n);this.storage=(0,ls.cc)(`${C.name}.storage.${i}`,"AngularFireStorage",C.name,()=>{const M=o.runOutsideAngular(()=>C.storage(i||void 0)),L=_;return L&&M.useEmulator(...L),f&&M.setMaxUploadRetryTime(f),m&&M.setMaxOperationRetryTime(m),M},[f,m])}ref(t){return vI(this.storage.ref(t))}refFromURL(t){return vI(this.storage.refFromURL(t))}upload(t,n,i){return vI(this.storage.ref(t)).put(n,i)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(ls.Dh),d.LFG(ls.xv,8),d.LFG(r4,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ar.HU),d.LFG(i4,8),d.LFG(s4,8),d.LFG(o4,8),d.LFG(lI,8))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),a4=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({}),r})(),u4=(()=>{class r{constructor(){e0.Z.registerVersion("angularfire",Ar.q4.full,"gcs-compat")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({providers:[Ak],imports:[a4]}),r})(),ow=(()=>{class r{constructor(t,n,i,s){this.db=t,this.auth=n,this.storage=i,this.router=s,this.pageClips=[],this.pendingRequest=!1,this.clipsCollection=t.collection("clips")}createClip(t){var n=this;return(0,Xe.Z)(function*(){return yield n.clipsCollection.add(t)})()}getUserClips(t){return Gs([this.auth.user,t]).pipe(gr(n=>{const[i,s]=n;return i?this.clipsCollection.ref.where("uid","==",i.uid).orderBy("timestamp","1"===s?"desc":"asc").get():$t([])}),(0,un.U)(n=>n.docs))}updateClip(t,n){return this.clipsCollection.doc(t).update({title:n})}deleteClip(t){var n=this;return(0,Xe.Z)(function*(){const i=yield n.storage.ref(`clips/${t.fileName}`),s=n.storage.ref(`screenshots/${t.screenshotFileName}`);yield i.delete(),yield s.delete(),yield n.clipsCollection.doc(t.docID).delete()})()}getClips(){var t=this;return(0,Xe.Z)(function*(){if(t.pendingRequest)return;t.pendingRequest=!0;let n=t.clipsCollection.ref.orderBy("timestamp","desc").limit(12);const{length:i}=t.pageClips;if(i){const o=t.pageClips[i-1].docID,c=yield t.clipsCollection.doc(o).get().toPromise();n=n.startAfter(c)}(yield n.get()).forEach(o=>{t.pageClips.push(Object.assign({docID:o.id},o.data()))}),t.pendingRequest=!1})()}resolve(t,n){return this.clipsCollection.doc(t.params.id).get().pipe((0,un.U)(i=>i.data()||(this.router.navigate(["/"]),null)))}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(gk),d.LFG(zh),d.LFG(Ak),d.LFG(bi))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),EN=(()=>{class r{constructor(t){this.datePipe=t}transform(t){if(!t)return"";const n=t.toDate();return this.datePipe.transform(n,"mediumDate")}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Yu,16))},r.\u0275pipe=d.Yjl({name:"fbTimestamp",type:r,pure:!0}),r})();const l4=function(r){return["/","clips",r]};function c4(r,e){if(1&r&&(d.TgZ(0,"a",2),d._UZ(1,"img",3),d.TgZ(2,"div",4),d.TgZ(3,"div",5),d.TgZ(4,"div",6),d.O4$(),d.TgZ(5,"svg",7),d._UZ(6,"path",8),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.kcU(),d.TgZ(7,"div",9),d.TgZ(8,"h2",10),d._uU(9),d.qZA(),d.TgZ(10,"p",11),d._uU(11),d.TgZ(12,"span",12),d._uU(13),d.ALo(14,"fbTimestamp"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&r){const t=e.$implicit;d.Q6J("routerLink",d.VKq(7,l4,t.docID)),d.xp6(1),d.Q6J("src",t.screenshotUrl,d.LSH),d.xp6(8),d.hij(" ",t.title," "),d.xp6(2),d.hij(" ",t.displayName," \xb7 "),d.xp6(2),d.hij(" ",d.lcZ(14,5,t.timestamp)," ")}}let wN=(()=>{class r{constructor(t){this.clipService=t,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:n,offsetHeight:i}=document.documentElement,{innerHeight:s}=window;Math.round(n)+s===i&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){window.removeEventListener("scroll",this.handleScroll)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(ow))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[d._Bn([Yu])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(t,n){1&t&&(d.TgZ(0,"div",0),d.YNc(1,c4,15,9,"a",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngForOf",n.clipService.pageClips))},directives:[ia,v],pipes:[EN],styles:[""]}),r})(),d4=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(t,n){1&t&&(d.TgZ(0,"section",0),d.TgZ(1,"video",1),d._UZ(2,"source",2),d.qZA(),d._UZ(3,"div",3),d.TgZ(4,"div",4),d._UZ(5,"div",5),d._UZ(6,"div",5),d._UZ(7,"div",5),d._UZ(8,"div",5),d._UZ(9,"div",5),d.qZA(),d.TgZ(10,"div",6),d.TgZ(11,"div",7),d.TgZ(12,"h1",8),d._uU(13,"Clip it and ship it!"),d.qZA(),d.TgZ(14,"p"),d._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(16,"section",9),d.TgZ(17,"h1",10),d._uU(18,"Latest"),d.qZA(),d._UZ(19,"app-clips-list"),d.qZA())},directives:[wN],styles:[""]}),r})();var h4=U(397),Ce=U.n(h4),f4=U(2449),Dt=U.n(f4);function sc(){return sc=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},sc.apply(this,arguments)}function Sn(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function aw(r,e){return(aw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(r,e)}function Ot(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,aw(r,e)}var p4=U(1879),g4=U.n(p4),m4=U(6444),Dn=U.n(m4),v4=U(5729),SN=U.n(v4),y4=U(6605),CN=U.n(y4);function _4(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function yI(r,e,t){return(yI=_4()?Reflect.construct:function(i,s,o){var c=[null];c.push.apply(c,s);var m=new(Function.bind.apply(i,c));return o&&aw(m,o.prototype),m}).apply(null,arguments)}var T4=U(9916),xN=U.n(T4),IN="http://example.com";const _I=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Ce().location&&Ce().location.href||"");var n="function"==typeof Ce().URL,i=/^\/\//.test(e),s=!Ce().location&&!/\/\//i.test(e);if(n?e=new(Ce().URL)(e,Ce().location||IN):/\/\//i.test(e)||(e=xN().buildAbsoluteURL(Ce().location&&Ce().location.href||"",e)),n){var o=new URL(t,e);return s?o.href.slice(IN.length):i?o.href.slice(o.protocol.length):o.href}return xN().buildAbsoluteURL(e,t)};var Dk=function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var s=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(s,1),s>-1},e.trigger=function(n){var i=this.listeners[n];if(i)if(2===arguments.length)for(var s=i.length,o=0;o<s;++o)i[o].call(this,arguments[1]);else for(var c=Array.prototype.slice.call(arguments,1),f=i.length,m=0;m<f;++m)i[m].apply(this,c)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},r}();function AN(r){for(var e=function(e){return Ce().atob?Ce().atob(e):Buffer.from(e,"base64").toString("binary")}(r),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}var Vk,S4=function(r){function e(){var n;return(n=r.call(this)||this).buffer="",n}return Ot(e,r),e.prototype.push=function(i){var s;for(this.buffer+=i,s=this.buffer.indexOf("\n");s>-1;s=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},e}(Dk),C4=String.fromCharCode(9),kk=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},oc=function(e){for(var s,t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=t.length;i--;)""!==t[i]&&((s=/([^=]*)=(.*)/.exec(t[i]).slice(1))[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),n[s[0]]=s[1]);return n},I4=function(r){function e(){var n;return(n=r.call(this)||this).customParsers=[],n.tagMappers=[],n}Ot(e,r);var t=e.prototype;return t.push=function(i){var o,c,s=this;if(0!==(i=i.trim()).length){if("#"!==i[0])return void this.trigger("data",{type:"uri",uri:i});this.tagMappers.reduce(function(m,_){var w=_(i);return w===i?m:m.concat([w])},[i]).forEach(function(m){for(var _=0;_<s.customParsers.length;_++)if(s.customParsers[_].call(s,m))return;if(0===m.indexOf("#EXT"))if(m=m.replace("\r",""),o=/^#EXTM3U/.exec(m))s.trigger("data",{type:"tag",tagType:"m3u"});else{if(o=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(m))return c={type:"tag",tagType:"inf"},o[1]&&(c.duration=parseFloat(o[1])),o[2]&&(c.title=o[2]),void s.trigger("data",c);if(o=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(m))return c={type:"tag",tagType:"targetduration"},o[1]&&(c.duration=parseInt(o[1],10)),void s.trigger("data",c);if(o=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(m))return c={type:"tag",tagType:"version"},o[1]&&(c.version=parseInt(o[1],10)),void s.trigger("data",c);if(o=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(m))return c={type:"tag",tagType:"media-sequence"},o[1]&&(c.number=parseInt(o[1],10)),void s.trigger("data",c);if(o=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(m))return c={type:"tag",tagType:"discontinuity-sequence"},o[1]&&(c.number=parseInt(o[1],10)),void s.trigger("data",c);if(o=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(m))return c={type:"tag",tagType:"playlist-type"},o[1]&&(c.playlistType=o[1]),void s.trigger("data",c);if(o=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(m))return c=sc(kk(o[1]),{type:"tag",tagType:"byterange"}),void s.trigger("data",c);if(o=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(m))return c={type:"tag",tagType:"allow-cache"},o[1]&&(c.allowed=!/NO/.test(o[1])),void s.trigger("data",c);if(o=/^#EXT-X-MAP:?(.*)$/.exec(m)){if(c={type:"tag",tagType:"map"},o[1]){var w=oc(o[1]);w.URI&&(c.uri=w.URI),w.BYTERANGE&&(c.byterange=kk(w.BYTERANGE))}s.trigger("data",c)}else if(o=/^#EXT-X-STREAM-INF:?(.*)$/.exec(m)){if(c={type:"tag",tagType:"stream-inf"},o[1]){if(c.attributes=oc(o[1]),c.attributes.RESOLUTION){var C=c.attributes.RESOLUTION.split("x"),M={};C[0]&&(M.width=parseInt(C[0],10)),C[1]&&(M.height=parseInt(C[1],10)),c.attributes.RESOLUTION=M}c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))}s.trigger("data",c)}else{if(o=/^#EXT-X-MEDIA:?(.*)$/.exec(m))return c={type:"tag",tagType:"media"},o[1]&&(c.attributes=oc(o[1])),void s.trigger("data",c);if(o=/^#EXT-X-ENDLIST/.exec(m))s.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(o=/^#EXT-X-DISCONTINUITY/.exec(m)))return(o=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(m))?(c={type:"tag",tagType:"program-date-time"},o[1]&&(c.dateTimeString=o[1],c.dateTimeObject=new Date(o[1])),void s.trigger("data",c)):(o=/^#EXT-X-KEY:?(.*)$/.exec(m))?(c={type:"tag",tagType:"key"},o[1]&&(c.attributes=oc(o[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void s.trigger("data",c)):(o=/^#EXT-X-START:?(.*)$/.exec(m))?(c={type:"tag",tagType:"start"},o[1]&&(c.attributes=oc(o[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void s.trigger("data",c)):(o=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(m))?((c={type:"tag",tagType:"cue-out-cont"}).data=o[1]?o[1]:"",void s.trigger("data",c)):(o=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(m))?((c={type:"tag",tagType:"cue-out"}).data=o[1]?o[1]:"",void s.trigger("data",c)):(o=/^#EXT-X-CUE-IN:?(.*)?$/.exec(m))?((c={type:"tag",tagType:"cue-in"}).data=o[1]?o[1]:"",void s.trigger("data",c)):(o=/^#EXT-X-SKIP:(.*)$/.exec(m))&&o[1]?((c={type:"tag",tagType:"skip"}).attributes=oc(o[1]),c.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(c.attributes["SKIPPED-SEGMENTS"]=parseInt(c.attributes["SKIPPED-SEGMENTS"],10)),c.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(c.attributes["RECENTLY-REMOVED-DATERANGES"]=c.attributes["RECENTLY-REMOVED-DATERANGES"].split(C4)),void s.trigger("data",c)):(o=/^#EXT-X-PART:(.*)$/.exec(m))&&o[1]?((c={type:"tag",tagType:"part"}).attributes=oc(o[1]),["DURATION"].forEach(function(L){c.attributes.hasOwnProperty(L)&&(c.attributes[L]=parseFloat(c.attributes[L]))}),["INDEPENDENT","GAP"].forEach(function(L){c.attributes.hasOwnProperty(L)&&(c.attributes[L]=/YES/.test(c.attributes[L]))}),c.attributes.hasOwnProperty("BYTERANGE")&&(c.attributes.byterange=kk(c.attributes.BYTERANGE)),void s.trigger("data",c)):(o=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(m))&&o[1]?((c={type:"tag",tagType:"server-control"}).attributes=oc(o[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(L){c.attributes.hasOwnProperty(L)&&(c.attributes[L]=parseFloat(c.attributes[L]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(L){c.attributes.hasOwnProperty(L)&&(c.attributes[L]=/YES/.test(c.attributes[L]))}),void s.trigger("data",c)):(o=/^#EXT-X-PART-INF:(.*)$/.exec(m))&&o[1]?((c={type:"tag",tagType:"part-inf"}).attributes=oc(o[1]),["PART-TARGET"].forEach(function(L){c.attributes.hasOwnProperty(L)&&(c.attributes[L]=parseFloat(c.attributes[L]))}),void s.trigger("data",c)):(o=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(m))&&o[1]?((c={type:"tag",tagType:"preload-hint"}).attributes=oc(o[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(L){if(c.attributes.hasOwnProperty(L)){c.attributes[L]=parseInt(c.attributes[L],10);var V="BYTERANGE-LENGTH"===L?"length":"offset";c.attributes.byterange=c.attributes.byterange||{},c.attributes.byterange[V]=c.attributes[L],delete c.attributes[L]}}),void s.trigger("data",c)):(o=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(m))&&o[1]?((c={type:"tag",tagType:"rendition-report"}).attributes=oc(o[1]),["LAST-MSN","LAST-PART"].forEach(function(L){c.attributes.hasOwnProperty(L)&&(c.attributes[L]=parseInt(c.attributes[L],10))}),void s.trigger("data",c)):void s.trigger("data",{type:"tag",data:m.slice(4)});s.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else s.trigger("data",{type:"comment",text:m.slice(1)})})}},t.addParser=function(i){var s=this,o=i.expression,c=i.customType,f=i.dataParser,m=i.segment;"function"!=typeof f&&(f=function(w){return w}),this.customParsers.push(function(_){if(o.exec(_))return s.trigger("data",{type:"custom",data:f(_),customType:c,segment:m}),!0})},t.addTagMapper=function(i){var s=i.expression,o=i.map;this.tagMappers.push(function(m){return s.test(m)?o(m):m})},e}(Dk),s0=function(e){var t={};return Object.keys(e).forEach(function(n){t[function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})}(n)]=e[n]}),t},Pk=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var s="#EXT-X-SERVER-CONTROL",o="holdBack",c="partHoldBack",f=n&&3*n,m=i&&2*i;n&&!t.hasOwnProperty(o)&&(t[o]=f,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+f+")."})),f&&t[o]<f&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+f+")"}),t[o]=f),i&&!t.hasOwnProperty(c)&&(t[c]=3*i,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[c]+")."})),i&&t[c]<m&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+t[c]+") to partTargetDuration * 2 ("+m+")."}),t[c]=m)}},D4=function(r){function e(){var n;(n=r.call(this)||this).lineStream=new S4,n.parseStream=new I4,n.lineStream.pipe(n.parseStream);var c,f,i=Sn(n),s=[],o={},m=!1,_=function(){},w={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},M=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var L=0,V=0;return n.on("end",function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&c&&(o.map=c),!o.key&&f&&(o.key=f),!o.timeline&&"number"==typeof M&&(o.timeline=M),n.manifest.preloadSegment=o)}),n.parseStream.on("data",function(H){var Se,be;({tag:function(){({version:function(){H.version&&(this.manifest.version=H.version)},"allow-cache":function(){this.manifest.allowCache=H.allowed,"allowed"in H||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var $e={};"length"in H&&(o.byterange=$e,$e.length=H.length,"offset"in H||(H.offset=L)),"offset"in H&&(o.byterange=$e,$e.offset=H.offset),L=$e.offset+$e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),H.duration>0&&(o.duration=H.duration),0===H.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(H.attributes)if("NONE"!==H.attributes.METHOD)if(H.attributes.URI){if("com.apple.streamingkeydelivery"===H.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:H.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===H.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(H.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===H.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==H.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):H.attributes.KEYID&&"0x"===H.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:H.attributes.KEYFORMAT,keyId:H.attributes.KEYID.substring(2)},pssh:AN(H.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));H.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),f={method:H.attributes.METHOD||"AES-128",uri:H.attributes.URI},void 0!==H.attributes.IV&&(f.iv=H.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else f=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(H.number)?this.manifest.mediaSequence=H.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+H.number})},"discontinuity-sequence":function(){isFinite(H.number)?(this.manifest.discontinuitySequence=H.number,M=H.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+H.number})},"playlist-type":function(){/VOD|EVENT/.test(H.playlistType)?this.manifest.playlistType=H.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+H.playlist})},map:function(){c={},H.uri&&(c.uri=H.uri),H.byterange&&(c.byterange=H.byterange),f&&(c.key=f)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||w,H.attributes?(o.attributes||(o.attributes={}),sc(o.attributes,H.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||w,H.attributes&&H.attributes.TYPE&&H.attributes["GROUP-ID"]&&H.attributes.NAME){var $e=this.manifest.mediaGroups[H.attributes.TYPE];$e[H.attributes["GROUP-ID"]]=$e[H.attributes["GROUP-ID"]]||{},Se=$e[H.attributes["GROUP-ID"]],(be={default:/yes/i.test(H.attributes.DEFAULT)}).autoselect=!!be.default||/yes/i.test(H.attributes.AUTOSELECT),H.attributes.LANGUAGE&&(be.language=H.attributes.LANGUAGE),H.attributes.URI&&(be.uri=H.attributes.URI),H.attributes["INSTREAM-ID"]&&(be.instreamId=H.attributes["INSTREAM-ID"]),H.attributes.CHARACTERISTICS&&(be.characteristics=H.attributes.CHARACTERISTICS),H.attributes.FORCED&&(be.forced=/yes/i.test(H.attributes.FORCED)),Se[H.attributes.NAME]=be}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){M+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=H.dateTimeString,this.manifest.dateTimeObject=H.dateTimeObject),o.dateTimeString=H.dateTimeString,o.dateTimeObject=H.dateTimeObject},targetduration:function(){!isFinite(H.duration)||H.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+H.duration}):(this.manifest.targetDuration=H.duration,Pk.call(this,this.manifest))},start:function(){H.attributes&&!isNaN(H.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:H.attributes["TIME-OFFSET"],precise:H.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=H.data},"cue-out-cont":function(){o.cueOutCont=H.data},"cue-in":function(){o.cueIn=H.data},skip:function(){this.manifest.skip=s0(H.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",H.attributes,["SKIPPED-SEGMENTS"])},part:function(){var $e=this;m=!0;var nt=this.manifest.segments.length,pt=s0(H.attributes);o.parts=o.parts||[],o.parts.push(pt),pt.byterange&&(pt.byterange.hasOwnProperty("offset")||(pt.byterange.offset=V),V=pt.byterange.offset+pt.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(o.parts.length-1)+" for segment #"+nt,H.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(ut,Mt){ut.hasOwnProperty("lastPart")||$e.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+Mt+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var $e=this.manifest.serverControl=s0(H.attributes);$e.hasOwnProperty("canBlockReload")||($e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Pk.call(this,this.manifest),$e.canSkipDateranges&&!$e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var $e=this.manifest.segments.length,nt=s0(H.attributes),pt=nt.type&&"PART"===nt.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(nt),nt.byterange&&(nt.byterange.hasOwnProperty("offset")||(nt.byterange.offset=pt?V:0,pt&&(V=nt.byterange.offset+nt.byterange.length)));var ct=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+ct+" for segment #"+$e,H.attributes,["TYPE","URI"]),nt.type)for(var ut=0;ut<o.preloadHints.length-1;ut++){var Mt=o.preloadHints[ut];!Mt.type||Mt.type===nt.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+ct+" for segment #"+$e+" has the same TYPE "+nt.type+" as preload hint #"+ut})}},"rendition-report":function(){var $e=s0(H.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push($e);var nt=this.manifest.renditionReports.length-1,pt=["LAST-MSN","URI"];m&&pt.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+nt,H.attributes,pt)},"part-inf":function(){this.manifest.partInf=s0(H.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",H.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Pk.call(this,this.manifest)}}[H.tagType]||_).call(i)},uri:function(){o.uri=H.uri,s.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),f&&(o.key=f),o.timeline=M,c&&(o.map=c),V=0,o={}},comment:function(){},custom:function(){H.segment?(o.custom=o.custom||{},o.custom[H.customType]=H.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[H.customType]=H.data)}})[H.type].call(i)}),n}Ot(e,r);var t=e.prototype;return t.warnOnMissingAttributes_=function(i,s,o){var c=[];o.forEach(function(f){s.hasOwnProperty(f)||c.push(f)}),c.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+c.join(", ")})},t.push=function(i){this.lineStream.push(i)},t.end=function(){this.lineStream.push("\n"),this.trigger("end")},t.addParser=function(i){this.parseStream.addParser(i)},t.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e}(Dk),rg={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},k4=["video","audio","text"],DN=["Video","Audio","Text"],Mk=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,i){return"avc1."+("00"+Number(n).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},_d=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach(function(i){var s;i=i.trim(),k4.forEach(function(o){var c=rg[o].exec(i.toLowerCase());if(c&&!(c.length<=1)){s=o;var f=i.substring(0,c[1].length),m=i.replace(f,"");n.push({type:f,details:m,mediaType:o})}}),s||n.push({type:i,details:"",mediaType:"unknown"})}),n},kN=function(e){return void 0===e&&(e=""),rg.audio.test(e.trim().toLowerCase())},uw=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(s){return Mk(s.trim())}),n="video";1===t.length&&kN(t[0])?n="audio":1===t.length&&function(e){return void 0===e&&(e=""),rg.text.test(e.trim().toLowerCase())}(t[0])&&(n="application");var i="mp4";return t.every(function(s){return rg.mp4.test(s)})?i="mp4":t.every(function(s){return rg.webm.test(s)})?i="webm":t.every(function(s){return rg.ogg.test(s)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},bI=function(e){return void 0===e&&(e=""),Ce().MediaSource&&Ce().MediaSource.isTypeSupported&&Ce().MediaSource.isTypeSupported(uw(e))||!1},Rk=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<DN.length;n++)if(rg["muxer"+DN[n]].test(t))return!0;return!1})},PN="mp4a.40.2",N4=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,L4=/^application\/dash\+xml/i,MN=function(e){return N4.test(e)?"hls":L4.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},F4=U(3874),RN=function(e){return!!e&&"object"==typeof e},Ko=function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(i,s){return"object"!=typeof s||Object.keys(s).forEach(function(o){i[o]=Array.isArray(i[o])&&Array.isArray(s[o])?i[o].concat(s[o]):RN(i[o])&&RN(s[o])?r(i[o],s[o]):s[o]}),i},{})},TI=function(e){return e.reduce(function(t,n){return t.concat(n)},[])},ON=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},lw=function(e){var t=e.baseUrl,i=e.source,s=void 0===i?"":i,o=e.range,c=void 0===o?"":o,f=e.indexRange,m=void 0===f?"":f,_={uri:s,resolvedUri:_I((void 0===t?"":t)||"",s)};if(c||m){var C=(c||m).split("-"),M=parseInt(C[0],10),L=parseInt(C[1],10);_.byterange={length:L-M+1,offset:M}}return _},NN=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},H4={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,s=e.sourceDuration,o=e.periodDuration,c=NN(e.endNumber),f=t/i;return"number"==typeof c?{start:0,end:c}:"number"==typeof o?{start:0,end:o/f}:{start:0,end:s/f}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,c=e.duration,f=e.start,m=void 0===f?0:f,_=e.minimumUpdatePeriod,w=void 0===_?0:_,C=e.timeShiftBufferDepth,M=void 0===C?1/0:C,L=NN(e.endNumber),V=(t+n)/1e3,H=i+m,je=Math.ceil((V+w-H)*o/c),Ne=Math.floor((V-H-M)*o/c),$e=Math.floor((V-H)*o/c);return{start:Math.max(0,Ne),end:"number"==typeof L?L:Math.min(je,$e)}}},Ok=function(e){var t=e.type,n=e.duration,i=e.timescale,s=void 0===i?1:i,o=e.periodDuration,c=e.sourceDuration,f=H4[t](e),w=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(f.start,f.end).map(function(e){return function(t,n){var i=e.duration,s=e.timescale,f=e.startNumber;return{number:(void 0===f?1:f)+t,duration:i/(void 0===s?1:s),timeline:e.periodIndex,time:n*i}}}(e));if("static"===t){var C=w.length-1;w[C].duration=("number"==typeof o?o:c)-n/s*C}return w},LN=function(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,s=e.sourceDuration,o=e.indexRange,c=void 0===o?"":o,f=e.duration;if(!t)throw new Error("NO_BASE_URL");var m=lw({baseUrl:t,source:i.sourceURL,range:i.range}),_=lw({baseUrl:t,source:t,indexRange:c});if(_.map=m,f){var w=Ok(e);w.length&&(_.duration=w[0].duration,_.timeline=w[0].timeline)}else s&&(_.duration=s,_.timeline=0);return _.number=0,[_]},Nk=function(e,t,n){for(var i=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,o=e.timeline||0,c=e.sidx.byterange,f=c.offset+c.length,m=t.timescale,_=t.references.filter(function(nt){return 1!==nt.referenceType}),w=[],C=e.endList?"static":"dynamic",M=f+t.firstOffset,L=0;L<_.length;L++){var V=t.references[L],H=V.referencedSize,$e=LN({baseUrl:n,timescale:m,timeline:o,periodIndex:o,duration:V.subsegmentDuration,sourceDuration:s,indexRange:M+"-"+(M+H-1),type:C})[0];i&&($e.map=i),w.push($e),M+=H}return e.segments=w,e},EI=function(e){return e&&e.uri+"-"+function(e){return e.offset+"-"+(e.offset+e.length-1)}(e.byterange)},FN=function(e){return function(e){return Object.keys(e).map(function(t){return e[t]})}(e.reduce(function(n,i){var o,s=i.attributes.id+(i.attributes.lang||"");return n[s]?(i.segments[0]&&(i.segments[0].discontinuity=!0),(o=n[s].segments).push.apply(o,i.segments),i.attributes.contentProtection&&(n[s].attributes.contentProtection=i.attributes.contentProtection)):n[s]=i,n},{})).map(function(n){return n.discontinuityStarts=function(e,t){return e.reduce(function(n,i,s){return i.discontinuity&&n.push(s),n},[])}(n.segments),n})},Lk=function(e,t){var n=EI(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&Nk(e,i,e.sidx.resolvedUri),e},$4=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=Lk(e[n],t);return e},Y4=function(e){var t,n=e.attributes,i=e.segments,s=e.sidx,o={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===n.type,timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(o.contentProtection=n.contentProtection),s&&(o.sidx=s),o},Q4=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},X4=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},J4=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},tH=function(e,t,n){var c=e.timescale,m=e.start,w=e.minimumUpdatePeriod;return Math.ceil((((e.NOW+e.clientOffset)/1e3+(void 0===w?0:w)-(e.availabilityStartTime+(void 0===m?0:m)))*(void 0===c?1:c)-t)/n)},jN=function(e,t){for(var n=e.type,i=e.minimumUpdatePeriod,s=void 0===i?0:i,o=e.media,c=void 0===o?"":o,f=e.sourceDuration,m=e.timescale,_=void 0===m?1:m,w=e.startNumber,C=void 0===w?1:w,M=e.periodIndex,L=[],V=-1,H=0;H<t.length;H++){var Se=t[H],be=Se.d,je=Se.r||0,Ne=Se.t||0;V<0&&(V=Ne),Ne&&Ne>V&&(V=Ne);var $e=void 0;if(je<0){var nt=H+1;$e=nt===t.length?"dynamic"===n&&s>0&&c.indexOf("$Number$")>0?tH(e,V,be):(f*_-V)/be:(t[nt].t-V)/be}else $e=je+1;for(var pt=C+L.length+$e,ct=C+L.length;ct<pt;)L.push({number:ct,duration:be/_,time:V,timeline:M}),V+=be,ct++}return L},nH=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,UN=function(e,t){return e.replace(nH,function(e){return function(t,n,i,s){if("$$"===t)return"$";if(void 0===e[n])return t;var o=""+e[n];return"RepresentationID"===n||(s=i?parseInt(s,10):1,o.length>=s)?o:""+new Array(s-o.length+1).join("0")+o}}(t))},sH=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,s=void 0===i?{sourceURL:"",range:""}:i,o=lw({baseUrl:e.baseUrl,source:UN(s.sourceURL,n),range:s.range}),c=function(e,t){return e.duration||t?e.duration?Ok(e):jN(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t);return c.map(function(f){n.Number=f.number,n.Time=f.time;var m=UN(e.media||"",n),C=e.periodStart+(f.time-(e.presentationTimeOffset||0))/(e.timescale||1);return{uri:m,timeline:f.timeline,duration:f.duration,resolvedUri:_I(e.baseUrl||"",m),map:o,number:f.number,presentationTime:C}})},aH=function(e,t){var n=e.duration,i=e.segmentUrls,s=void 0===i?[]:i,o=e.periodStart;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var f,c=s.map(function(_){return function(e,t){var n=e.baseUrl,i=e.initialization,s=void 0===i?{}:i,o=lw({baseUrl:n,source:s.sourceURL,range:s.range}),c=lw({baseUrl:n,source:t.media,range:t.mediaRange});return c.map=o,c}(e,_)});return n&&(f=Ok(e)),t&&(f=jN(e,t)),f.map(function(_,w){if(c[w]){var C=c[w],M=e.timescale||1,L=e.presentationTimeOffset||0;return C.timeline=_.timeline,C.duration=_.duration,C.number=_.number,C.presentationTime=o+(_.time-L)/M,C}}).filter(function(_){return _})},uH=function(e){var i,s,t=e.attributes,n=e.segmentInfo;n.template?(s=sH,i=Ko(t,n.template)):n.base?(s=LN,i=Ko(t,n.base)):n.list&&(s=aH,i=Ko(t,n.list));var o={attributes:t};if(!s)return o;var c=s(i,n.segmentTimeline);if(i.duration){var _=i.timescale;i.duration=i.duration/(void 0===_?1:_)}else i.duration=c.length?c.reduce(function(C,M){return Math.max(C,Math.ceil(M.duration))},0):0;return o.attributes=i,o.segments=c,n.base&&i.indexRange&&(o.sidx=c[0],o.segments=[]),o},ji=function(e,t){return ON(e.childNodes).filter(function(n){return n.tagName===t})},Fk=function(e){return e.textContent.trim()},a0=function(e){var f=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!f)return 0;var m=f.slice(1),w=m[1],C=m[2],M=m[3],L=m[4],V=m[5];return 31536e3*parseFloat(m[0]||0)+2592e3*parseFloat(w||0)+86400*parseFloat(C||0)+3600*parseFloat(M||0)+60*parseFloat(L||0)+parseFloat(V||0)},BN={mediaPresentationDuration:function(e){return a0(e)},availabilityStartTime:function(e){return function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)}(e)/1e3},minimumUpdatePeriod:function(e){return a0(e)},suggestedPresentationDelay:function(e){return a0(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return a0(e)},start:function(e){return a0(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?a0(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},So=function(e){return e&&e.attributes?ON(e.attributes).reduce(function(t,n){return t[n.name]=(BN[n.name]||BN.DEFAULT)(n.value),t},{}):{}},dH={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},wI=function(e,t){return t.length?TI(e.map(function(n){return t.map(function(i){return _I(n,Fk(i))})})):e},jk=function(e){var t=ji(e,"SegmentTemplate")[0],n=ji(e,"SegmentList")[0],i=n&&ji(n,"SegmentURL").map(function(C){return Ko({tag:"SegmentURL"},So(C))}),s=ji(e,"SegmentBase")[0],o=n||t,c=o&&ji(o,"SegmentTimeline")[0],f=n||s||t,m=f&&ji(f,"Initialization")[0],_=t&&So(t);_&&m?_.initialization=m&&So(m):_&&_.initialization&&(_.initialization={sourceURL:_.initialization});var w={template:_,segmentTimeline:c&&ji(c,"S").map(function(C){return So(C)}),list:n&&Ko(So(n),{segmentUrls:i,initialization:So(m)}),base:s&&Ko(So(s),{initialization:So(m)})};return Object.keys(w).forEach(function(C){w[C]||delete w[C]}),w},mH=function(e,t){return function(n,i){var s=wI(t,ji(n.node,"BaseURL")),o=parseInt(n.attributes.id,10),c=Ce().isNaN(o)?i:o,f=Ko(e,{periodIndex:c,periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(f.periodDuration=n.attributes.duration);var m=ji(n.node,"AdaptationSet"),_=jk(n.node);return TI(m.map(function(e,t,n){return function(i){var s=So(i),o=wI(t,ji(i,"BaseURL")),c=ji(i,"Role")[0],f={role:So(c)},m=Ko(e,s,f),_=ji(i,"Accessibility")[0],w=function(e){return"urn:scte:dash:cc:cea-608:2015"===e.schemeIdUri?("string"!=typeof e.value?[]:e.value.split(";")).map(function(i){var s,o;if(o=i,/^CC\d=/.test(i)){var c=i.split("=");s=c[0],o=c[1]}else/^CC\d$/.test(i)&&(s=i);return{channel:s,language:o}}):"urn:scte:dash:cc:cea-708:2015"===e.schemeIdUri?("string"!=typeof e.value?[]:e.value.split(";")).map(function(i){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var o=i.split("="),f=o[1],m=void 0===f?"":f;s.channel=o[0],s.language=i,m.split(",").forEach(function(_){var w=_.split(":"),C=w[0],M=w[1];"lang"===C?s.language=M:"er"===C?s.easyReader=Number(M):"war"===C?s.aspectRatio=Number(M):"3D"===C&&(s["3D"]=Number(M))})}else s.language=i;return s.channel&&(s.channel="SERVICE"+s.channel),s}):void 0}(So(_));w&&(m=Ko(m,{captionServices:w}));var C=ji(i,"Label")[0];if(C&&C.childNodes.length){var M=C.childNodes[0].nodeValue.trim();m=Ko(m,{label:M})}var L=function(e){return e.reduce(function(t,n){var i=So(n),s=dH[i.schemeIdUri];if(s){t[s]={attributes:i};var o=ji(n,"cenc:pssh")[0];if(o){var c=Fk(o),f=c&&AN(c);t[s].pssh=f}}return t},{})}(ji(i,"ContentProtection"));Object.keys(L).length&&(m=Ko(m,{contentProtection:L}));var V=jk(i),H=ji(i,"Representation"),Se=Ko(n,V);return TI(H.map(function(e,t,n){return function(i){var s=ji(i,"BaseURL"),o=wI(t,s),c=Ko(e,So(i)),f=jk(i);return o.map(function(m){return{segmentInfo:Ko(n,f),attributes:Ko(c,{baseUrl:m})}})}}(m,o,Se)))}}(f,s,_)))}},VN=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var n,i,t=new F4.DOMParser;try{i=(n=t.parseFromString(e,"application/xml"))&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(s){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i},bH=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,s=void 0===i?"":i,o=n.NOW,c=void 0===o?Date.now():o,f=n.clientOffset,m=void 0===f?0:f,_=ji(e,"Period");if(!_.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var w=ji(e,"Location"),C=So(e),M=wI([s],ji(e,"BaseURL"));C.type=C.type||"static",C.sourceDuration=C.mediaPresentationDuration||0,C.NOW=c,C.clientOffset=m,w.length&&(C.locations=w.map(Fk));var L=[];return _.forEach(function(V,H){var Se=So(V),be=L[H-1];Se.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes;return"number"==typeof t.start?t.start:n&&"number"==typeof n.start&&"number"==typeof n.duration?n.start+n.duration:n||"static"!==e.mpdType?null:0}({attributes:Se,priorPeriodAttributes:be?be.attributes:null,mpdType:C.type}),L.push({node:V,attributes:Se})}),{locations:C.locations,representationInfo:TI(L.map(mH(C,M)))}}(VN(e),t),i=function(e){return e.map(uH)}(n.representationInfo);return function(e,t,n){var i;if(void 0===n&&(n={}),!e.length)return{};var s=e[0].attributes,o=s.sourceDuration,c=s.type,f=s.suggestedPresentationDelay,m=s.minimumUpdatePeriod,_=FN(e.filter(Q4)).map(Y4),w=FN(e.filter(X4)),C=e.filter(J4),M=e.map(function(H){return H.attributes.captionServices}).filter(Boolean),L={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:o,playlists:$4(_,n)};return m>=0&&(L.minimumUpdatePeriod=1e3*m),t&&(L.locations=t),"dynamic"===c&&(L.suggestedPresentationDelay=f),w.length&&(L.mediaGroups.AUDIO.audio=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var i,s=e.reduce(function(c,f){var m=f.attributes.role&&f.attributes.role.value||"",_=f.attributes.lang||"",w=f.attributes.label||"main";_&&!f.attributes.label&&(w=f.attributes.lang+(m?" ("+m+")":"")),c[w]||(c[w]={language:_,autoselect:!0,default:"main"===m,playlists:[],uri:""});var M=Lk(function(e,t){var n,i=e.attributes,s=e.segments,o=e.sidx,c={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===i.type,timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:s,mediaSequence:s.length?s[0].number:1};return i.contentProtection&&(c.contentProtection=i.contentProtection),o&&(c.sidx=o),t&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c}(f,n),t);return c[w].playlists.push(M),void 0===i&&"main"===m&&((i=f).default=!0),c},{});return i||(s[Object.keys(s)[0]].default=!0),s}(w,n,0===L.playlists.length)),C.length&&(L.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce(function(n,i){var s=i.attributes.lang||"text";return n[s]||(n[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),n[s].playlists.push(Lk(function(e){var t,n=e.attributes,i=e.segments;void 0===i&&(i=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var s=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(s.CODECS=n.codecs),{attributes:s,uri:"",endList:"static"===n.type,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1}}(i),t)),n},{})}(C,n)),M.length&&(L.mediaGroups["CLOSED-CAPTIONS"].cc=function(e){return e.reduce(function(t,n){return n&&n.forEach(function(i){var o=i.language;t[o]={autoselect:!1,default:!1,instreamId:i.channel,language:o},i.hasOwnProperty("aspectRatio")&&(t[o].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(t[o].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(t[o]["3D"]=i["3D"])}),t},{})}(M)),L}(i,n.locations,t.sidxMapping)},EH=U(2307),wH=U.n(EH),an=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!function(e){return ArrayBuffer.isView(e)}(e)&&!(e instanceof ArrayBuffer)&&(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Qs=Ce().BigInt||Number,Uk=[Qs("0x1"),Qs("0x100"),Qs("0x10000"),Qs("0x1000000"),Qs("0x100000000"),Qs("0x10000000000"),Qs("0x1000000000000"),Qs("0x100000000000000"),Qs("0x10000000000000000")],AH=(function(){var r=new Uint16Array([65484]);new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}(),function(e,t){var n=void 0===t?{}:t,i=n.signed,s=void 0!==i&&i,o=n.le,c=void 0!==o&&o;e=an(e);var f=c?"reduce":"reduceRight",_=(e[f]?e[f]:Array.prototype[f]).call(e,function(C,M,L){var V=c?L:Math.abs(L+1-e.length);return C+Qs(M)*Uk[V]},Qs(0));if(s){var w=Uk[e.length]/Qs(2)-Qs(1);(_=Qs(_))>w&&(_-=w,_-=w,_-=Qs(2))}return Number(_)}),$N=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},ri=function(e,t,n){var i=void 0===n?{}:n,s=i.offset,o=void 0===s?0:s,c=i.mask,f=void 0===c?[]:c;return e=an(e),(t=an(t)).length&&e.length-o>=t.length&&(t.every?t.every:Array.prototype.every).call(t,function(_,w){return _===(f[w]?f[w]&e[o+w]:e[o+w])})},MH=an([73,68,51]),cw=function r(e,t){return void 0===t&&(t=0),(e=an(e)).length-t<10||!ri(e,MH,{offset:t})?t:(t+=function(e,t){void 0===t&&(t=0);var i=(e=an(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10}(e,t),r(e,t))},Bk=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?$N(e):e}),Hk=function(e){e=an(e);for(var t=[],n=0;e.length>n;){var i=e[n],s=0,o=0,c=e[++o];for(o++;128&c;)s=(127&c)<<7,c=e[o],o++;s+=127&c;for(var f=0;f<Vk.length;f++){var m=Vk[f];if(i===m.id){t.push((0,m.parser)(e.subarray(o,o+s)));break}}n+=s+o}return t};Vk=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,an(e));try{return decodeURIComponent(escape(t))}catch(n){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=Hk(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:Hk(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Ia=function r(e,t,n){void 0===n&&(n=!1),t=function(e){return Array.isArray(e)?e.map(function(t){return Bk(t)}):[Bk(e)]}(t),e=an(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var o=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,c=e.subarray(s+4,s+8);if(0===o)break;var f=s+o;if(f>e.length){if(n)break;f=e.length}var m=e.subarray(s+8,f);ri(c,t[0])&&(1===t.length?i.push(m):i.push.apply(i,r(m,t.slice(1),n))),s=f}return i},zr={EBML:an([26,69,223,163]),DocType:an([66,130]),Segment:an([24,83,128,103]),SegmentInfo:an([21,73,169,102]),Tracks:an([22,84,174,107]),Track:an([174]),TrackNumber:an([215]),DefaultDuration:an([35,227,131]),TrackEntry:an([174]),TrackType:an([131]),FlagDefault:an([136]),CodecID:an([134]),CodecPrivate:an([99,162]),VideoTrack:an([224]),AudioTrack:an([225]),Cluster:an([31,67,182,117]),Timestamp:an([231]),TimestampScale:an([42,215,177]),BlockGroup:an([160]),BlockDuration:an([155]),Block:an([161]),SimpleBlock:an([163])},Gk=[128,64,32,16,8,4,2,1],Cv=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var s=function(e){for(var t=1,n=0;n<Gk.length&&!(e&Gk[n]);n++)t++;return t}(e[t]),o=e.subarray(t,t+s);return n&&((o=Array.prototype.slice.call(e,t,t+s))[0]^=Gk[s-1]),{length:s,value:AH(o,{signed:i}),bytes:o}},qN=function r(e){return"string"==typeof e?e.match(/.{1,2}/g).map(function(t){return r(t)}):"number"==typeof e?function(e,t){var i=(void 0===t?{}:t).le,s=void 0!==i&&i;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var o=function(e){return Math.ceil(function(e){return e.toString(2).length}(e)/8)}(e=Qs(e)),c=new Uint8Array(new ArrayBuffer(o)),f=0;f<o;f++){var m=s?f:Math.abs(f+1-c.length);c[m]=Number(e/Uk[f]&Qs(255)),e<0&&(c[m]=Math.abs(~c[m]),c[m]-=0===f?1:2)}return c}(e):e},UH=function r(e,t,n){if(n>=t.length)return t.length;var i=Cv(t,n,!1);if(ri(e.bytes,i.bytes))return n;var s=Cv(t,n+i.length);return r(e,t,n+s.length+s.value+i.length)},hi=function r(e,t){t=function(e){return Array.isArray(e)?e.map(function(t){return qN(t)}):[qN(e)]}(t),e=an(e);var n=[];if(!t.length)return n;for(var i=0;i<e.length;){var s=Cv(e,i,!1),o=Cv(e,i+s.length),c=i+s.length+o.length;127===o.value&&(o.value=UH(s,e,c),o.value!==e.length&&(o.value-=c));var m=e.subarray(c,c+o.value>e.length?e.length:c+o.value);ri(t[0],s.bytes)&&(1===t.length?n.push(m):n=n.concat(r(m,t.slice(1)))),i+=s.length+o.length+m.length}return n},GH=an([0,0,0,1]),$H=an([0,0,1]),qH=an([0,0,3]),WH=function(e){for(var t=[],n=1;n<e.length-2;)ri(e.subarray(n,n+3),qH)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,s=new Uint8Array(i),o=0;for(n=0;n<i;o++,n++)o===t[0]&&(o++,t.shift()),s[n]=e[o];return s},WN=function(e,t,n,i){void 0===i&&(i=1/0),e=an(e),n=[].concat(n);for(var o,s=0,c=0;s<e.length&&(c<i||o);){var f=void 0;if(ri(e.subarray(s),GH)?f=4:ri(e.subarray(s),$H)&&(f=3),f){if(c++,o)return WH(e.subarray(o,s));var m=void 0;"h264"===t?m=31&e[s+f]:"h265"===t&&(m=e[s+f]>>1&63),-1!==n.indexOf(m)&&(o=s+f),s+=f+("h264"===t?1:2)}else s++}return e.subarray(0,0)},Yo={webm:an([119,101,98,109]),matroska:an([109,97,116,114,111,115,107,97]),flac:an([102,76,97,67]),ogg:an([79,103,103,83]),ac3:an([11,119]),riff:an([82,73,70,70]),avi:an([65,86,73]),wav:an([87,65,86,69]),"3gp":an([102,116,121,112,51,103]),mp4:an([102,116,121,112]),fmp4:an([115,116,121,112]),mov:an([102,116,121,112,113,116]),moov:an([109,111,111,118]),moof:an([109,111,111,102])},l0={aac:function(e){var t=cw(e);return ri(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=cw(e);return ri(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=hi(e,[zr.EBML,zr.DocType])[0];return ri(t,Yo.webm)},mkv:function(e){var t=hi(e,[zr.EBML,zr.DocType])[0];return ri(t,Yo.matroska)},mp4:function(e){return!l0["3gp"](e)&&!l0.mov(e)&&(!!(ri(e,Yo.mp4,{offset:4})||ri(e,Yo.fmp4,{offset:4})||ri(e,Yo.moof,{offset:4})||ri(e,Yo.moov,{offset:4}))||void 0)},mov:function(e){return ri(e,Yo.mov,{offset:4})},"3gp":function(e){return ri(e,Yo["3gp"],{offset:4})},ac3:function(e){var t=cw(e);return ri(e,Yo.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=cw(e);return ri(e,Yo.flac,{offset:t})},ogg:function(e){return ri(e,Yo.ogg)},avi:function(e){return ri(e,Yo.riff)&&ri(e,Yo.avi,{offset:8})},wav:function(e){return ri(e,Yo.riff)&&ri(e,Yo.wav,{offset:8})},h264:function(e){return function(e,t,n){return WN(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,n){return WN(e,"h265",[32,33],3)}(e).length}},$k=Object.keys(l0).filter(function(r){return"ts"!==r&&"h264"!==r&&"h265"!==r}).concat(["ts","h264","h265"]);$k.forEach(function(r){var e=l0[r];l0[r]=function(t){return e(an(t))}});for(var hw,KH=l0,qk=function(e){e=an(e);for(var t=0;t<$k.length;t++){var n=$k[t];if(KH[n](e))return n}return""},SI=U(4421),Yh={},ig=function(e,t){return Yh[e]=Yh[e]||[],t&&(Yh[e]=Yh[e].concat(t)),Yh[e]},ZN=function(e,t){var n=ig(e).indexOf(t);return!(n<=-1||(Yh[e]=Yh[e].slice(),Yh[e].splice(n,1),0))},CI={prefixed:!0},xI=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],KN=xI[0],II=0;II<xI.length;II++)if(xI[II][1]in Dt()){hw=xI[II];break}if(hw){for(var AI=0;AI<hw.length;AI++)CI[KN[AI]]=hw[AI];CI.prefixed=hw[0]!==KN[0]}var Aa=[],Ln=function YN(r){var t,e="info",n=function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];t("log",e,o)};return t=function(e,t){return function(n,i,s){var o=t.levels[i],c=new RegExp("^("+o+")$");if("log"!==n&&s.unshift(n.toUpperCase()+":"),s.unshift(e+":"),Aa){Aa.push([].concat(s));var f=Aa.length-1e3;Aa.splice(0,f>0?f:0)}if(Ce().console){var m=Ce().console[n];!m&&"debug"===n&&(m=Ce().console.info||Ce().console.log),m&&o&&c.test(n)&&m[Array.isArray(s)?"apply":"call"](Ce().console,s)}}}(r,n),n.createLogger=function(i){return YN(r+": "+i)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(i){if("string"==typeof i){if(!n.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},(n.history=function(){return Aa?[].concat(Aa):[]}).filter=function(i){return(Aa||[]).filter(function(s){return new RegExp(".*"+i+".*").test(s[0])})},n.history.clear=function(){Aa&&(Aa.length=0)},n.history.disable=function(){null!==Aa&&(Aa.length=0,Aa=null)},n.history.enable=function(){null===Aa&&(Aa=[])},n.error=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t("error",e,s)},n.warn=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t("warn",e,s)},n.debug=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t("debug",e,s)},n}("VIDEOJS"),QN=Ln.createLogger,e8=Object.prototype.toString,XN=function(e){return Qh(e)?Object.keys(e):[]};function c0(r,e){XN(r).forEach(function(t){return e(r[t],t)})}function Ii(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?sc.apply(void 0,[r].concat(t)):(t.forEach(function(i){!i||c0(i,function(s,o){r[o]=s})}),r)}function Qh(r){return!!r&&"object"==typeof r}function fw(r){return Qh(r)&&"[object Object]"===e8.call(r)&&r.constructor===Object}function pw(r,e){if(!r||!e)return"";if("function"==typeof Ce().getComputedStyle){var t;try{t=Ce().getComputedStyle(r)}catch(n){return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var Os=Ce().navigator&&Ce().navigator.userAgent||"",JN=/AppleWebKit\/([\d.]+)/i.exec(Os),n8=JN?parseFloat(JN.pop()):null,eL=/iPod/i.test(Os),r8=function(){var r=Os.match(/OS (\d+)_/i);return r&&r[1]?r[1]:null}(),Xh=/Android/i.test(Os),Wk=function(){var r=Os.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;var e=r[1]&&parseFloat(r[1]),t=r[2]&&parseFloat(r[2]);return e&&t?parseFloat(r[1]+"."+r[2]):e||null}(),tL=Xh&&Wk<5&&n8<537,nL=/Firefox/i.test(Os),gw=/Edg/i.test(Os),Jh=!gw&&(/Chrome/i.test(Os)||/CriOS/i.test(Os)),rL=function(){var r=Os.match(/(Chrome|CriOS)\/(\d+)/);return r&&r[2]?parseFloat(r[2]):null}(),mw=function(){var r=/MSIE\s(\d+)\.\d/.exec(Os),e=r&&parseFloat(r[1]);return!e&&/Trident\/7.0/i.test(Os)&&/rv:11.0/.test(Os)&&(e=11),e}(),zk=/Safari/i.test(Os)&&!Jh&&!Xh&&!gw,iL=/Windows/i.test(Os),d0=Boolean(h0()&&("ontouchstart"in Ce()||Ce().navigator.maxTouchPoints||Ce().DocumentTouch&&Ce().document instanceof Ce().DocumentTouch)),Zk=/iPad/i.test(Os)||zk&&d0&&!/iPhone/i.test(Os),Kk=/iPhone/i.test(Os)&&!Zk,Da=Kk||Zk||eL,DI=(zk||Da)&&!Jh,i8=Object.freeze({__proto__:null,IS_IPOD:eL,IOS_VERSION:r8,IS_ANDROID:Xh,ANDROID_VERSION:Wk,IS_NATIVE_ANDROID:tL,IS_FIREFOX:nL,IS_EDGE:gw,IS_CHROME:Jh,CHROME_VERSION:rL,IE_VERSION:mw,IS_SAFARI:zk,IS_WINDOWS:iL,TOUCH_ENABLED:d0,IS_IPAD:Zk,IS_IPHONE:Kk,IS_IOS:Da,IS_ANY_SAFARI:DI});function sL(r){return"string"==typeof r&&Boolean(r.trim())}function oL(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function h0(){return Dt()===Ce().document}function f0(r){return Qh(r)&&1===r.nodeType}function aL(){try{return Ce().parent!==Ce().self}catch(r){return!0}}function uL(r){return function(e,t){if(!sL(e))return Dt()[r](null);sL(t)&&(t=Dt().querySelector(t));var n=f0(t)?t:Dt();return n[r]&&n[r](e)}}function or(r,e,t,n){void 0===r&&(r="div"),void 0===e&&(e={}),void 0===t&&(t={});var i=Dt().createElement(r);return Object.getOwnPropertyNames(e).forEach(function(s){var o=e[s];-1!==s.indexOf("aria-")||"role"===s||"type"===s?(Ln.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+s+" to "+o+"."),i.setAttribute(s,o)):"textContent"===s?xv(i,o):(i[s]!==o||"tabIndex"===s)&&(i[s]=o)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),n&&Xk(i,n),i}function xv(r,e){return void 0===r.textContent?r.innerText=e:r.textContent=e,r}function Yk(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function Iv(r,e){return oL(e),r.classList?r.classList.contains(e):function(r){return new RegExp("(^|\\s)"+r+"($|\\s)")}(e).test(r.className)}function ef(r,e){return r.classList?r.classList.add(e):Iv(r,e)||(r.className=(r.className+" "+e).trim()),r}function vw(r,e){return r?(r.classList?r.classList.remove(e):(oL(e),r.className=r.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),r):(Ln.warn("removeClass was called with an element that doesn't exist"),null)}function lL(r,e,t){var n=Iv(r,e);if("function"==typeof t&&(t=t(r,e)),"boolean"!=typeof t&&(t=!n),t!==n)return t?ef(r,e):vw(r,e),r}function cL(r,e){Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];null==n||!1===n?r.removeAttribute(t):r.setAttribute(t,!0===n?"":n)})}function tf(r){var e={};if(r&&r.attributes&&r.attributes.length>0)for(var n=r.attributes,i=n.length-1;i>=0;i--){var s=n[i].name,o=n[i].value;("boolean"==typeof r[s]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+","))&&(o=null!==o),e[s]=o}return e}function dL(r,e){return r.getAttribute(e)}function p0(r,e,t){r.setAttribute(e,t)}function kI(r,e){r.removeAttribute(e)}function hL(){Dt().body.focus(),Dt().onselectstart=function(){return!1}}function fL(){Dt().onselectstart=function(){return!0}}function g0(r){if(r&&r.getBoundingClientRect&&r.parentNode){var e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t.height||(t.height=parseFloat(pw(r,"height"))),t.width||(t.width=parseFloat(pw(r,"width"))),t}}function yw(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=r.offsetWidth,t=r.offsetHeight,n=0,i=0;r.offsetParent&&r!==Dt()[CI.fullscreenElement];)n+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{left:n,top:i,width:e,height:t}}function PI(r,e){var t={x:0,y:0};if(Da)for(var n=r;n&&"html"!==n.nodeName.toLowerCase();){var i=pw(n,"transform");if(/^matrix/.test(i)){var s=i.slice(7,-1).split(/,\s/).map(Number);t.x+=s[4],t.y+=s[5]}else if(/^matrix3d/.test(i)){var o=i.slice(9,-1).split(/,\s/).map(Number);t.x+=o[12],t.y+=o[13]}n=n.parentNode}var c={},f=yw(e.target),m=yw(r),_=m.width,C=e.offsetY-(m.top-f.top),M=e.offsetX-(m.left-f.left);return e.changedTouches&&(M=e.changedTouches[0].pageX-m.left,C=e.changedTouches[0].pageY+m.top,Da&&(M-=t.x,C-=t.y)),c.y=1-Math.max(0,Math.min(1,C/m.height)),c.x=Math.max(0,Math.min(1,M/_)),c}function pL(r){return Qh(r)&&3===r.nodeType}function Qk(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function gL(r){return"function"==typeof r&&(r=r()),(Array.isArray(r)?r:[r]).map(function(e){return"function"==typeof e&&(e=e()),f0(e)||pL(e)?e:"string"==typeof e&&/\S/.test(e)?Dt().createTextNode(e):void 0}).filter(function(e){return e})}function Xk(r,e){return gL(e).forEach(function(t){return r.appendChild(t)}),r}function mL(r,e){return Xk(Qk(r),e)}function _w(r){return void 0===r.button&&void 0===r.buttons||0===r.button&&void 0===r.buttons||"mouseup"===r.type&&0===r.button&&0===r.buttons||!(0!==r.button||1!==r.buttons)}var Jk,sg=uL("querySelector"),vL=uL("querySelectorAll"),yL=Object.freeze({__proto__:null,isReal:h0,isEl:f0,isInFrame:aL,createEl:or,textContent:xv,prependTo:Yk,hasClass:Iv,addClass:ef,removeClass:vw,toggleClass:lL,setAttributes:cL,getAttributes:tf,getAttribute:dL,setAttribute:p0,removeAttribute:kI,blockTextSelection:hL,unblockTextSelection:fL,getBoundingClientRect:g0,findPosition:yw,getPointerPosition:PI,isTextNode:pL,emptyEl:Qk,normalizeContent:gL,appendContent:Xk,insertContent:mL,isSingleLeftClick:_w,$:sg,$$:vL}),_L=!1,o8=function(){if(!1!==Jk.options.autoSetup){var e=Array.prototype.slice.call(Dt().getElementsByTagName("video")),t=Array.prototype.slice.call(Dt().getElementsByTagName("audio")),n=Array.prototype.slice.call(Dt().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var s=0,o=i.length;s<o;s++){var c=i[s];if(!c||!c.getAttribute){eP(1);break}void 0===c.player&&null!==c.getAttribute("data-setup")&&Jk(c)}else _L||eP(1)}};function eP(r,e){!h0()||(e&&(Jk=e),Ce().setTimeout(o8,r))}function tP(){_L=!0,Ce().removeEventListener("load",tP)}h0()&&("complete"===Dt().readyState?tP():Ce().addEventListener("load",tP));var EL,bL=function(e){var t=Dt().createElement("style");return t.className=e,t},TL=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},u8=3;function og(){return u8++}Ce().WeakMap||(EL=function(){function r(){this.vdata="vdata"+Math.floor(Ce().performance&&Ce().performance.now()||Date.now()),this.data={}}var e=r.prototype;return e.set=function(n,i){var s=n[this.vdata]||og();return n[this.vdata]||(n[this.vdata]=s),this.data[s]=i,this},e.get=function(n){var i=n[this.vdata];if(i)return this.data[i];Ln("We have no data for this element",n)},e.has=function(n){return n[this.vdata]in this.data},e.delete=function(n){var i=n[this.vdata];i&&(delete this.data[i],delete n[this.vdata])},r}());var Qo=Ce().WeakMap?new WeakMap:new EL;function wL(r,e){if(Qo.has(r)){var t=Qo.get(r);0===t.handlers[e].length&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),0===Object.getOwnPropertyNames(t).length&&Qo.delete(r)}}function nP(r,e,t,n){t.forEach(function(i){r(e,i,n)})}function MI(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){var n=r||Ce().event;for(var i in r={},n)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&n.preventDefault||(r[i]=n[i]));if(r.target||(r.target=r.srcElement||Dt()),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){n.preventDefault&&n.preventDefault(),r.returnValue=!1,n.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),r.cancelBubble=!0,n.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,null!=r.clientX){var s=Dt().documentElement,o=Dt().body;r.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}r.which=r.charCode||r.keyCode,null!=r.button&&(r.button=1&r.button?0:4&r.button?1:2&r.button?2:0)}return r.fixed_=!0,r}var RI,c8=["touchstart","touchmove"];function cu(r,e,t){if(Array.isArray(e))return nP(cu,r,e,t);Qo.has(r)||Qo.set(r,{});var n=Qo.get(r);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=og()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(s,o){if(!n.disabled){s=MI(s);var c=n.handlers[s.type];if(c)for(var f=c.slice(0),m=0,_=f.length;m<_&&!s.isImmediatePropagationStopped();m++)try{f[m].call(r,s,o)}catch(w){Ln.error(w)}}}),1===n.handlers[e].length)if(r.addEventListener){var i=!1;(function(){if("boolean"!=typeof RI){RI=!1;try{var e=Object.defineProperty({},"passive",{get:function(){RI=!0}});Ce().addEventListener("test",null,e),Ce().removeEventListener("test",null,e)}catch(t){}}return RI})()&&c8.indexOf(e)>-1&&(i={passive:!0}),r.addEventListener(e,n.dispatcher,i)}else r.attachEvent&&r.attachEvent("on"+e,n.dispatcher)}function Co(r,e,t){if(Qo.has(r)){var n=Qo.get(r);if(n.handlers){if(Array.isArray(e))return nP(Co,r,e,t);var i=function(m,_){n.handlers[_]=[],wL(m,_)};if(void 0===e){for(var s in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},s)&&i(r,s);return}var o=n.handlers[e];if(o){if(!t)return void i(r,e);if(t.guid)for(var c=0;c<o.length;c++)o[c].guid===t.guid&&o.splice(c--,1);wL(r,e)}}}}function m0(r,e,t){var n=Qo.has(r)?Qo.get(r):{},i=r.parentNode||r.ownerDocument;if("string"==typeof e?e={type:e,target:r}:e.target||(e.target=r),e=MI(e),n.dispatcher&&n.dispatcher.call(r,e,t),i&&!e.isPropagationStopped()&&!0===e.bubbles)m0.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){Qo.has(e.target)||Qo.set(e.target,{});var s=Qo.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function OI(r,e,t){if(Array.isArray(e))return nP(OI,r,e,t);var n=function i(){Co(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||og(),cu(r,e,n)}function SL(r,e,t){var n=function i(){Co(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||og(),cu(r,e,n)}var bw,d8=Object.freeze({__proto__:null,fixEvent:MI,on:cu,off:Co,trigger:m0,one:OI,any:SL}),Lr=function(e,t,n){t.guid||(t.guid=og());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},nf=function(e,t){var n=Ce().performance.now();return function(){var o=Ce().performance.now();o-n>=t&&(e.apply(void 0,arguments),n=o)}},Ns=function(){};Ns.prototype.allowedEvents_={},Ns.prototype.addEventListener=Ns.prototype.on=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},cu(this,r,e),this.addEventListener=t},Ns.prototype.removeEventListener=Ns.prototype.off=function(r,e){Co(this,r,e)},Ns.prototype.one=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},OI(this,r,e),this.addEventListener=t},Ns.prototype.any=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},SL(this,r,e),this.addEventListener=t},Ns.prototype.dispatchEvent=Ns.prototype.trigger=function(r){var e=r.type||r;"string"==typeof r&&(r={type:e}),r=MI(r),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](r),m0(this,r)},Ns.prototype.queueTrigger=function(r){var e=this;bw||(bw=new Map);var t=r.type||r,n=bw.get(this);n||(n=new Map,bw.set(this,n));var i=n.get(t);n.delete(t),Ce().clearTimeout(i);var s=Ce().setTimeout(function(){0===n.size&&(n=null,bw.delete(e)),e.trigger(r)},0);n.set(t,s)};var NI=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},rf=function(e){return e instanceof Ns||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},rP=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},LI=function(e,t,n){if(!e||!e.nodeName&&!rf(e))throw new Error("Invalid target for "+NI(t)+"#"+n+"; must be a DOM node or evented object.")},CL=function(e,t,n){if(!rP(e))throw new Error("Invalid event type for "+NI(t)+"#"+n+"; must be a non-empty string or array.")},xL=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+NI(t)+"#"+n+"; must be a function.")},iP=function(e,t,n){var s,o,c,i=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return i?(s=e.eventBusEl_,t.length>=3&&t.shift(),o=t[0],c=t[1]):(s=t[0],o=t[1],c=t[2]),LI(s,e,n),CL(o,e,n),xL(c,e,n),{isTargetingSelf:i,target:s,type:o,listener:c=Lr(e,c)}},Av=function(e,t,n,i){LI(e,e,t),e.nodeName?d8[t](e,n,i):e[t](n,i)},p8={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=iP(this,n,"on"),o=s.isTargetingSelf,c=s.target,f=s.type,m=s.listener;if(Av(c,"on",f,m),!o){var _=function(){return e.off(c,f,m)};_.guid=m.guid;var w=function(){return e.off("dispose",_)};w.guid=m.guid,Av(this,"on","dispose",_),Av(c,"on","dispose",w)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=iP(this,n,"one"),o=s.isTargetingSelf,c=s.target,f=s.type,m=s.listener;if(o)Av(c,"one",f,m);else{var _=function w(){e.off(c,f,w);for(var C=arguments.length,M=new Array(C),L=0;L<C;L++)M[L]=arguments[L];m.apply(null,M)};_.guid=m.guid,Av(c,"one",f,_)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=iP(this,n,"any"),o=s.isTargetingSelf,c=s.target,f=s.type,m=s.listener;if(o)Av(c,"any",f,m);else{var _=function w(){e.off(c,f,w);for(var C=arguments.length,M=new Array(C),L=0;L<C;L++)M[L]=arguments[L];m.apply(null,M)};_.guid=m.guid,Av(c,"any",f,_)}},off:function(e,t,n){if(!e||rP(e))Co(this.eventBusEl_,e,t);else{var i=e,s=t;LI(i,this,"off"),CL(s,this,"off"),xL(n,this,"off"),n=Lr(this,n),this.off("dispose",n),i.nodeName?(Co(i,s,n),Co(i,"dispose",n)):rf(i)&&(i.off(s,n),i.off("dispose",n))}},trigger:function(e,t){if(LI(this.eventBusEl_,this,"trigger"),!rP(e&&"string"!=typeof e?e.type:e)){var i="Invalid event type for "+NI(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||Ln).error(i)}return m0(this.eventBusEl_,e,t)}};function sP(r,e){void 0===e&&(e={});var n=e.eventBusKey;if(n){if(!r[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');r.eventBusEl_=r[n]}else r.eventBusEl_=or("span",{className:"vjs-event-bus"});return Ii(r,p8),r.eventedCallbacks&&r.eventedCallbacks.forEach(function(i){i()}),r.on("dispose",function(){r.off(),[r,r.el_,r.eventBusEl_].forEach(function(i){i&&Qo.has(i)&&Qo.delete(i)}),Ce().setTimeout(function(){r.eventBusEl_=null},0)}),r}var g8={state:{},setState:function(e){var n,t=this;return"function"==typeof e&&(e=e()),c0(e,function(i,s){t.state[s]!==i&&((n=n||{})[s]={from:t.state[s],to:i}),t.state[s]=i}),n&&rf(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function IL(r,e){return Ii(r,g8),r.state=Ii({},r.state,e),"function"==typeof r.handleStateChanged&&rf(r)&&r.on("statechanged",r.handleStateChanged),r}var FI=function(e){return"string"!=typeof e?e:e.replace(/./,function(t){return t.toLowerCase()})},Ui=function(e){return"string"!=typeof e?e:e.replace(/./,function(t){return t.toUpperCase()})};function Zr(){for(var r={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(i){!i||c0(i,function(s,o){fw(s)?(fw(r[o])||(r[o]={}),r[o]=Zr(r[o],s)):r[o]=s})}),r}var v8=function(){function r(){this.map_={}}var e=r.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var i=this.has(n);return delete this.map_[n],i},e.set=function(n,i){return this.map_[n]=i,this},e.forEach=function(n,i){for(var s in this.map_)n.call(i,this.map_[s],s,this)},r}(),y8=Ce().Map?Ce().Map:v8,_8=function(){function r(){this.set_={}}var e=r.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var i=this.has(n);return delete this.set_[n],i},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,i){for(var s in this.set_)n.call(i,s,s,this)},r}(),oP=Ce().Set?Ce().Set:_8,_t=function(){function r(t,n,i){if(this.player_=!t&&this.play?t=this:t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Zr({},this.options_),n=this.options_=Zr(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var s=t&&t.id&&t.id()||"no_player";this.id_=s+"_component_"+og()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),!1!==n.evented&&(sP(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),IL(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new oP,this.setIntervalIds_=new oP,this.rafIds_=new oP,this.namedRafs_=new y8,this.clearingTimersOnDispose_=!1,!1!==n.initChildren&&this.initChildren(),this.ready(i),!1!==n.reportTouchActivity&&this.enableTouchActivity()}var e=r.prototype;return e.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=Zr(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,i,s){return or(n,i,s)},e.localize=function(n,i,s){void 0===s&&(s=n);var o=this.player_.language&&this.player_.language(),c=this.player_.languages&&this.player_.languages(),f=c&&c[o],m=o&&o.split("-")[0],_=c&&c[m],w=s;return f&&f[n]?w=f[n]:_&&_[n]&&(w=_[n]),i&&(w=w.replace(/\{(\d+)\}/g,function(C,M){var L=i[M-1],V=L;return void 0===L&&(V=C),V})),w},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];i=i.reduce(function(f,m){return f.concat(m)},[]);for(var o=this,c=0;c<i.length;c++)if(!(o=o.getChild(i[c]))||!o.getChild)return;return o},e.addChild=function(n,i,s){var o,c;if(void 0===i&&(i={}),void 0===s&&(s=this.children_.length),"string"==typeof n){c=Ui(n);var f=i.componentClass||c;i.name=c;var m=r.getComponent(f);if(!m)throw new Error("Component "+f+" does not exist");if("function"!=typeof m)return null;o=new m(this.player_||this,i)}else o=n;if(o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(s,0,o),o.parentComponent_=this,"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(c=c||o.name&&Ui(o.name()))&&(this.childNameIndex_[c]=o,this.childNameIndex_[FI(c)]=o),"function"==typeof o.el&&o.el()){var _=null;this.children_[s+1]&&(this.children_[s+1].el_?_=this.children_[s+1].el_:f0(this.children_[s+1])&&(_=this.children_[s+1])),this.contentEl().insertBefore(o.el(),_)}return o},e.removeChild=function(n){if("string"==typeof n&&(n=this.getChild(n)),n&&this.children_){for(var i=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===n){i=!0,this.children_.splice(s,1);break}if(i){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[Ui(n.name())]=null,this.childNameIndex_[FI(n.name())]=null;var o=n.el();o&&o.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,i=this.options_.children;if(i){var c,s=this.options_,f=r.getComponent("Tech");(c=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(m){return!c.some(function(_){return"string"==typeof _?m===_:m===_.name})})).map(function(m){var _,w;return"string"==typeof m?w=i[_=m]||n.options_[_]||{}:(_=m.name,w=m),{name:_,opts:w}}).filter(function(m){var _=r.getComponent(m.opts.componentClass||Ui(m.name));return _&&!f.isTech(_)}).forEach(function(_){var w=_.name,C=_.opts;if(void 0!==s[w]&&(C=s[w]),!1!==C){!0===C&&(C={}),C.playerOptions=n.options_.playerOptions;var M=n.addChild(w,C);M&&(n[w]=M)}})}},e.buildCSSClass=function(){return""},e.ready=function(n,i){if(void 0===i&&(i=!1),n){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(n);i?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(n,i){return sg(n,i||this.contentEl())},e.$$=function(n,i){return vL(n,i||this.contentEl())},e.hasClass=function(n){return Iv(this.el_,n)},e.addClass=function(n){ef(this.el_,n)},e.removeClass=function(n){vw(this.el_,n)},e.toggleClass=function(n,i){lL(this.el_,n,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return dL(this.el_,n)},e.setAttribute=function(n,i){p0(this.el_,n,i)},e.removeAttribute=function(n){kI(this.el_,n)},e.width=function(n,i){return this.dimension("width",n,i)},e.height=function(n,i){return this.dimension("height",n,i)},e.dimensions=function(n,i){this.width(n,!0),this.height(i)},e.dimension=function(n,i,s){if(void 0!==i)return(null===i||i!=i)&&(i=0),this.el_.style[n]=-1!==(""+i).indexOf("%")||-1!==(""+i).indexOf("px")?i:"auto"===i?"":i+"px",void(s||this.trigger("componentresize"));if(!this.el_)return 0;var o=this.el_.style[n],c=o.indexOf("px");return parseInt(-1!==c?o.slice(0,c):this.el_["offset"+Ui(n)],10)},e.currentDimension=function(n){var i=0;if("width"!==n&&"height"!==n)throw new Error("currentDimension only accepts width or height value");if(i=pw(this.el_,n),0===(i=parseFloat(i))||isNaN(i)){var s="offset"+Ui(n);i=this.el_[s]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&(n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var c,n=0,i=null;this.on("touchstart",function(m){1===m.touches.length&&(i={pageX:m.touches[0].pageX,pageY:m.touches[0].pageY},n=Ce().performance.now(),c=!0)}),this.on("touchmove",function(m){if(m.touches.length>1)c=!1;else if(i){var _=m.touches[0].pageX-i.pageX,w=m.touches[0].pageY-i.pageY;Math.sqrt(_*_+w*w)>10&&(c=!1)}});var f=function(){c=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(m){i=null,!0===c&&Ce().performance.now()-n<200&&(m.preventDefault(),this.trigger("tap"))})},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var i,n=Lr(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){n(),this.clearInterval(i),i=this.setInterval(n,250)});var s=function(c){n(),this.clearInterval(i)};this.on("touchmove",n),this.on("touchend",s),this.on("touchcancel",s)}},e.setTimeout=function(n,i){var o,s=this;return n=Lr(this,n),this.clearTimersOnDispose_(),o=Ce().setTimeout(function(){s.setTimeoutIds_.has(o)&&s.setTimeoutIds_.delete(o),n()},i),this.setTimeoutIds_.add(o),o},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),Ce().clearTimeout(n)),n},e.setInterval=function(n,i){n=Lr(this,n),this.clearTimersOnDispose_();var s=Ce().setInterval(n,i);return this.setIntervalIds_.add(s),s},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),Ce().clearInterval(n)),n},e.requestAnimationFrame=function(n){var s,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),n=Lr(this,n),s=Ce().requestAnimationFrame(function(){i.rafIds_.has(s)&&i.rafIds_.delete(s),n()}),this.rafIds_.add(s),s):this.setTimeout(n,1e3/60)},e.requestNamedAnimationFrame=function(n,i){var s=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),i=Lr(this,i);var o=this.requestAnimationFrame(function(){i(),s.namedRafs_.has(n)&&s.namedRafs_.delete(n)});return this.namedRafs_.set(n,o),n}},e.cancelNamedAnimationFrame=function(n){!this.namedRafs_.has(n)||(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),Ce().cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var o=i[1];n[i[0]].forEach(function(c,f){return n[o](f)})}),n.clearingTimersOnDispose_=!1}))},r.registerComponent=function(n,i){if("string"!=typeof n||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var s=r.getComponent("Tech"),o=s&&s.isTech(i),c=r===i||r.prototype.isPrototypeOf(i.prototype);if(o||!c)throw new Error('Illegal component, "'+n+'"; '+(o?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");n=Ui(n),r.components_||(r.components_={});var m=r.getComponent("Player");if("Player"===n&&m&&m.players){var _=m.players,w=Object.keys(_);if(_&&w.length>0&&w.map(function(C){return _[C]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return r.components_[n]=i,r.components_[FI(n)]=i,i},r.getComponent=function(n){if(n&&r.components_)return r.components_[n]},r}();function AL(r,e,t,n){return function(r,e,t){if("number"!=typeof e||e<0||e>t)throw new Error("Failed to execute '"+r+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}(r,n,t.length-1),t[n][e]}function aP(r){var e;return e=void 0===r||0===r.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:r.length,start:AL.bind(null,"start",0,r),end:AL.bind(null,"end",1,r)},Ce().Symbol&&Ce().Symbol.iterator&&(e[Ce().Symbol.iterator]=function(){return(r||[]).values()}),e}function Dv(r,e){return Array.isArray(r)?aP(r):void 0===r||void 0===e?aP():aP([[r,e]])}function DL(r,e){var n,i,t=0;if(!e)return 0;(!r||!r.length)&&(r=Dv(0,0));for(var s=0;s<r.length;s++)n=r.start(s),(i=r.end(s))>e&&(i=e),t+=i-n;return t/e}function Xo(r){if(r instanceof Xo)return r;"number"==typeof r?this.code=r:"string"==typeof r?this.message=r:Qh(r)&&("number"==typeof r.code&&(this.code=r.code),Ii(this,r)),this.message||(this.message=Xo.defaultMessages[this.code]||"")}_t.prototype.supportsRaf_="function"==typeof Ce().requestAnimationFrame&&"function"==typeof Ce().cancelAnimationFrame,_t.registerComponent("Component",_t),Xo.prototype.code=0,Xo.prototype.message="",Xo.prototype.status=null,Xo.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Xo.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var v0=0;v0<Xo.errorTypes.length;v0++)Xo[Xo.errorTypes[v0]]=v0,Xo.prototype[Xo.errorTypes[v0]]=v0;function Tw(r){return null!=r&&"function"==typeof r.then}function bd(r){Tw(r)&&r.then(null,function(e){})}var uP=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,i,s){return e[i]&&(n[i]=e[i]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},lP="vjs-modal-dialog",y0=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).handleKeyDown_=function(o){return s.handleKeyDown(o)},s.close_=function(o){return s.close(o)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=or("div",{className:lP+"-content"},{role:"document"}),s.descEl_=or("p",{className:lP+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),xv(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return lP+" vjs-hidden "+r.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},t.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(i){return"boolean"==typeof i&&this[i?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(i){if("boolean"==typeof i){var s=this.closeable_=!!i,o=this.getChild("closeButton");if(s&&!o){var c=this.contentEl_;this.contentEl_=this.el_,o=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=c,this.on(o,"close",this.close_)}!s&&o&&(this.off(o,"close",this.close_),this.removeChild(o),o.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(i){var s=this.contentEl(),o=s.parentNode,c=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,o.removeChild(s),this.empty(),mL(s,i),this.trigger("modalfill"),c?o.insertBefore(s,c):o.appendChild(s);var f=this.getChild("closeButton");f&&o.appendChild(f.el_)},t.empty=function(){this.trigger("beforemodalempty"),Qk(this.contentEl()),this.trigger("modalempty")},t.content=function(i){return void 0!==i&&(this.content_=i),this.content_},t.conditionalFocus_=function(){var i=Dt().activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(i)||s===i)&&(this.previouslyActiveEl_=i,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(i){if(i.stopPropagation(),Dn().isEventKey(i,"Escape")&&this.closeable())return i.preventDefault(),void this.close();if(Dn().isEventKey(i,"Tab")){for(var c,s=this.focusableEls_(),o=this.el_.querySelector(":focus"),f=0;f<s.length;f++)if(o===s[f]){c=f;break}Dt().activeElement===this.el_&&(c=0),i.shiftKey&&0===c?(s[s.length-1].focus(),i.preventDefault()):!i.shiftKey&&c===s.length-1&&(s[0].focus(),i.preventDefault())}},t.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(s){return(s instanceof Ce().HTMLAnchorElement||s instanceof Ce().HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof Ce().HTMLInputElement||s instanceof Ce().HTMLSelectElement||s instanceof Ce().HTMLTextAreaElement||s instanceof Ce().HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof Ce().HTMLIFrameElement||s instanceof Ce().HTMLObjectElement||s instanceof Ce().HTMLEmbedElement||s.hasAttribute("tabindex")&&-1!==s.getAttribute("tabindex")||s.hasAttribute("contenteditable")})},e}(_t);y0.prototype.options_={pauseOnOpen:!0,temporary:!0},_t.registerComponent("ModalDialog",y0);var _0=function(r){function e(n){var i;void 0===n&&(n=[]),(i=r.call(this)||this).tracks_=[],Object.defineProperty(Sn(i),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<n.length;s++)i.addTrack(n[s]);return i}Ot(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this,o=this.tracks_.length;""+o in this||Object.defineProperty(this,o,{get:function(){return this.tracks_[o]}}),-1===this.tracks_.indexOf(i)&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){s.trigger({track:i,type:"labelchange",target:s})},rf(i)&&i.addEventListener("labelchange",i.labelchange_)},t.removeTrack=function(i){for(var s,o=0,c=this.length;o<c;o++)if(this[o]===i){(s=this[o]).off&&s.off(),this.tracks_.splice(o,1);break}!s||this.trigger({track:s,type:"removetrack",target:this})},t.getTrackById=function(i){for(var s=null,o=0,c=this.length;o<c;o++){var f=this[o];if(f.id===i){s=f;break}}return s},e}(Ns);for(var w8 in _0.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},_0.prototype.allowedEvents_)_0.prototype["on"+w8]=null;var cP=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].enabled=!1)},S8=function(r){function e(n){var i;void 0===n&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].enabled){cP(n,n[s]);break}return(i=r.call(this,n)||this).changing_=!1,i}Ot(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this;i.enabled&&cP(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){s.changing_||(s.changing_=!0,cP(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e}(_0),dP=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].selected=!1)},C8=function(r){function e(n){var i;void 0===n&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].selected){dP(n,n[s]);break}return(i=r.call(this,n)||this).changing_=!1,Object.defineProperty(Sn(i),"selectedIndex",{get:function(){for(var c=0;c<this.length;c++)if(this[c].selected)return c;return-1},set:function(){}}),i}Ot(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this;i.selected&&dP(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){s.changing_||(s.changing_=!0,dP(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e}(_0),PL=function(r){function e(){return r.apply(this,arguments)||this}Ot(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this;r.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(i.kind)&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(_0),x8=function(){function r(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)this.addTrackElement_(t[n])}var e=r.prototype;return e.addTrackElement_=function(n){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),-1===this.trackElements_.indexOf(n)&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var i,s=0,o=this.trackElements_.length;s<o;s++)if(n===this.trackElements_[s].track){i=this.trackElements_[s];break}return i},e.removeTrackElement_=function(n){for(var i=0,s=this.trackElements_.length;i<s;i++)if(n===this.trackElements_[i]){this.trackElements_[i].track&&"function"==typeof this.trackElements_[i].track.off&&this.trackElements_[i].track.off(),"function"==typeof this.trackElements_[i].off&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},r}(),ML=function(){function r(t){r.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=r.prototype;return e.setCues_=function(n){var i=this.length||0,s=0,o=n.length;this.cues_=n,this.length_=n.length;var c=function(m){""+m in this||Object.defineProperty(this,""+m,{get:function(){return this.cues_[m]}})};if(i<o)for(s=i;s<o;s++)c.call(this,s)},e.getCueById=function(n){for(var i=null,s=0,o=this.length;s<o;s++){var c=this[s];if(c.id===n){i=c;break}}return i},r}(),I8={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},A8={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},D8={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},RL={disabled:"disabled",hidden:"hidden",showing:"showing"},hP=function(r){function e(t){var n;void 0===t&&(t={}),n=r.call(this)||this;var i={id:t.id||"vjs_track_"+og(),kind:t.kind||"",language:t.language||""},s=t.label||"",o=function(m){Object.defineProperty(Sn(n),m,{get:function(){return i[m]},set:function(){}})};for(var c in i)o(c);return Object.defineProperty(Sn(n),"label",{get:function(){return s},set:function(m){m!==s&&(s=m,this.trigger("labelchange"))}}),n}return Ot(e,r),e}(Ns),fP=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=Dt().createElement("a");n.href=e;for(var i={},s=0;s<t.length;s++)i[t[s]]=n[t[s]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=Ce().location.protocol),i.host||(i.host=Ce().location.host),i},OL=function(e){if(!e.match(/^https?:\/\//)){var t=Dt().createElement("a");t.href=e,e=t.href}return e},pP=function(e){if("string"==typeof e){var n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(n)return n.pop().toLowerCase()}return""},jI=function(e,t){void 0===t&&(t=Ce().location);var n=fP(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},k8=Object.freeze({__proto__:null,parseUrl:fP,getAbsoluteURL:OL,getFileExtension:pP,isCrossOrigin:jI}),NL=function(e,t){var n=new(Ce().WebVTT.Parser)(Ce(),Ce().vttjs,Ce().WebVTT.StringDecoder()),i=[];n.oncue=function(s){t.addCue(s)},n.onparsingerror=function(s){i.push(s)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(Ce().console&&Ce().console.groupCollapsed&&Ce().console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(s){return Ln.error(s)}),Ce().console&&Ce().console.groupEnd&&Ce().console.groupEnd()),n.flush()},LL=function(e,t){var n={uri:e},i=jI(e);i&&(n.cors=i);var s="use-credentials"===t.tech_.crossOrigin();s&&(n.withCredentials=s),SN()(n,Lr(this,function(o,c,f){if(o)return Ln.error(o,c);t.loaded_=!0,"function"!=typeof Ce().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(m){if("vttjserror"!==m.type)return NL(f,t);Ln.error("vttjs failed to load, stopping trying to process "+t.src)}):NL(f,t)}))},Ew=function(r){function e(n){var i;if(void 0===n&&(n={}),!n.tech)throw new Error("A tech was not provided.");var s=Zr(n,{kind:D8[n.kind]||"subtitles",language:n.language||n.srclang||""}),o=RL[s.mode]||"disabled",c=s.default;("metadata"===s.kind||"chapters"===s.kind)&&(o="hidden"),(i=r.call(this,s)||this).tech_=s.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var f=new ML(i.cues_),m=new ML(i.activeCues_),_=!1,w=Lr(Sn(i),function(){!this.tech_.isReady_||this.tech_.isDisposed()||(this.activeCues=this.activeCues,_&&(this.trigger("cuechange"),_=!1))});return i.tech_.one("dispose",function(){i.tech_.off("timeupdate",w)}),"disabled"!==o&&i.tech_.on("timeupdate",w),Object.defineProperties(Sn(i),{default:{get:function(){return c},set:function(){}},mode:{get:function(){return o},set:function(L){!RL[L]||o!==L&&(o=L,!this.preload_&&"disabled"!==o&&0===this.cues.length&&LL(this.src,this),this.tech_.off("timeupdate",w),"disabled"!==o&&this.tech_.on("timeupdate",w),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?f:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return m;for(var L=this.tech_.currentTime(),V=[],H=0,Se=this.cues.length;H<Se;H++){var be=this.cues[H];(be.startTime<=L&&be.endTime>=L||be.startTime===be.endTime&&be.startTime<=L&&be.startTime+.5>=L)&&V.push(be)}if(_=!1,V.length!==this.activeCues_.length)_=!0;else for(var je=0;je<V.length;je++)-1===this.activeCues_.indexOf(V[je])&&(_=!0);return this.activeCues_=V,m.setCues_(this.activeCues_),m},set:function(){}}}),s.src?(i.src=s.src,i.preload_||(i.loaded_=!0),(i.preload_||"subtitles"!==s.kind&&"captions"!==s.kind)&&LL(i.src,Sn(i))):i.loaded_=!0,i}Ot(e,r);var t=e.prototype;return t.addCue=function(i){var s=i;if(Ce().vttjs&&!(i instanceof Ce().vttjs.VTTCue)){for(var o in s=new(Ce().vttjs.VTTCue)(i.startTime,i.endTime,i.text),i)o in s||(s[o]=i[o]);s.id=i.id,s.originalCue_=i}for(var c=this.tech_.textTracks(),f=0;f<c.length;f++)c[f]!==this&&c[f].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},t.removeCue=function(i){for(var s=this.cues_.length;s--;){var o=this.cues_[s];if(o===i||o.originalCue_&&o.originalCue_===i){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},e}(hP);Ew.prototype.allowedEvents_={cuechange:"cuechange"};var FL=function(r){function e(t){var n;void 0===t&&(t={});var i=Zr(t,{kind:A8[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(Sn(n),"enabled",{get:function(){return s},set:function(c){"boolean"!=typeof c||c===s||(s=c,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return Ot(e,r),e}(hP),jL=function(r){function e(t){var n;void 0===t&&(t={});var i=Zr(t,{kind:I8[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(Sn(n),"selected",{get:function(){return s},set:function(c){"boolean"!=typeof c||c===s||(s=c,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return Ot(e,r),e}(hP),b0=function(r){function e(t){var n;void 0===t&&(t={}),n=r.call(this)||this;var i,s=new Ew(t);return n.kind=s.kind,n.src=s.src,n.srclang=s.language,n.label=s.label,n.default=s.default,Object.defineProperties(Sn(n),{readyState:{get:function(){return i}},track:{get:function(){return s}}}),i=0,s.addEventListener("loadeddata",function(){i=2,n.trigger({type:"load",target:Sn(n)})}),n}return Ot(e,r),e}(Ns);b0.prototype.allowedEvents_={load:"load"},b0.NONE=0,b0.LOADING=1,b0.LOADED=2,b0.ERROR=3;var Vu={audio:{ListClass:S8,TrackClass:FL,capitalName:"Audio"},video:{ListClass:C8,TrackClass:jL,capitalName:"Video"},text:{ListClass:PL,TrackClass:Ew,capitalName:"Text"}};Object.keys(Vu).forEach(function(r){Vu[r].getterName=r+"Tracks",Vu[r].privateName=r+"Tracks_"});var T0={remoteText:{ListClass:PL,TrackClass:Ew,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:x8,TrackClass:b0,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Jo=sc({},Vu,T0);T0.names=Object.keys(T0),Vu.names=Object.keys(Vu),Jo.names=[].concat(T0.names).concat(Vu.names);var Fr=function(r){function e(n,i){var s;return void 0===n&&(n={}),void 0===i&&(i=function(){}),n.reportTouchActivity=!1,(s=r.call(this,null,n,i)||this).onDurationChange_=function(o){return s.onDurationChange(o)},s.trackProgress_=function(o){return s.trackProgress(o)},s.trackCurrentTime_=function(o){return s.trackCurrentTime(o)},s.stopTrackingCurrentTime_=function(o){return s.stopTrackingCurrentTime(o)},s.disposeSourceHandler_=function(o){return s.disposeSourceHandler(o)},s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),Jo.names.forEach(function(o){var c=Jo[o];n&&n[c.getterName]&&(s[c.privateName]=n[c.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(o){!1===n["native"+o+"Tracks"]&&(s["featuresNative"+o+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?s.featuresNativeTextTracks=!1:(!0===n.nativeCaptions||!0===n.nativeTextTracks)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=!1!==n.preloadTextTracks,s.autoRemoteTextTracks_=new Jo.text.ListClass,s.initTrackListeners(),n.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}Ot(e,r);var t=e.prototype;return t.triggerSourceset=function(i){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Lr(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,1===s&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(i){this.duration_=this.duration()},t.buffered=function(){return Dv(0,0)},t.bufferedPercent=function(){return DL(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(Vu.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),r.prototype.dispose.call(this)},t.clearTracks=function(i){var s=this;(i=[].concat(i)).forEach(function(o){for(var c=s[o+"Tracks"]()||[],f=c.length;f--;){var m=c[f];"text"===o&&s.removeRemoteTextTrack(m),c.removeTrack(m)}})},t.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],s=i.length;s--;)this.removeRemoteTextTrack(i[s])},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(i){return void 0!==i&&(this.error_=new Xo(i),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?Dv(0,0):Dv()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var i=this;Vu.names.forEach(function(s){var c=function(){i.trigger(s+"trackchange")},f=i[Vu[s].getterName]();f.addEventListener("removetrack",c),f.addEventListener("addtrack",c),i.on("dispose",function(){f.removeEventListener("removetrack",c),f.removeEventListener("addtrack",c)})})},t.addWebVttScript_=function(){var i=this;if(!Ce().WebVTT)if(Dt().body.contains(this.el())){if(!this.options_["vtt.js"]&&fw(CN())&&Object.keys(CN()).length>0)return void this.trigger("vttjsloaded");var s=Dt().createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){i.trigger("vttjsloaded")},s.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),Ce().WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var i=this,s=this.textTracks(),o=this.remoteTextTracks(),c=function(C){return s.addTrack(C.track)},f=function(C){return s.removeTrack(C.track)};o.on("addtrack",c),o.on("removetrack",f),this.addWebVttScript_();var m=function(){return i.trigger("texttrackchange")},_=function(){m();for(var C=0;C<s.length;C++){var M=s[C];M.removeEventListener("cuechange",m),"showing"===M.mode&&M.addEventListener("cuechange",m)}};_(),s.addEventListener("change",_),s.addEventListener("addtrack",_),s.addEventListener("removetrack",_),this.on("dispose",function(){o.off("addtrack",c),o.off("removetrack",f),s.removeEventListener("change",_),s.removeEventListener("addtrack",_),s.removeEventListener("removetrack",_);for(var w=0;w<s.length;w++)s[w].removeEventListener("cuechange",m)})},t.addTextTrack=function(i,s,o){if(!i)throw new Error("TextTrack kind is required but was not provided");return function(r,e,t,n,i){void 0===i&&(i={});var s=r.textTracks();i.kind=e,t&&(i.label=t),n&&(i.language=n),i.tech=r;var o=new Jo.text.TrackClass(i);return s.addTrack(o),o}(this,i,s,o)},t.createRemoteTextTrack=function(i){var s=Zr(i,{tech:this});return new T0.remoteTextEl.TrackClass(s)},t.addRemoteTextTrack=function(i,s){var o=this;void 0===i&&(i={});var c=this.createRemoteTextTrack(i);return!0!==s&&!1!==s&&(Ln.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),!0!==s&&this.ready(function(){return o.autoRemoteTextTracks_.addTrack(c.track)}),c},t.removeRemoteTextTrack=function(i){var s=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var i=this.options_.Promise||Ce().Promise;if(i)return i.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,s){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,s){if(e.techs_||(e.techs_={}),!e.isTech(s))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=Ui(i),e.techs_[i]=s,e.techs_[FI(i)]=s,"Tech"!==i&&e.defaultTechOrder_.push(i),s},e.getTech=function(i){if(i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=Ui(i),Ce()&&Ce().videojs&&Ce().videojs[i])return Ln.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Ce().videojs[i]}},e}(_t);Jo.names.forEach(function(r){var e=Jo[r];Fr.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Fr.prototype.featuresVolumeControl=!0,Fr.prototype.featuresMuteControl=!0,Fr.prototype.featuresFullscreenResize=!1,Fr.prototype.featuresPlaybackRate=!1,Fr.prototype.featuresProgressEvents=!1,Fr.prototype.featuresSourceset=!1,Fr.prototype.featuresTimeupdateEvents=!1,Fr.prototype.featuresNativeTextTracks=!1,Fr.withSourceHandlers=function(r){r.registerSourceHandler=function(t,n){var i=r.sourceHandlers;i||(i=r.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},r.canPlayType=function(t){for(var i,n=r.sourceHandlers||[],s=0;s<n.length;s++)if(i=n[s].canPlayType(t))return i;return""},r.selectSourceHandler=function(t,n){for(var i=r.sourceHandlers||[],o=0;o<i.length;o++)if(i[o].canHandleSource(t,n))return i[o];return null},r.canPlaySource=function(t,n){var i=r.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(t){var n=this[t];"function"==typeof n&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){var n=r.selectSourceHandler(t,this.options_);n||(r.nativeSourceHandler?n=r.nativeSourceHandler:Ln.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},_t.registerComponent("Tech",Fr),Fr.registerTech("Tech",Fr),Fr.defaultTechOrder_=[];var kv={},gP={},UI={};function N8(r,e,t){r.setTimeout(function(){return Pv(e,kv[e.type],t,r)},1)}function VL(r,e,t,n){void 0===n&&(n=null);var i="call"+Ui(t),s=r.reduce(mP(i),n),o=s===UI,c=o?null:e[t](s);return function(r,e,t,n){for(var i=r.length-1;i>=0;i--){var s=r[i];s[e]&&s[e](n,t)}}(r,t,c,o),c}var U8={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},B8={setCurrentTime:1,setMuted:1,setVolume:1},HL={play:1,pause:1};function mP(r){return function(e,t){return e===UI?UI:t[r]?t[r](e):e}}function Pv(r,e,t,n,i,s){void 0===r&&(r={}),void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===s&&(s=!1);var c=e[0],f=e.slice(1);if("string"==typeof c)Pv(r,kv[c],t,n,i,s);else if(c){var m=function(r,e){var t=gP[r.id()],n=null;if(null==t)return n=e(r),gP[r.id()]=[[e,n]],n;for(var i=0;i<t.length;i++){var s=t[i];s[0]===e&&(n=s[1])}return null===n&&(n=e(r),t.push([e,n])),n}(n,c);if(!m.setSource)return i.push(m),Pv(r,f,t,n,i,s);m.setSource(Ii({},r),function(_,w){if(_)return Pv(r,f,t,n,i,s);i.push(m),Pv(w,r.type===w.type?f:kv[w.type],t,n,i,s)})}else f.length?Pv(r,f,t,n,i,s):s?t(r,i):Pv(r,kv["*"],t,n,i,!0)}var $8={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},BI=function(e){void 0===e&&(e="");var t=pP(e);return $8[t.toLowerCase()]||""},W8=function r(e){if(Array.isArray(e)){var t=[];e.forEach(function(n){n=r(n),Array.isArray(n)?t=t.concat(n):Qh(n)&&t.push(n)}),e=t}else e="string"==typeof e&&e.trim()?[GL({src:e})]:Qh(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[GL(e)]:[];return e};function GL(r){if(!r.type){var e=BI(r.src);e&&(r.type=e)}return r}var z8=function(r){function e(t,n,i){var s,o=Zr({createEl:!1},n);if(s=r.call(this,t,o,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var c=0,f=n.playerOptions.techOrder;c<f.length;c++){var m=Ui(f[c]),_=Fr.getTech(m);if(m||(_=_t.getComponent(m)),_&&_.isSupported()){t.loadTech_(m);break}}return s}return Ot(e,r),e}(_t);_t.registerComponent("MediaLoader",z8);var VI=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).handleMouseOver_=function(o){return s.handleMouseOver(o)},s.handleMouseOut_=function(o){return s.handleMouseOut(o)},s.handleClick_=function(o){return s.handleClick(o)},s.handleKeyDown_=function(o){return s.handleKeyDown(o)},s.emitTapEvents(),s.enable(),s}Ot(e,r);var t=e.prototype;return t.createEl=function(i,s,o){void 0===i&&(i="div"),void 0===s&&(s={}),void 0===o&&(o={}),s=Ii({className:this.buildCSSClass(),tabIndex:0},s),"button"===i&&Ln.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),o=Ii({role:"button"},o),this.tabIndex_=s.tabIndex;var c=or(i,s,o);return c.appendChild(or("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(c),c},t.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function(i){return this.controlTextEl_=or("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},t.controlText=function(i,s){if(void 0===s&&(s=this.el()),void 0===i)return this.controlText_||"Need Text";var o=this.localize(i);this.controlText_=i,xv(this.controlTextEl_,o),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",o)},t.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(i){Dn().isEventKey(i,"Space")||Dn().isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e}(_t);_t.registerComponent("ClickableComponent",VI);var Z8=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update(),s.update_=function(o){return s.update(o)},n.on("posterchange",s.update_),s}Ot(e,r);var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),r.prototype.dispose.call(this)},t.createEl=function(){return or("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(i){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},t.setSrc=function(i){var s="";i&&(s='url("'+i+'")'),this.el_.style.backgroundImage=s},t.handleClick=function(i){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((mw||gw)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?bd(this.player_.play()):this.player_.pause()}},e}(VI);_t.registerComponent("PosterImage",Z8);var Hu="#222",K8={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function vP(r,e){var t;if(4===r.length)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else{if(7!==r.length)throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");t=r.slice(1)}return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function yP(r,e,t){try{r.style[e]=t}catch(n){return}}var Y8=function(r){function e(n,i,s){var o;o=r.call(this,n,i,s)||this;var c=function(m){return o.updateDisplay(m)};return n.on("loadstart",function(f){return o.toggleDisplay(f)}),n.on("texttrackchange",c),n.on("loadedmetadata",function(f){return o.preselectTrack(f)}),n.ready(Lr(Sn(o),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",c),n.on("playerresize",c),Ce().addEventListener("orientationchange",c),n.on("dispose",function(){return Ce().removeEventListener("orientationchange",c)});for(var f=this.options_.playerOptions.tracks||[],m=0;m<f.length;m++)this.player_.addRemoteTextTrack(f[m],!0);this.preselectTrack()}})),o}Ot(e,r);var t=e.prototype;return t.preselectTrack=function(){for(var c,f,m,i={captions:1,subtitles:1},s=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,_=0;_<s.length;_++){var w=s[_];o&&o.enabled&&o.language&&o.language===w.language&&w.kind in i?w.kind===o.kind?m=w:m||(m=w):o&&!o.enabled?(m=null,c=null,f=null):w.default&&("descriptions"!==w.kind||c?w.kind in i&&!f&&(f=w):c=w)}m?m.mode="showing":f?f.mode="showing":c&&(c.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof Ce().WebVTT&&Ce().WebVTT.processCues(Ce(),[],this.el_)},t.updateDisplay=function(){var i=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var o=[],c=0;c<i.length;++c){var f=i[c];"showing"===f.mode&&o.push(f)}this.updateForTrack(o)}else{for(var m=null,_=null,w=i.length;w--;){var C=i[w];"showing"===C.mode&&("descriptions"===C.kind?m=C:_=C)}_?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(_)):m&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(m))}},t.updateDisplayState=function(i){for(var s=this.player_.textTrackSettings.getValues(),o=i.activeCues,c=o.length;c--;){var f=o[c];if(f){var m=f.displayState;if(s.color&&(m.firstChild.style.color=s.color),s.textOpacity&&yP(m.firstChild,"color",vP(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(m.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&yP(m.firstChild,"backgroundColor",vP(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?yP(m,"backgroundColor",vP(s.windowColor,s.windowOpacity)):m.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?m.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Hu:"raised"===s.edgeStyle?m.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Hu:"depressed"===s.edgeStyle?m.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Hu:"uniform"===s.edgeStyle&&(m.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Hu)),s.fontPercent&&1!==s.fontPercent){var _=Ce().parseFloat(m.style.fontSize);m.style.fontSize=_*s.fontPercent+"px",m.style.height="auto",m.style.top="auto"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?m.firstChild.style.fontVariant="small-caps":m.firstChild.style.fontFamily=K8[s.fontFamily])}}},t.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),"function"==typeof Ce().WebVTT&&!i.every(function(M){return!M.activeCues})){for(var s=[],o=0;o<i.length;++o)for(var c=i[o],f=0;f<c.activeCues.length;++f)s.push(c.activeCues[f]);Ce().WebVTT.processCues(Ce(),s,this.el_);for(var m=0;m<i.length;++m){for(var _=i[m],w=0;w<_.activeCues.length;++w){var C=_.activeCues[w].displayState;ef(C,"vjs-text-track-cue"),ef(C,"vjs-text-track-cue-"+(_.language?_.language:m)),_.language&&p0(C,"lang",_.language)}this.player_.textTrackSettings&&this.updateDisplayState(_)}}},e}(_t);_t.registerComponent("TextTrackDisplay",Y8);var Q8=function(r){function e(){return r.apply(this,arguments)||this}return Ot(e,r),e.prototype.createEl=function(){var i=this.player_.isAudio(),s=this.localize(i?"Audio Player":"Video Player"),o=or("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),c=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return c.appendChild(o),c},e}(_t);_t.registerComponent("LoadingSpinner",Q8);var uc=function(r){function e(){return r.apply(this,arguments)||this}Ot(e,r);var t=e.prototype;return t.createEl=function(i,s,o){void 0===s&&(s={}),void 0===o&&(o={});var c=or("button",s=Ii({className:this.buildCSSClass()},s),o=Ii({type:"button"},o));return c.appendChild(or("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(c),c},t.addChild=function(i,s){return void 0===s&&(s={}),Ln.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),_t.prototype.addChild.call(this,i,s)},t.enable=function(){r.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){r.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(i){Dn().isEventKey(i,"Space")||Dn().isEventKey(i,"Enter")?i.stopPropagation():r.prototype.handleKeyDown.call(this,i)},e}(VI);_t.registerComponent("Button",uc);var qL=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).mouseused_=!1,s.on("mousedown",function(o){return s.handleMouseDown(o)}),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(i){var s=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var o=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return bd(s),void(this.player_.tech(!0)&&(!mw&&!gw||!o)&&this.player_.tech(!0).focus())}var c=this.player_.getChild("controlBar"),f=c&&c.getChild("playToggle");if(f){var m=function(){return f.focus()};Tw(s)?s.then(m,function(){}):this.setTimeout(m,1)}else this.player_.tech(!0).focus()},t.handleKeyDown=function(i){this.mouseused_=!1,r.prototype.handleKeyDown.call(this,i)},t.handleMouseDown=function(i){this.mouseused_=!0},e}(uc);qL.prototype.controlText_="Play Video",_t.registerComponent("BigPlayButton",qL);var X8=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).controlText(i&&i.controlText||s.localize("Close")),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(i){Dn().isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e}(uc);_t.registerComponent("CloseButton",X8);var WL=function(r){function e(n,i){var s;return void 0===i&&(i={}),s=r.call(this,n,i)||this,i.replay=void 0===i.replay||i.replay,s.on(n,"play",function(o){return s.handlePlay(o)}),s.on(n,"pause",function(o){return s.handlePause(o)}),i.replay&&s.on(n,"ended",function(o){return s.handleEnded(o)}),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.player_.paused()?bd(this.player_.play()):this.player_.pause()},t.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},t.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(i){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(o){return s.handleSeeked(o)})},e}(uc);WL.prototype.controlText_="Play",_t.registerComponent("PlayToggle",WL);var zL=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),s=Math.floor(e/3600),o=Math.floor(t/60%60),c=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=i=n="-"),(s=s>0||c>0?s+":":"")+(i=((s||o>=10)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)},_P=zL;function E0(r,e){return void 0===e&&(e=r),_P(r,e)}var w0=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,["timeupdate","ended"],function(o){return s.updateContent(o)}),s.updateTextNode_(),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){var i=this.buildCSSClass(),s=r.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),o=or("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return s.appendChild(o),this.contentEl_=or("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},t.dispose=function(){this.contentEl_=null,this.textNode_=null,r.prototype.dispose.call(this)},t.updateTextNode_=function(i){var s=this;void 0===i&&(i=0),i=E0(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var o=s.textNode_;o&&s.contentEl_.firstChild!==o&&(o=null,Ln.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=Dt().createTextNode(s.formattedTime_),s.textNode_&&(o?s.contentEl_.replaceChild(s.textNode_,o):s.contentEl_.appendChild(s.textNode_))}}))},t.updateContent=function(i){},e}(_t);w0.prototype.labelText_="Time",w0.prototype.controlText_="Time",_t.registerComponent("TimeDisplay",w0);var bP=function(r){function e(){return r.apply(this,arguments)||this}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(i){var s;s=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},e}(w0);bP.prototype.labelText_="Current Time",bP.prototype.controlText_="Current Time",_t.registerComponent("CurrentTimeDisplay",bP);var TP=function(r){function e(n,i){var s,o=function(f){return s.updateContent(f)};return(s=r.call(this,n,i)||this).on(n,"durationchange",o),s.on(n,"loadstart",o),s.on(n,"loadedmetadata",o),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(i){var s=this.player_.duration();this.updateTextNode_(s)},e}(w0);TP.prototype.labelText_="Duration",TP.prototype.controlText_="Duration",_t.registerComponent("DurationDisplay",TP);var t6=function(r){function e(){return r.apply(this,arguments)||this}return Ot(e,r),e.prototype.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=r.prototype.createEl.call(this,"div"),o=r.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(o),i.appendChild(s),i},e}(_t);_t.registerComponent("TimeDivider",t6);var EP=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,"durationchange",function(o){return s.updateContent(o)}),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var i=r.prototype.createEl.call(this);return i.insertBefore(or("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},t.updateContent=function(i){var s;"number"==typeof this.player_.duration()&&(s=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(s))},e}(w0);EP.prototype.labelText_="Remaining Time",EP.prototype.controlText_="Remaining Time",_t.registerComponent("RemainingTimeDisplay",EP);var n6=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).updateShowing(),s.on(s.player(),"durationchange",function(o){return s.updateShowing(o)}),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=or("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(or("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(Dt().createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},t.dispose=function(){this.contentEl_=null,r.prototype.dispose.call(this)},t.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e}(_t);_t.registerComponent("LiveDisplay",n6);var ZL=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(o){return s.updateLiveEdgeStatus(o)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=or("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,r.prototype.dispose.call(this)},e}(uc);ZL.prototype.controlText_="Seek to live, currently playing live",_t.registerComponent("SeekToLive",ZL);var HI=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},wP=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).handleMouseDown_=function(o){return s.handleMouseDown(o)},s.handleMouseUp_=function(o){return s.handleMouseUp(o)},s.handleKeyDown_=function(o){return s.handleKeyDown(o)},s.handleClick_=function(o){return s.handleClick(o)},s.handleMouseMove_=function(o){return s.handleMouseMove(o)},s.update_=function(o){return s.update(o)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}Ot(e,r);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(i,s,o){return void 0===s&&(s={}),void 0===o&&(o={}),s.className=s.className+" vjs-slider",s=Ii({tabIndex:0},s),o=Ii({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},o),r.prototype.createEl.call(this,i,s,o)},t.handleMouseDown=function(i){var s=this.bar.el_.ownerDocument;"mousedown"===i.type&&i.preventDefault(),"touchstart"===i.type&&!Jh&&i.preventDefault(),hL(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(i)},t.handleMouseMove=function(i){},t.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;fL(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var i=this;if(this.el_&&this.bar){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var o=i.vertical()?"height":"width";i.bar.el().style[o]=(100*s).toFixed(2)+"%"})),s}},t.getProgress=function(){return Number(HI(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(i){var s=PI(this.el_,i);return this.vertical()?s.y:s.x},t.handleKeyDown=function(i){Dn().isEventKey(i,"Left")||Dn().isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):Dn().isEventKey(i,"Right")||Dn().isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){i.stopPropagation(),i.preventDefault()},t.vertical=function(i){if(void 0===i)return this.vertical_||!1;this.vertical_=!!i,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},e}(_t);_t.registerComponent("Slider",wP);var SP=function(e,t){return HI(e/t*100,0,100).toFixed(2)+"%"},r6=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).partEls_=[],s.on(n,"progress",function(o){return s.update(o)}),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=or("span",{className:"vjs-control-text"}),o=or("span",{textContent:this.localize("Loaded")}),c=Dt().createTextNode(": ");return this.percentageEl_=or("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(s),s.appendChild(o),s.appendChild(c),s.appendChild(this.percentageEl_),i},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},t.update=function(i){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var o=s.player_.liveTracker,c=s.player_.buffered(),f=o&&o.isLive()?o.seekableEnd():s.player_.duration(),m=s.player_.bufferedEnd(),_=s.partEls_,w=SP(m,f);s.percent_!==w&&(s.el_.style.width=w,xv(s.percentageEl_,w),s.percent_=w);for(var C=0;C<c.length;C++){var M=c.start(C),L=c.end(C),V=_[C];V||(V=s.el_.appendChild(or()),_[C]=V),(V.dataset.start!==M||V.dataset.end!==L)&&(V.dataset.start=M,V.dataset.end=L,V.style.left=SP(M,m),V.style.width=SP(L-M,m))}for(var H=_.length;H>c.length;H--)s.el_.removeChild(_[H-1]);_.length=c.length})},e}(_t);_t.registerComponent("LoadProgressBar",r6);var i6=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=nf(Lr(Sn(s),s.update),30),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,o){var c=yw(this.el_),f=g0(this.player_.el()),m=i.width*s;if(f&&c){var _=i.left-f.left+m,w=i.width-m+(f.right-i.right),C=c.width/2;_<C?C+=C-_:w<C&&(C=w),C<0?C=0:C>c.width&&(C=c.width),C=Math.round(C),this.el_.style.right="-"+C+"px",this.write(o)}},t.write=function(i){xv(this.el_,i)},t.updateTime=function(i,s,o,c){var f=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var m,_=f.player_.duration();if(f.player_.liveTracker&&f.player_.liveTracker.isLive()){var w=f.player_.liveTracker.liveWindow(),C=w-s*w;m=(C<1?"":"-")+E0(C,w)}else m=E0(o,_);f.update(i,s,m),c&&c()})},e}(_t);_t.registerComponent("TimeTooltip",i6);var CP=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=nf(Lr(Sn(s),s.update),30),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(i,s){var o=this.getChild("timeTooltip");if(o){var c=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();o.updateTime(i,s,c)}},e}(_t);CP.prototype.options_={children:[]},!Da&&!Xh&&CP.prototype.options_.children.push("timeTooltip"),_t.registerComponent("PlayProgressBar",CP);var KL=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=nf(Lr(Sn(s),s.update),30),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s){var o=this,c=s*this.player_.duration();this.getChild("timeTooltip").updateTime(i,s,c,function(){o.el_.style.left=i.width*s+"px"})},e}(_t);KL.prototype.options_={children:["timeTooltip"]},_t.registerComponent("MouseTimeDisplay",KL);var xP=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).setEventHandlers_(),s}Ot(e,r);var t=e.prototype;return t.setEventHandlers_=function(){var i=this;this.update_=Lr(this,this.update),this.update=nf(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return i.enableInterval_(s)},this.disableIntervalHandler_=function(s){return i.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Dt()&&"visibilityState"in Dt()&&this.on(Dt(),"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(i){"hidden"===Dt().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},t.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&"ended"!==i.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(i){var s=this;if("hidden"!==Dt().visibilityState){var o=r.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var c=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),f=s.player_.liveTracker,m=s.player_.duration();f&&f.isLive()&&(m=s.player_.liveTracker.liveCurrentTime()),s.percent_!==o&&(s.el_.setAttribute("aria-valuenow",(100*o).toFixed(2)),s.percent_=o),(s.currentTime_!==c||s.duration_!==m)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[E0(c,m),E0(m,m)],"{1} of {2}")),s.currentTime_=c,s.duration_=m),s.bar&&s.bar.update(g0(s.el()),s.getProgress())}),o}},t.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var s,i=this.getCurrentTime_(),o=this.player_.liveTracker;return o&&o.isLive()?(s=(i-o.seekableStart())/o.liveWindow(),o.atLiveEdge()&&(s=1)):s=i/this.player_.duration(),s},t.handleMouseDown=function(i){!_w(i)||(i.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),r.prototype.handleMouseDown.call(this,i))},t.handleMouseMove=function(i){if(_w(i)){var s,o=this.calculateDistance(i),c=this.player_.liveTracker;if(c&&c.isLive()){if(o>=.99)return void c.seekToLiveEdge();var f=c.seekableStart(),m=c.liveCurrentTime();if((s=f+o*c.liveWindow())>=m&&(s=m),s<=f&&(s=f+.1),s===1/0)return}else(s=o*this.player_.duration())===this.player_.duration()&&(s-=.1);this.userSeek_(s)}},t.enable=function(){r.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.show()},t.disable=function(){r.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.hide()},t.handleMouseUp=function(i){r.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?bd(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},t.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(i){var s=this.player_.liveTracker;if(Dn().isEventKey(i,"Space")||Dn().isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(Dn().isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if(Dn().isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Dn()(i))){i.preventDefault(),i.stopPropagation();var o=10*(Dn().codes[Dn()(i)]-Dn().codes[0])/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*o):this.userSeek_(this.player_.duration()*o)}else Dn().isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Dn().isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):r.prototype.handleKeyDown.call(this,i)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Dt()&&"visibilityState"in Dt()&&this.off(Dt(),"visibilitychange",this.toggleVisibility_),r.prototype.dispose.call(this)},e}(wP);xP.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!Da&&!Xh&&xP.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),_t.registerComponent("SeekBar",xP);var QL=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).handleMouseMove=nf(Lr(Sn(s),s.handleMouseMove),30),s.throttledHandleMouseSeek=nf(Lr(Sn(s),s.handleMouseSeek),30),s.handleMouseUpHandler_=function(o){return s.handleMouseUp(o)},s.handleMouseDownHandler_=function(o){return s.handleMouseDown(o)},s.enable(),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(i){var s=this.getChild("seekBar");if(s){var o=s.getChild("playProgressBar"),c=s.getChild("mouseTimeDisplay");if(o||c){var f=s.el(),m=yw(f),_=PI(f,i).x;_=HI(_,0,1),c&&c.update(m,_),o&&o.update(m,s.getProgress())}}},t.handleMouseSeek=function(i){var s=this.getChild("seekBar");s&&s.handleMouseMove(i)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&bd(this.player_.play())}},t.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(i){var s=this.el_.ownerDocument,o=this.getChild("seekBar");o&&o.handleMouseDown(i),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.getChild("seekBar");s&&s.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e}(_t);QL.prototype.options_={children:["seekBar"]},_t.registerComponent("ProgressControl",QL);var XL=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,["enterpictureinpicture","leavepictureinpicture"],function(o){return s.handlePictureInPictureChange(o)}),s.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(o){return s.handlePictureInPictureEnabledChange(o)}),s.disable(),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+r.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){Dt().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},t.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(uc);XL.prototype.controlText_="Picture-in-Picture",_t.registerComponent("PictureInPictureToggle",XL);var JL=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,"fullscreenchange",function(o){return s.handleFullscreenChange(o)}),!1===Dt()[n.fsApi_.fullscreenEnabled]&&s.disable(),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+r.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(uc);JL.prototype.controlText_="Fullscreen",_t.registerComponent("FullscreenToggle",JL);var o6=function(r){function e(){return r.apply(this,arguments)||this}return Ot(e,r),e.prototype.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(r.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e}(_t);_t.registerComponent("VolumeLevel",o6);var a6=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=nf(Lr(Sn(s),s.update),30),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,o,c){if(!o){var f=g0(this.el_),m=g0(this.player_.el()),_=i.width*s;if(!m||!f)return;var w=i.left-m.left+_,C=i.width-_+(m.right-i.right),M=f.width/2;w<M?M+=M-w:C<M&&(M=C),M<0?M=0:M>f.width&&(M=f.width),this.el_.style.right="-"+M+"px"}this.write(c+"%")},t.write=function(i){xv(this.el_,i)},t.updateVolume=function(i,s,o,c,f){var m=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){m.update(i,s,o,c.toFixed(0)),f&&f()})},e}(_t);_t.registerComponent("VolumeLevelTooltip",a6);var eF=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=nf(Lr(Sn(s),s.update),30),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s,o){var c=this,f=100*s;this.getChild("volumeLevelTooltip").updateVolume(i,s,o,f,function(){o?c.el_.style.bottom=i.height*s+"px":c.el_.style.left=i.width*s+"px"})},e}(_t);eF.prototype.options_={children:["volumeLevelTooltip"]},_t.registerComponent("MouseVolumeLevelDisplay",eF);var $I=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on("slideractive",function(o){return s.updateLastVolume_(o)}),s.on(n,"volumechange",function(o){return s.updateARIAAttributes(o)}),n.ready(function(){return s.updateARIAAttributes()}),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(i){!_w(i)||r.prototype.handleMouseDown.call(this,i)},t.handleMouseMove=function(i){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var o=this.el(),c=g0(o),f=this.vertical(),m=PI(o,i);m=HI(m=f?m.y:m.x,0,1),s.update(c,m,f)}!_w(i)||(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(i){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var i=this,s=this.player_.volume();this.one("sliderinactive",function(){0===i.player_.volume()&&i.player_.lastVolume_(s)})},e}(wP);$I.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!Da&&!Xh&&$I.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),$I.prototype.playerEvent="volumechange",_t.registerComponent("VolumeBar",$I);var tF=function(r){function e(n,i){var s;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||fw(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(Sn(s=r.call(this,n,i)||this),n),s.throttledHandleMouseMove=nf(Lr(Sn(s),s.handleMouseMove),30),s.handleMouseUpHandler_=function(o){return s.handleMouseUp(o)},s.on("mousedown",function(o){return s.handleMouseDown(o)}),s.on("touchstart",function(o){return s.handleMouseDown(o)}),s.on("mousemove",function(o){return s.handleMouseMove(o)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},t.handleMouseDown=function(i){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e}(_t);tF.prototype.options_={children:["volumeBar"]},_t.registerComponent("VolumeControl",tF);var nF=function(r){function e(n,i){var s;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(Sn(s=r.call(this,n,i)||this),n),s.on(n,["loadstart","volumechange"],function(o){return s.update(o)}),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){var s=this.player_.volume(),o=this.player_.lastVolume_();0===s?(this.player_.volume(o<.1?.1:o),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},t.update=function(i){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var i=this.player_.volume(),s=3;Da&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===i||this.player_.muted()?s=0:i<.33?s=1:i<.67&&(s=2);for(var o=0;o<4;o++)vw(this.el_,"vjs-vol-"+o);ef(this.el_,"vjs-vol-"+s)},t.updateControlText_=function(){var s=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},e}(uc);nF.prototype.controlText_="Mute",_t.registerComponent("MuteToggle",nF);var rF=function(r){function e(n,i){var s;return void 0===i&&(i={}),i.inline=void 0===i.inline||i.inline,(void 0===i.volumeControl||fw(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(s=r.call(this,n,i)||this).handleKeyPressHandler_=function(o){return s.handleKeyPress(o)},s.on(n,["loadstart"],function(o){return s.volumePanelState_(o)}),s.on(s.muteToggle,"keyup",function(o){return s.handleKeyPress(o)}),s.on(s.volumeControl,"keyup",function(o){return s.handleVolumeControlKeyUp(o)}),s.on("keydown",function(o){return s.handleKeyPress(o)}),s.on("mouseover",function(o){return s.handleMouseOver(o)}),s.on("mouseout",function(o){return s.handleMouseOut(o)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}Ot(e,r);var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},t.dispose=function(){this.handleMouseOut(),r.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(i){Dn().isEventKey(i,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(i){this.addClass("vjs-hover"),cu(Dt(),"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(i){this.removeClass("vjs-hover"),Co(Dt(),"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(i){Dn().isEventKey(i,"Esc")&&this.handleMouseOut()},e}(_t);rF.prototype.options_={children:["muteToggle","volumeControl"]},_t.registerComponent("VolumePanel",rF);var iF=function(r){function e(n,i){var s;return s=r.call(this,n,i)||this,i&&(s.menuButton_=i.menuButton),s.focusedChild_=-1,s.on("keydown",function(o){return s.handleKeyDown(o)}),s.boundHandleBlur_=function(o){return s.handleBlur(o)},s.boundHandleTapClick_=function(o){return s.handleTapClick(o)},s}Ot(e,r);var t=e.prototype;return t.addEventListenerForItem=function(i){i instanceof _t&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(i){i instanceof _t&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(i){"string"==typeof i&&(i=this.getChild(i)),this.removeEventListenerForItem(i),r.prototype.removeChild.call(this,i)},t.addItem=function(i){var s=this.addChild(i);s&&this.addEventListenerForItem(s)},t.createEl=function(){this.contentEl_=or(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=r.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),cu(s,"click",function(o){o.preventDefault(),o.stopImmediatePropagation()}),s},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,r.prototype.dispose.call(this)},t.handleBlur=function(i){var s=i.relatedTarget||Dt().activeElement;if(!this.children().some(function(c){return c.el()===s})){var o=this.menuButton_;o&&o.buttonPressed_&&s!==o.el().firstChild&&o.unpressButton()}},t.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var o=s.filter(function(c){return c.el()===i.target})[0];if(!o)return;"CaptionSettingsMenuItem"!==o.name()&&this.menuButton_.focus()}},t.handleKeyDown=function(i){Dn().isEventKey(i,"Left")||Dn().isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(Dn().isEventKey(i,"Right")||Dn().isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},t.stepForward=function(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_+1),this.focus(i)},t.stepBack=function(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_-1),this.focus(i)},t.focus=function(i){void 0===i&&(i=0);var s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(i<0?i=0:i>=s.length&&(i=s.length-1),this.focusedChild_=i,s[i].el_.focus())},e}(_t);_t.registerComponent("Menu",iF);var IP=function(r){function e(n,i){var s;void 0===i&&(i={}),(s=r.call(this,n,i)||this).menuButton_=new uc(n,i),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var o=uc.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+o,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var c=function(m){return s.handleClick(m)};return s.handleMenuKeyUp_=function(f){return s.handleMenuKeyUp(f)},s.on(s.menuButton_,"tap",c),s.on(s.menuButton_,"click",c),s.on(s.menuButton_,"keydown",function(f){return s.handleKeyDown(f)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),cu(Dt(),"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(f){return s.handleMouseLeave(f)}),s.on("keydown",function(f){return s.handleSubmenuKeyDown(f)}),s}Ot(e,r);var t=e.prototype;return t.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.createMenu=function(){var i=new iF(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=or("li",{className:"vjs-menu-title",textContent:Ui(this.options_.title),tabIndex:-1}),o=new _t(this.player_,{el:s});i.addItem(o)}if(this.items=this.createItems(),this.items)for(var c=0;c<this.items.length;c++)i.addItem(this.items[c]);return i},t.createItems=function(){},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var i="vjs-menu-button";return"vjs-menu-button "+(i+=!0===this.options_.inline?"-inline":"-popup")+" "+uc.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var i="vjs-menu-button";return"vjs-menu-button "+(i+=!0===this.options_.inline?"-inline":"-popup")+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function(i,s){return void 0===s&&(s=this.menuButton_.el()),this.menuButton_.controlText(i,s)},t.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},t.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(i){this.removeClass("vjs-hover"),Co(Dt(),"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(i){Dn().isEventKey(i,"Esc")||Dn().isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),Dn().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(Dn().isEventKey(i,"Up")||Dn().isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(i){(Dn().isEventKey(i,"Esc")||Dn().isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},t.handleSubmenuKeyDown=function(i){(Dn().isEventKey(i,"Esc")||Dn().isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Dn().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Da&&aL())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(_t);_t.registerComponent("MenuButton",IP);var AP=function(r){function e(t,n){var i,s=n.tracks;if((i=r.call(this,t,n)||this).items.length<=1&&i.hide(),!s)return Sn(i);var o=Lr(Sn(i),i.update);return s.addEventListener("removetrack",o),s.addEventListener("addtrack",o),s.addEventListener("labelchange",o),i.player_.on("ready",o),i.player_.on("dispose",function(){s.removeEventListener("removetrack",o),s.removeEventListener("addtrack",o),s.removeEventListener("labelchange",o)}),i}return Ot(e,r),e}(IP);_t.registerComponent("TrackButton",AP);var l6=["Tab","Esc","Up","Down","Right","Left"],ww=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).selectable=i.selectable,s.isSelected_=i.selected||!1,s.multiSelectable=i.multiSelectable,s.selected(s.isSelected_),s.el_.setAttribute("role",s.selectable?s.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),s}Ot(e,r);var t=e.prototype;return t.createEl=function(i,s,o){this.nonIconControl=!0;var c=r.prototype.createEl.call(this,"li",Ii({className:"vjs-menu-item",tabIndex:-1},s),o);return c.replaceChild(or("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),c.querySelector(".vjs-icon-placeholder")),c},t.handleKeyDown=function(i){l6.some(function(s){return Dn().isEventKey(i,s)})||r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){this.selected(!0)},t.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(VI);_t.registerComponent("MenuItem",ww);var Sw=function(r){function e(n,i){var s,o=i.track,c=n.textTracks();i.label=o.label||o.language||"Unknown",i.selected="showing"===o.mode,(s=r.call(this,n,i)||this).track=o,s.kinds=(i.kinds||[i.kind||s.track.kind]).filter(Boolean);var _,f=function(){for(var C=arguments.length,M=new Array(C),L=0;L<C;L++)M[L]=arguments[L];s.handleTracksChange.apply(Sn(s),M)},m=function(){for(var C=arguments.length,M=new Array(C),L=0;L<C;L++)M[L]=arguments[L];s.handleSelectedLanguageChange.apply(Sn(s),M)};return n.on(["loadstart","texttrackchange"],f),c.addEventListener("change",f),c.addEventListener("selectedlanguagechange",m),s.on("dispose",function(){n.off(["loadstart","texttrackchange"],f),c.removeEventListener("change",f),c.removeEventListener("selectedlanguagechange",m)}),void 0===c.onchange&&s.on(["tap","click"],function(){if("object"!=typeof Ce().Event)try{_=new(Ce().Event)("change")}catch(w){}_||(_=Dt().createEvent("Event")).initEvent("change",!0,!0),c.dispatchEvent(_)}),s.handleTracksChange(),s}Ot(e,r);var t=e.prototype;return t.handleClick=function(i){var s=this.track,o=this.player_.textTracks();if(r.prototype.handleClick.call(this,i),o)for(var c=0;c<o.length;c++){var f=o[c];-1!==this.kinds.indexOf(f.kind)&&(f===s?"showing"!==f.mode&&(f.mode="showing"):"disabled"!==f.mode&&(f.mode="disabled"))}},t.handleTracksChange=function(i){var s="showing"===this.track.mode;s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(i){if("showing"===this.track.mode){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,r.prototype.dispose.call(this)},e}(ww);_t.registerComponent("TextTrackMenuItem",Sw);var sF=function(r){function e(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.track.label=i.label?i.label:i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,r.call(this,n,i)||this}Ot(e,r);var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),o=!0,c=0,f=s.length;c<f;c++){var m=s[c];if(this.options_.kinds.indexOf(m.kind)>-1&&"showing"===m.mode){o=!1;break}}o!==this.isSelected_&&this.selected(o)},t.handleSelectedLanguageChange=function(i){for(var s=this.player().textTracks(),o=!0,c=0,f=s.length;c<f;c++){var m=s[c];if(["captions","descriptions","subtitles"].indexOf(m.kind)>-1&&"showing"===m.mode){o=!1;break}}o&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Sw);_t.registerComponent("OffTextTrackMenuItem",sF);var S0=function(r){function e(n,i){return void 0===i&&(i={}),i.tracks=n.textTracks(),r.call(this,n,i)||this}return Ot(e,r),e.prototype.createItems=function(i,s){var o;void 0===i&&(i=[]),void 0===s&&(s=Sw),this.label_&&(o=this.label_+" off"),i.push(new sF(this.player_,{kinds:this.kinds_,kind:this.kind_,label:o})),this.hideThreshold_+=1;var c=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var f=0;f<c.length;f++){var m=c[f];if(this.kinds_.indexOf(m.kind)>-1){var _=new s(this.player_,{track:m,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});_.addClass("vjs-"+m.kind+"-menu-item"),i.push(_)}}return i},e}(AP);_t.registerComponent("TextTrackButton",S0);var oF=function(r){function e(n,i){var s,o=i.track,c=i.cue,f=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=c.text,i.selected=c.startTime<=f&&f<c.endTime,(s=r.call(this,n,i)||this).track=o,s.cue=c,o.addEventListener("cuechange",Lr(Sn(s),s.update)),s}Ot(e,r);var t=e.prototype;return t.handleClick=function(i){r.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.update=function(i){var s=this.cue,o=this.player_.currentTime();this.selected(s.startTime<=o&&o<s.endTime)},e}(ww);_t.registerComponent("ChaptersTrackMenuItem",oF);var DP=function(r){function e(n,i,s){return r.call(this,n,i,s)||this}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildWrapperCSSClass.call(this)},t.update=function(i){(!this.track_||i&&("addtrack"===i.type||"removetrack"===i.type))&&this.setTrack(this.findChaptersTrack()),r.prototype.update.call(this)},t.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var o=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);o&&o.addEventListener("load",this.updateHandler_)}}},t.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],s=i.length-1;s>=0;s--){var o=i[s];if(o.kind===this.kind_)return o}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ui(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),r.prototype.createMenu.call(this)},t.createItems=function(){var i=[];if(!this.track_)return i;var s=this.track_.cues;if(!s)return i;for(var o=0,c=s.length;o<c;o++){var m=new oF(this.player_,{track:this.track_,cue:s[o]});i.push(m)}return i},e}(S0);DP.prototype.kind_="chapters",DP.prototype.controlText_="Chapters",_t.registerComponent("ChaptersButton",DP);var kP=function(r){function e(n,i,s){var o;o=r.call(this,n,i,s)||this;var c=n.textTracks(),f=Lr(Sn(o),o.handleTracksChange);return c.addEventListener("change",f),o.on("dispose",function(){c.removeEventListener("change",f)}),o}Ot(e,r);var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),o=!1,c=0,f=s.length;c<f;c++){var m=s[c];if(m.kind!==this.kind_&&"showing"===m.mode){o=!0;break}}o?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildWrapperCSSClass.call(this)},e}(S0);kP.prototype.kind_="descriptions",kP.prototype.controlText_="Descriptions",_t.registerComponent("DescriptionsButton",kP);var PP=function(r){function e(n,i,s){return r.call(this,n,i,s)||this}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildWrapperCSSClass.call(this)},e}(S0);PP.prototype.kind_="subtitles",PP.prototype.controlText_="Subtitles",_t.registerComponent("SubtitlesButton",PP);var MP=function(r){function e(n,i){var s;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(s=r.call(this,n,i)||this).addClass("vjs-texttrack-settings"),s.controlText(", opens "+i.kind+" settings dialog"),s}return Ot(e,r),e.prototype.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e}(Sw);_t.registerComponent("CaptionSettingsMenuItem",MP);var RP=function(r){function e(n,i,s){return r.call(this,n,i,s)||this}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new MP(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,i)},e}(S0);RP.prototype.kind_="captions",RP.prototype.controlText_="Captions",_t.registerComponent("CaptionsButton",RP);var aF=function(r){function e(){return r.apply(this,arguments)||this}return Ot(e,r),e.prototype.createEl=function(i,s,o){var c=r.prototype.createEl.call(this,i,s,o),f=c.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(f.appendChild(or("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(or("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),c},e}(Sw);_t.registerComponent("SubsCapsMenuItem",aF);var OP=function(r){function e(n,i){var s;return void 0===i&&(i={}),(s=r.call(this,n,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(Ui(s.label_)),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new MP(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,i,aF)},e}(S0);OP.prototype.kinds_=["captions","subtitles"],OP.prototype.controlText_="Subtitles",_t.registerComponent("SubsCapsButton",OP);var uF=function(r){function e(n,i){var s,o=i.track,c=n.audioTracks();i.label=o.label||o.language||"Unknown",i.selected=o.enabled,(s=r.call(this,n,i)||this).track=o,s.addClass("vjs-"+o.kind+"-menu-item");var f=function(){for(var _=arguments.length,w=new Array(_),C=0;C<_;C++)w[C]=arguments[C];s.handleTracksChange.apply(Sn(s),w)};return c.addEventListener("change",f),s.on("dispose",function(){c.removeEventListener("change",f)}),s}Ot(e,r);var t=e.prototype;return t.createEl=function(i,s,o){var c=r.prototype.createEl.call(this,i,s,o),f=c.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(f.appendChild(r.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(r.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),c},t.handleClick=function(i){r.prototype.handleClick.call(this,i),this.track.enabled=!0},t.handleTracksChange=function(i){this.selected(this.track.enabled)},e}(ww);_t.registerComponent("AudioTrackMenuItem",uF);var lF=function(r){function e(n,i){return void 0===i&&(i={}),i.tracks=n.audioTracks(),r.call(this,n,i)||this}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(i){void 0===i&&(i=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),o=0;o<s.length;o++)i.push(new uF(this.player_,{track:s[o],selectable:!0,multiSelectable:!1}));return i},e}(AP);lF.prototype.controlText_="Audio Track",_t.registerComponent("AudioTrackButton",lF);var NP=function(r){function e(n,i){var s,o=i.rate,c=parseFloat(o,10);return i.label=o,i.selected=c===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,(s=r.call(this,n,i)||this).label=o,s.rate=c,s.on(n,"ratechange",function(f){return s.update(f)}),s}Ot(e,r);var t=e.prototype;return t.handleClick=function(i){r.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e}(ww);NP.prototype.contentElType="button",_t.registerComponent("PlaybackRateMenuItem",NP);var cF=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(n,"loadstart",function(o){return s.updateVisibility(o)}),s.on(n,"ratechange",function(o){return s.updateLabel(o)}),s.on(n,"playbackrateschange",function(o){return s.handlePlaybackRateschange(o)}),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=or("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},t.dispose=function(){this.labelEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var i=this.playbackRates(),s=[],o=i.length-1;o>=0;o--)s.push(new NP(this.player(),{rate:i[o]+"x"}));return s},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(i){for(var s=this.player().playbackRate(),o=this.playbackRates(),c=o[0],f=0;f<o.length;f++)if(o[f]>s){c=o[f];break}this.player().playbackRate(c)},t.handlePlaybackRateschange=function(i){this.update()},t.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(IP);cF.prototype.controlText_="Playback Rate",_t.registerComponent("PlaybackRateMenuButton",cF);var dF=function(r){function e(){return r.apply(this,arguments)||this}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(i,s,o){return void 0===i&&(i="div"),void 0===s&&(s={}),void 0===o&&(o={}),s.className||(s.className=this.buildCSSClass()),r.prototype.createEl.call(this,i,s,o)},e}(_t);_t.registerComponent("Spacer",dF);var c6=function(r){function e(){return r.apply(this,arguments)||this}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},e}(dF);_t.registerComponent("CustomControlSpacer",c6);var qI=function(r){function e(){return r.apply(this,arguments)||this}return Ot(e,r),e.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(_t);qI.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Dt()&&qI.prototype.options_.children.splice(qI.prototype.options_.children.length-1,0,"pictureInPictureToggle"),_t.registerComponent("ControlBar",qI);var hF=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,"error",function(o){return s.open(o)}),s}Ot(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+r.prototype.buildCSSClass.call(this)},t.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e}(y0);hF.prototype.options_=sc({},y0.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),_t.registerComponent("ErrorDisplay",hF);var LP="vjs-text-track-settings",fF=["#000","Black"],pF=["#00F","Blue"],gF=["#0FF","Cyan"],mF=["#0F0","Green"],vF=["#F0F","Magenta"],yF=["#F00","Red"],_F=["#FFF","White"],bF=["#FF0","Yellow"],FP=["1","Opaque"],jP=["0.5","Semi-Transparent"],TF=["0","Transparent"],Mv={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[fF,_F,yF,mF,pF,bF,vF,gF]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[FP,jP,TF]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[_F,fF,yF,mF,pF,bF,vF,gF]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[FP,jP]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[TF,jP,FP]}};function EF(r,e){if(e&&(r=e(r)),r&&"none"!==r)return r}Mv.windowColor.options=Mv.backgroundColor.options;var f6=function(r){function e(n,i){var s;return i.temporary=!1,(s=r.call(this,n,i)||this).updateDisplay=s.updateDisplay.bind(Sn(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=or("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),void 0===i.persistTextTrackSettings&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),c0(Mv,function(o){s.on(s.$(o.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}Ot(e,r);var t=e.prototype;return t.dispose=function(){this.endDialog=null,r.prototype.dispose.call(this)},t.createElSelect_=function(i,s,o){var c=this;void 0===s&&(s=""),void 0===o&&(o="label");var f=Mv[i],m=f.id.replace("%s",this.id_),_=[s,m].join(" ").trim();return["<"+o+' id="'+m+'" class="'+("label"===o?"vjs-label":"")+'">',this.localize(f.label),"</"+o+">",'<select aria-labelledby="'+_+'">'].concat(f.options.map(function(w){var C=m+"-"+w[1].replace(/\W+/g,"");return['<option id="'+C+'" value="'+w[0]+'" ','aria-labelledby="'+_+" "+C+'">',c.localize(w[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return or("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return or("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var i=this.localize("restore all settings to the default values");return or("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var i=this;return function(r,e,t){return void 0===t&&(t=0),XN(r).reduce(function(n,i){return e(n,r[i],i)},t)}(Mv,function(s,o,c){var f=function(r,e){return EF(r.options[r.options.selectedIndex].value,e)}(i.$(o.selector),o.parser);return void 0!==f&&(s[c]=f),s},{})},t.setValues=function(i){var s=this;c0(Mv,function(o,c){!function(r,e,t){if(e)for(var n=0;n<r.options.length;n++)if(EF(r.options[n].value,t)===e){r.selectedIndex=n;break}}(s.$(o.selector),i[c],o.parser)})},t.setDefaults=function(){var i=this;c0(Mv,function(s){var o=s.hasOwnProperty("default")?s.default:0;i.$(s.selector).selectedIndex=o})},t.restoreSettings=function(){var i;try{i=JSON.parse(Ce().localStorage.getItem(LP))}catch(s){Ln.warn(s)}i&&this.setValues(i)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?Ce().localStorage.setItem(LP,JSON.stringify(i)):Ce().localStorage.removeItem(LP)}catch(s){Ln.warn(s)}}},t.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,s=i&&i.subsCapsButton,o=i&&i.captionsButton;s?s.focus():o&&o.focus()},e}(y0);_t.registerComponent("TextTrackSettings",f6);var p6=function(r){function e(n,i){var s,o=i.ResizeObserver||Ce().ResizeObserver;null===i.ResizeObserver&&(o=!1);var c=Zr({createEl:!o,reportTouchActivity:!1},i);return(s=r.call(this,n,c)||this).ResizeObserver=i.ResizeObserver||Ce().ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=function(e,t,n,i){void 0===i&&(i=Ce());var s,c=function(){var m=this,_=arguments,w=function(){s=null,w=null,e.apply(m,_)};i.clearTimeout(s),s=i.setTimeout(w,100)};return c.cancel=function(){i.clearTimeout(s),s=null},c}(function(){s.resizeHandler()},0,0,Sn(s)),o?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(n.el())):(s.loadListener_=function(){if(s.el_&&s.el_.contentWindow){var f=s.debouncedHandler_,m=s.unloadListener_=function(){Co(this,"resize",f),Co(this,"unload",m),m=null};cu(s.el_.contentWindow,"unload",m),cu(s.el_.contentWindow,"resize",f)}},s.one("load",s.loadListener_)),s}Ot(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,r.prototype.dispose.call(this)},e}(_t);_t.registerComponent("ResizeManager",p6);var g6={trackingThreshold:20,liveTolerance:15},m6=function(r){function e(n,i){var s,o=Zr(g6,i,{createEl:!1});return(s=r.call(this,n,o)||this).handleVisibilityChange_=function(c){return s.handleVisibilityChange(c)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(c){return s.handlePlay(c)},s.handleFirstTimeupdate_=function(c){return s.handleFirstTimeupdate(c)},s.handleSeeked_=function(c){return s.handleSeeked(c)},s.seekToLiveEdge_=function(c){return s.seekToLiveEdge(c)},s.reset_(),s.on(s.player_,"durationchange",function(c){return s.handleDurationchange(c)}),s.one(s.player_,"canplay",function(){return s.toggleTracking()}),mw&&"hidden"in Dt()&&"visibilityState"in Dt()&&s.on(Dt(),"visibilitychange",s.handleVisibilityChange_),s}Ot(e,r);var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Dt().hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var i=this.player_.seekable();if(i&&i.length){var s=Number(Ce().performance.now().toFixed(4)),o=-1===this.lastTime_?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+o;var c=this.liveCurrentTime(),f=this.player_.currentTime(),m=this.player_.paused()||this.seekedBehindLive_||Math.abs(c-f)>this.options_.liveTolerance;(!this.timeupdateSeen_||c===1/0)&&(m=!1),m!==this.behindLiveEdge_&&(this.behindLiveEdge_=m,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var i=this.player_.seekable(),s=[],o=i?i.length:0;o--;)s.push(i.end(o));return s.length?s.sort()[s.length-1]:1/0},t.seekableStart=function(){for(var i=this.player_.seekable(),s=[],o=i?i.length:0;o--;)s.push(i.start(o));return s.length?s.sort()[0]:0},t.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var i=this.seekableEnd();return-1!==this.lastSeekEnd_&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(Dt(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),r.prototype.dispose.call(this)},e}(_t);_t.registerComponent("LiveTracker",m6);var WI,UP=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],s="";if(!n.length)return!1;for(var o=0;o<n.length;o++){var c=n[o].src;c&&-1===i.indexOf(c)&&i.push(c)}return!!i.length&&(1===i.length&&(s=i[0]),e.triggerSourceset(s),!0)},v6=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Dt().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=Dt().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Ce().Element.prototype.appendChild.call(this,n),this.innerHTML}}),wF=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},SF=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=function(e){return wF([e.el(),Ce().HTMLMediaElement.prototype,Ce().Element.prototype,v6],"innerHTML")}(e),s=function(c){return function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];var w=c.apply(t,m);return UP(e),w}};["append","appendChild","insertAdjacentHTML"].forEach(function(o){!t[o]||(n[o]=t[o],t[o]=s(n[o]))}),Object.defineProperty(t,"innerHTML",Zr(i,{set:s(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach(function(o){t[o]=n[o]}),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},_6=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?OL(Ce().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Ce().Element.prototype.setAttribute.call(this,"src",e),e}}),BP=function(e,t,n,i){void 0===i&&(i=!0);var s=function(f){return Object.defineProperty(e,t,{value:f,enumerable:!0,writable:!0})},o={configurable:!0,enumerable:!0,get:function(){var f=n();return s(f),f}};return i&&(o.set=s),Object.defineProperty(e,t,o)},Kt=function(r){function e(n,i){var s;s=r.call(this,n,i)||this;var o=n.source,c=!1;if(o&&(s.el_.currentSrc!==o.src||n.tag&&3===n.tag.initNetworkState_)?s.setSource(o):s.handleLateInit_(s.el_),n.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var f=s.el_.childNodes,m=f.length,_=[];m--;){var w=f[m];"track"===w.nodeName.toLowerCase()&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(w),s.remoteTextTracks().addTrack(w.track),s.textTracks().addTrack(w.track),!c&&!s.el_.hasAttribute("crossorigin")&&jI(w.src)&&(c=!0)):_.push(w))}for(var M=0;M<_.length;M++)s.el_.removeChild(_[M])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&c&&Ln.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),s.restoreMetadataTracksInIOSNativePlayer_(),(d0||Kk||tL)&&!0===n.nativeControlsForTouch&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}Ot(e,r);var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,r.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return wF([e.el(),Ce().HTMLMediaElement.prototype,_6],"src")}(e),i=t.setAttribute,s=t.load;Object.defineProperty(t,"src",Zr(n,{set:function(c){var f=n.set.call(t,c);return e.triggerSourceset(t.src),f}})),t.setAttribute=function(o,c){var f=i.call(t,o,c);return/src/i.test(o)&&e.triggerSourceset(t.src),f},t.load=function(){var o=s.call(t);return UP(e)||(e.triggerSourceset(""),SF(e)),o},t.currentSrc?e.triggerSourceset(t.currentSrc):UP(e)||SF(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=s,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var s,i=this.textTracks(),o=function(){s=[];for(var m=0;m<i.length;m++){var _=i[m];"metadata"===_.kind&&s.push({track:_,storedMode:_.mode})}};o(),i.addEventListener("change",o),this.on("dispose",function(){return i.removeEventListener("change",o)});var c=function f(){for(var m=0;m<s.length;m++){var _=s[m];"disabled"===_.track.mode&&_.track.mode!==_.storedMode&&(_.track.mode=_.storedMode)}i.removeEventListener("change",f)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",o),i.removeEventListener("change",c),i.addEventListener("change",c)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",o),i.addEventListener("change",o),i.removeEventListener("change",c)})},t.overrideNative_=function(i,s){var o=this;if(s===this["featuresNative"+i+"Tracks"]){var c=i.toLowerCase();this[c+"TracksListeners_"]&&Object.keys(this[c+"TracksListeners_"]).forEach(function(f){o.el()[c+"Tracks"].removeEventListener(f,o[c+"TracksListeners_"][f])}),this["featuresNative"+i+"Tracks"]=!s,this[c+"TracksListeners_"]=null,this.proxyNativeTracksForType_(c)}},t.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},t.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},t.proxyNativeTracksForType_=function(i){var s=this,o=Vu[i],c=this.el()[o.getterName],f=this[o.getterName]();if(this["featuresNative"+o.capitalName+"Tracks"]&&c&&c.addEventListener){var m={change:function(C){var M={type:"change",target:f,currentTarget:f,srcElement:f};f.trigger(M),"text"===i&&s[T0.remoteText.getterName]().trigger(M)},addtrack:function(C){f.addTrack(C.track)},removetrack:function(C){f.removeTrack(C.track)}},_=function(){for(var C=[],M=0;M<f.length;M++){for(var L=!1,V=0;V<c.length;V++)if(c[V]===f[M]){L=!0;break}L||C.push(f[M])}for(;C.length;)f.removeTrack(C.shift())};this[o.getterName+"Listeners_"]=m,Object.keys(m).forEach(function(w){var C=m[w];c.addEventListener(w,C),s.on("dispose",function(M){return c.removeEventListener(w,C)})}),this.on("loadstart",_),this.on("dispose",function(w){return s.off("loadstart",_)})}},t.proxyNativeTracks_=function(){var i=this;Vu.names.forEach(function(s){i.proxyNativeTracksForType_(s)})},t.createEl=function(){var i=this.options_.tag;if(!i||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(i){var s=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(s,i),e.disposeMediaElement(i),i=s}else{i=Dt().createElement("video");var c=Zr({},this.options_.tag&&tf(this.options_.tag));(!d0||!0!==this.options_.nativeControlsForTouch)&&delete c.controls,cL(i,Ii(c,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}void 0!==this.options_.preload&&p0(i,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var f=["loop","muted","playsinline","autoplay"],m=0;m<f.length;m++){var _=f[m],w=this.options_[_];void 0!==w&&(w?p0(i,_,_):kI(i,_),i[_]=w)}return i},t.handleLateInit_=function(i){if(0!==i.networkState&&3!==i.networkState){if(0===i.readyState){var s=!1,o=function(){s=!0};this.on("loadstart",o);var c=function(){s||this.trigger("loadstart")};return this.on("loadedmetadata",c),void this.ready(function(){this.off("loadstart",o),this.off("loadedmetadata",c),s||this.trigger("loadstart")})}var f=["loadstart"];f.push("loadedmetadata"),i.readyState>=2&&f.push("loadeddata"),i.readyState>=3&&f.push("canplay"),i.readyState>=4&&f.push("canplaythrough"),this.ready(function(){f.forEach(function(m){this.trigger(m)},this)})}},t.setScrubbing=function(i){this.isScrubbing_=i},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&DI?this.el_.fastSeek(i):this.el_.currentTime=i}catch(s){Ln(s,"Video is not ready. (Video.js)")}},t.duration=function(){var i=this;return this.el_.duration===1/0&&Xh&&Jh&&0===this.el_.currentTime?(this.on("timeupdate",function o(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",o))}),NaN):this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},o=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",o),this.on("dispose",function(){i.off("webkitbeginfullscreen",o),i.off("webkitendfullscreen",s)})}},t.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var i=Ce().navigator&&Ce().navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},t.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)bd(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},t.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.src=function(i){if(void 0===i)return this.el_.src;this.setSrc(i)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(i){this.el_.controls=!!i},t.addTextTrack=function(i,s,o){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,s,o):r.prototype.addTextTrack.call(this,i,s,o)},t.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return r.prototype.createRemoteTextTrack.call(this,i);var s=Dt().createElement("track");return i.kind&&(s.kind=i.kind),i.label&&(s.label=i.label),(i.language||i.srclang)&&(s.srclang=i.language||i.srclang),i.default&&(s.default=i.default),i.id&&(s.id=i.id),i.src&&(s.src=i.src),s},t.addRemoteTextTrack=function(i,s){var o=r.prototype.addRemoteTextTrack.call(this,i,s);return this.featuresNativeTextTracks&&this.el().appendChild(o),o},t.removeRemoteTextTrack=function(i){if(r.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var s=this.$$("track"),o=s.length;o--;)(i===s[o]||i===s[o].track)&&this.el().removeChild(s[o])},t.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),Ce().performance&&"function"==typeof Ce().performance.now?i.creationTime=Ce().performance.now():Ce().performance&&Ce().performance.timing&&"number"==typeof Ce().performance.timing.navigationStart&&(i.creationTime=Ce().Date.now()-Ce().performance.timing.navigationStart),i},e}(Fr);BP(Kt,"TEST_VID",function(){if(h0()){var r=Dt().createElement("video"),e=Dt().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r}}),Kt.isSupported=function(){try{Kt.TEST_VID.volume=.5}catch(r){return!1}return!(!Kt.TEST_VID||!Kt.TEST_VID.canPlayType)},Kt.canPlayType=function(r){return Kt.TEST_VID.canPlayType(r)},Kt.canPlaySource=function(r,e){return Kt.canPlayType(r.type)},Kt.canControlVolume=function(){try{var r=Kt.TEST_VID.volume;return Kt.TEST_VID.volume=r/2+.1,r!==Kt.TEST_VID.volume}catch(e){return!1}},Kt.canMuteVolume=function(){try{var r=Kt.TEST_VID.muted;return Kt.TEST_VID.muted=!r,Kt.TEST_VID.muted?p0(Kt.TEST_VID,"muted","muted"):kI(Kt.TEST_VID,"muted"),r!==Kt.TEST_VID.muted}catch(e){return!1}},Kt.canControlPlaybackRate=function(){if(Xh&&Jh&&rL<58)return!1;try{var r=Kt.TEST_VID.playbackRate;return Kt.TEST_VID.playbackRate=r/2+.1,r!==Kt.TEST_VID.playbackRate}catch(e){return!1}},Kt.canOverrideAttributes=function(){try{var r=function(){};Object.defineProperty(Dt().createElement("video"),"src",{get:r,set:r}),Object.defineProperty(Dt().createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(Dt().createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(Dt().createElement("audio"),"innerHTML",{get:r,set:r})}catch(e){return!1}return!0},Kt.supportsNativeTextTracks=function(){return DI||Da&&Jh},Kt.supportsNativeVideoTracks=function(){return!(!Kt.TEST_VID||!Kt.TEST_VID.videoTracks)},Kt.supportsNativeAudioTracks=function(){return!(!Kt.TEST_VID||!Kt.TEST_VID.audioTracks)},Kt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(r){var t=r[1];BP(Kt.prototype,r[0],function(){return Kt[t]()},!0)}),Kt.prototype.movingMediaElementInDOM=!Da,Kt.prototype.featuresFullscreenResize=!0,Kt.prototype.featuresProgressEvents=!0,Kt.prototype.featuresTimeupdateEvents=!0,Kt.patchCanPlayType=function(){Wk>=4&&!nL&&!Jh&&(WI=Kt.TEST_VID&&Kt.TEST_VID.constructor.prototype.canPlayType,Kt.TEST_VID.constructor.prototype.canPlayType=function(r){return r&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(r)?"maybe":WI.call(this,r)})},Kt.unpatchCanPlayType=function(){var r=Kt.TEST_VID.constructor.prototype.canPlayType;return WI&&(Kt.TEST_VID.constructor.prototype.canPlayType=WI),r},Kt.patchCanPlayType(),Kt.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),"function"==typeof r.load&&function(){try{r.load()}catch(e){}}()}},Kt.resetMediaElement=function(r){if(r){for(var e=r.querySelectorAll("source"),t=e.length;t--;)r.removeChild(e[t]);r.removeAttribute("src"),"function"==typeof r.load&&function(){try{r.load()}catch(n){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){Kt.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){Kt.prototype["set"+Ui(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){Kt.prototype[r]=function(){return this.el_[r]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){Kt.prototype["set"+Ui(r)]=function(e){this.el_[r]=e}}),["pause","load","play"].forEach(function(r){Kt.prototype[r]=function(){return this.el_[r]()}}),Fr.withSourceHandlers(Kt),Kt.nativeSourceHandler={},Kt.nativeSourceHandler.canPlayType=function(r){try{return Kt.TEST_VID.canPlayType(r)}catch(e){return""}},Kt.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return Kt.nativeSourceHandler.canPlayType(r.type);if(r.src){var t=pP(r.src);return Kt.nativeSourceHandler.canPlayType("video/"+t)}return""},Kt.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)},Kt.nativeSourceHandler.dispose=function(){},Kt.registerSourceHandler(Kt.nativeSourceHandler),Fr.registerTech("Html5",Kt);var CF=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],VP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},HP=["tiny","xsmall","small","medium","large","xlarge","huge"],zI={};HP.forEach(function(r){var e="x"===r.charAt(0)?"x-"+r.substring(1):r;zI[r]="vjs-layout-"+e});var E6={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ns=function(r){function e(n,i,s){var o;if(n.id=n.id||i.id||"vjs_video_"+og(),(i=Ii(e.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var c=n.closest("[lang]");c&&c.getAttribute&&(i.language=c.getAttribute("lang"))}else for(var f=n;f&&1===f.nodeType;){if(tf(f).hasOwnProperty("lang")){i.language=f.getAttribute("lang");break}f=f.parentNode}if((o=r.call(this,null,i,s)||this).boundDocumentFullscreenChange_=function(C){return o.documentFullscreenChange_(C)},o.boundFullWindowOnEscKey_=function(C){return o.fullWindowOnEscKey(C)},o.boundUpdateStyleEl_=function(C){return o.updateStyleEl_(C)},o.boundApplyInitTime_=function(C){return o.applyInitTime_(C)},o.boundUpdateCurrentBreakpoint_=function(C){return o.updateCurrentBreakpoint_(C)},o.boundHandleTechClick_=function(C){return o.handleTechClick_(C)},o.boundHandleTechDoubleClick_=function(C){return o.handleTechDoubleClick_(C)},o.boundHandleTechTouchStart_=function(C){return o.handleTechTouchStart_(C)},o.boundHandleTechTouchMove_=function(C){return o.handleTechTouchMove_(C)},o.boundHandleTechTouchEnd_=function(C){return o.handleTechTouchEnd_(C)},o.boundHandleTechTap_=function(C){return o.handleTechTap_(C)},o.isFullscreen_=!1,o.log=QN(o.id_),o.fsApi_=CI,o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,o.debugEnabled_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=n,o.tagAttributes=n&&tf(n),o.language(o.options_.language),i.languages){var m={};Object.getOwnPropertyNames(i.languages).forEach(function(C){m[C.toLowerCase()]=i.languages[C]}),o.languages_=m}else o.languages_=e.prototype.options_.languages;o.resetCache_(),o.poster_=i.poster||"",o.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),o.changingSrc_=!1,o.playCallbacks_=[],o.playTerminatedQueue_=[],n.hasAttribute("autoplay")?o.autoplay(!0):o.autoplay(o.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(C){if("function"!=typeof o[C])throw new Error('plugin "'+C+'" does not exist')}),o.scrubbing_=!1,o.el_=o.createEl(),sP(Sn(o),{eventBusKey:"el_"}),o.fsApi_.requestFullscreen&&(cu(Dt(),o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_),o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)),o.fluid_&&o.on(["playerreset","resize"],o.boundUpdateStyleEl_);var _=Zr(o.options_);i.plugins&&Object.keys(i.plugins).forEach(function(C){o[C](i.plugins[C])}),i.debug&&o.debug(!0),o.options_.playerOptions=_,o.middleware_=[],o.playbackRates(i.playbackRates),o.initChildren(),o.isAudio("audio"===n.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),d0&&o.addClass("vjs-touch-enabled"),Da||o.addClass("vjs-workinghover"),e.players[o.id_]=Sn(o);var w="7.17.0".split(".")[0];return o.addClass("vjs-v"+w),o.userActive(!0),o.reportUserActivity(),o.one("play",function(C){return o.listenForUserActivity_(C)}),o.on("stageclick",function(C){return o.handleStageClick_(C)}),o.on("keydown",function(C){return o.handleKeyDown(C)}),o.on("languagechange",function(C){return o.handleLanguagechange(C)}),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o}Ot(e,r);var t=e.prototype;return t.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),Co(Dt(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Co(Dt(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(r){gP[r.id()]=null}(this),Jo.names.forEach(function(s){var c=i[Jo[s].getterName]();c&&c.off&&c.off()}),r.prototype.dispose.call(this)},t.createEl=function(){var s,i=this.tag,o=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),c="video-js"===this.tag.tagName.toLowerCase();o?s=this.el_=i.parentNode:c||(s=this.el_=r.prototype.createEl.call(this,"div"));var f=tf(i);if(c){for(s=this.el_=i,i=this.tag=Dt().createElement("video");s.children.length;)i.appendChild(s.firstChild);Iv(s,"video-js")||ef(s,"video-js"),s.appendChild(i),o=this.playerElIngest_=s,Object.keys(s).forEach(function(L){try{i[L]=s[L]}catch(V){}})}if(i.setAttribute("tabindex","-1"),f.tabindex="-1",(mw||Jh&&iL)&&(i.setAttribute("role","application"),f.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in f&&delete f.width,"height"in f&&delete f.height,Object.getOwnPropertyNames(f).forEach(function(L){c&&"class"===L||s.setAttribute(L,f[L]),c&&i.setAttribute(L,f[L])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=s.player=this,this.addClass("vjs-paused"),!0!==Ce().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=bL("vjs-styles-dimensions");var m=sg(".vjs-styles-defaults"),_=sg("head");_.insertBefore(this.styleEl_,m?m.nextSibling:_.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var w=i.getElementsByTagName("a"),C=0;C<w.length;C++){var M=w.item(C);ef(M,"vjs-hidden"),M.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!o&&i.parentNode.insertBefore(s,i),Yk(i,s),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},t.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");"anonymous"===i||"use-credentials"===i?this.techCall_("setCrossOrigin",i):Ln.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"')},t.width=function(i){return this.dimension("width",i)},t.height=function(i){return this.dimension("height",i)},t.dimension=function(i,s){var o=i+"_";if(void 0===s)return this[o]||0;if(""===s||"auto"===s)return this[o]=void 0,void this.updateStyleEl_();var c=parseFloat(s);isNaN(c)?Ln.error('Improper value "'+s+'" supplied for for '+i):(this[o]=c,this.updateStyleEl_())},t.fluid=function(i){var s=this;if(void 0===i)return!!this.fluid_;this.fluid_=!!i,rf(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),function(e,t){rf(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))}(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(i){if(void 0===i)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(i){if(void 0===i)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(!0!==Ce().VIDEOJS_NO_DYNAMIC_STYLE){var c,f,_,w=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),C=w[1]/w[0];c=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/C:this.videoWidth()||300,f=void 0!==this.height_?this.height_:c*C,_=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(_),TL(this.styleEl_,"\n      ."+_+" {\n        width: "+c+"px;\n        height: "+f+"px;\n      }\n\n      ."+_+".vjs-fluid {\n        padding-top: "+100*C+"%;\n      }\n    ")}else{var i="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(i>=0&&(o.width=i),s>=0&&(o.height=s))}},t.loadTech_=function(i,s){var o=this;this.tech_&&this.unloadTech_();var c=Ui(i),f=i.charAt(0).toLowerCase()+i.slice(1);"Html5"!==c&&this.tag&&(Fr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=c,this.isReady_=!1;var m=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(m=!1);var _={source:s,autoplay:m,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+f+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Jo.names.forEach(function(C){var M=Jo[C];_[M.getterName]=o[M.privateName]}),Ii(_,this.options_[c]),Ii(_,this.options_[f]),Ii(_,this.options_[i.toLowerCase()]),this.tag&&(_.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(_.startTime=this.cache_.currentTime);var w=Fr.getTech(i);if(!w)throw new Error("No Tech named '"+c+"' exists! '"+c+"' should be registered using videojs.registerTech()'");this.tech_=new w(_),this.tech_.ready(Lr(this,this.handleTechReady_),!0),function(e,t){e.forEach(function(n){var i=t.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(s){return i.addCue(s)})}),t.textTracks()}(this.textTracksJson_||[],this.tech_),CF.forEach(function(C){o.on(o.tech_,C,function(M){return o["handleTech"+Ui(C)+"_"](M)})}),Object.keys(VP).forEach(function(C){o.on(o.tech_,C,function(M){0===o.tech_.playbackRate()&&o.tech_.seeking()?o.queuedCallbacks_.push({callback:o["handleTech"+VP[C]+"_"].bind(o),event:M}):o["handleTech"+VP[C]+"_"](M)})}),this.on(this.tech_,"loadstart",function(C){return o.handleTechLoadStart_(C)}),this.on(this.tech_,"sourceset",function(C){return o.handleTechSourceset_(C)}),this.on(this.tech_,"waiting",function(C){return o.handleTechWaiting_(C)}),this.on(this.tech_,"ended",function(C){return o.handleTechEnded_(C)}),this.on(this.tech_,"seeking",function(C){return o.handleTechSeeking_(C)}),this.on(this.tech_,"play",function(C){return o.handleTechPlay_(C)}),this.on(this.tech_,"firstplay",function(C){return o.handleTechFirstPlay_(C)}),this.on(this.tech_,"pause",function(C){return o.handleTechPause_(C)}),this.on(this.tech_,"durationchange",function(C){return o.handleTechDurationChange_(C)}),this.on(this.tech_,"fullscreenchange",function(C,M){return o.handleTechFullscreenChange_(C,M)}),this.on(this.tech_,"fullscreenerror",function(C,M){return o.handleTechFullscreenError_(C,M)}),this.on(this.tech_,"enterpictureinpicture",function(C){return o.handleTechEnterPictureInPicture_(C)}),this.on(this.tech_,"leavepictureinpicture",function(C){return o.handleTechLeavePictureInPicture_(C)}),this.on(this.tech_,"error",function(C){return o.handleTechError_(C)}),this.on(this.tech_,"posterchange",function(C){return o.handleTechPosterChange_(C)}),this.on(this.tech_,"textdata",function(C){return o.handleTechTextData_(C)}),this.on(this.tech_,"ratechange",function(C){return o.handleTechRateChange_(C)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==c||!this.tag)&&Yk(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var i=this;Jo.names.forEach(function(s){var o=Jo[s];i[o.privateName]=i[o.getterName]()}),this.textTracksJson_=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(s){return s.track});return Array.prototype.map.call(t,function(s){var o=uP(s.track);return s.src&&(o.src=s.src),o}).concat(Array.prototype.filter.call(e.textTracks(),function(s){return-1===n.indexOf(s)}).map(uP))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(i){return void 0===i&&Ln.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(i){var s=this;if(this.tech_&&"string"==typeof i){var c,o=function(){var m=s.muted();s.muted(!0);var _=function(){s.muted(m)};s.playTerminatedQueue_.push(_);var w=s.play();if(Tw(w))return w.catch(function(C){throw _(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(C||""))})};if("any"!==i||this.muted()?c="muted"!==i||this.muted()?this.play():o():Tw(c=this.play())&&(c=c.catch(o)),Tw(c))return c.then(function(){s.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:i})})}},t.updateSourceCaches_=function(i){void 0===i&&(i="");var s=i,o="";"string"!=typeof s&&(s=i.src,o=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!o&&(o=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(c){return c.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),s=0;s<i.length;s++){var o=i[s];if(o.type&&o.src&&o.src===t)return o.type}return BI(t)}(this,s)),this.cache_.source=Zr({},i,{src:s,type:o});for(var c=this.cache_.sources.filter(function(M){return M.src&&M.src===s}),f=[],m=this.$$("source"),_=[],w=0;w<m.length;w++){var C=tf(m[w]);f.push(C),C.src&&C.src===s&&_.push(C.src)}_.length&&!c.length?this.cache_.sources=f:c.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},t.handleTechSourceset_=function(i){var s=this;if(!this.changingSrc_){var o=function(_){return s.updateSourceCaches_(_)},c=this.currentSource().src,f=i.src;c&&!/^blob:/.test(c)&&/^blob:/.test(f)&&(!this.lastSource_||this.lastSource_.tech!==f&&this.lastSource_.player!==c)&&(o=function(){}),o(f),i.src||this.tech_.any(["sourceset","loadstart"],function(m){if("sourceset"!==m.type){var _=s.techGet("currentSrc");s.lastSource_.tech=_,s.updateSourceCaches_(_)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},t.hasStarted=function(i){if(void 0===i)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime();this.on("timeupdate",function c(){s!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",c))})},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(Ln.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(i){!this.controls_||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,i):this.paused()?bd(this.play()):this.pause())},t.handleTechDoubleClick_=function(i){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(o){return o.contains(i.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(i){var s=i.target.player;if(!s||s===this){var o=this.el(),c=Dt()[this.fsApi_.fullscreenElement]===o;!c&&o.matches?c=o.matches(":"+this.fsApi_.fullscreen):!c&&o.msMatchesSelector&&(c=o.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(c)}},t.handleTechFullscreenChange_=function(i,s){s&&(s.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(s.isFullscreen))},t.handleTechFullscreenError_=function(i,s){this.trigger("fullscreenerror",s)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var i=this.tech_.error();this.error(i)},t.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(i,s){this.ready(function(){if(i in B8)return function(r,e,t,n){return e[t](r.reduce(mP(t),n))}(this.middleware_,this.tech_,i,s);if(i in HL)return VL(this.middleware_,this.tech_,i,s);try{this.tech_&&this.tech_[i](s)}catch(o){throw Ln(o),o}},!0)},t.techGet_=function(i){if(this.tech_&&this.tech_.isReady_){if(i in U8)return function(r,e,t){return r.reduceRight(mP(t),e[t]())}(this.middleware_,this.tech_,i);if(i in HL)return VL(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(s){throw void 0===this.tech_[i]?(Ln("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",s),s):"TypeError"===s.name?(Ln("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(Ln(s),s)}}},t.play=function(){var i=this,s=this.options_.Promise||Ce().Promise;return s?new s(function(o){i.play_(o)}):this.play_()},t.play_=function(i){var s=this;void 0===i&&(i=bd),this.playCallbacks_.push(i);var o=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!o)return this.waitToPlay_=function(f){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!o&&(DI||Da)&&this.load());var c=this.techGet_("play");null===c?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(c)},t.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(s){s()})},t.runPlayCallbacks_=function(i){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(o){o(i)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return!1!==this.techGet_("paused")},t.played=function(){return this.techGet_("played")||Dv(0,0)},t.scrubbing=function(i){if(void 0===i)return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(i){return void 0!==i?(i<0&&(i=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",i),void(this.cache_.initTime=0)):(this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(i){if(void 0===i)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(i=parseFloat(i))<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=Dv(0,0)),i},t.bufferedPercent=function(){return DL(this.buffered(),this.duration())},t.bufferedEnd=function(){var i=this.buffered(),s=this.duration(),o=i.end(i.length-1);return o>s&&(o=s),o},t.volume=function(i){var s;return void 0!==i?(s=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=s,this.techCall_("setVolume",s),void(s>0&&this.lastVolume_(s))):(s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s)},t.muted=function(i){if(void 0===i)return this.techGet_("muted")||!1;this.techCall_("setMuted",i)},t.defaultMuted=function(i){return void 0!==i?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(i){if(void 0===i||0===i)return this.cache_.lastVolume;this.cache_.lastVolume=i},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(i){if(void 0!==i){var s=this.isFullscreen_;return this.isFullscreen_=Boolean(i),this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},t.requestFullscreen=function(i){var s=this.options_.Promise||Ce().Promise;if(s){var o=this;return new s(function(c,f){function m(){o.off("fullscreenerror",w),o.off("fullscreenchange",_)}function _(){m(),c()}function w(M,L){m(),f(L)}o.one("fullscreenchange",_),o.one("fullscreenerror",w);var C=o.requestFullscreenHelper_(i);C&&(C.then(m,m),C.then(c,f))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(i){var o,s=this;if(this.fsApi_.prefixed||(o=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==i&&(o=i)),this.fsApi_.requestFullscreen){var c=this.el_[this.fsApi_.requestFullscreen](o);return c&&c.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),c}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var i=this.options_.Promise||Ce().Promise;if(i){var s=this;return new i(function(o,c){function f(){s.off("fullscreenerror",_),s.off("fullscreenchange",m)}function m(){f(),o()}function _(C,M){f(),c(M)}s.one("fullscreenchange",m),s.one("fullscreenerror",_);var w=s.exitFullscreenHelper_();w&&(w.then(f,f),w.then(o,c))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var s=Dt()[this.fsApi_.exitFullscreen]();return s&&bd(s.then(function(){return i.isFullscreen(!1)})),s}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Dt().documentElement.style.overflow,cu(Dt(),"keydown",this.boundFullWindowOnEscKey_),Dt().documentElement.style.overflow="hidden",ef(Dt().body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(i){Dn().isEventKey(i,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Co(Dt(),"keydown",this.boundFullWindowOnEscKey_),Dt().documentElement.style.overflow=this.docOrigOverflow,vw(Dt().body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(i){if(void 0===i)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(i){return void 0!==i?(this.isInPictureInPicture_=!!i,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Dt()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Dt())return Dt().exitPictureInPicture()},t.handleKeyDown=function(i){var f,m,s=this.options_.userActions;s&&s.hotkeys&&(m=(f=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),f.isContentEditable||("input"===m?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(f.type):-1!==["textarea"].indexOf(m))||("function"==typeof s.hotkeys?s.hotkeys.call(this,i):this.handleHotkeys(i)))},t.handleHotkeys=function(i){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},o=s.fullscreenKey,f=s.muteKey,m=void 0===f?function(V){return Dn().isEventKey(V,"m")}:f,_=s.playPauseKey,w=void 0===_?function(V){return Dn().isEventKey(V,"k")||Dn().isEventKey(V,"Space")}:_;if((void 0===o?function(V){return Dn().isEventKey(V,"f")}:o).call(this,i)){i.preventDefault(),i.stopPropagation();var C=_t.getComponent("FullscreenToggle");!1!==Dt()[this.fsApi_.fullscreenEnabled]&&C.prototype.handleClick.call(this,i)}else m.call(this,i)?(i.preventDefault(),i.stopPropagation(),_t.getComponent("MuteToggle").prototype.handleClick.call(this,i)):w.call(this,i)&&(i.preventDefault(),i.stopPropagation(),_t.getComponent("PlayToggle").prototype.handleClick.call(this,i))},t.canPlayType=function(i){for(var s,o=0,c=this.options_.techOrder;o<c.length;o++){var f=c[o],m=Fr.getTech(f);if(m||(m=_t.getComponent(f)),m){if(m.isSupported()&&(s=m.canPlayType(i)))return s}else Ln.error('The "'+f+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.selectSource=function(i){var C,s=this,o=this.options_.techOrder.map(function(w){return[w,Fr.getTech(w)]}).filter(function(w){var C=w[0],M=w[1];return M?M.isSupported():(Ln.error('The "'+C+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),c=function(C,M,L){var V;return C.some(function(H){return M.some(function(Se){if(V=L(H,Se))return!0})}),V},_=function(C,M){var L=C[0];if(C[1].canPlaySource(M,s.options_[L.toLowerCase()]))return{source:M,tech:L}};return(this.options_.sourceOrder?c(i,o,(C=_,function(M,L){return C(L,M)})):c(o,i,_))||!1},t.handleSrc_=function(i,s){var o=this;if(void 0===i)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var c=W8(i);if(c.length){if(this.changingSrc_=!0,s||(this.cache_.sources=c),this.updateSourceCaches_(c[0]),N8(this,c[0],function(_,w){if(o.middleware_=w,s||(o.cache_.sources=c),o.updateSourceCaches_(_),o.src_(_))return c.length>1?o.handleSrc_(c.slice(1)):(o.changingSrc_=!1,o.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void o.triggerReady());!function(r,e){r.forEach(function(t){return t.setTech&&t.setTech(e)})}(w,o.tech_)}),this.options_.retryOnError&&c.length>1){var f=function(){o.error(null),o.handleSrc_(c.slice(1),!0)},m=function(){o.off("error",f)};this.one("error",f),this.one("playing",m),this.resetRetryOnError_=function(){o.off("error",f),o.off("playing",m)}}}else this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},t.src=function(i){return this.handleSrc_(i,!1)},t.src_=function(i){var s=this,o=this.selectSource([i]);return!o||(function(e,t){return Ui(e)===Ui(t)}(o.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(o.tech,o.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1))},t.load=function(){this.techCall_("load")},t.reset=function(){var i=this,s=this.options_.Promise||Ce().Promise;this.paused()||!s?this.doReset_():bd(this.play().then(function(){return i.doReset_()}))},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),rf(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar,s=i.durationDisplay,o=i.remainingTimeDisplay;s&&s.updateContent(),o&&o.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var i=this.currentSource(),s=[];return 0!==Object.keys(i).length&&s.push(i),this.cache_.sources||s},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(i){return void 0!==i?(this.techCall_("setPreload",i),void(this.options_.preload=i)):this.techGet_("preload")},t.autoplay=function(i){if(void 0===i)return this.options_.autoplay||!1;var s;"string"==typeof i&&/(any|play|muted)/.test(i)||!0===i&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_("string"==typeof i?i:"play"),s=!1):this.options_.autoplay=!!i,s=void 0===s?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},t.playsinline=function(i){return void 0!==i?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},t.loop=function(i){return void 0!==i?(this.techCall_("setLoop",i),void(this.options_.loop=i)):this.techGet_("loop")},t.poster=function(i){if(void 0===i)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(i){if(void 0===i)return!!this.controls_;this.controls_!==(i=!!i)&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(i){if(void 0===i)return!!this.usingNativeControls_;this.usingNativeControls_!==(i=!!i)&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(i){var s=this;if(void 0===i)return this.error_||null;if(ig("beforeerror").forEach(function(c){var f=c(s,i);Qh(f)&&!Array.isArray(f)||"string"==typeof f||"number"==typeof f||null===f?i=f:s.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&i&&4===i.code){var o=function(){this.error(i)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],o),void this.one("loadstart",function(){this.off(["click","touchstart"],o)})}if(null===i)return this.error_=i,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Xo(i),this.addClass("vjs-error"),Ln.error("(CODE:"+this.error_.code+" "+Xo.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),ig("error").forEach(function(c){return c(s,s.error_)})},t.reportUserActivity=function(i){this.userActivity_=!0},t.userActive=function(i){if(void 0===i)return this.userActive_;if((i=!!i)!==this.userActive_){if(this.userActive_=i,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var i,s,o,c=Lr(this,this.reportUserActivity),_=function(L){c(),this.clearInterval(i)};this.on("mousedown",function(){c(),this.clearInterval(i),i=this.setInterval(c,250)}),this.on("mousemove",function(L){(L.screenX!==s||L.screenY!==o)&&(s=L.screenX,o=L.screenY,c())}),this.on("mouseup",_),this.on("mouseleave",_);var C,w=this.getChild("controlBar");w&&!Da&&!Xh&&(w.on("mouseenter",function(M){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),w.on("mouseleave",function(M){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",c),this.on("keyup",c),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(C);var M=this.options_.inactivityTimeout;M<=0||(C=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},M))}},250)},t.playbackRate=function(i){if(void 0===i)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",i)},t.defaultPlaybackRate=function(i){return void 0!==i?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(i){if(void 0===i)return!!this.isAudio_;this.isAudio_=!!i},t.addTextTrack=function(i,s,o){if(this.tech_)return this.tech_.addTextTrack(i,s,o)},t.addRemoteTextTrack=function(i,s){if(this.tech_)return this.tech_.addRemoteTextTrack(i,s)},t.removeRemoteTextTrack=function(i){void 0===i&&(i={});var o=i.track;if(o||(o=i),this.tech_)return this.tech_.removeRemoteTextTrack(o)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(i){if(void 0===i)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),rf(this)&&this.trigger("languagechange"))},t.languages=function(){return Zr(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var i=Zr(this.options_),s=i.tracks;i.tracks=[];for(var o=0;o<s.length;o++){var c=s[o];(c=Zr(c)).player=void 0,i.tracks[o]=c}return i},t.createModal=function(i,s){var o=this;(s=s||{}).content=i||"";var c=new y0(this,s);return this.addChild(c),c.on("dispose",function(){o.removeChild(c)}),c.open(),c},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var i=this.currentBreakpoint(),s=this.currentWidth(),o=0;o<HP.length;o++){var c=HP[o];if(s<=this.breakpoints_[c]){if(i===c)return;i&&this.removeClass(zI[i]),this.addClass(zI[c]),this.breakpoint_=c;break}}},t.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},t.breakpoints=function(i){return void 0===i||(this.breakpoint_="",this.breakpoints_=Ii({},E6,i),this.updateCurrentBreakpoint_()),Ii(this.breakpoints_)},t.responsive=function(i){return void 0===i?this.responsive_:(i=Boolean(i))!==this.responsive_?(this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i):void 0},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return zI[this.breakpoint_]||""},t.loadMedia=function(i,s){var o=this;if(i&&"object"==typeof i){this.reset(),this.cache_.media=Zr(i);var c=this.cache_.media,m=c.poster,_=c.src,w=c.textTracks;!c.artwork&&m&&(this.cache_.media.artwork=[{src:m,type:BI(m)}]),_&&this.src(_),m&&this.poster(m),Array.isArray(w)&&w.forEach(function(C){return o.addRemoteTextTrack(C,!1)}),this.ready(s)}},t.getMedia=function(){if(!this.cache_.media){var i=this.poster(),c={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(f){return{kind:f.kind,label:f.label,language:f.language,src:f.src}})};return i&&(c.poster=i,c.artwork=[{src:c.poster,type:BI(c.poster)}]),c}return Zr(this.cache_.media)},e.getTagSettings=function(i){var s={sources:[],tracks:[]},o=tf(i),c=o["data-setup"];if(Iv(i,"vjs-fill")&&(o.fill=!0),Iv(i,"vjs-fluid")&&(o.fluid=!0),null!==c){var f=g4()(c||"{}"),m=f[0],_=f[1];m&&Ln.error(m),Ii(o,_)}if(Ii(s,o),i.hasChildNodes())for(var w=i.childNodes,C=0,M=w.length;C<M;C++){var L=w[C],V=L.nodeName.toLowerCase();"source"===V?s.sources.push(tf(L)):"track"===V&&s.tracks.push(tf(L))}return s},t.flexNotSupported_=function(){var i=Dt().createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},t.debug=function(i){if(void 0===i)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(i){if(void 0===i)return this.cache_.playbackRates;!Array.isArray(i)||!i.every(function(s){return"number"==typeof s})||(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e}(_t);Jo.names.forEach(function(r){var e=Jo[r];ns.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),ns.prototype.crossorigin=ns.prototype.crossOrigin,ns.players={};var Cw=Ce().navigator;ns.prototype.options_={techOrder:Fr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Cw&&(Cw.languages&&Cw.languages[0]||Cw.userLanguage||Cw.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(r){ns.prototype[r]=function(){return this.techGet_(r)}}),CF.forEach(function(r){ns.prototype["handleTech"+Ui(r)+"_"]=function(){return this.trigger(r)}}),_t.registerComponent("Player",ns);var ZI="plugin",C0="activePlugins_",x0={},KI=function(e){return x0.hasOwnProperty(e)},YI=function(e){return KI(e)?x0[e]:void 0},xF=function(e,t){e[C0]=e[C0]||{},e[C0][t]=!0},QI=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},IF=function(e,t){return t.prototype.name=e,function(){QI(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=yI(t,[this].concat(i));return this[e]=function(){return o},QI(this,o.getEventHash()),o}},Td=function(){function r(t){if(this.constructor===r)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),sP(this),delete this.trigger,IL(this,this.constructor.defaultState),xF(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=r.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return void 0===n&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,i){return void 0===i&&(i={}),m0(this.eventBusEl_,n,this.getEventHash(i))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[C0][n]=!1,this.player=this.state=null,i[n]=IF(n,x0[n])},r.isBasic=function(n){var i="string"==typeof n?YI(n):n;return"function"==typeof i&&!r.prototype.isPrototypeOf(i.prototype)},r.registerPlugin=function(n,i){if("string"!=typeof n)throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(KI(n))Ln.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(ns.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return x0[n]=i,n!==ZI&&(ns.prototype[n]=r.isBasic(i)?function(e,t){var n=function(){QI(this,{name:e,plugin:t,instance:null},!0);var s=t.apply(this,arguments);return xF(this,e),QI(this,{name:e,plugin:t,instance:s}),s};return Object.keys(t).forEach(function(i){n[i]=t[i]}),n}(n,i):IF(n,i)),i},r.deregisterPlugin=function(n){if(n===ZI)throw new Error("Cannot de-register base plugin.");KI(n)&&(delete x0[n],delete ns.prototype[n])},r.getPlugins=function(n){var i;return void 0===n&&(n=Object.keys(x0)),n.forEach(function(s){var o=YI(s);o&&((i=i||{})[s]=o)}),i},r.getPluginVersion=function(n){var i=YI(n);return i&&i.VERSION||""},r}();Td.getPlugin=YI,Td.BASE_PLUGIN_NAME=ZI,Td.registerPlugin(ZI,Td),ns.prototype.usingPlugin=function(r){return!!this[C0]&&!0===this[C0][r]},ns.prototype.hasPlugin=function(r){return!!KI(r)};var AF=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Fe(r,e,t){var n=Fe.getPlayer(r);if(n)return e&&Ln.warn('Player "'+r+'" is already initialised. Options will not be applied.'),t&&n.ready(t),n;var i="string"==typeof r?sg("#"+AF(r)):r;if(!f0(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Ln.warn("The element supplied is not included in the DOM"),e=e||{},ig("beforesetup").forEach(function(o){var c=o(i,Zr(e));Qh(c)&&!Array.isArray(c)?e=Zr(e,c):Ln.error("please return an object in beforesetup hooks")});var s=_t.getComponent("Player");return n=new s(i,e,t),ig("setup").forEach(function(o){return o(n)}),n}if(Fe.hooks_=Yh,Fe.hooks=ig,Fe.hook=function(e,t){ig(e,t)},Fe.hookOnce=function(e,t){ig(e,[].concat(t).map(function(n){return function s(){return ZN(e,s),n.apply(void 0,arguments)}}))},Fe.removeHook=ZN,!0!==Ce().VIDEOJS_NO_DYNAMIC_STYLE&&h0()){var XI=sg(".vjs-styles-defaults");if(!XI){XI=bL("vjs-styles-defaults");var GP=sg("head");GP&&GP.insertBefore(XI,GP.firstChild),TL(XI,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}eP(1,Fe),Fe.VERSION="7.17.0",Fe.options=ns.prototype.options_,Fe.getPlayers=function(){return ns.players},Fe.getPlayer=function(r){var t,e=ns.players;if("string"==typeof r){var n=AF(r),i=e[n];if(i)return i;t=sg("#"+n)}else t=r;if(f0(t)){var o=t.player,c=t.playerId;if(o||e[c])return o||e[c]}},Fe.getAllPlayers=function(){return Object.keys(ns.players).map(function(r){return ns.players[r]}).filter(Boolean)},Fe.players=ns.players,Fe.getComponent=_t.getComponent,Fe.registerComponent=function(r,e){Fr.isTech(e)&&Ln.warn("The "+r+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),_t.registerComponent.call(_t,r,e)},Fe.getTech=Fr.getTech,Fe.registerTech=Fr.registerTech,Fe.use=function(r,e){kv[r]=kv[r]||[],kv[r].push(e)},Object.defineProperty(Fe,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Fe.middleware,"TERMINATOR",{value:UI,writeable:!1,enumerable:!0}),Fe.browser=i8,Fe.TOUCH_ENABLED=d0,Fe.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var s in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&aw(r,e)}(n,e),e&&(n.super_=e),i)i.hasOwnProperty(s)&&(n.prototype[s]=i[s]);return n},Fe.mergeOptions=Zr,Fe.bind=Lr,Fe.registerPlugin=Td.registerPlugin,Fe.deregisterPlugin=Td.deregisterPlugin,Fe.plugin=function(r,e){return Ln.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Td.registerPlugin(r,e)},Fe.getPlugins=Td.getPlugins,Fe.getPlugin=Td.getPlugin,Fe.getPluginVersion=Td.getPluginVersion,Fe.addLanguage=function(r,e){var t;return r=(""+r).toLowerCase(),(Fe.options.languages=Zr(Fe.options.languages,((t={})[r]=e,t)))[r]},Fe.log=Ln,Fe.createLogger=QN,Fe.createTimeRange=Fe.createTimeRanges=Dv,Fe.formatTime=E0,Fe.setFormatTime=function(r){_P=r},Fe.resetFormatTime=function(){_P=zL},Fe.parseUrl=fP,Fe.isCrossOrigin=jI,Fe.EventTarget=Ns,Fe.on=cu,Fe.one=OI,Fe.off=Co,Fe.trigger=m0,Fe.xhr=SN(),Fe.TextTrack=Ew,Fe.AudioTrack=FL,Fe.VideoTrack=jL,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(r){Fe[r]=function(){return Ln.warn("videojs."+r+"() is deprecated; use videojs.dom."+r+"() instead"),yL[r].apply(null,arguments)}}),Fe.computedStyle=pw,Fe.dom=yL,Fe.url=k8,Fe.defineLazyProperty=BP,Fe.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var lc=_I,JI=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},cc=function(e){return Fe.log.debug?Fe.log.debug.bind(Fe,"VHS:",e+" >"):function(){}},ag=1/30,Ed=.1,DF=function(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Fe.createTimeRanges(n)},I0=function(e,t){return DF(e,function(n,i){return n-Ed<=t&&i+Ed>=t})},eA=function(e,t){return DF(e,function(n){return n-ag>=t})},kF=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Rv=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},PF=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},$P=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var s=e.start(i),o=e.end(i);if(!(t>o)){if(t>s&&t<=o){n+=o-t;continue}n+=o-s}}return n},MF=Fe.createTimeRange,qP=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach(function(i){n+=i.duration}),(t.preloadHints||[]).forEach(function(i){"PART"===i.type&&(n+=e.partTargetDuration)}),n},WP=function(e){return(e.segments||[]).reduce(function(t,n,i){return n.parts?n.parts.forEach(function(s,o){t.push({duration:s.duration,segmentIndex:i,partIndex:o,part:s,segment:n})}):t.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),t},[])},RF=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},OF=function(e){var t=e.preloadSegment;if(t){var n=t.parts;return(t.preloadHints||[]).reduce(function(o,c){return o+("PART"===c.type?1:0)},0)+(n&&n.length?n.length:0)}},NF=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=RF(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},LF=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,s=e.segments[i];if(s){if(void 0!==s.start)return{result:s.start,precise:!0};if(void 0!==s.end)return{result:s.end-s.duration,precise:!0}}for(;i--;){if(void 0!==(s=e.segments[i]).end)return{result:n+s.end,precise:!0};if(n+=qP(e,s),void 0!==s.start)return{result:n+s.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;var s=function(e,t){for(var i,n=0,s=t-e.mediaSequence;s<e.segments.length;s++){if(void 0!==(i=e.segments[s]).start)return{result:i.start-n,precise:!0};if(n+=qP(e,i),void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return s.precise?s.result:i.result+n},FF=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Ce()[1/0]}return LF(e,t,n)},xw=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,s=e.endIndex,o=0;if(i>s){var c=[s,i];i=c[0],s=c[1]}if(i<0){for(var f=i;f<Math.min(0,s);f++)o+=t;i=0}for(var m=i;m<s;m++)o+=n[m].duration;return o},jF=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return FF(e);if(null===t)return null;var s=LF(e,e.mediaSequence+e.segments.length,t=t||0);return n&&(s-=i="number"==typeof i?i:NF(null,e)),Math.max(0,s)},UF=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},zP=function(e){return e.excludeUntil&&e.excludeUntil===1/0},tA=function(e){var t=UF(e);return!e.disabled&&!t},BF=function(e,t){return t.attributes&&t.attributes[e]},ZP=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(i){return!!tA(i)&&(i.attributes.BANDWIDTH||0)<n}).length},KP=function(e,t){return!(!e&&!t||!e&&t||e&&!t||!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri))},VF=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var s in n){for(var o in n[s])if(i=t(n[s][o]))break;if(i)break}return!!i},Iw=function(e){if(!e||!e.playlists||!e.playlists.length)return VF(e,function(o){return o.playlists&&o.playlists.length||o.uri});for(var n=function(c){var f=e.playlists[c],m=f.attributes&&f.attributes.CODECS;return m&&m.split(",").every(function(w){return kN(w)})||VF(e,function(w){return KP(f,w)})?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var s=n(i);if("continue"!==s&&"object"==typeof s)return s.v}return!0},ka={liveEdgeDelay:NF,duration:FF,seekable:function(e,t,n){var s=t||0,o=jF(e,t,!0,n);return null===o?MF():MF(s,o)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,s=e.startingPartIndex,o=e.startTime,c=e.experimentalExactManifestTimings,f=n-o,m=WP(t),_=0,w=0;w<m.length;w++){var C=m[w];if(i===C.segmentIndex&&("number"!=typeof s||"number"!=typeof C.partIndex||s===C.partIndex)){_=w;break}}if(f<0){if(_>0)for(var M=_-1;M>=0;M--){var L=m[M];if(f+=L.duration,c){if(f<0)continue}else if(f+ag<=0)continue;return{partIndex:L.partIndex,segmentIndex:L.segmentIndex,startTime:o-xw({defaultDuration:t.targetDuration,durationList:m,startIndex:_,endIndex:M})}}return{partIndex:m[0]&&m[0].partIndex||null,segmentIndex:m[0]&&m[0].segmentIndex||0,startTime:n}}if(_<0){for(var V=_;V<0;V++)if((f-=t.targetDuration)<0)return{partIndex:m[0]&&m[0].partIndex||null,segmentIndex:m[0]&&m[0].segmentIndex||0,startTime:n};_=0}for(var H=_;H<m.length;H++){var Se=m[H];if(f-=Se.duration,c){if(f>0)continue}else if(f-ag>=0)continue;return{partIndex:Se.partIndex,segmentIndex:Se.segmentIndex,startTime:o+xw({defaultDuration:t.targetDuration,durationList:m,startIndex:_,endIndex:H})}}return{segmentIndex:m[m.length-1].segmentIndex,partIndex:m[m.length-1].partIndex,startTime:n}},isEnabled:tA,isDisabled:function(e){return e.disabled},isBlacklisted:UF,isIncompatible:zP,playlistEnd:jF,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:BF,estimateSegmentRequestTime:function(e,t,n,i){return void 0===i&&(i=0),BF("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:ZP,isAudioOnly:Iw,playlistMatch:KP,segmentDurationWithParts:qP},HF=Fe.log,YP=function(e,t){return e+"-"+t},Aw=function(e,t){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var s in e.mediaGroups[n][i])t(e.mediaGroups[n][i][s],n,i,s)})},GF=function(e){var t=e.playlist,n=e.uri;t.id=e.id,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},$F=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)e.playlists[n].uri||(e.playlists[n].uri="placeholder-uri-"+n);var s=Iw(e);Aw(e,function(o,c,f,m){var _="placeholder-uri-"+c+"-"+f+"-"+m;if(!o.playlists||!o.playlists.length){if(s&&"AUDIO"===c&&!o.uri)for(var w=0;w<e.playlists.length;w++){var C=e.playlists[w];if(C.attributes&&C.attributes.AUDIO&&C.attributes.AUDIO===f)return}o.playlists=[sc({},o)]}o.playlists.forEach(function(M,L){var V=YP(L,_);M.uri?M.resolvedUri=M.resolvedUri||lc(e.uri,M.uri):(M.uri=0===L?_:V,M.resolvedUri=M.uri),M.id=M.id||V,M.attributes=M.attributes||{},e.playlists[M.id]=M,e.playlists[M.uri]=M})}),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];GF({playlist:n,id:YP(t,n.uri)}),n.resolvedUri=lc(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||HF.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){Aw(e,function(t){t.uri&&(t.resolvedUri=lc(e.uri,t.uri))})}(e)},nA=Fe.mergeOptions,H6=function(e,t){if(!e)return t;var n=nA(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=nA(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},qF=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=lc(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=lc(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=lc(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=lc(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=lc(t,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=lc(t,n.uri))})},WF=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},zF=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},QP=function(e,t,n){void 0===n&&(n=zF);var i=nA(e,{}),s=i.playlists[t.id];if(!s||n(s,t))return null;t.segments=WF(t);var o=nA(s,t);if(o.preloadSegment&&!t.preloadSegment&&delete o.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(var c=0;c<t.skip.skippedSegments;c++)t.segments.unshift({skipped:!0})}o.segments=function(e,t,n){var i=e.slice(),s=t.slice();n=n||0;for(var c,o=[],f=0;f<s.length;f++){var m=i[f+n],_=s[f];m?(c=m.map||c,o.push(H6(m,_))):(c&&!_.map&&(_.map=c),o.push(_))}return o}(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}o.segments.forEach(function(m){qF(m,o.resolvedUri)});for(var f=0;f<i.playlists.length;f++)i.playlists[f].id===t.id&&(i.playlists[f]=o);return i.playlists[t.id]=o,i.playlists[t.uri]=o,Aw(e,function(m,_,w,C){if(m.playlists)for(var M=0;M<m.playlists.length;M++)t.id===m.playlists[M].id&&(m.playlists[M]=t)}),i},XP=function(e,t){var n=e.segments||[],i=n[n.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],o=s&&s.duration||i&&i.duration;return t&&o?1e3*o:500*(e.partTargetDuration||e.targetDuration||10)},A0=function(r){function e(n,i,s){var o;if(void 0===s&&(s={}),o=r.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");o.logger_=cc("PlaylistLoader");var f=s.withCredentials,m=void 0!==f&&f,_=s.handleManifestRedirects,w=void 0!==_&&_;o.src=n,o.vhs_=i,o.withCredentials=m,o.handleManifestRedirects=w;var C=i.options_;return o.customTagParsers=C&&C.customTagParsers||[],o.customTagMappers=C&&C.customTagMappers||[],o.experimentalLLHLS=C&&C.experimentalLLHLS||!1,Fe.browser.IE_VERSION&&(o.experimentalLLHLS=!1),o.state="HAVE_NOTHING",o.handleMediaupdatetimeout_=o.handleMediaupdatetimeout_.bind(Sn(o)),o.on("mediaupdatetimeout",o.handleMediaupdatetimeout_),o}Ot(e,r);var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var i=this;if("HAVE_METADATA"===this.state){var s=this.media(),o=lc(this.master.uri,s.uri);this.experimentalLLHLS&&(o=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,s=t.mediaSequence+t.segments.length;if(i){var o=i.parts||[],c=OF(t)-1;c>-1&&c!==o.length-1&&(n._HLS_part=c),(c>-1||o.length)&&s--}n._HLS_msn=s}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var f=new(Ce().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(m){!n.hasOwnProperty(m)||f.searchParams.set(m,n[m])}),e=f.toString()}return e}(o,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:o,withCredentials:this.withCredentials},function(c,f){if(i.request){if(c)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},t.playlistRequestError=function(i,s,o){var c=s.uri,f=s.id;this.request=null,o&&(this.state=o),this.error={playlist:this.master.playlists[f],status:i.status,message:"HLS playlist request error at URL: "+c+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(i){var s=this,o=i.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,s=e.customTagParsers,o=void 0===s?[]:s,c=e.customTagMappers,f=void 0===c?[]:c,m=e.experimentalLLHLS,_=new D4;t&&_.on("warn",t),n&&_.on("info",n),o.forEach(function(V){return _.addParser(V)}),f.forEach(function(V){return _.addTagMapper(V)}),_.push(i),_.end();var w=_.manifest;if(m||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(V){w.hasOwnProperty(V)&&delete w[V]}),w.segments&&w.segments.forEach(function(V){["parts","preloadHints"].forEach(function(H){V.hasOwnProperty(H)&&delete V[H]})})),!w.targetDuration){var C=10;w.segments&&w.segments.length&&(C=w.segments.reduce(function(V,H){return Math.max(V,H.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+C),w.targetDuration=C}var M=RF(w);if(M.length&&!w.partTargetDuration){var L=M.reduce(function(V,H){return Math.max(V,H.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+L),HF.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),w.partTargetDuration=L}return w}({onwarn:function(m){return s.logger_("m3u8-parser warn for "+o+": "+m.message)},oninfo:function(m){return s.logger_("m3u8-parser info for "+o+": "+m.message)},manifestString:i.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(i){var s=i.playlistString,o=i.playlistObject,c=i.url,f=i.id;this.request=null,this.state="HAVE_METADATA";var m=o||this.parseManifest_({url:c,manifestString:s});m.lastRequest=Date.now(),GF({playlist:m,uri:c,id:f});var _=QP(this.master,m);this.targetDuration=m.partTargetDuration||m.targetDuration,this.pendingMedia_=null,_?(this.master=_,this.media_=this.master.playlists[f]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(XP(this.media(),!!_)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),Ce().clearTimeout(this.mediaUpdateTimeout),Ce().clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i,s){var o=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(Ce().clearTimeout(this.finalRenditionTimeout),s){var c=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Ce().setTimeout(this.media.bind(this,i,!1),c)}else{var f=this.state,m=!this.media_||i.id!==this.media_.id,_=this.master.playlists[i.id];if(_&&_.endList||i.endList&&i.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(m&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===f?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(XP(i,!0)),m){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(w,C){if(o.request){if(i.lastRequest=Date.now(),i.resolvedUri=JI(o.handleManifestRedirects,i.resolvedUri,C),w)return o.playlistRequestError(o.request,i,f);o.haveMetadata({playlistString:C.responseText,url:i.uri,id:i.id}),o.trigger("HAVE_MASTER"===f?"loadedmetadata":"mediachange")}})}}},t.pause=function(){this.mediaUpdateTimeout&&(Ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},t.load=function(i){var s=this;this.mediaUpdateTimeout&&(Ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var o=this.media();if(i){var c=o?(o.partTargetDuration||o.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Ce().setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},c)}else this.started?this.trigger(o&&!o.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},t.updateMediaUpdateTimeout_=function(i){var s=this;this.mediaUpdateTimeout&&(Ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Ce().setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(i)},i))},t.start=function(){var i=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Ce().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){i.setupInitialPlaylist(i.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,o){if(i.request){if(i.request=null,s)return i.error={status:o.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:o.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.src=JI(i.handleManifestRedirects,i.src,o);var c=i.parseManifest_({manifestString:o.responseText,url:i.src});i.setupInitialPlaylist(c)}})},t.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},t.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists)return this.master=i,$F(this.master,this.srcUri()),i.playlists.forEach(function(o){o.segments=WF(o),o.segments.forEach(function(c){qF(c,o.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var s=this.srcUri()||Ce().location.href;this.master=function(e,t){var n=YP(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Ce().location.href,resolvedUri:Ce().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i}(0,s),this.haveMetadata({playlistObject:i,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(Fe.EventTarget),$6=Fe.xhr,q6=Fe.mergeOptions,JP=function(e,t,n,i){var s="arraybuffer"===e.responseType?e.response:e.responseText;!t&&s&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=s.byteLength||s.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),!t&&!e.aborted&&200!==n.statusCode&&206!==n.statusCode&&0!==n.statusCode&&(t=new Error("XHR Failed with a response of: "+(e&&(s||e.responseText)))),i(t,e)},ZF=function(){var e=function t(n,i){n=q6({timeout:45e3},n);var s=t.beforeRequest||Fe.Vhs.xhr.beforeRequest;if(s&&"function"==typeof s){var o=s(n);o&&(n=o)}var f=(!0===Fe.Vhs.xhr.original?$6:Fe.Vhs.xhr)(n,function(_,w){return JP(f,_,w,i)}),m=f.abort;return f.abort=function(){return f.aborted=!0,m.apply(f,arguments)},f.uri=n.uri,f.requestTime=Date.now(),f};return e.original=!0,e},eM=function(e){var t={};return e.byterange&&(t.Range=function(e){return"bytes="+e.offset+"-"+(e.offset+e.length-1)}(e.byterange)),t},z6=function(e,t){return e.start(t)+"-"+e.end(t)},Z6=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},K6=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},KF=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];t[n]=ArrayBuffer.isView(i)?{bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:i}),t},rA=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},YF=function(e){return e.resolvedUri},QF=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",c=0;c<t.length/n;c++)i+=t.slice(c*n,c*n+n).map(Z6).join("")+" "+t.slice(c*n,c*n+n).map(K6).join("")+"\n";return i},X6=Object.freeze({__proto__:null,createTransferableMessage:KF,initSegmentId:rA,segmentKeyId:YF,hexDump:QF,tagDump:function(e){return QF(e.bytes)},textRanges:function(e){var n,t="";for(n=0;n<e.length;n++)t+=z6(e,n)+" ";return t}}),oG=function r(e){var t=e.programTime,n=e.playlist,i=e.retryCount,s=void 0===i?2:i,o=e.seekTo,c=e.pauseAfterSeek,f=void 0===c||c,m=e.tech,_=e.callback;if(!_)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!n||!o)return _({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!m.hasStarted_)return _({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return _({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var w=function(e,t){var n;try{n=new Date(e)}catch(w){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var s=0;s<t.segments.length-1&&(i=t.segments[s],!(n<t.segments[s+1].dateTimeObject));s++);var c=t.segments[t.segments.length-1],f=c.dateTimeObject,m=c.videoTimingInfo?function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds}(c.videoTimingInfo):c.duration+.25*c.duration;return n>new Date(f.getTime()+1e3*m)?null:(n>f&&(i=c),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:ka.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(t,n);if(!w)return _({message:t+" was not found in the stream"});var C=w.segment,M=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch(c){}var s=n.getTime();return(i.getTime()-s)/1e3}(C.dateTimeObject,t);if("estimate"===w.type)return 0===s?_({message:t+" is not buffered yet. Try again"}):(o(w.estimatedStart+M),void m.one("seeked",function(){r({programTime:t,playlist:n,retryCount:s-1,seekTo:o,pauseAfterSeek:f,tech:m,callback:_})}));var L=C.start+M;m.one("seeked",function(){return _(null,m.currentTime())}),f&&m.pause(),o(L)},tM=function(e,t){if(4===e.readyState)return t()},JF=Fe.mergeOptions,ej=function(e,t){if(!zF(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],s=t.segments[n];if(i.uri!==s.uri)return!1;if(i.byterange||s.byterange){var o=i.byterange,c=s.byterange;if(o&&!c||!o&&c||o.offset!==c.offset||o.length!==c.length)return!1}}return!0},dG=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},tj=function(e,t){var n={};for(var i in e){var o=e[i].sidx;if(o){var c=EI(o);if(!t[c])break;dG(t[c].sidxInfo,o)&&(n[c]=t[c])}}return n},nM=function(r){function e(n,i,s,o){var c;void 0===s&&(s={}),(c=r.call(this)||this).masterPlaylistLoader_=o||Sn(c),o||(c.isMaster_=!0);var m=s.withCredentials,_=void 0!==m&&m,w=s.handleManifestRedirects,C=void 0!==w&&w;if(c.vhs_=i,c.withCredentials=_,c.handleManifestRedirects=C,!n)throw new Error("A non-empty playlist URL or object is required");return c.on("minimumUpdatePeriod",function(){c.refreshXml_()}),c.on("mediaupdatetimeout",function(){c.refreshMedia_(c.media().id)}),c.state="HAVE_NOTHING",c.loadedPlaylists_={},c.logger_=cc("DashPlaylistLoader"),c.isMaster_?(c.masterPlaylistLoader_.srcUrl=n,c.masterPlaylistLoader_.sidxMapping_={}):c.childPlaylist_=n,c}Ot(e,r);var t=e.prototype;return t.requestErrored_=function(i,s,o){return!this.request||(this.request=null,i?(this.error="object"!=typeof i||i instanceof Error?{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2}:i,o&&(this.state=o),this.trigger("error"),!0):void 0)},t.addSidxSegments_=function(i,s,o){var c=this,f=i.sidx&&EI(i.sidx);if(i.sidx&&f&&!this.masterPlaylistLoader_.sidxMapping_[f]){var m=JI(this.handleManifestRedirects,i.sidx.resolvedUri),_=function(C,M){if(!c.requestErrored_(C,M,s)){var V,L=c.masterPlaylistLoader_.sidxMapping_;try{V=wH()(an(M.response).subarray(8))}catch(H){return void c.requestErrored_(H,M,s)}return L[f]={sidxInfo:i.sidx,sidx:V},Nk(i,V,i.sidx.resolvedUri),o(!0)}};this.request=function(e,t,n){var s,i=[],o=!1,c=function(C,M,L,V){return M.abort(),o=!0,n(C,M,L,V)},f=function(C,M){if(!o){if(C)return c(C,M,"",i);var L=M.responseText.substring(i&&i.byteLength||0,M.responseText.length);if(i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter(function(c){return c&&(c.byteLength||c.length)&&"string"!=typeof c})).length<=1)return an(t[0]);var i=t.reduce(function(c,f,m){return c+(f.byteLength||f.length)},0),s=new Uint8Array(i),o=0;return t.forEach(function(c){c=an(c),s.set(c,o),o+=c.byteLength}),s}(i,$N(L,!0)),s=s||cw(i),i.length<10||s&&i.length<s+2)return tM(M,function(){return c(C,M,"",i)});var V=qk(i);return"ts"===V&&i.length<188||!V&&i.length<376?tM(M,function(){return c(C,M,"",i)}):c(null,M,V,i)}},_=t({uri:e,beforeSend:function(C){C.overrideMimeType("text/plain; charset=x-user-defined"),C.addEventListener("progress",function(M){return JP(C,null,{statusCode:C.status},f)})}},function(w,C){return JP(_,w,C,f)});return _}(m,this.vhs_.xhr,function(w,C,M,L){if(w)return _(w,C);if(!M||"mp4"!==M)return _({status:C.status,message:"Unsupported "+(M||"unknown")+" container type for sidx segment at URL: "+m,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},C);var V=i.sidx.byterange,H=V.offset,Se=V.length;if(L.length>=Se+H)return _(w,{response:L.subarray(H,H+Se),status:C.status,uri:C.uri});c.request=c.vhs_.xhr({uri:m,responseType:"arraybuffer",headers:eM({byterange:i.sidx.byterange})},_)})}else this.mediaRequest_=Ce().setTimeout(function(){return o(!1)},0)},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Ce().clearTimeout(this.minimumUpdatePeriodTimeout_),Ce().clearTimeout(this.mediaRequest_),Ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i){var s=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var o=this.state;if("string"==typeof i){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var c=!this.media_||i.id!==this.media_.id;if(c&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList)return this.state="HAVE_METADATA",this.media_=i,void(c&&(this.trigger("mediachanging"),this.trigger("mediachange")));!c||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,o,function(f){s.haveMetadata({startingState:o,playlist:i})}))},t.haveMetadata=function(i){var s=i.startingState,o=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[o.id]=o,this.mediaRequest_=null,this.refreshMedia_(o.id),this.trigger("HAVE_MASTER"===s?"loadedmetadata":"mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Ce().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},t.load=function(i){var s=this;Ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var o=this.media();if(i){var c=o?o.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Ce().setTimeout(function(){return s.load()},c)}else this.started?o&&!o.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},t.start=function(){var i=this;this.started=!0,this.isMaster_?this.requestMaster_(function(s,o){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=Ce().setTimeout(function(){return i.haveMaster_()},0)},t.requestMaster_=function(i){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(o,c){if(!s.requestErrored_(o,c)){var f=c.responseText!==s.masterPlaylistLoader_.masterXml_;return s.masterPlaylistLoader_.masterXml_=c.responseText,s.masterLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now(),s.masterPlaylistLoader_.srcUrl=JI(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,c),f?(s.handleMaster_(),void s.syncClientServerClock_(function(){return i(c,f)})):i(c,f)}"HAVE_NOTHING"===s.state&&(s.started=!1)})},t.syncClientServerClock_=function(i){var s=this,o=function(e){return function(e){var t=ji(e,"UTCTiming")[0];if(!t)return null;var n=So(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(VN(e))}(this.masterPlaylistLoader_.masterXml_);return null===o?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===o.method?(this.masterPlaylistLoader_.clientOffset_=o.value-Date.now(),i()):void(this.request=this.vhs_.xhr({uri:lc(this.masterPlaylistLoader_.srcUrl,o.value),method:o.method,withCredentials:this.withCredentials},function(c,f){if(s.request){if(c)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),i();var m;m="HEAD"===o.method?f.responseHeaders&&f.responseHeaders.date?Date.parse(f.responseHeaders.date):s.masterLoaded_:Date.parse(f.responseText),s.masterPlaylistLoader_.clientOffset_=m-Date.now(),i()}}))},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var i=function(e){var n=e.srcUrl,o=bH(e.masterXml,{manifestUri:n,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping});return $F(o,n),o}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),s=this.masterPlaylistLoader_.master;s&&(i=function(e,t,n){for(var i=!0,s=JF(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),o=0;o<t.playlists.length;o++){var c=t.playlists[o];if(c.sidx){var f=EI(c.sidx);n&&n[f]&&n[f].sidx&&Nk(c,n[f].sidx,c.sidx.resolvedUri)}var m=QP(s,c,ej);m&&(s=m,i=!1)}return Aw(t,function(_,w,C,M){if(_.playlists&&_.playlists.length){var L=_.playlists[0].id,V=QP(s,_.playlists[0],ej);V&&((s=V).mediaGroups[w][C][M].playlists[0]=s.playlists[L],i=!1)}}),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:s}(s,i,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=i||s;var o=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return o&&o!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=o),(!s||i&&i.minimumUpdatePeriod!==s.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(i)},t.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(Ce().clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var s=i.master&&i.master.minimumUpdatePeriod;0===s&&(i.media()?s=1e3*i.media().targetDuration:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),"number"!=typeof s||s<=0?s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout"):this.createMUPTimeout_(s)},t.createMUPTimeout_=function(i){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=Ce().setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(i)},i)},t.refreshXml_=function(){var i=this;this.requestMaster_(function(s,o){!o||(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=function(e,t){var i=tj(e.playlists,t);return Aw(e,function(s,o,c,f){s.playlists&&s.playlists.length&&(i=JF(i,tj(s.playlists,t)))}),i}(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(c){i.refreshMedia_(i.media().id)}))})},t.refreshMedia_=function(i){var s=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var o=this.masterPlaylistLoader_.master.playlists,c=!this.media_||this.media_!==o[i];c?this.media_=o[i]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function m(){s.media().endList||(s.mediaUpdateTimeout=Ce().setTimeout(function(){s.trigger("mediaupdatetimeout"),m()},XP(s.media(),Boolean(c))))}(),this.trigger("loadedplaylist")},e}(Fe.EventTarget),Ls={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},nj=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},rj=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=nj(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},ij=function(e){return"var browserWorkerPolyFill = "+nj.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},sj=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},gG=ij(sj(function(){var r=function(){this.init=function(){var E={};this.on=function(A,I){E[A]||(E[A]=[]),E[A]=E[A].concat(I)},this.off=function(A,I){var D;return!!E[A]&&(D=E[A].indexOf(I),E[A]=E[A].slice(),E[A].splice(D,1),D>-1)},this.trigger=function(A){var I,D,N,F;if(I=E[A])if(2===arguments.length)for(N=I.length,D=0;D<N;++D)I[D].call(this,arguments[1]);else{for(F=[],D=arguments.length,D=1;D<arguments.length;++D)F.push(arguments[D]);for(N=I.length,D=0;D<N;++D)I[D].apply(this,F)}},this.dispose=function(){E={}}}};r.prototype.pipe=function(W){return this.on("data",function(E){W.push(E)}),this.on("done",function(E){W.flush(E)}),this.on("partialdone",function(E){W.partialFlush(E)}),this.on("endedtimeline",function(E){W.endTimeline(E)}),this.on("reset",function(E){W.reset(E)}),W},r.prototype.push=function(W){this.trigger("data",W)},r.prototype.flush=function(W){this.trigger("done",W)},r.prototype.partialFlush=function(W){this.trigger("partialdone",W)},r.prototype.endTimeline=function(W){this.trigger("endedtimeline",W)},r.prototype.reset=function(W){this.trigger("reset",W)};var n,i,s,o,c,f,m,_,w,C,M,L,V,H,Se,be,je,Ne,$e,nt,pt,ct,ut,Mt,Vn,jr,tr,Ai,br,Nv,Gu,$u,qu,uf,Lv,Fv,W,E,e=r,t=Math.pow(2,32)-1;(function(){var W;if(ut={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(W in ut)ut.hasOwnProperty(W)&&(ut[W]=[W.charCodeAt(0),W.charCodeAt(1),W.charCodeAt(2),W.charCodeAt(3)]);Mt=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),jr=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Vn=new Uint8Array([0,0,0,1]),tr=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ai=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),br={video:tr,audio:Ai},$u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Gu=new Uint8Array([0,0,0,0,0,0,0,0]),qu=new Uint8Array([0,0,0,0,0,0,0,0]),uf=qu,Lv=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Fv=qu,Nv=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),n=function(E){var D,N,A=[],I=0;for(D=1;D<arguments.length;D++)A.push(arguments[D]);for(D=A.length;D--;)I+=A[D].byteLength;for(N=new Uint8Array(I+8),new DataView(N.buffer,N.byteOffset,N.byteLength).setUint32(0,N.byteLength),N.set(E,4),D=0,I=8;D<A.length;D++)N.set(A[D],I),I+=A[D].byteLength;return N},i=function(){return n(ut.dinf,n(ut.dref,$u))},s=function(E){return n(ut.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,E.audioobjecttype<<3|E.samplingfrequencyindex>>>1,E.samplingfrequencyindex<<7|E.channelcount<<3,6,1,2]))},o=function(){return n(ut.ftyp,Mt,Vn,Mt,jr)},be=function(E){return n(ut.hdlr,br[E])},c=function(E){return n(ut.mdat,E)},Se=function(E){var A=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,E.duration>>>24&255,E.duration>>>16&255,E.duration>>>8&255,255&E.duration,85,196,0,0]);return E.samplerate&&(A[12]=E.samplerate>>>24&255,A[13]=E.samplerate>>>16&255,A[14]=E.samplerate>>>8&255,A[15]=255&E.samplerate),n(ut.mdhd,A)},H=function(E){return n(ut.mdia,Se(E),be(E.type),m(E))},f=function(E){return n(ut.mfhd,new Uint8Array([0,0,0,0,(4278190080&E)>>24,(16711680&E)>>16,(65280&E)>>8,255&E]))},m=function(E){return n(ut.minf,"video"===E.type?n(ut.vmhd,Nv):n(ut.smhd,Gu),i(),Ne(E))},_=function(E,A){for(var I=[],D=A.length;D--;)I[D]=nt(A[D]);return n.apply(null,[ut.moof,f(E)].concat(I))},w=function(E){for(var A=E.length,I=[];A--;)I[A]=L(E[A]);return n.apply(null,[ut.moov,M(4294967295)].concat(I).concat(C(E)))},C=function(E){for(var A=E.length,I=[];A--;)I[A]=pt(E[A]);return n.apply(null,[ut.mvex].concat(I))},M=function(E){var A=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&E)>>24,(16711680&E)>>16,(65280&E)>>8,255&E,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(ut.mvhd,A)},je=function(E){var D,N,A=E.samples||[],I=new Uint8Array(4+A.length);for(N=0;N<A.length;N++)I[N+4]=(D=A[N].flags).dependsOn<<4|D.isDependedOn<<2|D.hasRedundancy;return n(ut.sdtp,I)},Ne=function(E){return n(ut.stbl,$e(E),n(ut.stts,Fv),n(ut.stsc,uf),n(ut.stsz,Lv),n(ut.stco,qu))},$e=function(I){return n(ut.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===I.type?W(I):E(I))},W=function(I){var oe,Ae,D=I.sps||[],N=I.pps||[],F=[],J=[];for(oe=0;oe<D.length;oe++)F.push((65280&D[oe].byteLength)>>>8),F.push(255&D[oe].byteLength),F=F.concat(Array.prototype.slice.call(D[oe]));for(oe=0;oe<N.length;oe++)J.push((65280&N[oe].byteLength)>>>8),J.push(255&N[oe].byteLength),J=J.concat(Array.prototype.slice.call(N[oe]));if(Ae=[ut.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&I.width)>>8,255&I.width,(65280&I.height)>>8,255&I.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(ut.avcC,new Uint8Array([1,I.profileIdc,I.profileCompatibility,I.levelIdc,255].concat([D.length],F,[N.length],J))),n(ut.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],I.sarRatio){var ve=I.sarRatio[0],Re=I.sarRatio[1];Ae.push(n(ut.pasp,new Uint8Array([(4278190080&ve)>>24,(16711680&ve)>>16,(65280&ve)>>8,255&ve,(4278190080&Re)>>24,(16711680&Re)>>16,(65280&Re)>>8,255&Re])))}return n.apply(null,Ae)},E=function(I){return n(ut.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&I.channelcount)>>8,255&I.channelcount,(65280&I.samplesize)>>8,255&I.samplesize,0,0,0,0,(65280&I.samplerate)>>8,255&I.samplerate,0,0]),s(I))},V=function(E){var A=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&E.id)>>24,(16711680&E.id)>>16,(65280&E.id)>>8,255&E.id,0,0,0,0,(4278190080&E.duration)>>24,(16711680&E.duration)>>16,(65280&E.duration)>>8,255&E.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&E.width)>>8,255&E.width,0,0,(65280&E.height)>>8,255&E.height,0,0]);return n(ut.tkhd,A)},nt=function(E){var A,I,D,N,J,oe;return A=n(ut.tfhd,new Uint8Array([0,0,0,58,(4278190080&E.id)>>24,(16711680&E.id)>>16,(65280&E.id)>>8,255&E.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),J=Math.floor(E.baseMediaDecodeTime/(t+1)),oe=Math.floor(E.baseMediaDecodeTime%(t+1)),I=n(ut.tfdt,new Uint8Array([1,0,0,0,J>>>24&255,J>>>16&255,J>>>8&255,255&J,oe>>>24&255,oe>>>16&255,oe>>>8&255,255&oe])),"audio"===E.type?(D=ct(E,92),n(ut.traf,A,I,D)):(N=je(E),D=ct(E,N.length+92),n(ut.traf,A,I,D,N))},L=function(E){return E.duration=E.duration||4294967295,n(ut.trak,V(E),H(E))},pt=function(E){var A=new Uint8Array([0,0,0,0,(4278190080&E.id)>>24,(16711680&E.id)>>16,(65280&E.id)>>8,255&E.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==E.type&&(A[A.length-1]=0),n(ut.trex,A)},function(){var W,E,A;A=function(D,N){var F=0,J=0,oe=0,Ae=0;return D.length&&(void 0!==D[0].duration&&(F=1),void 0!==D[0].size&&(J=2),void 0!==D[0].flags&&(oe=4),void 0!==D[0].compositionTimeOffset&&(Ae=8)),[0,0,F|J|oe|Ae,1,(4278190080&D.length)>>>24,(16711680&D.length)>>>16,(65280&D.length)>>>8,255&D.length,(4278190080&N)>>>24,(16711680&N)>>>16,(65280&N)>>>8,255&N]},E=function(D,N){var F,J,oe,Ae,ve,Re;for(oe=A(Ae=D.samples||[],N+=20+16*Ae.length),(J=new Uint8Array(oe.length+16*Ae.length)).set(oe),F=oe.length,Re=0;Re<Ae.length;Re++)J[F++]=(4278190080&(ve=Ae[Re]).duration)>>>24,J[F++]=(16711680&ve.duration)>>>16,J[F++]=(65280&ve.duration)>>>8,J[F++]=255&ve.duration,J[F++]=(4278190080&ve.size)>>>24,J[F++]=(16711680&ve.size)>>>16,J[F++]=(65280&ve.size)>>>8,J[F++]=255&ve.size,J[F++]=ve.flags.isLeading<<2|ve.flags.dependsOn,J[F++]=ve.flags.isDependedOn<<6|ve.flags.hasRedundancy<<4|ve.flags.paddingValue<<1|ve.flags.isNonSyncSample,J[F++]=61440&ve.flags.degradationPriority,J[F++]=15&ve.flags.degradationPriority,J[F++]=(4278190080&ve.compositionTimeOffset)>>>24,J[F++]=(16711680&ve.compositionTimeOffset)>>>16,J[F++]=(65280&ve.compositionTimeOffset)>>>8,J[F++]=255&ve.compositionTimeOffset;return n(ut.trun,J)},W=function(D,N){var F,J,oe,Ae,ve,Re;for(oe=A(Ae=D.samples||[],N+=20+8*Ae.length),(F=new Uint8Array(oe.length+8*Ae.length)).set(oe),J=oe.length,Re=0;Re<Ae.length;Re++)F[J++]=(4278190080&(ve=Ae[Re]).duration)>>>24,F[J++]=(16711680&ve.duration)>>>16,F[J++]=(65280&ve.duration)>>>8,F[J++]=255&ve.duration,F[J++]=(4278190080&ve.size)>>>24,F[J++]=(16711680&ve.size)>>>16,F[J++]=(65280&ve.size)>>>8,F[J++]=255&ve.size;return n(ut.trun,F)},ct=function(D,N){return"audio"===D.type?W(D,N):E(D,N)}}();var HM,$M,qM,xA,WM,KU,YU,QU,Cd_mdat=c,Cd_moof=_,ZU=function(E,A){var I={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return I.dataOffset=A,I.compositionTimeOffset=E.pts-E.dts,I.duration=E.duration,I.size=4*E.length,I.size+=E.byteLength,E.keyFrame&&(I.flags.dependsOn=2,I.flags.isNonSyncSample=0),I},dg=[33,16,5,32,164,27],VM=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Tr=function(E){for(var A=[];E--;)A.push(0);return A};$M=function(E){return 9e4*E},qM=function(E,A){return E*A},xA=function(E){return E/9e4},WM=function(E,A){return E/A},KU=function(E,A){return $M(WM(E,A))},YU=function(E,A){return qM(xA(E),A)},QU=function(E,A,I){return xA(I?E:E-A)};var cr_secondsToVideoTs=$M,cr_videoTsToSeconds=xA,cr_audioTsToVideoTs=KU,cr_videoTsToAudioTs=YU,cr_metadataTsToSeconds=QU,IA_prefixWithSilence=function(E,A,I,D){var N,ve,Re,dt,F=0,J=0,oe=0,Ae=0;if(A.length&&(N=cr_audioTsToVideoTs(E.baseMediaDecodeTime,E.samplerate),F=Math.ceil(9e4/(E.samplerate/1024)),I&&D&&(J=N-Math.max(I,D),Ae=(oe=Math.floor(J/F))*F),!(oe<1||Ae>45e3))){for((ve=function(){if(!HM){var E={96e3:[dg,[227,64],Tr(154),[56]],88200:[dg,[231],Tr(170),[56]],64e3:[dg,[248,192],Tr(240),[56]],48e3:[dg,[255,192],Tr(268),[55,148,128],Tr(54),[112]],44100:[dg,[255,192],Tr(268),[55,163,128],Tr(84),[112]],32e3:[dg,[255,192],Tr(268),[55,234],Tr(226),[112]],24e3:[dg,[255,192],Tr(268),[55,255,128],Tr(268),[111,112],Tr(126),[224]],16e3:[dg,[255,192],Tr(268),[55,255,128],Tr(268),[111,255],Tr(269),[223,108],Tr(195),[1,192]],12e3:[VM,Tr(268),[3,127,248],Tr(268),[6,255,240],Tr(268),[13,255,224],Tr(268),[27,253,128],Tr(259),[56]],11025:[VM,Tr(268),[3,127,248],Tr(268),[6,255,240],Tr(268),[13,255,224],Tr(268),[27,255,192],Tr(268),[55,175,128],Tr(108),[112]],8e3:[VM,Tr(268),[3,121,16],Tr(47),[7]]};HM=function(E){return Object.keys(E).reduce(function(A,I){return A[I]=new Uint8Array(E[I].reduce(function(D,N){return D.concat(N)},[])),A},{})}(E)}return HM}()[E.samplerate])||(ve=A[0].data),Re=0;Re<oe;Re++)A.splice(0,0,{data:ve,dts:(dt=A[0]).dts-F,pts:dt.pts-F});return E.baseMediaDecodeTime-=Math.floor(cr_videoTsToAudioTs(Ae,E.samplerate)),Ae}},hc_clearDtsInfo=function(E){delete E.minSegmentDts,delete E.maxSegmentDts,delete E.minSegmentPts,delete E.maxSegmentPts},hc_calculateTrackBaseMediaDecodeTime=function(E,A){var I,N=E.minSegmentDts;return A||(N-=E.timelineStartInfo.dts),I=E.timelineStartInfo.baseMediaDecodeTime,I+=N,I=Math.max(0,I),"audio"===E.type&&(I*=E.samplerate/9e4,I=Math.floor(I)),I},hc_collectDtsInfo=function(E,A){"number"==typeof A.pts&&(void 0===E.timelineStartInfo.pts&&(E.timelineStartInfo.pts=A.pts),E.minSegmentPts=void 0===E.minSegmentPts?A.pts:Math.min(E.minSegmentPts,A.pts),E.maxSegmentPts=void 0===E.maxSegmentPts?A.pts:Math.max(E.maxSegmentPts,A.pts)),"number"==typeof A.dts&&(void 0===E.timelineStartInfo.dts&&(E.timelineStartInfo.dts=A.dts),E.minSegmentDts=void 0===E.minSegmentDts?A.dts:Math.min(E.minSegmentDts,A.dts),E.maxSegmentDts=void 0===E.maxSegmentDts?A.dts:Math.max(E.maxSegmentDts,A.dts))},fu=function W(E){E=E||{},W.prototype.init.call(this),this.parse708captions_="boolean"!=typeof E.parse708captions||E.parse708captions,this.captionPackets_=[],this.ccStreams_=[new fi(0,0),new fi(0,1),new fi(1,0),new fi(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ur({captionServices:E.captionServices})),this.reset(),this.ccStreams_.forEach(function(A){A.on("data",this.trigger.bind(this,"data")),A.on("partialdone",this.trigger.bind(this,"partialdone")),A.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(fu.prototype=new e).push=function(W){var E,A,I;if("sei_rbsp"===W.nalUnitType&&(E=function(E){for(var A=0,I={payloadType:-1,payloadSize:0},D=0,N=0;A<E.byteLength&&128!==E[A];){for(;255===E[A];)D+=255,A++;for(D+=E[A++];255===E[A];)N+=255,A++;if(N+=E[A++],!I.payload&&4===D){if("GA94"===String.fromCharCode(E[A+3],E[A+4],E[A+5],E[A+6])){I.payloadType=D,I.payloadSize=N,I.payload=E.subarray(A,A+N);break}I.payload=void 0}A+=N,D=0,N=0}return I}(W.escapedRBSP)).payload&&4===E.payloadType&&(A=function(E){return 181!==E.payload[0]||49!=(E.payload[1]<<8|E.payload[2])||"GA94"!==String.fromCharCode(E.payload[3],E.payload[4],E.payload[5],E.payload[6])||3!==E.payload[7]?null:E.payload.subarray(8,E.payload.length-1)}(E))){if(W.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(W.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));I=function(E,A){var D,N,F,J,I=[];if(!(64&A[0]))return I;for(N=31&A[0],D=0;D<N;D++)J={type:3&A[2+(F=3*D)],pts:E},4&A[F+2]&&(J.ccData=A[F+3]<<8|A[F+4],I.push(J));return I}(W.pts,A),this.captionPackets_=this.captionPackets_.concat(I),this.latestDts_!==W.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=W.dts}},fu.prototype.flushCCStreams=function(W){this.ccStreams_.forEach(function(E){return"flush"===W?E.flush():E.partialFlush()},this)},fu.prototype.flushStream=function(W){this.captionPackets_.length?(this.captionPackets_.forEach(function(E,A){E.presortIndex=A}),this.captionPackets_.sort(function(E,A){return E.pts===A.pts?E.presortIndex-A.presortIndex:E.pts-A.pts}),this.captionPackets_.forEach(function(E){E.type<2?this.dispatchCea608Packet(E):this.dispatchCea708Packet(E)},this),this.captionPackets_.length=0,this.flushCCStreams(W)):this.flushCCStreams(W)},fu.prototype.flush=function(){return this.flushStream("flush")},fu.prototype.partialFlush=function(){return this.flushStream("partialFlush")},fu.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(W){W.reset()})},fu.prototype.dispatchCea608Packet=function(W){this.setsTextOrXDSActive(W)?this.activeCea608Channel_[W.type]=null:this.setsChannel1Active(W)?this.activeCea608Channel_[W.type]=0:this.setsChannel2Active(W)&&(this.activeCea608Channel_[W.type]=1),null!==this.activeCea608Channel_[W.type]&&this.ccStreams_[(W.type<<1)+this.activeCea608Channel_[W.type]].push(W)},fu.prototype.setsChannel1Active=function(W){return 4096==(30720&W.ccData)},fu.prototype.setsChannel2Active=function(W){return 6144==(30720&W.ccData)},fu.prototype.setsTextOrXDSActive=function(W){return 256==(28928&W.ccData)||4138==(30974&W.ccData)||6186==(30974&W.ccData)},fu.prototype.dispatchCea708Packet=function(W){this.parse708captions_&&this.cc708Stream_.push(W)};var $5={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},AA=function(E){return 32<=E&&E<=127||160<=E&&E<=255},lf=function(E){this.windowNum=E,this.reset()};lf.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},lf.prototype.getText=function(){return this.rows.join("\n")},lf.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},lf.prototype.newLine=function(W){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(W),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},lf.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},lf.prototype.addText=function(W){this.rows[this.rowIdx]+=W},lf.prototype.backspace=function(){if(!this.isEmpty()){var W=this.rows[this.rowIdx];this.rows[this.rowIdx]=W.substr(0,W.length-1)}};var DA=function(E,A,I){this.serviceNum=E,this.text="",this.currentWindow=new lf(-1),this.windows=[],this.stream=I,"string"==typeof A&&this.createTextDecoder(A)};DA.prototype.init=function(W,E){this.startPts=W;for(var A=0;A<8;A++)this.windows[A]=new lf(A),"function"==typeof E&&(this.windows[A].beforeRowOverflow=E)},DA.prototype.setCurrentWindow=function(W){this.currentWindow=this.windows[W]},DA.prototype.createTextDecoder=function(W){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(W)}catch(E){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+W+" encoding. "+E})}};var Ur=function W(E){E=E||{},W.prototype.init.call(this);var N,A=this,I=E.captionServices||{},D={};Object.keys(I).forEach(function(F){N=I[F],/^SERVICE/.test(F)&&(D[F]=N.encoding)}),this.serviceEncodings=D,this.current708Packet=null,this.services={},this.push=function(F){3===F.type?(A.new708Packet(),A.add708Bytes(F)):(null===A.current708Packet&&A.new708Packet(),A.add708Bytes(F))}};Ur.prototype=new e,Ur.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ur.prototype.add708Bytes=function(W){var E=W.ccData,A=E>>>8,I=255&E;this.current708Packet.ptsVals.push(W.pts),this.current708Packet.data.push(A),this.current708Packet.data.push(I)},Ur.prototype.push708Packet=function(){var W=this.current708Packet,E=W.data,A=null,I=null,D=0,N=E[D++];for(W.seq=N>>6,W.sizeCode=63&N;D<E.length;D++)I=31&(N=E[D++]),7==(A=N>>5)&&I>0&&(A=N=E[D++]),this.pushServiceBlock(A,D,I),I>0&&(D+=I-1)},Ur.prototype.pushServiceBlock=function(W,E,A){var I,D=E,N=this.current708Packet.data,F=this.services[W];for(F||(F=this.initService(W,D));D<E+A&&D<N.length;D++)AA(I=N[D])?D=this.handleText(D,F):24===I?D=this.multiByteCharacter(D,F):16===I?D=this.extendedCommands(D,F):128<=I&&I<=135?D=this.setCurrentWindow(D,F):152<=I&&I<=159?D=this.defineWindow(D,F):136===I?D=this.clearWindows(D,F):140===I?D=this.deleteWindows(D,F):137===I?D=this.displayWindows(D,F):138===I?D=this.hideWindows(D,F):139===I?D=this.toggleWindows(D,F):151===I?D=this.setWindowAttributes(D,F):144===I?D=this.setPenAttributes(D,F):145===I?D=this.setPenColor(D,F):146===I?D=this.setPenLocation(D,F):143===I?F=this.reset(D,F):8===I?F.currentWindow.backspace():12===I?F.currentWindow.clearText():13===I?F.currentWindow.pendingNewLine=!0:14===I?F.currentWindow.clearText():141===I&&D++},Ur.prototype.extendedCommands=function(W,E){var I=this.current708Packet.data[++W];return AA(I)&&(W=this.handleText(W,E,{isExtended:!0})),W},Ur.prototype.getPts=function(W){return this.current708Packet.ptsVals[Math.floor(W/2)]},Ur.prototype.initService=function(W,E){var A,D,I=this;return(A="SERVICE"+W)in this.serviceEncodings&&(D=this.serviceEncodings[A]),this.services[W]=new DA(W,D,I),this.services[W].init(this.getPts(E),function(N){I.flushDisplayed(N,I.services[W])}),this.services[W]},Ur.prototype.handleText=function(W,E,A){var ve,Re,I=A&&A.isExtended,N=this.current708Packet.data,F=I?4096:0,J=N[W],Ae=E.currentWindow;return E.textDecoder_&&!I?(A&&A.isMultiByte?(Re=[J,N[W+1]],W++):Re=[J],ve=E.textDecoder_.decode(new Uint8Array(Re))):ve=function(E){var A=$5[E]||E;return 4096&E&&E===A?"":String.fromCharCode(A)}(F|J),Ae.pendingNewLine&&!Ae.isEmpty()&&Ae.newLine(this.getPts(W)),Ae.pendingNewLine=!1,Ae.addText(ve),W},Ur.prototype.multiByteCharacter=function(W,E){var A=this.current708Packet.data,D=A[W+2];return AA(A[W+1])&&AA(D)&&(W=this.handleText(++W,E,{isMultiByte:!0})),W},Ur.prototype.setCurrentWindow=function(W,E){return E.setCurrentWindow(7&this.current708Packet.data[W]),W},Ur.prototype.defineWindow=function(W,E){var A=this.current708Packet.data,I=A[W];E.setCurrentWindow(7&I);var N=E.currentWindow;return I=A[++W],N.visible=(32&I)>>5,N.rowLock=(16&I)>>4,N.columnLock=(8&I)>>3,N.priority=7&I,I=A[++W],N.relativePositioning=(128&I)>>7,N.anchorVertical=127&I,I=A[++W],N.anchorHorizontal=I,I=A[++W],N.anchorPoint=(240&I)>>4,N.rowCount=15&I,I=A[++W],N.columnCount=63&I,I=A[++W],N.windowStyle=(56&I)>>3,N.penStyle=7&I,N.virtualRowCount=N.rowCount+1,W},Ur.prototype.setWindowAttributes=function(W,E){var A=this.current708Packet.data,I=A[W],D=E.currentWindow.winAttr;return I=A[++W],D.fillOpacity=(192&I)>>6,D.fillRed=(48&I)>>4,D.fillGreen=(12&I)>>2,D.fillBlue=3&I,I=A[++W],D.borderType=(192&I)>>6,D.borderRed=(48&I)>>4,D.borderGreen=(12&I)>>2,D.borderBlue=3&I,I=A[++W],D.borderType+=(128&I)>>5,D.wordWrap=(64&I)>>6,D.printDirection=(48&I)>>4,D.scrollDirection=(12&I)>>2,D.justify=3&I,I=A[++W],D.effectSpeed=(240&I)>>4,D.effectDirection=(12&I)>>2,D.displayEffect=3&I,W},Ur.prototype.flushDisplayed=function(W,E){for(var A=[],I=0;I<8;I++)E.windows[I].visible&&!E.windows[I].isEmpty()&&A.push(E.windows[I].getText());E.endPts=W,E.text=A.join("\n\n"),this.pushCaption(E),E.startPts=W},Ur.prototype.pushCaption=function(W){""!==W.text&&(this.trigger("data",{startPts:W.startPts,endPts:W.endPts,text:W.text,stream:"cc708_"+W.serviceNum}),W.text="",W.startPts=W.endPts)},Ur.prototype.displayWindows=function(W,E){var I=this.current708Packet.data[++W],D=this.getPts(W);this.flushDisplayed(D,E);for(var N=0;N<8;N++)I&1<<N&&(E.windows[N].visible=1);return W},Ur.prototype.hideWindows=function(W,E){var I=this.current708Packet.data[++W],D=this.getPts(W);this.flushDisplayed(D,E);for(var N=0;N<8;N++)I&1<<N&&(E.windows[N].visible=0);return W},Ur.prototype.toggleWindows=function(W,E){var I=this.current708Packet.data[++W],D=this.getPts(W);this.flushDisplayed(D,E);for(var N=0;N<8;N++)I&1<<N&&(E.windows[N].visible^=1);return W},Ur.prototype.clearWindows=function(W,E){var I=this.current708Packet.data[++W],D=this.getPts(W);this.flushDisplayed(D,E);for(var N=0;N<8;N++)I&1<<N&&E.windows[N].clearText();return W},Ur.prototype.deleteWindows=function(W,E){var I=this.current708Packet.data[++W],D=this.getPts(W);this.flushDisplayed(D,E);for(var N=0;N<8;N++)I&1<<N&&E.windows[N].reset();return W},Ur.prototype.setPenAttributes=function(W,E){var A=this.current708Packet.data,I=A[W],D=E.currentWindow.penAttr;return I=A[++W],D.textTag=(240&I)>>4,D.offset=(12&I)>>2,D.penSize=3&I,I=A[++W],D.italics=(128&I)>>7,D.underline=(64&I)>>6,D.edgeType=(56&I)>>3,D.fontStyle=7&I,W},Ur.prototype.setPenColor=function(W,E){var A=this.current708Packet.data,I=A[W],D=E.currentWindow.penColor;return I=A[++W],D.fgOpacity=(192&I)>>6,D.fgRed=(48&I)>>4,D.fgGreen=(12&I)>>2,D.fgBlue=3&I,I=A[++W],D.bgOpacity=(192&I)>>6,D.bgRed=(48&I)>>4,D.bgGreen=(12&I)>>2,D.bgBlue=3&I,I=A[++W],D.edgeRed=(48&I)>>4,D.edgeGreen=(12&I)>>2,D.edgeBlue=3&I,W},Ur.prototype.setPenLocation=function(W,E){var A=this.current708Packet.data,I=A[W],D=E.currentWindow.penLoc;return E.currentWindow.pendingNewLine=!0,I=A[++W],D.row=15&I,I=A[++W],D.column=63&I,W},Ur.prototype.reset=function(W,E){var A=this.getPts(W);return this.flushDisplayed(A,E),this.initService(E.serviceNum,W)};var W5={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},kA=function(E){return null===E?"":(E=W5[E]||E,String.fromCharCode(E))},z5=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],jv=function(){for(var E=[],A=15;A--;)E.push("");return E},fi=function W(E,A){W.prototype.init.call(this),this.field_=E||0,this.dataChannel_=A||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(I){var D,N,F,J,oe;if((D=32639&I.ccData)!==this.lastControlCode_){if(4096==(61440&D)?this.lastControlCode_=D:D!==this.PADDING_&&(this.lastControlCode_=null),F=D>>>8,J=255&D,D!==this.PADDING_)if(D===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(D===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(I.pts),this.flushDisplayed(I.pts),N=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=N,this.startPts_=I.pts;else if(D===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(I.pts);else if(D===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(I.pts);else if(D===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(I.pts);else if(D===this.CARRIAGE_RETURN_)this.clearFormatting(I.pts),this.flushDisplayed(I.pts),this.shiftRowsUp_(),this.startPts_=I.pts;else if(D===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(D===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(I.pts),this.displayed_=jv();else if(D===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=jv();else if(D===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(I.pts),this.displayed_=jv()),this.mode_="paintOn",this.startPts_=I.pts;else if(this.isSpecialCharacter(F,J))oe=kA((F=(3&F)<<8)|J),this[this.mode_](I.pts,oe),this.column_++;else if(this.isExtCharacter(F,J))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),oe=kA((F=(3&F)<<8)|J),this[this.mode_](I.pts,oe),this.column_++;else if(this.isMidRowCode(F,J))this.clearFormatting(I.pts),this[this.mode_](I.pts," "),this.column_++,14==(14&J)&&this.addFormatting(I.pts,["i"]),1==(1&J)&&this.addFormatting(I.pts,["u"]);else if(this.isOffsetControlCode(F,J))this.column_+=3&J;else if(this.isPAC(F,J)){var Ae=z5.indexOf(7968&D);"rollUp"===this.mode_&&(Ae-this.rollUpRows_+1<0&&(Ae=this.rollUpRows_-1),this.setRollUp(I.pts,Ae)),Ae!==this.row_&&(this.clearFormatting(I.pts),this.row_=Ae),1&J&&-1===this.formatting_.indexOf("u")&&this.addFormatting(I.pts,["u"]),16==(16&D)&&(this.column_=4*((14&D)>>1)),this.isColorPAC(J)&&14==(14&J)&&this.addFormatting(I.pts,["i"])}else this.isNormalChar(F)&&(0===J&&(J=null),oe=kA(F),oe+=kA(J),this[this.mode_](I.pts,oe),this.column_+=oe.length)}else this.lastControlCode_=null}};fi.prototype=new e,fi.prototype.flushDisplayed=function(W){var E=this.displayed_.map(function(A,I){try{return A.trim()}catch(D){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+I+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");E.length&&this.trigger("data",{startPts:this.startPts_,endPts:W,text:E,stream:this.name_})},fi.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=jv(),this.nonDisplayed_=jv(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},fi.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},fi.prototype.isSpecialCharacter=function(W,E){return W===this.EXT_&&E>=48&&E<=63},fi.prototype.isExtCharacter=function(W,E){return(W===this.EXT_+1||W===this.EXT_+2)&&E>=32&&E<=63},fi.prototype.isMidRowCode=function(W,E){return W===this.EXT_&&E>=32&&E<=47},fi.prototype.isOffsetControlCode=function(W,E){return W===this.OFFSET_&&E>=33&&E<=35},fi.prototype.isPAC=function(W,E){return W>=this.BASE_&&W<this.BASE_+8&&E>=64&&E<=127},fi.prototype.isColorPAC=function(W){return W>=64&&W<=79||W>=96&&W<=127},fi.prototype.isNormalChar=function(W){return W>=32&&W<=127},fi.prototype.setRollUp=function(W,E){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(W),this.nonDisplayed_=jv(),this.displayed_=jv()),void 0!==E&&E!==this.row_)for(var A=0;A<this.rollUpRows_;A++)this.displayed_[E-A]=this.displayed_[this.row_-A],this.displayed_[this.row_-A]="";void 0===E&&(E=this.row_),this.topRow_=E-this.rollUpRows_+1},fi.prototype.addFormatting=function(W,E){this.formatting_=this.formatting_.concat(E);var A=E.reduce(function(I,D){return I+"<"+D+">"},"");this[this.mode_](W,A)},fi.prototype.clearFormatting=function(W){if(this.formatting_.length){var E=this.formatting_.reverse().reduce(function(A,I){return A+"</"+I+">"},"");this.formatting_=[],this[this.mode_](W,E)}},fi.prototype.popOn=function(W,E){var A=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=A+=E},fi.prototype.rollUp=function(W,E){var A=this.displayed_[this.row_];this.displayed_[this.row_]=A+=E},fi.prototype.shiftRowsUp_=function(){var W;for(W=0;W<this.topRow_;W++)this.displayed_[W]="";for(W=this.row_+1;W<15;W++)this.displayed_[W]="";for(W=this.topRow_;W<this.row_;W++)this.displayed_[W]=this.displayed_[W+1];this.displayed_[this.row_]=""},fi.prototype.paintOn=function(W,E){var A=this.displayed_[this.row_];this.displayed_[this.row_]=A+=E};var MA={CaptionStream:fu,Cea608Stream:fi,Cea708Stream:Ur},no={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},zM=function(E,A){var I=1;for(E>A&&(I=-1);Math.abs(A-E)>4294967296;)E+=8589934592*I;return E},e2=function W(E){var A,I;W.prototype.init.call(this),this.type_=E||"shared",this.push=function(D){"shared"!==this.type_&&D.type!==this.type_||(void 0===I&&(I=D.dts),D.dts=zM(D.dts,I),D.pts=zM(D.pts,I),A=D.dts,this.trigger("data",D))},this.flush=function(){I=A,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){I=void 0,A=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};e2.prototype=new e;var NA,t2_TimestampRolloverStream=e2,t2_handleRollover=zM,n2=function(E,A,I){var D,N="";for(D=A;D<I;D++)N+="%"+("00"+E[D].toString(16)).slice(-2);return N},RA=function(E,A,I){return decodeURIComponent(n2(E,A,I))},Y5=function(E,A,I){return unescape(n2(E,A,I))},OA=function(E){return E[0]<<21|E[1]<<14|E[2]<<7|E[3]},r2={TXXX:function(E){var A;if(3===E.data[0]){for(A=1;A<E.data.length;A++)if(0===E.data[A]){E.description=RA(E.data,1,A),E.value=RA(E.data,A+1,E.data.length).replace(/\0*$/,"");break}E.data=E.value}},WXXX:function(E){var A;if(3===E.data[0])for(A=1;A<E.data.length;A++)if(0===E.data[A]){E.description=RA(E.data,1,A),E.url=RA(E.data,A+1,E.data.length);break}},PRIV:function(E){var A;for(A=0;A<E.data.length;A++)if(0===E.data[A]){E.owner=Y5(E.data,0,A);break}E.privateData=E.data.subarray(A+1),E.data=E.privateData}};NA=function(E){var F,A={descriptor:E&&E.descriptor},I=0,D=[],N=0;if(NA.prototype.init.call(this),this.dispatchType=no.METADATA_STREAM_TYPE.toString(16),A.descriptor)for(F=0;F<A.descriptor.length;F++)this.dispatchType+=("00"+A.descriptor[F].toString(16)).slice(-2);this.push=function(J){var oe,Ae,ve,Re,dt;if("timed-metadata"===J.type){if(J.dataAlignmentIndicator&&(N=0,D.length=0),0===D.length&&(J.data.length<10||J.data[0]!=="I".charCodeAt(0)||J.data[1]!=="D".charCodeAt(0)||J.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(D.push(J),N+=J.data.byteLength,1===D.length&&(I=OA(J.data.subarray(6,10)),I+=10),!(N<I)){for(oe={data:new Uint8Array(I),frames:[],pts:D[0].pts,dts:D[0].dts},dt=0;dt<I;)oe.data.set(D[0].data.subarray(0,I-dt),dt),dt+=D[0].data.byteLength,N-=D[0].data.byteLength,D.shift();Ae=10,64&oe.data[5]&&(Ae+=4,Ae+=OA(oe.data.subarray(10,14)),I-=OA(oe.data.subarray(16,20)));do{if((ve=OA(oe.data.subarray(Ae+4,Ae+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((Re={id:String.fromCharCode(oe.data[Ae],oe.data[Ae+1],oe.data[Ae+2],oe.data[Ae+3]),data:oe.data.subarray(Ae+10,Ae+ve+10)}).key=Re.id,r2[Re.id]&&(r2[Re.id](Re),"com.apple.streaming.transportStreamTimestamp"===Re.owner)){var Xt=Re.data,xt=(1&Xt[3])<<30|Xt[4]<<22|Xt[5]<<14|Xt[6]<<6|Xt[7]>>>2;xt*=4,Re.timeStamp=xt+=3&Xt[7],void 0===oe.pts&&void 0===oe.dts&&(oe.pts=Re.timeStamp,oe.dts=Re.timeStamp),this.trigger("timestamp",Re)}oe.frames.push(Re),Ae+=10,Ae+=ve}while(Ae<I);this.trigger("data",oe)}}}},NA.prototype=new e;var LA,Gw,FA,Q5=NA,X5=t2_TimestampRolloverStream;LA=function(){var E=new Uint8Array(188),A=0;LA.prototype.init.call(this),this.push=function(I){var F,D=0,N=188;for(A?((F=new Uint8Array(I.byteLength+A)).set(E.subarray(0,A)),F.set(I,A),A=0):F=I;N<F.byteLength;)71!==F[D]||71!==F[N]?(D++,N++):(this.trigger("data",F.subarray(D,N)),D+=188,N+=188);D<F.byteLength&&(E.set(F.subarray(D),0),A=F.byteLength-D)},this.flush=function(){188===A&&71===E[0]&&(this.trigger("data",E),A=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){A=0,this.trigger("reset")}},LA.prototype=new e,Gw=function(){var E,A,I,D;Gw.prototype.init.call(this),D=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,E=function(F,J){var oe=0;J.payloadUnitStartIndicator&&(oe+=F[oe]+1),"pat"===J.type?A(F.subarray(oe),J):I(F.subarray(oe),J)},A=function(F,J){J.section_number=F[7],J.last_section_number=F[8],D.pmtPid=(31&F[10])<<8|F[11],J.pmtPid=D.pmtPid},I=function(F,J){var Ae,Re;if(1&F[5]){for(D.programMapTable={video:null,audio:null,"timed-metadata":{}},Ae=3+((15&F[1])<<8|F[2])-4,Re=12+((15&F[10])<<8|F[11]);Re<Ae;){var dt=F[Re],Bt=(31&F[Re+1])<<8|F[Re+2];dt===no.H264_STREAM_TYPE&&null===D.programMapTable.video?D.programMapTable.video=Bt:dt===no.ADTS_STREAM_TYPE&&null===D.programMapTable.audio?D.programMapTable.audio=Bt:dt===no.METADATA_STREAM_TYPE&&(D.programMapTable["timed-metadata"][Bt]=dt),Re+=5+((15&F[Re+3])<<8|F[Re+4])}J.programMapTable=D.programMapTable}},this.push=function(N){var F={},J=4;if(F.payloadUnitStartIndicator=!!(64&N[1]),F.pid=31&N[1],F.pid<<=8,F.pid|=N[2],(48&N[3])>>>4>1&&(J+=N[J]+1),0===F.pid)F.type="pat",E(N.subarray(J),F),this.trigger("data",F);else if(F.pid===this.pmtPid)for(F.type="pmt",E(N.subarray(J),F),this.trigger("data",F);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([N,J,F]):this.processPes_(N,J,F)},this.processPes_=function(N,F,J){J.streamType=J.pid===this.programMapTable.video?no.H264_STREAM_TYPE:J.pid===this.programMapTable.audio?no.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][J.pid],J.type="pes",J.data=N.subarray(F),this.trigger("data",J)}},Gw.prototype=new e,Gw.STREAM_TYPES={h264:27,adts:15},FA=function(){var F,E=this,A=!1,I={data:[],size:0},D={data:[],size:0},N={data:[],size:0},oe=function(ve,Re,dt){var na,Bt=new Uint8Array(ve.size),Xt={type:Re},xt=0,gn=0,Ts=!1;if(ve.data.length&&!(ve.size<9)){for(Xt.trackId=ve.data[0].pid,xt=0;xt<ve.data.length;xt++)Bt.set((na=ve.data[xt]).data,gn),gn+=na.data.byteLength;(function(ve,Re){var dt,Bt=ve[0]<<16|ve[1]<<8|ve[2];Re.data=new Uint8Array,1===Bt&&(Re.packetLength=6+(ve[4]<<8|ve[5]),Re.dataAlignmentIndicator=0!=(4&ve[6]),192&(dt=ve[7])&&(Re.pts=(14&ve[9])<<27|(255&ve[10])<<20|(254&ve[11])<<12|(255&ve[12])<<5|(254&ve[13])>>>3,Re.pts*=4,Re.pts+=(6&ve[13])>>>1,Re.dts=Re.pts,64&dt&&(Re.dts=(14&ve[14])<<27|(255&ve[15])<<20|(254&ve[16])<<12|(255&ve[17])<<5|(254&ve[18])>>>3,Re.dts*=4,Re.dts+=(6&ve[18])>>>1)),Re.data=ve.subarray(9+ve[8]))})(Bt,Xt),Ts="video"===Re||Xt.packetLength<=ve.size,(dt||Ts)&&(ve.size=0,ve.data.length=0),Ts&&E.trigger("data",Xt)}};FA.prototype.init.call(this),this.push=function(Ae){({pat:function(){},pes:function(){var Re,dt;switch(Ae.streamType){case no.H264_STREAM_TYPE:Re=I,dt="video";break;case no.ADTS_STREAM_TYPE:Re=D,dt="audio";break;case no.METADATA_STREAM_TYPE:Re=N,dt="timed-metadata";break;default:return}Ae.payloadUnitStartIndicator&&oe(Re,dt,!0),Re.data.push(Ae),Re.size+=Ae.data.byteLength},pmt:function(){var Re={type:"metadata",tracks:[]};null!==(F=Ae.programMapTable).video&&Re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),null!==F.audio&&Re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),A=!0,E.trigger("data",Re)}})[Ae.type]()},this.reset=function(){I.size=0,I.data.length=0,D.size=0,D.data.length=0,this.trigger("reset")},this.flushStreams_=function(){oe(I,"video"),oe(D,"audio"),oe(N,"timed-metadata")},this.flush=function(){if(!A&&F){var Ae={type:"metadata",tracks:[]};null!==F.video&&Ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),null!==F.audio&&Ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),E.trigger("data",Ae)}A=!1,this.flushStreams_(),this.trigger("done")}},FA.prototype=new e;var i2={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:LA,TransportParseStream:Gw,ElementaryStream:FA,TimestampRolloverStream:X5,CaptionStream:MA.CaptionStream,Cea608Stream:MA.Cea608Stream,Cea708Stream:MA.Cea708Stream,MetadataStream:Q5};for(var KM in no)no.hasOwnProperty(KM)&&(i2[KM]=no[KM]);var jA,cf=i2,s2=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];jA=function(E){var A,I=0;jA.prototype.init.call(this),this.skipWarn_=function(D,N){this.trigger("log",{level:"warn",message:"adts skiping bytes "+D+" to "+N+" in frame "+I+" outside syncword"})},this.push=function(D){var F,J,oe,Ae,ve,N=0;if(E||(I=0),"audio"===D.type){A&&A.length?(oe=A,(A=new Uint8Array(oe.byteLength+D.data.byteLength)).set(oe),A.set(D.data,oe.byteLength)):A=D.data;for(var Re;N+7<A.length;)if(255===A[N]&&240==(246&A[N+1])){if("number"==typeof Re&&(this.skipWarn_(Re,N),Re=null),J=2*(1&~A[N+1]),ve=9e4*(Ae=1024*(1+(3&A[N+6])))/s2[(60&A[N+2])>>>2],A.byteLength-N<(F=(3&A[N+3])<<11|A[N+4]<<3|(224&A[N+5])>>5))break;this.trigger("data",{pts:D.pts+I*ve,dts:D.dts+I*ve,sampleCount:Ae,audioobjecttype:1+(A[N+2]>>>6&3),channelcount:(1&A[N+2])<<2|(192&A[N+3])>>>6,samplerate:s2[(60&A[N+2])>>>2],samplingfrequencyindex:(60&A[N+2])>>>2,samplesize:16,data:A.subarray(N+7+J,N+F)}),I++,N+=F}else"number"!=typeof Re&&(Re=N),N++;"number"==typeof Re&&(this.skipWarn_(Re,N),Re=null),A=A.subarray(N)}},this.flush=function(){I=0,this.trigger("done")},this.reset=function(){A=void 0,this.trigger("reset")},this.endTimeline=function(){A=void 0,this.trigger("endedtimeline")}},jA.prototype=new e;var a2,o2=jA;a2=function(E){var A=E.byteLength,I=0,D=0;this.length=function(){return 8*A},this.bitsAvailable=function(){return 8*A+D},this.loadWord=function(){var N=E.byteLength-A,F=new Uint8Array(4),J=Math.min(4,A);if(0===J)throw new Error("no bytes available");F.set(E.subarray(N,N+J)),I=new DataView(F.buffer).getUint32(0),D=8*J,A-=J},this.skipBits=function(N){var F;D>N?(I<<=N,D-=N):(N-=D,N-=8*(F=Math.floor(N/8)),A-=F,this.loadWord(),I<<=N,D-=N)},this.readBits=function(N){var F=Math.min(D,N),J=I>>>32-F;return(D-=F)>0?I<<=F:A>0&&this.loadWord(),(F=N-F)>0?J<<F|this.readBits(F):J},this.skipLeadingZeros=function(){var N;for(N=0;N<D;++N)if(0!=(I&2147483648>>>N))return I<<=N,D-=N,N;return this.loadWord(),N+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var N=this.skipLeadingZeros();return this.readBits(N+1)-1},this.readExpGolomb=function(){var N=this.readUnsignedExpGolomb();return 1&N?1+N>>>1:-1*(N>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var UA,$w,u2,ez=a2;$w=function(){var A,I,E=0;$w.prototype.init.call(this),this.push=function(D){var N;I?((N=new Uint8Array(I.byteLength+D.data.byteLength)).set(I),N.set(D.data,I.byteLength),I=N):I=D.data;for(var F=I.byteLength;E<F-3;E++)if(1===I[E+2]){A=E+5;break}for(;A<F;)switch(I[A]){case 0:if(0!==I[A-1]){A+=2;break}if(0!==I[A-2]){A++;break}E+3!==A-2&&this.trigger("data",I.subarray(E+3,A-2));do{A++}while(1!==I[A]&&A<F);E=A-2,A+=3;break;case 1:if(0!==I[A-1]||0!==I[A-2]){A+=3;break}this.trigger("data",I.subarray(E+3,A-2)),E=A-2,A+=3;break;default:A+=3}I=I.subarray(E),A-=E,E=0},this.reset=function(){I=null,E=0,this.trigger("reset")},this.flush=function(){I&&I.byteLength>3&&this.trigger("data",I.subarray(E+3)),I=null,E=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},$w.prototype=new e,u2={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},UA=function(){var A,I,D,N,F,J,oe,E=new $w;UA.prototype.init.call(this),A=this,this.push=function(Ae){"video"===Ae.type&&(I=Ae.trackId,D=Ae.pts,N=Ae.dts,E.push(Ae))},E.on("data",function(Ae){var ve={trackId:I,pts:D,dts:N,data:Ae,nalUnitTypeCode:31&Ae[0]};switch(ve.nalUnitTypeCode){case 5:ve.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ve.nalUnitType="sei_rbsp",ve.escapedRBSP=F(Ae.subarray(1));break;case 7:ve.nalUnitType="seq_parameter_set_rbsp",ve.escapedRBSP=F(Ae.subarray(1)),ve.config=J(ve.escapedRBSP);break;case 8:ve.nalUnitType="pic_parameter_set_rbsp";break;case 9:ve.nalUnitType="access_unit_delimiter_rbsp"}A.trigger("data",ve)}),E.on("done",function(){A.trigger("done")}),E.on("partialdone",function(){A.trigger("partialdone")}),E.on("reset",function(){A.trigger("reset")}),E.on("endedtimeline",function(){A.trigger("endedtimeline")}),this.flush=function(){E.flush()},this.partialFlush=function(){E.partialFlush()},this.reset=function(){E.reset()},this.endTimeline=function(){E.endTimeline()},oe=function(ve,Re){var Xt,dt=8,Bt=8;for(Xt=0;Xt<ve;Xt++)0!==Bt&&(Bt=(dt+Re.readExpGolomb()+256)%256),dt=0===Bt?dt:Bt},F=function(ve){for(var Xt,xt,Re=ve.byteLength,dt=[],Bt=1;Bt<Re-2;)0===ve[Bt]&&0===ve[Bt+1]&&3===ve[Bt+2]?(dt.push(Bt+2),Bt+=2):Bt++;if(0===dt.length)return ve;Xt=Re-dt.length,xt=new Uint8Array(Xt);var gn=0;for(Bt=0;Bt<Xt;gn++,Bt++)gn===dt[0]&&(gn++,dt.shift()),xt[Bt]=ve[gn];return xt},J=function(ve){var xt,gn,Ts,na,Hv,tR,I2,A2,D2,nR,k2,Gv,Re=0,dt=0,Bt=0,Xt=0,Bi=[1,1];if(gn=(xt=new ez(ve)).readUnsignedByte(),na=xt.readUnsignedByte(),Ts=xt.readUnsignedByte(),xt.skipUnsignedExpGolomb(),u2[gn]&&(3===(Hv=xt.readUnsignedExpGolomb())&&xt.skipBits(1),xt.skipUnsignedExpGolomb(),xt.skipUnsignedExpGolomb(),xt.skipBits(1),xt.readBoolean()))for(k2=3!==Hv?8:12,Gv=0;Gv<k2;Gv++)xt.readBoolean()&&oe(Gv<6?16:64,xt);if(xt.skipUnsignedExpGolomb(),0===(tR=xt.readUnsignedExpGolomb()))xt.readUnsignedExpGolomb();else if(1===tR)for(xt.skipBits(1),xt.skipExpGolomb(),xt.skipExpGolomb(),I2=xt.readUnsignedExpGolomb(),Gv=0;Gv<I2;Gv++)xt.skipExpGolomb();if(xt.skipUnsignedExpGolomb(),xt.skipBits(1),A2=xt.readUnsignedExpGolomb(),D2=xt.readUnsignedExpGolomb(),0===(nR=xt.readBits(1))&&xt.skipBits(1),xt.skipBits(1),xt.readBoolean()&&(Re=xt.readUnsignedExpGolomb(),dt=xt.readUnsignedExpGolomb(),Bt=xt.readUnsignedExpGolomb(),Xt=xt.readUnsignedExpGolomb()),xt.readBoolean()&&xt.readBoolean())switch(xt.readUnsignedByte()){case 1:Bi=[1,1];break;case 2:Bi=[12,11];break;case 3:Bi=[10,11];break;case 4:Bi=[16,11];break;case 5:Bi=[40,33];break;case 6:Bi=[24,11];break;case 7:Bi=[20,11];break;case 8:Bi=[32,11];break;case 9:Bi=[80,33];break;case 10:Bi=[18,11];break;case 11:Bi=[15,11];break;case 12:Bi=[64,33];break;case 13:Bi=[160,99];break;case 14:Bi=[4,3];break;case 15:Bi=[3,2];break;case 16:Bi=[2,1];break;case 255:Bi=[xt.readUnsignedByte()<<8|xt.readUnsignedByte(),xt.readUnsignedByte()<<8|xt.readUnsignedByte()]}return{profileIdc:gn,levelIdc:Ts,profileCompatibility:na,width:16*(A2+1)-2*Re-2*dt,height:(2-nR)*(D2+1)*16-2*Bt-2*Xt,sarRatio:Bi}}},UA.prototype=new e;var VA,tz={H264Stream:UA,NalByteStream:$w},nz=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],l2=function(E,A){var I=E[A+6]<<21|E[A+7]<<14|E[A+8]<<7|E[A+9];return I=I>=0?I:0,(16&E[A+5])>>4?I+20:I+10},rz=function W(E,A){return E.length-A<10||E[A]!=="I".charCodeAt(0)||E[A+1]!=="D".charCodeAt(0)||E[A+2]!=="3".charCodeAt(0)?A:W(E,A+=l2(E,A))},c2=function(E){return E[0]<<21|E[1]<<14|E[2]<<7|E[3]},oz=function(E,A,I){return unescape(function(E,A,I){var D,N="";for(D=A;D<I;D++)N+="%"+("00"+E[D].toString(16)).slice(-2);return N}(E,A,I))},BA={isLikelyAacData:function(E){var A=rz(E,0);return E.length>=A+2&&255==(255&E[A])&&240==(240&E[A+1])&&16==(22&E[A+1])},parseId3TagSize:l2,parseAdtsSize:function(E,A){return 6144&E[A+3]|E[A+4]<<3|(224&E[A+5])>>5},parseType:function(E,A){return E[A]==="I".charCodeAt(0)&&E[A+1]==="D".charCodeAt(0)&&E[A+2]==="3".charCodeAt(0)?"timed-metadata":!0&E[A]&&240==(240&E[A+1])?"audio":null},parseSampleRate:function(E){for(var A=0;A+5<E.length;){if(255===E[A]&&240==(246&E[A+1]))return nz[(60&E[A+2])>>>2];A++}return null},parseAacTimestamp:function(E){var A,I,D;A=10,64&E[5]&&(A+=4,A+=c2(E.subarray(10,14)));do{if((I=c2(E.subarray(A+4,A+8)))<1)return null;if("PRIV"===String.fromCharCode(E[A],E[A+1],E[A+2],E[A+3])){D=E.subarray(A+10,A+I+10);for(var F=0;F<D.byteLength;F++)if(0===D[F]){if("com.apple.streaming.transportStreamTimestamp"===oz(D,0,F)){var oe=D.subarray(F+1),Ae=(1&oe[3])<<30|oe[4]<<22|oe[5]<<14|oe[6]<<6|oe[7]>>>2;return(Ae*=4)+(3&oe[7])}break}}A+=10,A+=I}while(A<E.byteLength);return null}};VA=function(){var E=new Uint8Array,A=0;VA.prototype.init.call(this),this.setTimestamp=function(I){A=I},this.push=function(I){var J,oe,Ae,D=0,N=0;for(E.length?(Ae=E.length,(E=new Uint8Array(I.byteLength+Ae)).set(E.subarray(0,Ae)),E.set(I,Ae)):E=I;E.length-N>=3;)if(E[N]!=="I".charCodeAt(0)||E[N+1]!=="D".charCodeAt(0)||E[N+2]!=="3".charCodeAt(0))if(255!=(255&E[N])||240!=(240&E[N+1]))N++;else{if(E.length-N<7||N+(D=BA.parseAdtsSize(E,N))>E.length)break;oe={type:"audio",data:E.subarray(N,N+D),pts:A,dts:A},this.trigger("data",oe),N+=D}else{if(E.length-N<10||N+(D=BA.parseId3TagSize(E,N))>E.length)break;J={type:"timed-metadata",data:E.subarray(N,N+D)},this.trigger("data",J),N+=D}E=E.length-N>0?E.subarray(N):new Uint8Array},this.reset=function(){E=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){E=new Uint8Array,this.trigger("endedtimeline")}},VA.prototype=new e;var qw,L0,HA,Uv,dz=VA,YM=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],QM=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],pz=tz.H264Stream,gz=BA.isLikelyAacData,vz=function(E,A){A.stream=E,this.trigger("log",A)},d2=function(E,A){for(var I=Object.keys(A),D=0;D<I.length;D++){var N=I[D];"headOfPipeline"===N||!A[N].on||A[N].on("log",vz.bind(E,N))}},h2=function(E,A){var I;if(E.length!==A.length)return!1;for(I=0;I<E.length;I++)if(E[I]!==A[I])return!1;return!0},XM=function(E,A,I,D,N,F){return{start:{dts:E,pts:E+(I-A)},end:{dts:E+(D-A),pts:E+(N-I)},prependedContentDuration:F,baseMediaDecodeTime:E}};L0=function(E,A){var D,I=[],N=0,F=0,J=1/0;D=(A=A||{}).firstSequenceNumber||0,L0.prototype.init.call(this),this.push=function(oe){hc_collectDtsInfo(E,oe),E&&YM.forEach(function(Ae){E[Ae]=oe[Ae]}),I.push(oe)},this.setEarliestDts=function(oe){N=oe},this.setVideoBaseMediaDecodeTime=function(oe){J=oe},this.setAudioAppendStart=function(oe){F=oe},this.flush=function(){var oe,Ae,ve,Re,dt,Bt,Xt;0!==I.length?(oe=function(E,A,I){return A.minSegmentDts>=I?E:(A.minSegmentDts=1/0,E.filter(function(D){return D.dts>=I&&(A.minSegmentDts=Math.min(A.minSegmentDts,D.dts),A.minSegmentPts=A.minSegmentDts,!0)}))}(I,E,N),E.baseMediaDecodeTime=hc_calculateTrackBaseMediaDecodeTime(E,A.keepOriginalTimestamps),Xt=IA_prefixWithSilence(E,oe,F,J),E.samples=function(E){var A,D=[];for(A=0;A<E.length;A++)D.push({size:E[A].data.byteLength,duration:1024});return D}(oe),ve=Cd_mdat(function(E){var A,I,D=0,N=new Uint8Array(function(E){var A,D=0;for(A=0;A<E.length;A++)D+=E[A].data.byteLength;return D}(E));for(A=0;A<E.length;A++)N.set((I=E[A]).data,D),D+=I.data.byteLength;return N}(oe)),I=[],Ae=Cd_moof(D,[E]),Re=new Uint8Array(Ae.byteLength+ve.byteLength),D++,Re.set(Ae),Re.set(ve,Ae.byteLength),hc_clearDtsInfo(E),dt=Math.ceil(9216e4/E.samplerate),oe.length&&(Bt=oe.length*dt,this.trigger("segmentTimingInfo",XM(cr_audioTsToVideoTs(E.baseMediaDecodeTime,E.samplerate),oe[0].dts,oe[0].pts,oe[0].dts+Bt,oe[0].pts+Bt,Xt||0)),this.trigger("timingInfo",{start:oe[0].pts,end:oe[0].pts+Bt})),this.trigger("data",{track:E,boxes:Re}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){hc_clearDtsInfo(E),I=[],this.trigger("reset")}},L0.prototype=new e,qw=function(E,A){var I,F,J,D=[],N=[];I=(A=A||{}).firstSequenceNumber||0,qw.prototype.init.call(this),delete E.minPTS,this.gopCache_=[],this.push=function(oe){hc_collectDtsInfo(E,oe),"seq_parameter_set_rbsp"===oe.nalUnitType&&!F&&(F=oe.config,E.sps=[oe.data],QM.forEach(function(Ae){E[Ae]=F[Ae]},this)),"pic_parameter_set_rbsp"===oe.nalUnitType&&!J&&(J=oe.data,E.pps=[oe.data]),D.push(oe)},this.flush=function(){for(var oe,Ae,ve,Re,dt,Bt,xt,gn,Xt=0;D.length&&"access_unit_delimiter_rbsp"!==D[0].nalUnitType;)D.shift();if(0===D.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(oe=function(E){var A,I,D=[],N=[];for(N.byteLength=0,N.nalCount=0,N.duration=0,D.byteLength=0,A=0;A<E.length;A++)"access_unit_delimiter_rbsp"===(I=E[A]).nalUnitType?(D.length&&(D.duration=I.dts-D.dts,N.byteLength+=D.byteLength,N.nalCount+=D.length,N.duration+=D.duration,N.push(D)),(D=[I]).byteLength=I.data.byteLength,D.pts=I.pts,D.dts=I.dts):("slice_layer_without_partitioning_rbsp_idr"===I.nalUnitType&&(D.keyFrame=!0),D.duration=I.dts-D.dts,D.byteLength+=I.data.byteLength,D.push(I));return N.length&&(!D.duration||D.duration<=0)&&(D.duration=N[N.length-1].duration),N.byteLength+=D.byteLength,N.nalCount+=D.length,N.duration+=D.duration,N.push(D),N}(D),(ve=function(E){var A,I,D=[],N=[];for(D.byteLength=0,D.nalCount=0,D.duration=0,D.pts=E[0].pts,D.dts=E[0].dts,N.byteLength=0,N.nalCount=0,N.duration=0,N.pts=E[0].pts,N.dts=E[0].dts,A=0;A<E.length;A++)(I=E[A]).keyFrame?(D.length&&(N.push(D),N.byteLength+=D.byteLength,N.nalCount+=D.nalCount,N.duration+=D.duration),(D=[I]).nalCount=I.length,D.byteLength=I.byteLength,D.pts=I.pts,D.dts=I.dts,D.duration=I.duration):(D.duration+=I.duration,D.nalCount+=I.length,D.byteLength+=I.byteLength,D.push(I));return N.length&&D.duration<=0&&(D.duration=N[N.length-1].duration),N.byteLength+=D.byteLength,N.nalCount+=D.nalCount,N.duration+=D.duration,N.push(D),N}(oe))[0][0].keyFrame||((Ae=this.getGopForFusion_(D[0],E))?(Xt=Ae.duration,ve.unshift(Ae),ve.byteLength+=Ae.byteLength,ve.nalCount+=Ae.nalCount,ve.pts=Ae.pts,ve.dts=Ae.dts,ve.duration+=Ae.duration):ve=function(E){var A;return!E[0][0].keyFrame&&E.length>1&&(A=E.shift(),E.byteLength-=A.byteLength,E.nalCount-=A.nalCount,E[0][0].dts=A.dts,E[0][0].pts=A.pts,E[0][0].duration+=A.duration),E}(ve)),N.length){var Ts;if(!(Ts=A.alignGopsAtEnd?this.alignGopsAtEnd_(ve):this.alignGopsAtStart_(ve)))return this.gopCache_.unshift({gop:ve.pop(),pps:E.pps,sps:E.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),D=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");hc_clearDtsInfo(E),ve=Ts}hc_collectDtsInfo(E,ve),E.samples=function(E,A){var I,D,N,F,oe=A||0,Ae=[];for(I=0;I<E.length;I++)for(F=E[I],D=0;D<F.length;D++)oe+=(N=ZU(F[D],oe)).size,Ae.push(N);return Ae}(ve),dt=Cd_mdat(function(E){var A,I,D,N,F,J,oe=0,dt=new Uint8Array(E.byteLength+4*E.nalCount),Bt=new DataView(dt.buffer);for(A=0;A<E.length;A++)for(N=E[A],I=0;I<N.length;I++)for(F=N[I],D=0;D<F.length;D++)Bt.setUint32(oe,(J=F[D]).data.byteLength),dt.set(J.data,oe+=4),oe+=J.data.byteLength;return dt}(ve)),E.baseMediaDecodeTime=hc_calculateTrackBaseMediaDecodeTime(E,A.keepOriginalTimestamps),this.trigger("processedGopsInfo",ve.map(function(na){return{pts:na.pts,dts:na.dts,byteLength:na.byteLength}})),this.trigger("segmentTimingInfo",XM(E.baseMediaDecodeTime,(xt=ve[0]).dts,xt.pts,(gn=ve[ve.length-1]).dts+gn.duration,gn.pts+gn.duration,Xt)),this.trigger("timingInfo",{start:ve[0].pts,end:ve[ve.length-1].pts+ve[ve.length-1].duration}),this.gopCache_.unshift({gop:ve.pop(),pps:E.pps,sps:E.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),D=[],this.trigger("baseMediaDecodeTime",E.baseMediaDecodeTime),this.trigger("timelineStartInfo",E.timelineStartInfo),Re=Cd_moof(I,[E]),Bt=new Uint8Array(Re.byteLength+dt.byteLength),I++,Bt.set(Re),Bt.set(dt,Re.byteLength),this.trigger("data",{track:E,boxes:Bt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),D=[],this.gopCache_.length=0,N.length=0,this.trigger("reset")},this.resetStream_=function(){hc_clearDtsInfo(E),F=void 0,J=void 0},this.getGopForFusion_=function(oe){var dt,Bt,Xt,xt,gn,Re=1/0;for(gn=0;gn<this.gopCache_.length;gn++)Xt=(xt=this.gopCache_[gn]).gop,E.pps&&h2(E.pps[0],xt.pps[0])&&E.sps&&h2(E.sps[0],xt.sps[0])&&(Xt.dts<E.timelineStartInfo.dts||(dt=oe.dts-Xt.dts-Xt.duration)>=-1e4&&dt<=45e3&&(!Bt||Re>dt)&&(Bt=xt,Re=dt));return Bt?Bt.gop:null},this.alignGopsAtStart_=function(oe){var Ae,ve,Re,dt,Bt,Xt,xt,gn;for(Bt=oe.byteLength,Xt=oe.nalCount,xt=oe.duration,Ae=ve=0;Ae<N.length&&ve<oe.length&&(Re=N[Ae]).pts!==(dt=oe[ve]).pts;)dt.pts>Re.pts?Ae++:(ve++,Bt-=dt.byteLength,Xt-=dt.nalCount,xt-=dt.duration);return 0===ve?oe:ve===oe.length?null:((gn=oe.slice(ve)).byteLength=Bt,gn.duration=xt,gn.nalCount=Xt,gn.pts=gn[0].pts,gn.dts=gn[0].dts,gn)},this.alignGopsAtEnd_=function(oe){var Ae,ve,Re,dt,Bt,Xt,xt;for(Ae=N.length-1,ve=oe.length-1,Bt=null,Xt=!1;Ae>=0&&ve>=0;){if((Re=N[Ae]).pts===(dt=oe[ve]).pts){Xt=!0;break}Re.pts>dt.pts?Ae--:(Ae===N.length-1&&(Bt=ve),ve--)}if(!Xt&&null===Bt)return null;if(0===(xt=Xt?ve:Bt))return oe;var gn=oe.slice(xt),Ts=gn.reduce(function(na,Hv){return na.byteLength+=Hv.byteLength,na.duration+=Hv.duration,na.nalCount+=Hv.nalCount,na},{byteLength:0,duration:0,nalCount:0});return gn.byteLength=Ts.byteLength,gn.duration=Ts.duration,gn.nalCount=Ts.nalCount,gn.pts=gn[0].pts,gn.dts=gn[0].dts,gn},this.alignGopsWith=function(oe){N=oe}},qw.prototype=new e,Uv=function(E,A){this.numberOfTracks=0,this.metadataStream=A,this.remuxTracks=void 0===(E=E||{}).remux||!!E.remux,this.keepOriginalTimestamps="boolean"==typeof E.keepOriginalTimestamps&&E.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Uv.prototype.init.call(this),this.push=function(I){return I.text?this.pendingCaptions.push(I):I.frames?this.pendingMetadata.push(I):(this.pendingTracks.push(I.track),this.pendingBytes+=I.boxes.byteLength,"video"===I.track.type&&(this.videoTrack=I.track,this.pendingBoxes.push(I.boxes)),void("audio"===I.track.type&&(this.audioTrack=I.track,this.pendingBoxes.unshift(I.boxes))))}},Uv.prototype=new e,Uv.prototype.flush=function(W){var I,D,N,J,E=0,A={captions:[],captionStreams:{},metadata:[],info:{}},F=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==W&&"AudioSegmentStream"!==W)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(F=this.videoTrack.timelineStartInfo.pts,QM.forEach(function(oe){A.info[oe]=this.videoTrack[oe]},this)):this.audioTrack&&(F=this.audioTrack.timelineStartInfo.pts,YM.forEach(function(oe){A.info[oe]=this.audioTrack[oe]},this)),this.videoTrack||this.audioTrack){for(A.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,N=function(E){var D,A=o(),I=w(E);return(D=new Uint8Array(A.byteLength+I.byteLength)).set(A),D.set(I,A.byteLength),D}(this.pendingTracks),A.initSegment=new Uint8Array(N.byteLength),A.initSegment.set(N),A.data=new Uint8Array(this.pendingBytes),J=0;J<this.pendingBoxes.length;J++)A.data.set(this.pendingBoxes[J],E),E+=this.pendingBoxes[J].byteLength;for(J=0;J<this.pendingCaptions.length;J++)(I=this.pendingCaptions[J]).startTime=cr_metadataTsToSeconds(I.startPts,F,this.keepOriginalTimestamps),I.endTime=cr_metadataTsToSeconds(I.endPts,F,this.keepOriginalTimestamps),A.captionStreams[I.stream]=!0,A.captions.push(I);for(J=0;J<this.pendingMetadata.length;J++)(D=this.pendingMetadata[J]).cueTime=cr_metadataTsToSeconds(D.pts,F,this.keepOriginalTimestamps),A.metadata.push(D);for(A.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",A),J=0;J<A.captions.length;J++)this.trigger("caption",I=A.captions[J]);for(J=0;J<A.metadata.length;J++)this.trigger("id3Frame",D=A.metadata[J])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Uv.prototype.setRemux=function(W){this.remuxTracks=W},HA=function(E){var D,N,A=this,I=!0;HA.prototype.init.call(this),this.baseMediaDecodeTime=(E=E||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="aac",F.metadataStream=new cf.MetadataStream,F.aacStream=new dz,F.audioTimestampRolloverStream=new cf.TimestampRolloverStream("audio"),F.timedMetadataTimestampRolloverStream=new cf.TimestampRolloverStream("timed-metadata"),F.adtsStream=new o2,F.coalesceStream=new Uv(E,F.metadataStream),F.headOfPipeline=F.aacStream,F.aacStream.pipe(F.audioTimestampRolloverStream).pipe(F.adtsStream),F.aacStream.pipe(F.timedMetadataTimestampRolloverStream).pipe(F.metadataStream).pipe(F.coalesceStream),F.metadataStream.on("timestamp",function(J){F.aacStream.setTimestamp(J.timeStamp)}),F.aacStream.on("data",function(J){"timed-metadata"!==J.type&&"audio"!==J.type||F.audioSegmentStream||(N=N||{timelineStartInfo:{baseMediaDecodeTime:A.baseMediaDecodeTime},codec:"adts",type:"audio"},F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new L0(N,E),F.audioSegmentStream.on("log",A.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",A.trigger.bind(A,"audioTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream),A.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!D}))}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),d2(this,F)},this.setupTsPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="ts",F.metadataStream=new cf.MetadataStream,F.packetStream=new cf.TransportPacketStream,F.parseStream=new cf.TransportParseStream,F.elementaryStream=new cf.ElementaryStream,F.timestampRolloverStream=new cf.TimestampRolloverStream,F.adtsStream=new o2,F.h264Stream=new pz,F.captionStream=new cf.CaptionStream(E),F.coalesceStream=new Uv(E,F.metadataStream),F.headOfPipeline=F.packetStream,F.packetStream.pipe(F.parseStream).pipe(F.elementaryStream).pipe(F.timestampRolloverStream),F.timestampRolloverStream.pipe(F.h264Stream),F.timestampRolloverStream.pipe(F.adtsStream),F.timestampRolloverStream.pipe(F.metadataStream).pipe(F.coalesceStream),F.h264Stream.pipe(F.captionStream).pipe(F.coalesceStream),F.elementaryStream.on("data",function(J){var oe;if("metadata"===J.type){for(oe=J.tracks.length;oe--;)D||"video"!==J.tracks[oe].type?!N&&"audio"===J.tracks[oe].type&&((N=J.tracks[oe]).timelineStartInfo.baseMediaDecodeTime=A.baseMediaDecodeTime):(D=J.tracks[oe]).timelineStartInfo.baseMediaDecodeTime=A.baseMediaDecodeTime;D&&!F.videoSegmentStream&&(F.coalesceStream.numberOfTracks++,F.videoSegmentStream=new qw(D,E),F.videoSegmentStream.on("log",A.getLogTrigger_("videoSegmentStream")),F.videoSegmentStream.on("timelineStartInfo",function(Ae){N&&!E.keepOriginalTimestamps&&(N.timelineStartInfo=Ae,F.audioSegmentStream.setEarliestDts(Ae.dts-A.baseMediaDecodeTime))}),F.videoSegmentStream.on("processedGopsInfo",A.trigger.bind(A,"gopInfo")),F.videoSegmentStream.on("segmentTimingInfo",A.trigger.bind(A,"videoSegmentTimingInfo")),F.videoSegmentStream.on("baseMediaDecodeTime",function(Ae){N&&F.audioSegmentStream.setVideoBaseMediaDecodeTime(Ae)}),F.videoSegmentStream.on("timingInfo",A.trigger.bind(A,"videoTimingInfo")),F.h264Stream.pipe(F.videoSegmentStream).pipe(F.coalesceStream)),N&&!F.audioSegmentStream&&(F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new L0(N,E),F.audioSegmentStream.on("log",A.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",A.trigger.bind(A,"audioTimingInfo")),F.audioSegmentStream.on("segmentTimingInfo",A.trigger.bind(A,"audioSegmentTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream)),A.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!D})}}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("id3Frame",function(J){J.dispatchType=F.metadataStream.dispatchType,A.trigger("id3Frame",J)}),F.coalesceStream.on("caption",this.trigger.bind(this,"caption")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),d2(this,F)},this.setBaseMediaDecodeTime=function(F){var J=this.transmuxPipeline_;E.keepOriginalTimestamps||(this.baseMediaDecodeTime=F),N&&(N.timelineStartInfo.dts=void 0,N.timelineStartInfo.pts=void 0,hc_clearDtsInfo(N),J.audioTimestampRolloverStream&&J.audioTimestampRolloverStream.discontinuity()),D&&(J.videoSegmentStream&&(J.videoSegmentStream.gopCache_=[]),D.timelineStartInfo.dts=void 0,D.timelineStartInfo.pts=void 0,hc_clearDtsInfo(D),J.captionStream.reset()),J.timestampRolloverStream&&J.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(F){N&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(F)},this.setRemux=function(F){var J=this.transmuxPipeline_;E.remux=F,J&&J.coalesceStream&&J.coalesceStream.setRemux(F)},this.alignGopsWith=function(F){D&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(F)},this.getLogTrigger_=function(F){var J=this;return function(oe){oe.stream=F,J.trigger("log",oe)}},this.push=function(F){if(I){var J=gz(F);J&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!J&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),I=!1}this.transmuxPipeline_.headOfPipeline.push(F)},this.flush=function(){I=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},HA.prototype=new e;var _2,E2,JM,yz={Transmuxer:HA,VideoSegmentStream:qw,AudioSegmentStream:L0,AUDIO_PROPERTIES:YM,VIDEO_PROPERTIES:QM,generateSegmentTimingInfo:XM},GA_toUnsigned=function(E){return E>>>0},Bv=function(E){var A="";return A+=String.fromCharCode(E[0]),A+=String.fromCharCode(E[1]),(A+=String.fromCharCode(E[2]))+String.fromCharCode(E[3])},Ez=GA_toUnsigned,Kr=function W(E,A){var D,N,F,J,oe,I=[];if(!A.length)return null;for(D=0;D<E.byteLength;)N=Ez(E[D]<<24|E[D+1]<<16|E[D+2]<<8|E[D+3]),F=Bv(E.subarray(D+4,D+8)),J=N>1?D+N:E.byteLength,F===A[0]&&(1===A.length?I.push(E.subarray(D+8,J)):(oe=W(E.subarray(D+8,J),A.slice(1))).length&&(I=I.concat(oe))),D=J;return I},f2=GA_toUnsigned,g2=function(E){return{isLeading:(12&E[0])>>>2,dependsOn:3&E[0],isDependedOn:(192&E[1])>>>6,hasRedundancy:(48&E[1])>>>4,paddingValue:(14&E[1])>>>1,isNonSyncSample:1&E[1],degradationPriority:E[2]<<8|E[3]}},Az=function(E){for(var N,F,A=E.byteLength,I=[],D=1;D<A-2;)0===E[D]&&0===E[D+1]&&3===E[D+2]?(I.push(D+2),D+=2):D++;if(0===I.length)return E;N=A-I.length,F=new Uint8Array(N);var J=0;for(D=0;D<N;J++,D++)J===I[0]&&(J++,I.shift()),F[D]=E[J];return F},Dz=MA.CaptionStream,kz=function(E,A){for(var I=E,D=0;D<A.length;D++){var N=A[D];if(I<N.size)return N;I-=N.size}return null},Rz=function(E,A){var I=Kr(E,["moof","traf"]),D=Kr(E,["mdat"]),N={},F=[];return D.forEach(function(J,oe){F.push({mdat:J,traf:I[oe]})}),F.forEach(function(J){var gn,Ts,oe=J.mdat,Ae=J.traf,Re=function(E){var Re,A=new DataView(E.buffer,E.byteOffset,E.byteLength),I={version:E[0],flags:new Uint8Array(E.subarray(1,4)),trackId:A.getUint32(4)},D=1&I.flags[2],N=2&I.flags[2],F=8&I.flags[2],J=16&I.flags[2],oe=32&I.flags[2],Ae=65536&I.flags[0],ve=131072&I.flags[0];return Re=8,D&&(Re+=4,I.baseDataOffset=A.getUint32(12),Re+=4),N&&(I.sampleDescriptionIndex=A.getUint32(Re),Re+=4),F&&(I.defaultSampleDuration=A.getUint32(Re),Re+=4),J&&(I.defaultSampleSize=A.getUint32(Re),Re+=4),oe&&(I.defaultSampleFlags=A.getUint32(Re)),Ae&&(I.durationIsEmpty=!0),!D&&ve&&(I.baseDataOffsetIsMoof=!0),I}(Kr(Ae,["tfhd"])[0]),dt=Re.trackId,Bt=Kr(Ae,["tfdt"]),Xt=Bt.length>0?function(E){var A={version:E[0],flags:new Uint8Array(E.subarray(1,4)),baseMediaDecodeTime:f2(E[4]<<24|E[5]<<16|E[6]<<8|E[7])};return 1===A.version&&(A.baseMediaDecodeTime*=Math.pow(2,32),A.baseMediaDecodeTime+=f2(E[8]<<24|E[9]<<16|E[10]<<8|E[11])),A}(Bt[0]).baseMediaDecodeTime:0,xt=Kr(Ae,["trun"]);A===dt&&xt.length>0&&(gn=function(E,A,I){var D=A,N=I.defaultSampleDuration||0,F=I.defaultSampleSize||0,J=I.trackId,oe=[];return E.forEach(function(Ae){var Re=function(E){var dt,A={version:E[0],flags:new Uint8Array(E.subarray(1,4)),samples:[]},I=new DataView(E.buffer,E.byteOffset,E.byteLength),D=1&A.flags[2],N=4&A.flags[2],F=1&A.flags[1],J=2&A.flags[1],oe=4&A.flags[1],Ae=8&A.flags[1],ve=I.getUint32(4),Re=8;for(D&&(A.dataOffset=I.getInt32(Re),Re+=4),N&&ve&&(dt={flags:g2(E.subarray(Re,Re+4))},Re+=4,F&&(dt.duration=I.getUint32(Re),Re+=4),J&&(dt.size=I.getUint32(Re),Re+=4),Ae&&(dt.compositionTimeOffset=1===A.version?I.getInt32(Re):I.getUint32(Re),Re+=4),A.samples.push(dt),ve--);ve--;)dt={},F&&(dt.duration=I.getUint32(Re),Re+=4),J&&(dt.size=I.getUint32(Re),Re+=4),oe&&(dt.flags=g2(E.subarray(Re,Re+4)),Re+=4),Ae&&(dt.compositionTimeOffset=1===A.version?I.getInt32(Re):I.getUint32(Re),Re+=4),A.samples.push(dt);return A}(Ae).samples;Re.forEach(function(dt){void 0===dt.duration&&(dt.duration=N),void 0===dt.size&&(dt.size=F),dt.trackId=J,dt.dts=D,void 0===dt.compositionTimeOffset&&(dt.compositionTimeOffset=0),dt.pts=D+dt.compositionTimeOffset,D+=dt.duration}),oe=oe.concat(Re)}),oe}(xt,Xt,Re),Ts=function(E,A,I){var F,J,oe,Ae,D=new DataView(E.buffer,E.byteOffset,E.byteLength),N={logs:[],seiNals:[]};for(J=0;J+4<E.length;J+=oe)if(oe=D.getUint32(J),J+=4,!(oe<=0))switch(31&E[J]){case 6:var ve=E.subarray(J+1,J+1+oe),Re=kz(J,A);if(F={nalUnitType:"sei_rbsp",size:oe,data:ve,escapedRBSP:Az(ve),trackId:I},Re)F.pts=Re.pts,F.dts=Re.dts,Ae=Re;else{if(!Ae){N.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+J+" for trackId "+I+". See mux.js#223."});break}F.pts=Ae.pts,F.dts=Ae.dts}N.seiNals.push(F)}return N}(oe,gn,dt),N[dt]||(N[dt]={seiNals:[],logs:[]}),N[dt].seiNals=N[dt].seiNals.concat(Ts.seiNals),N[dt].logs=N[dt].logs.concat(Ts.logs))}),N},Lz=function(){var A,I,D,N,F,J,E=!1;this.isInitialized=function(){return E},this.init=function(oe){A=new Dz,E=!0,J=!!oe&&oe.isPartial,A.on("data",function(Ae){Ae.startTime=Ae.startPts/N,Ae.endTime=Ae.endPts/N,F.captions.push(Ae),F.captionStreams[Ae.stream]=!0}),A.on("log",function(Ae){F.logs.push(Ae)})},this.isNewInit=function(oe,Ae){return!(oe&&0===oe.length||Ae&&"object"==typeof Ae&&0===Object.keys(Ae).length||D===oe[0]&&N===Ae[D])},this.parse=function(oe,Ae,ve){var Re;if(!this.isInitialized())return null;if(!Ae||!ve)return null;if(this.isNewInit(Ae,ve))N=ve[D=Ae[0]];else if(null===D||!N)return I.push(oe),null;for(;I.length>0;){var dt=I.shift();this.parse(dt,Ae,ve)}return Re=function(E,A,I){if(null===A)return null;var N=Rz(E,A)[A]||{};return{seiNals:N.seiNals,logs:N.logs,timescale:I}}(oe,D,N),Re&&Re.logs&&(F.logs=F.logs.concat(Re.logs)),null!==Re&&Re.seiNals?(this.pushNals(Re.seiNals),this.flushStream(),F):F.logs.length?{logs:F.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(oe){if(!this.isInitialized()||!oe||0===oe.length)return null;oe.forEach(function(Ae){A.push(Ae)})},this.flushStream=function(){if(!this.isInitialized())return null;J?A.partialFlush():A.flush()},this.clearParsedCaptions=function(){F.captions=[],F.captionStreams={},F.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;A.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){I=[],D=null,N=null,F?this.clearParsedCaptions():F={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},F0=GA_toUnsigned,Ww=function(E){return("00"+E.toString(16)).slice(-2)};_2=function(E,A){var I,D,N;return I=Kr(A,["moof","traf"]),D=[].concat.apply([],I.map(function(F){return Kr(F,["tfhd"]).map(function(J){var oe,Ae,ve;return oe=F0(J[4]<<24|J[5]<<16|J[6]<<8|J[7]),Ae=E[oe]||9e4,(ve="number"!=typeof(ve=Kr(F,["tfdt"]).map(function(Re){var dt,Bt;return dt=Re[0],Bt=F0(Re[4]<<24|Re[5]<<16|Re[6]<<8|Re[7]),1===dt&&(Bt*=Math.pow(2,32),Bt+=F0(Re[8]<<24|Re[9]<<16|Re[10]<<8|Re[11])),Bt})[0])||isNaN(ve)?1/0:ve)/Ae})})),N=Math.min.apply(null,D),isFinite(N)?N:0},JM=function(E){var I=0===E[0]?12:20;return F0(E[I]<<24|E[I+1]<<16|E[I+2]<<8|E[I+3])},E2=function(E){var A=Kr(E,["moov","trak"]),I=[];return A.forEach(function(D){var J,oe,N={},F=Kr(D,["tkhd"])[0];F&&(oe=(J=new DataView(F.buffer,F.byteOffset,F.byteLength)).getUint8(0),N.id=J.getUint32(0===oe?12:20));var Ae=Kr(D,["mdia","hdlr"])[0];if(Ae){var ve=Bv(Ae.subarray(8,12));N.type="vide"===ve?"video":"soun"===ve?"audio":ve}var Re=Kr(D,["mdia","minf","stbl","stsd"])[0];if(Re){var dt=Re.subarray(8);N.codec=Bv(dt.subarray(4,8));var Xt,Bt=Kr(dt,[N.codec])[0];Bt&&(/^[asm]vc[1-9]$/i.test(N.codec)?(Xt=Bt.subarray(78),"avcC"===Bv(Xt.subarray(4,8))&&Xt.length>11?(N.codec+=".",N.codec+=Ww(Xt[9]),N.codec+=Ww(Xt[10]),N.codec+=Ww(Xt[11])):N.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(N.codec)?(Xt=Bt.subarray(28),"esds"===Bv(Xt.subarray(4,8))&&Xt.length>20&&0!==Xt[19]?(N.codec+="."+Ww(Xt[19]),N.codec+="."+Ww(Xt[20]>>>2&63).replace(/^0/,"")):N.codec="mp4a.40.2"):N.codec=N.codec.toLowerCase())}var gn=Kr(D,["mdia","mdhd"])[0];gn&&(N.timescale=JM(gn)),I.push(N)}),I};var w2_startTime=_2,w2_tracks=E2,S2=function(E){var A=31&E[1];return(A<<=8)|E[2]},$A=function(E){return!!(64&E[1])},qA=function(E){var A=0;return(48&E[3])>>>4>1&&(A+=E[4]+1),A},eR=function(E){switch(E){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Gz={parseType:function(E,A){var I=S2(E);return 0===I?"pat":I===A?"pmt":A?"pes":null},parsePat:function(E){var A=$A(E),I=4+qA(E);return A&&(I+=E[I]+1),(31&E[I+10])<<8|E[I+11]},parsePmt:function(E){var A={},I=$A(E),D=4+qA(E);if(I&&(D+=E[D]+1),1&E[D+5]){var F;F=3+((15&E[D+1])<<8|E[D+2])-4;for(var oe=12+((15&E[D+10])<<8|E[D+11]);oe<F;){var Ae=D+oe;A[(31&E[Ae+1])<<8|E[Ae+2]]=E[Ae],oe+=5+((15&E[Ae+3])<<8|E[Ae+4])}return A}},parsePayloadUnitStartIndicator:$A,parsePesType:function(E,A){switch(A[S2(E)]){case no.H264_STREAM_TYPE:return"video";case no.ADTS_STREAM_TYPE:return"audio";case no.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(E){if(!$A(E))return null;var I=4+qA(E);if(I>=E.byteLength)return null;var N,D=null;return 192&(N=E[I+7])&&((D={}).pts=(14&E[I+9])<<27|(255&E[I+10])<<20|(254&E[I+11])<<12|(255&E[I+12])<<5|(254&E[I+13])>>>3,D.pts*=4,D.pts+=(6&E[I+13])>>>1,D.dts=D.pts,64&N&&(D.dts=(14&E[I+14])<<27|(255&E[I+15])<<20|(254&E[I+16])<<12|(255&E[I+17])<<5|(254&E[I+18])>>>3,D.dts*=4,D.dts+=(6&E[I+18])>>>1)),D},videoPacketContainsKeyFrame:function(E){for(var A=4+qA(E),I=E.subarray(A),D=0,N=0,F=!1;N<I.byteLength-3;N++)if(1===I[N+2]){D=N+5;break}for(;D<I.byteLength;)switch(I[D]){case 0:if(0!==I[D-1]){D+=2;break}if(0!==I[D-2]){D++;break}N+3!==D-2&&"slice_layer_without_partitioning_rbsp_idr"===eR(31&I[N+3])&&(F=!0);do{D++}while(1!==I[D]&&D<I.length);N=D-2,D+=3;break;case 1:if(0!==I[D-1]||0!==I[D-2]){D+=3;break}"slice_layer_without_partitioning_rbsp_idr"===eR(31&I[N+3])&&(F=!0),N=D-2,D+=3;break;default:D+=3}return I=I.subarray(N),D-=N,N=0,I&&I.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===eR(31&I[N+3])&&(F=!0),F}},j0=t2_handleRollover,Er={};Er.ts=Gz,Er.aac=BA;var Vv=9e4,ta=188,C2=function(E,A,I){for(var F,oe,Ae,ve,D=0,N=ta,Re=!1;N<=E.byteLength;)if(71!==E[D]||71!==E[N]&&N!==E.byteLength)D++,N++;else{if("pes"===(F=E.subarray(D,N),Er.ts.parseType(F,A.pid))&&(oe=Er.ts.parsePesType(F,A.table),Ae=Er.ts.parsePayloadUnitStartIndicator(F),"audio"===oe&&Ae&&(ve=Er.ts.parsePesTime(F))&&(ve.type="audio",I.audio.push(ve),Re=!0)),Re)break;D+=ta,N+=ta}for(D=(N=E.byteLength)-ta,Re=!1;D>=0;)if(71!==E[D]||71!==E[N]&&N!==E.byteLength)D--,N--;else{if("pes"===(F=E.subarray(D,N),Er.ts.parseType(F,A.pid))&&(oe=Er.ts.parsePesType(F,A.table),Ae=Er.ts.parsePayloadUnitStartIndicator(F),"audio"===oe&&Ae&&(ve=Er.ts.parsePesTime(F))&&(ve.type="audio",I.audio.push(ve),Re=!0)),Re)break;D-=ta,N-=ta}},qz=function(E,A,I){for(var F,oe,Ae,ve,Re,dt,Bt,D=0,N=ta,Xt=!1,xt={data:[],size:0};N<E.byteLength;)if(71!==E[D]||71!==E[N])D++,N++;else{if("pes"===(F=E.subarray(D,N),Er.ts.parseType(F,A.pid))&&(oe=Er.ts.parsePesType(F,A.table),Ae=Er.ts.parsePayloadUnitStartIndicator(F),"video"===oe&&(Ae&&!Xt&&(ve=Er.ts.parsePesTime(F))&&(ve.type="video",I.video.push(ve),Xt=!0),!I.firstKeyFrame))){if(Ae&&0!==xt.size){for(Re=new Uint8Array(xt.size),dt=0;xt.data.length;)Bt=xt.data.shift(),Re.set(Bt,dt),dt+=Bt.byteLength;if(Er.ts.videoPacketContainsKeyFrame(Re)){var gn=Er.ts.parsePesTime(Re);gn?(I.firstKeyFrame=gn,I.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}xt.size=0}xt.data.push(F),xt.size+=F.byteLength}if(Xt&&I.firstKeyFrame)break;D+=ta,N+=ta}for(D=(N=E.byteLength)-ta,Xt=!1;D>=0;)if(71!==E[D]||71!==E[N])D--,N--;else{if("pes"===(F=E.subarray(D,N),Er.ts.parseType(F,A.pid))&&(oe=Er.ts.parsePesType(F,A.table),Ae=Er.ts.parsePayloadUnitStartIndicator(F),"video"===oe&&Ae&&(ve=Er.ts.parsePesTime(F))&&(ve.type="video",I.video.push(ve),Xt=!0)),Xt)break;D-=ta,N-=ta}},Yz_inspect=function(E,A){var D;return D=Er.aac.isLikelyAacData(E)?function(E){for(var oe,A=!1,I=0,D=null,N=null,F=0,J=0;E.length-J>=3;){switch(Er.aac.parseType(E,J)){case"timed-metadata":if(E.length-J<10){A=!0;break}if((F=Er.aac.parseId3TagSize(E,J))>E.length){A=!0;break}null===N&&(oe=E.subarray(J,J+F),N=Er.aac.parseAacTimestamp(oe)),J+=F;break;case"audio":if(E.length-J<7){A=!0;break}if((F=Er.aac.parseAdtsSize(E,J))>E.length){A=!0;break}null===D&&(oe=E.subarray(J,J+F),D=Er.aac.parseSampleRate(oe)),I++,J+=F;break;default:J++}if(A)return null}if(null===D||null===N)return null;var ve=Vv/D;return{audio:[{type:"audio",dts:N,pts:N},{type:"audio",dts:N+1024*I*ve,pts:N+1024*I*ve}]}}(E):function(E){var A={pid:null,table:null},I={};for(var D in function(E,A){for(var N,I=0,D=ta;D<E.byteLength;)if(71!==E[I]||71!==E[D])I++,D++;else{switch(N=E.subarray(I,D),Er.ts.parseType(N,A.pid)){case"pat":A.pid=Er.ts.parsePat(N);break;case"pmt":var J=Er.ts.parsePmt(N);A.table=A.table||{},Object.keys(J).forEach(function(oe){A.table[oe]=J[oe]})}I+=ta,D+=ta}}(E,A),A.table)if(A.table.hasOwnProperty(D))switch(A.table[D]){case no.H264_STREAM_TYPE:I.video=[],qz(E,A,I),0===I.video.length&&delete I.video;break;case no.ADTS_STREAM_TYPE:I.audio=[],C2(E,A,I),0===I.audio.length&&delete I.audio}return I}(E),D&&(D.audio||D.video)?(function(E,A){if(E.audio&&E.audio.length){var I=A;(void 0===I||isNaN(I))&&(I=E.audio[0].dts),E.audio.forEach(function(F){F.dts=j0(F.dts,I),F.pts=j0(F.pts,I),F.dtsTime=F.dts/Vv,F.ptsTime=F.pts/Vv})}if(E.video&&E.video.length){var D=A;if((void 0===D||isNaN(D))&&(D=E.video[0].dts),E.video.forEach(function(F){F.dts=j0(F.dts,D),F.pts=j0(F.pts,D),F.dtsTime=F.dts/Vv,F.ptsTime=F.pts/Vv}),E.firstKeyFrame){var N=E.firstKeyFrame;N.dts=j0(N.dts,D),N.pts=j0(N.pts,D),N.dtsTime=N.dts/Vv,N.ptsTime=N.pts/Vv}}}(D,A),D):null},x2=function(){function W(A,I){this.options=I||{},this.self=A,this.init()}var E=W.prototype;return E.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new yz.Transmuxer(this.options),function(E,A){A.on("data",function(I){var D=I.initSegment;I.initSegment={data:D.buffer,byteOffset:D.byteOffset,byteLength:D.byteLength};var N=I.data;I.data=N.buffer,E.postMessage({action:"data",segment:I,byteOffset:N.byteOffset,byteLength:N.byteLength},[I.data])}),A.on("done",function(I){E.postMessage({action:"done"})}),A.on("gopInfo",function(I){E.postMessage({action:"gopInfo",gopInfo:I})}),A.on("videoSegmentTimingInfo",function(I){var D={start:{decode:cr_videoTsToSeconds(I.start.dts),presentation:cr_videoTsToSeconds(I.start.pts)},end:{decode:cr_videoTsToSeconds(I.end.dts),presentation:cr_videoTsToSeconds(I.end.pts)},baseMediaDecodeTime:cr_videoTsToSeconds(I.baseMediaDecodeTime)};I.prependedContentDuration&&(D.prependedContentDuration=cr_videoTsToSeconds(I.prependedContentDuration)),E.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:D})}),A.on("audioSegmentTimingInfo",function(I){var D={start:{decode:cr_videoTsToSeconds(I.start.dts),presentation:cr_videoTsToSeconds(I.start.pts)},end:{decode:cr_videoTsToSeconds(I.end.dts),presentation:cr_videoTsToSeconds(I.end.pts)},baseMediaDecodeTime:cr_videoTsToSeconds(I.baseMediaDecodeTime)};I.prependedContentDuration&&(D.prependedContentDuration=cr_videoTsToSeconds(I.prependedContentDuration)),E.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:D})}),A.on("id3Frame",function(I){E.postMessage({action:"id3Frame",id3Frame:I})}),A.on("caption",function(I){E.postMessage({action:"caption",caption:I})}),A.on("trackinfo",function(I){E.postMessage({action:"trackinfo",trackInfo:I})}),A.on("audioTimingInfo",function(I){E.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:cr_videoTsToSeconds(I.start),end:cr_videoTsToSeconds(I.end)}})}),A.on("videoTimingInfo",function(I){E.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:cr_videoTsToSeconds(I.start),end:cr_videoTsToSeconds(I.end)}})}),A.on("log",function(I){E.postMessage({action:"log",log:I})})}(this.self,this.transmuxer)},E.pushMp4Captions=function(I){this.captionParser||(this.captionParser=new Lz,this.captionParser.init());var D=new Uint8Array(I.data,I.byteOffset,I.byteLength),N=this.captionParser.parse(D,I.trackIds,I.timescales);this.self.postMessage({action:"mp4Captions",captions:N&&N.captions||[],logs:N&&N.logs||[],data:D.buffer},[D.buffer])},E.probeMp4StartTime=function(I){var N=I.data,F=w2_startTime(I.timescales,N);this.self.postMessage({action:"probeMp4StartTime",startTime:F,data:N},[N.buffer])},E.probeMp4Tracks=function(I){var D=I.data,N=w2_tracks(D);this.self.postMessage({action:"probeMp4Tracks",tracks:N,data:D},[D.buffer])},E.probeTs=function(I){var D=I.data,N=I.baseStartTime,F="number"!=typeof N||isNaN(N)?void 0:9e4*N,J=Yz_inspect(D,F),oe=null;J&&((oe={hasVideo:J.video&&2===J.video.length||!1,hasAudio:J.audio&&2===J.audio.length||!1}).hasVideo&&(oe.videoStart=J.video[0].ptsTime),oe.hasAudio&&(oe.audioStart=J.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:oe,data:D},[D.buffer])},E.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},E.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},E.push=function(I){var D=new Uint8Array(I.data,I.byteOffset,I.byteLength);this.transmuxer.push(D)},E.reset=function(){this.transmuxer.reset()},E.setTimestampOffset=function(I){this.transmuxer.setBaseMediaDecodeTime(Math.round(cr_secondsToVideoTs(I.timestampOffset||0)))},E.setAudioAppendStart=function(I){this.transmuxer.setAudioAppendStart(Math.ceil(cr_secondsToVideoTs(I.appendStart)))},E.setRemux=function(I){this.transmuxer.setRemux(I.remux)},E.flush=function(I){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},E.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},E.alignGopsWith=function(I){this.transmuxer.alignGopsWith(I.gopsToAlignWith.slice())},W}();self.onmessage=function(W){"init"===W.data.action&&W.data.options?this.messageHandlers=new x2(self,W.data.options):(this.messageHandlers||(this.messageHandlers=new x2(self)),W.data&&W.data.action&&"init"!==W.data.action&&this.messageHandlers[W.data.action]&&this.messageHandlers[W.data.action](W.data))}})),mG=rj(gG),oj=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,s=e.gopsToAlignWith,o=e.remux,c=e.onData,f=e.onTrackInfo,m=e.onAudioTimingInfo,_=e.onVideoTimingInfo,w=e.onVideoSegmentTimingInfo,C=e.onAudioSegmentTimingInfo,M=e.onId3,L=e.onCaptions,V=e.onDone,H=e.onEndedTimeline,Se=e.onTransmuxerLog,be=e.isEndOfTimeline,je={buffer:[]},Ne=be;if(t.onmessage=function(ut){t.currentTransmux===e&&("data"===ut.data.action&&function(e,t,n){var i=e.data.segment,s=i.type,o=i.initSegment,_=i.videoFrameDtsTime,w=i.videoFramePtsTime;t.buffer.push({captions:i.captions,captionStreams:i.captionStreams,metadata:i.metadata});var C=e.data.segment.boxes||{data:e.data.segment.data},M={type:s,data:new Uint8Array(C.data,C.data.byteOffset,C.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};void 0!==_&&(M.videoFrameDtsTime=_),void 0!==w&&(M.videoFramePtsTime=w),n(M)}(ut,je,c),"trackinfo"===ut.data.action&&f(ut.data.trackInfo),"gopInfo"===ut.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(ut,je),"audioTimingInfo"===ut.data.action&&m(ut.data.audioTimingInfo),"videoTimingInfo"===ut.data.action&&_(ut.data.videoTimingInfo),"videoSegmentTimingInfo"===ut.data.action&&w(ut.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===ut.data.action&&C(ut.data.audioSegmentTimingInfo),"id3Frame"===ut.data.action&&M([ut.data.id3Frame],ut.data.id3Frame.dispatchType),"caption"===ut.data.action&&L(ut.data.caption),"endedtimeline"===ut.data.action&&(Ne=!1,H()),"log"===ut.data.action&&Se(ut.data.log),"transmuxed"===ut.data.type&&(Ne||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:je,callback:V}),aj(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),void 0!==o&&t.postMessage({action:"setRemux",remux:o}),n.byteLength){var nt=n instanceof ArrayBuffer?n:n.buffer,pt=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:nt,byteOffset:pt,byteLength:n.byteLength},[nt])}be&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},aj=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():oj(e.currentTransmux))},uj=function(e,t){e.postMessage({action:t}),aj(e)},rM_reset=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void uj(t,e);t.transmuxQueue.push(uj.bind(null,t,e))}("reset",e)},iA=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,s=sc({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",function m(_){_.data.action===n&&(t.removeEventListener("message",m),_.data.data&&(_.data.data=new Uint8Array(_.data.data,e.byteOffset||0,e.byteLength||_.data.data.byteLength),e.data&&(e.data=_.data.data)),i(_.data))}),e.data){var c=e.data instanceof ArrayBuffer;s.byteOffset=c?0:e.data.byteOffset,s.byteLength=e.data.byteLength,t.postMessage(s,[c?e.data:e.data.buffer])}else t.postMessage(s)},iM=function(e){e.forEach(function(t){t.abort()})},sM=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:-101,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:-102,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},dj=function(e,t,n){return function(i,s){var o=s.response,c=sM(i,s);if(c)return n(c,e);if(16!==o.byteLength)return n({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:2,xhr:s},e);for(var f=new DataView(o),m=new Uint32Array([f.getUint32(0),f.getUint32(4),f.getUint32(8),f.getUint32(12)]),_=0;_<t.length;_++)t[_].bytes=m;return n(null,e)}},hj=function(e,t){var n=qk(e.map.bytes);if("mp4"!==n)return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+(e.map.resolvedUri||e.map.uri),code:2});iA({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(o){var c=o.tracks;return e.map.bytes=o.data,c.forEach(function(m){e.map.tracks=e.map.tracks||{},!e.map.tracks[m.type]&&(e.map.tracks[m.type]=m,"number"==typeof m.id&&m.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[m.id]=m.timescale))}),t(null)}})},IG=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,f=e.id3Fn,m=e.captionsFn,_=e.isEndOfTimeline,w=e.endedTimelineFn,C=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog,V=t.map&&t.map.tracks||{},H=Boolean(V.audio&&V.video),Se=s.bind(null,t,"audio","start"),be=s.bind(null,t,"audio","end"),je=s.bind(null,t,"video","start"),Ne=s.bind(null,t,"video","end");iA({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(pt){t.bytes=n=pt.data;var ct=pt.result;ct&&(i(t,{hasAudio:ct.hasAudio,hasVideo:ct.hasVideo,isMuxed:H}),i=null,ct.hasAudio&&!H&&Se(ct.audioStart),ct.hasVideo&&je(ct.videoStart),Se=null,je=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void oj(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:H,onData:function(ct){ct.type="combined"===ct.type?"video":ct.type,C(t,ct)},onTrackInfo:function(ct){i&&(H&&(ct.isMuxed=!0),i(t,ct))},onAudioTimingInfo:function(ct){Se&&void 0!==ct.start&&(Se(ct.start),Se=null),be&&void 0!==ct.end&&be(ct.end)},onVideoTimingInfo:function(ct){je&&void 0!==ct.start&&(je(ct.start),je=null),Ne&&void 0!==ct.end&&Ne(ct.end)},onVideoSegmentTimingInfo:function(ct){o(ct)},onAudioSegmentTimingInfo:function(ct){c(ct)},onId3:function(ct,ut){f(t,ct,ut)},onCaptions:function(ct){m(t,[ct])},isEndOfTimeline:_,onEndedTimeline:function(){w()},onTransmuxerLog:L,onDone:function(ct){!M||(ct.type="combined"===ct.type?"video":ct.type,M(null,t,ct))}})}})},fj=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,f=e.id3Fn,m=e.captionsFn,_=e.isEndOfTimeline,w=e.endedTimelineFn,C=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog,V=new Uint8Array(n);if(function(e){return Ia(e,["moof"]).length>0}(V)){t.isFmp4=!0;var H=t.map.tracks,Se={isFmp4:!0,hasVideo:!!H.video,hasAudio:!!H.audio};H.audio&&H.audio.codec&&"enca"!==H.audio.codec&&(Se.audioCodec=H.audio.codec),H.video&&H.video.codec&&"encv"!==H.video.codec&&(Se.videoCodec=H.video.codec),H.video&&H.audio&&(Se.isMuxed=!0),i(t,Se);var be=function(Ne){C(t,{data:V,type:Se.hasAudio&&!Se.isMuxed?"audio":"video"}),Ne&&Ne.length&&m(t,Ne),M(null,t,{})};iA({action:"probeMp4StartTime",timescales:t.map.timescales,data:V,transmuxer:t.transmuxer,callback:function(Ne){var $e=Ne.data,nt=Ne.startTime;n=$e.buffer,t.bytes=V=$e,Se.hasAudio&&!Se.isMuxed&&s(t,"audio","start",nt),Se.hasVideo&&s(t,"video","start",nt),H.video&&$e.byteLength&&t.transmuxer?iA({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:V,timescales:t.map.timescales,trackIds:[H.video.id],callback:function(ct){n=ct.data.buffer,t.bytes=V=ct.data,ct.logs.forEach(function(ut){L(Fe.mergeOptions(ut,{stream:"mp4CaptionParser"}))}),be(ct.captions)}}):be()}})}else{if(t.transmuxer)return void 0===t.container&&(t.container=qk(V)),"ts"!==t.container&&"aac"!==t.container?(i(t,{hasAudio:!1,hasVideo:!1}),void M(null,t,{})):void IG({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:m,isEndOfTimeline:_,endedTimelineFn:w,dataFn:C,doneFn:M,onTransmuxerLog:L});M(null,t,{})}},pj=function(e,t){var f,n=e.id,i=e.key,s=e.encryptedBytes,o=e.decryptionWorker;o.addEventListener("message",function m(_){if(_.data.source===n){o.removeEventListener("message",m);var w=_.data.decrypted;t(new Uint8Array(w.bytes,w.byteOffset,w.byteLength))}}),f=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),o.postMessage(KF({source:n,encrypted:s,key:f,iv:i.iv}),[s.buffer,f.buffer])},MG=function(e){var t=e.xhr,n=e.xhrOptions,s=e.segment,o=e.abortFn,c=e.progressFn,f=e.trackInfoFn,m=e.timingInfoFn,_=e.videoSegmentTimingInfoFn,w=e.audioSegmentTimingInfoFn,C=e.id3Fn,M=e.captionsFn,L=e.isEndOfTimeline,V=e.endedTimelineFn,H=e.dataFn,je=[],Ne=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,f=e.id3Fn,m=e.captionsFn,_=e.isEndOfTimeline,w=e.endedTimelineFn,C=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog,V=0,H=!1;return function(Se,be){if(!H){if(Se)return H=!0,iM(t),M(Se,be);if((V+=1)===t.length){var je=function(){if(be.encryptedBytes)return function(e){var n=e.segment,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,f=e.id3Fn,m=e.captionsFn,_=e.isEndOfTimeline,w=e.endedTimelineFn,C=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog;pj({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:e.decryptionWorker},function(V){n.bytes=V,fj({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:m,isEndOfTimeline:_,endedTimelineFn:w,dataFn:C,doneFn:M,onTransmuxerLog:L})})}({decryptionWorker:n,segment:be,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:m,isEndOfTimeline:_,endedTimelineFn:w,dataFn:C,doneFn:M,onTransmuxerLog:L});fj({segment:be,bytes:be.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:m,isEndOfTimeline:_,endedTimelineFn:w,dataFn:C,doneFn:M,onTransmuxerLog:L})};if(be.endOfAllRequests=Date.now(),be.map&&be.map.encryptedBytes&&!be.map.bytes)return pj({decryptionWorker:n,id:be.requestId+"-init",encryptedBytes:be.map.encryptedBytes,key:be.map.key},function(Ne){be.map.bytes=Ne,hj(be,function($e){if($e)return iM(t),M($e,be);je()})});je()}}}}({activeXhrs:je,decryptionWorker:e.decryptionWorker,trackInfoFn:f,timingInfoFn:m,videoSegmentTimingInfoFn:_,audioSegmentTimingInfoFn:w,id3Fn:C,captionsFn:M,isEndOfTimeline:L,endedTimelineFn:V,dataFn:H,doneFn:e.doneFn,onTransmuxerLog:e.onTransmuxerLog});if(s.key&&!s.key.bytes){var $e=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&$e.push(s.map.key);var ct=t(Fe.mergeOptions(n,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),dj(s,$e,Ne));je.push(ct)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){var jr=t(Fe.mergeOptions(n,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),dj(s,[s.map.key],Ne));je.push(jr)}var tr=Fe.mergeOptions(n,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:eM(s.map)}),Ai=function(e){var t=e.segment,n=e.finishProcessingFn;return function(i,s){var o=sM(i,s);if(o)return n(o,t);var c=new Uint8Array(s.response);if(t.map.key)return t.map.encryptedBytes=c,n(null,t);t.map.bytes=c,hj(t,function(f){if(f)return f.xhr=s,f.status=s.status,n(f,t);n(null,t)})}}({segment:s,finishProcessingFn:Ne}),br=t(tr,Ai);je.push(br)}var Nv=Fe.mergeOptions(n,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:eM(s)}),$u=t(Nv,function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(s,o){var c=sM(s,o);if(c)return n(c,t);var f="arraybuffer"!==i&&o.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(o.responseText.substring(t.lastReachedChar||0)):o.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(o),t.key?t.encryptedBytes=new Uint8Array(f):t.bytes=new Uint8Array(f),n(null,t)}}({segment:s,finishProcessingFn:Ne,responseType:Nv.responseType}));$u.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return function(i){if(!i.target.aborted)return t.stats=Fe.mergeOptions(t.stats,function(e){var t=e.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(i)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(i,t)}}({segment:s,progressFn:c,trackInfoFn:f,timingInfoFn:m,videoSegmentTimingInfoFn:_,audioSegmentTimingInfoFn:w,id3Fn:C,captionsFn:M,isEndOfTimeline:L,endedTimelineFn:V,dataFn:H})),je.push($u);var qu={};return je.forEach(function(uf){uf.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(i){i.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:qu,abortFn:o}))}),function(){return iM(je)}},RG=cc("CodecUtils"),gj=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},sA=function(e){var t={};return e.forEach(function(n){var i=n.mediaType,s=n.type,o=n.details;t[i]=t[i]||[],t[i].push(Mk(""+s+o))}),Object.keys(t).forEach(function(n){if(t[n].length>1)return RG("multiple "+n+" codecs found as attributes: "+t[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[n]=null);t[n]=t[n][0]}),t},mj=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},Dw=function(e,t){var n=t.attributes||{},i=sA(function(e){var t=e.attributes||{};if(t.CODECS)return _d(t.CODECS)}(t)||[]);if(gj(e,t)&&!i.audio&&!function(e,t){if(!gj(e,t))return!0;var i=e.mediaGroups.AUDIO[(t.attributes||{}).AUDIO];for(var s in i)if(!i[s].uri&&!i[s].playlists)return!0;return!1}(e,t)){var s=sA(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var s=n[i];if(s.default&&s.playlists)return _d(s.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},oA=cc("PlaylistSelector"),vj=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},aA=function(e,t){if(!e)return"";var n=Ce().getComputedStyle(e);return n?n[t]:""},D0=function(e,t){var n=e.slice();e.sort(function(i,s){var o=t(i,s);return 0===o?n.indexOf(i)-n.indexOf(s):o})},oM=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Ce().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i||Ce().Number.MAX_VALUE)},yj=function(e,t,n,i,s,o){if(e){var c={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:s},f=e.playlists;ka.isAudioOnly(e)&&(f=o.getAudioTrackPlaylists_(),c.audioOnly=!0);var m=f.map(function(Mt){var jr=Mt.attributes&&Mt.attributes.RESOLUTION&&Mt.attributes.RESOLUTION.width,tr=Mt.attributes&&Mt.attributes.RESOLUTION&&Mt.attributes.RESOLUTION.height;return{bandwidth:Mt.attributes&&Mt.attributes.BANDWIDTH||Ce().Number.MAX_VALUE,width:jr,height:tr,playlist:Mt}});D0(m,function(Mt,Vn){return Mt.bandwidth-Vn.bandwidth});var _=(m=m.filter(function(Mt){return!ka.isIncompatible(Mt.playlist)})).filter(function(Mt){return ka.isEnabled(Mt.playlist)});_.length||(_=m.filter(function(Mt){return!ka.isDisabled(Mt.playlist)}));var w=_.filter(function(Mt){return Mt.bandwidth*Ls.BANDWIDTH_VARIANCE<t}),C=w[w.length-1],M=w.filter(function(Mt){return Mt.bandwidth===C.bandwidth})[0];if(!1===s){var L=M||_[0]||m[0];if(L&&L.playlist){var V="sortedPlaylistReps";return M&&(V="bandwidthBestRep"),_[0]&&(V="enabledPlaylistReps"),oA("choosing "+vj(L)+" using "+V+" with options",c),L.playlist}return oA("could not choose a playlist with options",c),null}var H=w.filter(function(Mt){return Mt.width&&Mt.height});D0(H,function(Mt,Vn){return Mt.width-Vn.width});var Se=H.filter(function(Mt){return Mt.width===n&&Mt.height===i});C=Se[Se.length-1];var je,Ne,$e,nt,be=Se.filter(function(Mt){return Mt.bandwidth===C.bandwidth})[0];if(be||(Ne=(je=H.filter(function(Mt){return Mt.width>n||Mt.height>i})).filter(function(Mt){return Mt.width===je[0].width&&Mt.height===je[0].height}),C=Ne[Ne.length-1],$e=Ne.filter(function(Mt){return Mt.bandwidth===C.bandwidth})[0]),o.experimentalLeastPixelDiffSelector){var pt=H.map(function(Mt){return Mt.pixelDiff=Math.abs(Mt.width-n)+Math.abs(Mt.height-i),Mt});D0(pt,function(Mt,Vn){return Mt.pixelDiff===Vn.pixelDiff?Vn.bandwidth-Mt.bandwidth:Mt.pixelDiff-Vn.pixelDiff}),nt=pt[0]}var ct=nt||$e||be||M||_[0]||m[0];if(ct&&ct.playlist){var ut="sortedPlaylistReps";return nt?ut="leastPixelDiffRep":$e?ut="resolutionPlusOneRep":be?ut="resolutionBestRep":M?ut="bandwidthBestRep":_[0]&&(ut="enabledPlaylistReps"),oA("choosing "+vj(ct)+" using "+ut+" with options",c),ct.playlist}return oA("could not choose a playlist with options",c),null}},_j=function(){var e=this.useDevicePixelRatio&&Ce().devicePixelRatio||1;return yj(this.playlists.master,this.systemBandwidth,parseInt(aA(this.tech_.el(),"width"),10)*e,parseInt(aA(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},kw=function(e,t,n){var i,s;if(n&&n.cues)for(i=n.cues.length;i--;)(s=n.cues[i]).startTime>=e&&s.endTime<=t&&n.removeCue(s)},Tj=function(e){return"number"==typeof e&&isFinite(e)},uA=1/60,k0=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,s=e.part,o=e.playlist,c=o.mediaSequence,f=o.id,m=o.segments,w=e.mediaIndex,C=e.partIndex,M=e.timeline,L=(void 0===m?[]:m).length-1,V="mediaIndex/partIndex increment";e.getMediaInfoForTime?V="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(V="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(V+=" with independent "+e.independent);var H="number"==typeof C,Se=e.segment.uri?"segment":"pre-segment",be=H?OF({preloadSegment:i})-1:0;return Se+" ["+(c+w)+"/"+(c+L)+"]"+(H?" part ["+C+"/"+be+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+(H?" part start/end ["+s.start+" => "+s.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+M+"] selected by ["+V+"] playlist ["+f+"]"},Ej=function(e){return e+"TimingInfo"},wj=function(e){var t=e.timelineChangeController,i=e.segmentTimeline,s=e.loaderType,o=e.audioDisabled;if(e.currentTimeline===i)return!1;if("audio"===s){var c=t.lastTimelineChange({type:"main"});return!c||c.to!==i}if("main"===s&&o){var f=t.pendingTimelineChange({type:"audio"});return!(f&&f.to===i)}return!1},Sj=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+ag},aM=function(r){function e(n,i){var s;if(s=r.call(this)||this,!n)throw new TypeError("Initialization settings are required");if("function"!=typeof n.currentTime)throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=n.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=n.hasPlayed,s.currentTime_=n.currentTime,s.seekable_=n.seekable,s.seeking_=n.seeking,s.duration_=n.duration,s.mediaSource_=n.mediaSource,s.vhs_=n.vhs,s.loaderType_=n.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=n.segmentMetadataTrack,s.goalBufferLength_=n.goalBufferLength,s.sourceType_=n.sourceType,s.sourceUpdater_=n.sourceUpdater,s.inbandTextTracks_=n.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=n.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=n.parse708captions,s.captionServices_=n.captionServices,s.experimentalExactManifestTimings=n.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=Fe.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=n.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=n.decrypter,s.syncController_=n.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=cc("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(Sn(s),"state",{get:function(){return this.state_},set:function(c){c!==this.state_&&(this.logger_(this.state_+" -> "+c),this.state_=c,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"main"===s.loaderType_&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"audio"===s.loaderType_&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}Ot(e,r);var t=e.prototype;return t.createTransmuxer_=function(){return function(e){var t=new mG;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Ce().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Ce().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(i){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==i:(this.state="READY",!0)},t.error=function(i){return void 0!==i&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&rM_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return Fe.createTimeRanges();if("main"===this.loaderType_){var o=i.hasVideo;if(o&&i.hasAudio&&!this.audioDisabled_&&!i.isMuxed)return this.sourceUpdater_.buffered();if(o)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(i,s){if(void 0===s&&(s=!1),!i)return null;var o=rA(i),c=this.initSegments_[o];return s&&!c&&i.bytes&&(this.initSegments_[o]=c={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),c||i},t.segmentKey=function(i,s){if(void 0===s&&(s=!1),!i)return null;var o=YF(i),c=this.keyCache_[o];this.cacheEncryptionKeys_&&s&&!c&&i.bytes&&(this.keyCache_[o]=c={resolvedUri:i.resolvedUri,bytes:i.bytes});var f={resolvedUri:(c||i).resolvedUri};return c&&(f.bytes=c.bytes),f},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(i,s){if(void 0===s&&(s={}),i){var o=this.playlist_,c=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=s,"INIT"===this.state&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(i));var f=null;if(o&&(o.id?f=o.id:o.uri&&(f=o.uri)),this.logger_("playlist update ["+f+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!o||o.uri!==i.uri)return null!==this.mediaIndex&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var m=i.mediaSequence-o.mediaSequence;if(this.logger_("live window shift ["+m+"]"),null!==this.mediaIndex)if(this.mediaIndex-=m,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var _=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!_.parts||!_.parts.length||!_.parts[this.partIndex])){var w=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=w}}c&&(c.mediaIndex-=m,c.mediaIndex<0?(c.mediaIndex=null,c.partIndex=null):(c.mediaIndex>=0&&(c.segment=i.segments[c.mediaIndex]),c.partIndex>=0&&c.segment.parts&&(c.part=c.segment.parts[c.partIndex]))),this.syncController_.saveExpiredSegmentInfo(o,i)}},t.pause=function(){this.checkBufferTimeout_&&(Ce().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return null===this.checkBufferTimeout_},t.resetEverything=function(i){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&rM_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(i,s,o,c){if(void 0===o&&(o=function(){}),void 0===c&&(c=!1),s===1/0&&(s=this.duration_()),s<=i)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var f=1,m=function(){0==--f&&o()};for(var _ in(c||!this.audioDisabled_)&&(f++,this.sourceUpdater_.removeAudio(i,s,m)),(c||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var s=Math.ceil((t-i)*SI.ONE_SECOND_IN_TS),o=Math.ceil((n-i)*SI.ONE_SECOND_IN_TS),c=e.slice(),f=e.length;f--&&!(e[f].pts<=o););if(-1===f)return c;for(var m=f+1;m--&&!(e[m].pts<=s););return m=Math.max(m,0),c.splice(m,f-m+1),c}(this.gopBuffer_,i,s,this.timeMapping_),f++,this.sourceUpdater_.removeVideo(i,s,m)),this.inbandTextTracks_)kw(i,s,this.inbandTextTracks_[_]);kw(i,s,this.segmentMetadataTrack_),m()}else this.logger_("skipping remove because no source updater or starting media info")},t.monitorBuffer_=function(){this.checkBufferTimeout_&&Ce().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ce().setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Ce().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ce().setTimeout(this.monitorBufferTick_.bind(this),500)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();!i||("number"==typeof i.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},t.isEndOfStream_=function(i,s,o){if(void 0===i&&(i=this.mediaIndex),void 0===s&&(s=this.playlist_),void 0===o&&(o=this.partIndex),!s||!this.mediaSource_)return!1;var c="number"==typeof i&&s.segments[i];return s.endList&&"open"===this.mediaSource_.readyState&&i+1===s.segments.length&&(!c||!c.parts||o+1===c.parts.length)},t.chooseNextRequest_=function(){var i=this.buffered_(),s=PF(i)||0,o=$P(i,this.currentTime_()),c=!this.hasPlayed_()&&o>=1,f=o>=this.goalBufferLength_(),m=this.playlist_.segments;if(!m.length||c||f)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var _={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(_.isSyncRequest)_.mediaIndex=function(e,t,n){t=t||[];for(var i=[],s=0,o=0;o<t.length;o++){var c=t[o];if(e===c.timeline&&(i.push(o),(s+=c.duration)>n))return o}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,m,s);else if(null!==this.mediaIndex){var w=m[this.mediaIndex],C="number"==typeof this.partIndex?this.partIndex:-1;_.startOfSegment=w.end?w.end:s,w.parts&&w.parts[C+1]?(_.mediaIndex=this.mediaIndex,_.partIndex=C+1):_.mediaIndex=this.mediaIndex+1}else{var M=ka.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),L=M.segmentIndex,V=M.startTime,H=M.partIndex;_.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),_.mediaIndex=L,_.startOfSegment=V,_.partIndex=H}var Se=m[_.mediaIndex],be=Se&&"number"==typeof _.partIndex&&Se.parts&&Se.parts[_.partIndex];if(!Se||"number"==typeof _.partIndex&&!be)return null;if("number"!=typeof _.partIndex&&Se.parts&&(_.partIndex=0,be=Se.parts[0]),!o&&be&&!be.independent)if(0===_.partIndex){var je=m[_.mediaIndex-1],Ne=je.parts&&je.parts.length&&je.parts[je.parts.length-1];Ne&&Ne.independent&&(_.mediaIndex-=1,_.partIndex=je.parts.length-1,_.independent="previous segment")}else Se.parts[_.partIndex-1].independent&&(_.partIndex-=1,_.independent="previous part");return _.mediaIndex>=m.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(_)},t.generateSegmentInfo_=function(i){var s=i.independent,o=i.playlist,c=i.mediaIndex,f=i.startOfSegment,m=i.isSyncRequest,_=i.partIndex,w=i.forceTimestampOffset,C=i.getMediaInfoForTime,M=o.segments[c],L="number"==typeof _&&M.parts[_],V={requestId:"segment-loader-"+Math.random(),uri:L&&L.resolvedUri||M.resolvedUri,mediaIndex:c,partIndex:L?_:null,isSyncRequest:m,startOfSegment:f,playlist:o,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:M.timeline,duration:L&&L.duration||M.duration,segment:M,part:L,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:C,independent:s},H=void 0!==w?w:this.isPendingTimestampOffset_;V.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:M.timeline,currentTimeline:this.currentTimeline_,startOfSegment:f,buffered:this.buffered_(),overrideCheck:H});var Se=PF(this.sourceUpdater_.audioBuffered());return"number"==typeof Se&&(V.audioAppendStart=Se-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(V.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var s,i=Math.ceil((t-n+3)*SI.ONE_SECOND_IN_TS);for(s=0;s<e.length&&!(e[s].pts>i);s++);return e.slice(s)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),V},t.timestampOffsetForSegment_=function(i){return function(e){var t=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,s=e.buffered;return e.overrideCheck||t!==n?t<n?i:s.length?s.end(s.length-1):i:null}(i)},t.earlyAbortWhenNeeded_=function(i){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),o=i.bandwidth,c=this.pendingSegment_.duration,f=ka.estimateSegmentRequestTime(c,o,this.playlist_,i.bytesReceived),m=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(f<=m)){var _=function(e){var n=e.currentTime,i=e.bandwidth,s=e.duration,o=e.segmentDuration,c=e.timeUntilRebuffer,f=e.currentTimeline,m=e.syncController,_=e.master.playlists.filter(function(V){return!ka.isIncompatible(V)}),w=_.filter(ka.isEnabled);w.length||(w=_.filter(function(V){return!ka.isDisabled(V)}));var M=w.filter(ka.hasAttribute.bind(null,"BANDWIDTH")).map(function(V){var Se=m.getSyncPoint(V,s,f,n)?1:2;return{playlist:V,rebufferingImpact:ka.estimateSegmentRequestTime(o,i,V)*Se-c}}),L=M.filter(function(V){return V.rebufferingImpact<=0});return D0(L,function(V,H){return oM(H.playlist,V.playlist)}),L.length?L[0]:(D0(M,function(V,H){return V.rebufferingImpact-H.rebufferingImpact}),M[0]||null)}({master:this.vhs_.playlists.master,currentTime:s,bandwidth:o,duration:this.duration_(),segmentDuration:c,timeUntilRebuffer:m,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(_){var M=.5;m<=ag&&(M=1),_.playlist&&_.playlist.uri!==this.playlist_.uri&&!(f-m-_.rebufferingImpact<M)&&(this.bandwidth=_.playlist.attributes.BANDWIDTH*Ls.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(i){this.logger_("Aborting "+k0(i)),this.mediaRequestsAborted+=1},t.handleProgress_=function(i,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(i,s){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(s)||(function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++){var o=n[s];if(o!==i[s]||e[o]!==t[o])return!1}return!0}(this.currentMediaInfo_,s=s||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(i,s,o,c){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var f=this.pendingSegment_,m=Ej(s);f[m]=f[m]||{},f[m][o]=c,this.logger_("timinginfo: "+s+" - "+o+" - "+c),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(i,s){var o=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(0===s.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,s));var f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),m={};s.forEach(function(_){m[_.stream]=m[_.stream]||{startTime:1/0,captions:[],endTime:0};var w=m[_.stream];w.startTime=Math.min(w.startTime,_.startTime+f),w.endTime=Math.max(w.endTime,_.endTime+f),w.captions.push(_)}),Object.keys(m).forEach(function(_){var w=m[_],C=w.startTime,M=w.endTime,L=w.captions,V=o.inbandTextTracks_;o.logger_("adding cues from "+C+" -> "+M+" for "+_),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var s=t.textTracks().getTrackById(i);if(s)e[n]=s;else{var c=n,f=n,m=!1,_=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];_&&(c=_.label,f=_.language,m=_.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:m,label:c,language:f},!1).track}}}(V,o.vhs_.tech_,_),kw(C,M,V[_]),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var s=Ce().WebKitDataCue||Ce().VTTCue;n.forEach(function(o){t[o.stream].addCue(new s(o.startTime+i,o.endTime+i,o.text))})}}({captionArray:L,inbandTextTracks:V,timestampOffset:f})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(i,s,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,s,o));var f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)})(this.inbandTextTracks_,o,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,s=e.videoDuration;if(n){var o=Ce().WebKitDataCue||Ce().VTTCue,c=t.metadataTrack_;if(c&&(n.forEach(function(M){var L=M.cueTime+i;"number"!=typeof L||Ce().isNaN(L)||L<0||!(L<1/0)||M.frames.forEach(function(V){var H=new o(L,L,V.value||V.url||V.data||"");H.frame=V,H.value=V,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Fe.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Fe.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Fe.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(H),c.addCue(H)})}),c.cues&&c.cues.length)){for(var f=c.cues,m=[],_=0;_<f.length;_++)f[_]&&m.push(f[_]);var w=m.reduce(function(M,L){var V=M[L.startTime]||[];return V.push(L),M[L.startTime]=V,M},{}),C=Object.keys(w).sort(function(M,L){return Number(M)-Number(L)});C.forEach(function(M,L){var V=w[M],H=Number(C[L+1])||s;V.forEach(function(Se){Se.endTime=H})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:f,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(s){return s()})},t.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(s){return s()})},t.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var i=this.pendingSegment_;return!(!i||this.getCurrentMediaInfo_()&&wj({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.getCurrentMediaInfo_=function(i){return void 0===i&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(i){return void 0===i&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,s=this.getCurrentMediaInfo_();return!(!i||!s||s.hasVideo&&!i.videoTimingInfo||s.hasAudio&&!this.audioDisabled_&&!s.isMuxed&&!i.audioTimingInfo||wj({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(i,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,i,s));var o=this.pendingSegment_;if(this.setTimeMapping_(o.timeline),this.updateMediaSecondsLoaded_(o.part||o.segment),"closed"!==this.mediaSource_.readyState){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),o.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),o.isFmp4=i.isFmp4,o.timingInfo=o.timingInfo||{},o.isFmp4)this.trigger("fmp4"),o.timingInfo.start=o[Ej(s.type)].start;else{var m,c=this.getCurrentMediaInfo_(),f="main"===this.loaderType_&&c&&c.hasVideo;f&&(m=o.videoTimingInfo.start),o.timingInfo.start=this.trueSegmentStart_({currentStart:o.timingInfo.start,playlist:o.playlist,mediaIndex:o.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:f,firstVideoFrameTimeForData:m,videoTimingInfo:o.videoTimingInfo,audioTimingInfo:o.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(o,s.type),this.updateSourceBufferTimestampOffset_(o),o.isSyncRequest){this.updateTimingInfoEnd_(o),this.syncController_.saveSegmentTimingInfo({segmentInfo:o,shouldSaveTimelineMapping:"main"===this.loaderType_});var _=this.chooseNextRequest_();if(_.mediaIndex!==o.mediaIndex||_.partIndex!==o.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}o.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(o,s)}}},t.updateAppendInitSegmentStatus=function(i,s){"main"===this.loaderType_&&"number"==typeof i.timestampOffset&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==i.playlist&&(this.appendInitSegment_[s]=!0)},t.getInitSegmentAndUpdateState_=function(i){var s=i.type,o=i.initSegment,c=i.map,f=i.playlist;if(c){var m=rA(c);if(this.activeInitSegmentId_===m)return null;o=this.initSegmentForMap(c,!0).bytes,this.activeInitSegmentId_=m}return o&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=f,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,o):null},t.handleQuotaExceededError_=function(i,s){var o=this,c=i.segmentInfo,f=i.type,m=i.bytes,_=this.sourceUpdater_.audioBuffered(),w=this.sourceUpdater_.videoBuffered();_.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Rv(_).join(", ")),w.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Rv(w).join(", "));var C=_.length?_.start(0):0,M=_.length?_.end(_.length-1):0,L=w.length?w.start(0):0,V=w.length?w.end(w.length-1):0;if(M-C<=1&&V-L<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+m.byteLength+", audio buffer: "+Rv(_).join(", ")+", video buffer: "+Rv(w).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:c,type:f,bytes:m}));var Se=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+Se),this.remove(0,Se,function(){o.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),o.waitingOnRemove_=!1,o.quotaExceededErrorRetryTimeout_=Ce().setTimeout(function(){o.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),o.quotaExceededErrorRetryTimeout_=null,o.processCallQueue_()},1e3)},!0)},t.handleAppendError_=function(i,s){var o=i.segmentInfo,c=i.type,f=i.bytes;if(s){if(22===s.code)return void this.handleQuotaExceededError_({segmentInfo:o,type:c,bytes:f});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(c+" append of "+f.length+"b failed for segment #"+o.mediaIndex+" in playlist "+o.playlist.id),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(i){var s=i.segmentInfo,o=i.type,c=i.initSegment,f=i.data,m=i.bytes;if(!m){var _=[f],w=f.byteLength;c&&(_.unshift(c),w+=c.byteLength),m=function(e){var n,t=0;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(i){n.set(i,t),t+=i.byteLength})),n}({bytes:w,segments:_})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:o,bytes:m},this.handleAppendError_.bind(this,{segmentInfo:s,type:o,bytes:m}))},t.handleSegmentTimingInfo_=function(i,s,o){if(this.pendingSegment_&&s===this.pendingSegment_.requestId){var c=this.pendingSegment_.segment,f=i+"TimingInfo";c[f]||(c[f]={}),c[f].transmuxerPrependedSeconds=o.prependedContentDuration||0,c[f].transmuxedPresentationStart=o.start.presentation,c[f].transmuxedDecodeStart=o.start.decode,c[f].transmuxedPresentationEnd=o.end.presentation,c[f].transmuxedDecodeEnd=o.end.decode,c[f].baseMediaDecodeTime=o.baseMediaDecodeTime}},t.appendData_=function(i,s){var o=s.type,c=s.data;if(c&&c.byteLength&&("audio"!==o||!this.audioDisabled_)){var f=this.getInitSegmentAndUpdateState_({type:o,initSegment:s.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:o,initSegment:f,data:c})}},t.loadSegment_=function(i){var s=this;this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),"number"==typeof i.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(i):this.loadQueue_.push(function(){var o=sc({},i,{forceTimestampOffset:!0});sc(i,s.generateSegmentInfo_(o)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(i)})},t.updateTransmuxerAndRequestSegment_=function(i){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var o=this.createSimplifiedSegmentObj_(i),_=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)||null!==this.mediaIndex&&i.timeline!==this.currentTimeline_&&i.timeline>0;this.logger_("Requesting "+k0(i)),o.map&&!o.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=MG({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:o,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:_,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(C){var M=C.message,L=C.level,V=C.stream;s.logger_(k0(i)+" logged from transmuxer stream "+V+" as a "+L+": "+M)}})},t.trimBackBuffer_=function(i){var s=function(e,t,n){var i=t-Ls.BACK_BUFFER_LENGTH;return e.length&&(i=Math.max(i,e.start(0))),Math.min(t-n,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},t.createSimplifiedSegmentObj_=function(i){var s=i.segment,o=i.part,c={resolvedUri:o?o.resolvedUri:s.resolvedUri,byterange:o?o.byterange:s.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},f=i.playlist.segments[i.mediaIndex-1];if(f&&f.timeline===s.timeline&&(f.videoTimingInfo?c.baseStartTime=f.videoTimingInfo.transmuxedDecodeEnd:f.audioTimingInfo&&(c.baseStartTime=f.audioTimingInfo.transmuxedDecodeEnd)),s.key){var m=s.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);c.key=this.segmentKey(s.key),c.key.iv=m}return s.map&&(c.map=this.initSegmentForMap(s.map)),c},t.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},t.saveBandwidthRelatedStats_=function(i,s){this.pendingSegment_.byteLength=s.bytesReceived,i<uA?this.logger_("Ignoring segment's bandwidth because its duration of "+i+" is less than the min to record "+uA):(this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime)},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},t.segmentRequestFinished_=function(i,s,o){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,s,o));else if(this.saveTransferStats_(s.stats),this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",-102===i.code)return;return this.pause(),-101===i.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(i),void this.trigger("error"))}var c=this.pendingSegment_;this.saveBandwidthRelatedStats_(c.duration,s.stats),c.endOfAllRequests=s.endOfAllRequests,o.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,s=0;s<e.length&&!(e[s].pts>=i);s++);return e.slice(0,s).concat(t)}(this.gopBuffer_,o.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(c)}},t.setTimeMapping_=function(i){var s=this.syncController_.mappingForTimeline(i);null!==s&&(this.timeMapping_=s)},t.updateMediaSecondsLoaded_=function(i){this.mediaSecondsLoaded+="number"==typeof i.start&&"number"==typeof i.end?i.end-i.start:i.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(i){return null!==i&&("main"===this.loaderType_&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset())},t.trueSegmentStart_=function(i){var s=i.currentStart,c=i.mediaIndex,f=i.firstVideoFrameTimeForData;if(void 0!==s)return s;if(!i.useVideoTimingInfo)return i.audioTimingInfo.start;var M=i.playlist.segments[c-1];return 0!==c&&M&&void 0!==M.start&&M.end===f+i.currentVideoTimestampOffset?i.videoTimingInfo.start:f},t.waitForAppendsToComplete_=function(i){var s=this.getCurrentMediaInfo_(i);if(!s)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var m="main"===this.loaderType_&&s.hasVideo,_=!this.audioDisabled_&&s.hasAudio&&!s.isMuxed;if(i.waitingOnAppends=0,!i.hasAppendedData_)return!i.timingInfo&&"number"==typeof i.timestampOffset&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),void this.checkAppendsDone_(i);m&&i.waitingOnAppends++,_&&i.waitingOnAppends++,m&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),_&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},t.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,0===i.waitingOnAppends&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(i){var s=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),i);return!!s&&(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0)},t.updateSourceBufferTimestampOffset_=function(i){if(null!==i.timestampOffset&&"number"==typeof i.timingInfo.start&&!i.changedTimestampOffset&&"main"===this.loaderType_){var s=!1;i.timestampOffset-=i.timingInfo.start,i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),s=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},t.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var s=this.getMediaInfo_(),c="main"===this.loaderType_&&s&&s.hasVideo&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;!c||(i.timingInfo.end="number"==typeof c.end?c.end:c.start+i.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=function(e,t){if("hls"!==t)return null;var n=function(e,t){return Math.max(e&&"number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:0,t&&"number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:0)}(e.audioTimingInfo,e.videoTimingInfo);if(!n)return null;var i=e.playlist.targetDuration,s=Sj({segmentDuration:n,maxDuration:2*i}),o=Sj({segmentDuration:n,maxDuration:i});return s||o?{severity:s?"warn":"info",message:"Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+n+" when the reported duration is "+e.duration+" and the target duration is "+i+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(i,this.sourceType_);if(s&&("warn"===s.severity?Fe.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",!i.isSyncRequest||(this.trigger("syncinfoupdate"),i.hasAppendedData_)){this.logger_("Appended "+k0(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var o=i.segment,c=i.part,f=o.end&&this.currentTime_()-o.end>3*i.playlist.targetDuration,m=c&&c.end&&this.currentTime_()-c.end>3*i.playlist.partTargetDuration;if(f||m)return this.logger_("bad "+(f?"segment":"part")+" "+k0(i)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+k0(i))},t.recordThroughput_=function(i){if(i.duration<uA)this.logger_("Ignoring segment's throughput because its duration of "+i.duration+" is less than the min to record "+uA);else{var s=this.throughput.rate,o=Date.now()-i.endOfAllRequests+1,c=Math.floor(i.byteLength/o*8*1e3);this.throughput.rate+=(c-s)/++this.throughput.count}},t.addSegmentMetadataCue_=function(i){if(this.segmentMetadataTrack_){var s=i.segment,o=s.start,c=s.end;if(Tj(o)&&Tj(c)){kw(o,c,this.segmentMetadataTrack_);var f=Ce().WebKitDataCue||Ce().VTTCue,m={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:o,end:c},w=new f(o,c,JSON.stringify(m));w.value=m,this.segmentMetadataTrack_.addCue(w)}}},e}(Fe.EventTarget);function sf(){}var af,Cj=function(e){return"string"!=typeof e?e:e.replace(/./,function(t){return t.toUpperCase()})},i$=["video","audio"],uM=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},lM=function r(e,t){if(0!==t.queue.length){var n=0,i=t.queue[n];if("mediaSource"===i.type)return void(!t.updating()&&"closed"!==t.mediaSource.readyState&&(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),r("audio",t),r("video",t)));if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!uM(e,t)){if(i.type!==e){if(n=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(e,t.queue),null===n)return;i=t.queue[n]}if(t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),!i.doneFn)return t.queuePending[e]=null,void r(e,t)}}},xj=function(e,t){var n=t[e+"Buffer"],i=Cj(e);!n||(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Sd=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},du_appendBuffer=function(e,t,n){return function(i,s){var o=s[i+"Buffer"];if(Sd(s.mediaSource,o)){s.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{o.appendBuffer(e)}catch(c){s.logger_("Error with code "+c.code+" "+(22===c.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+i+"Buffer"),s.queuePending[i]=null,n(c)}}}},du_remove=function(e,t){return function(n,i){var s=i[n+"Buffer"];if(Sd(i.mediaSource,s)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{s.remove(e,t)}catch(o){i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},du_timestampOffset=function(e){return function(t,n){var i=n[t+"Buffer"];!Sd(n.mediaSource,i)||(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},du_callback=function(e){return function(t,n){e()}},du_endOfStream=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(n){Fe.log.warn("Failed to call media source endOfStream",n)}}}},du_duration=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(n){Fe.log.warn("Failed to set media source duration",n)}}},du_addSourceBuffer=function(e,t){return function(n){var i=Cj(e),s=uw(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var o=n.mediaSource.addSourceBuffer(s);o.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),o.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=o}},du_removeSourceBuffer=function(e){return function(t){var n=t[e+"Buffer"];if(xj(e,t),Sd(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(i){Fe.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},du_changeType=function(e){return function(t,n){var i=n[t+"Buffer"],s=uw(e);!Sd(n.mediaSource,i)||n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),i.changeType(s),n.codecs[t]=e)}},hu=function(e){var t=e.type,n=e.sourceUpdater;n.queue.push({type:t,action:e.action,doneFn:e.doneFn,name:e.name}),lM(t,n)},Ij=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}lM(e,t)}},Aj=function(r){function e(n){var i;return(i=r.call(this)||this).mediaSource=n,i.sourceopenListener_=function(){return lM("mediaSource",Sn(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=cc("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=Ij("video",Sn(i)),i.onAudioUpdateEnd_=Ij("audio",Sn(i)),i.onVideoError_=function(s){i.videoError_=s},i.onAudioError_=function(s){i.audioError_=s},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}Ot(e,r);var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(i,s){hu({type:"mediaSource",sourceUpdater:this,action:du_addSourceBuffer(i,s),name:"addSourceBuffer"})},t.abort=function(i){hu({type:i,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(Sd(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){Fe.log.warn("Failed to abort on "+e+"Buffer",i)}}}},name:"abort"})},t.removeSourceBuffer=function(i){this.canRemoveSourceBuffer()?hu({type:"mediaSource",sourceUpdater:this,action:du_removeSourceBuffer(i),name:"removeSourceBuffer"}):Fe.log.error("removeSourceBuffer is not supported!")},t.canRemoveSourceBuffer=function(){return!Fe.browser.IE_VERSION&&!Fe.browser.IS_FIREFOX&&Ce().MediaSource&&Ce().MediaSource.prototype&&"function"==typeof Ce().MediaSource.prototype.removeSourceBuffer},e.canChangeType=function(){return Ce().SourceBuffer&&Ce().SourceBuffer.prototype&&"function"==typeof Ce().SourceBuffer.prototype.changeType},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(i,s){this.canChangeType()?hu({type:i,sourceUpdater:this,action:du_changeType(s),name:"changeType"}):Fe.log.error("changeType is not supported!")},t.addOrChangeSourceBuffers=function(i){var s=this;if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(o){var c=i[o];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(o,c);s.canChangeType()&&s.changeType(o,c)})},t.appendBuffer=function(i,s){var o=this,c=i.segmentInfo,f=i.type,m=i.bytes;if(this.processedAppend_=!0,"audio"===f&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([i,s]),void this.logger_("delayed audio append of "+m.length+" until video append");if(hu({type:f,sourceUpdater:this,action:du_appendBuffer(m,c||{mediaIndex:-1},s),doneFn:s,name:"appendBuffer"}),"video"===f){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var w=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+w.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,w.forEach(function(C){o.appendBuffer.apply(o,C)})}},t.audioBuffered=function(){return Sd(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Fe.createTimeRange()},t.videoBuffered=function(){return Sd(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Fe.createTimeRange()},t.buffered=function(){var i=Sd(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=Sd(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!i?this.audioBuffered():i&&!s?this.videoBuffered():function(e,t){var n=null,i=null,s=0,o=[],c=[];if(!(e&&e.length&&t&&t.length))return Fe.createTimeRange();for(var f=e.length;f--;)o.push({time:e.start(f),type:"start"}),o.push({time:e.end(f),type:"end"});for(f=t.length;f--;)o.push({time:t.start(f),type:"start"}),o.push({time:t.end(f),type:"end"});for(o.sort(function(m,_){return m.time-_.time}),f=0;f<o.length;f++)"start"===o[f].type?2==++s&&(n=o[f].time):"end"===o[f].type&&1==--s&&(i=o[f].time),null!==n&&null!==i&&(c.push([n,i]),n=null,i=null);return Fe.createTimeRanges(c)}(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(i,s){void 0===s&&(s=sf),hu({type:"mediaSource",sourceUpdater:this,action:du_duration(i),name:"duration",doneFn:s})},t.endOfStream=function(i,s){void 0===i&&(i=null),void 0===s&&(s=sf),"string"!=typeof i&&(i=void 0),hu({type:"mediaSource",sourceUpdater:this,action:du_endOfStream(i),name:"endOfStream",doneFn:s})},t.removeAudio=function(i,s,o){void 0===o&&(o=sf),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?hu({type:"audio",sourceUpdater:this,action:du_remove(i,s),doneFn:o,name:"remove"}):o()},t.removeVideo=function(i,s,o){void 0===o&&(o=sf),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?hu({type:"video",sourceUpdater:this,action:du_remove(i,s),doneFn:o,name:"remove"}):o()},t.updating=function(){return!(!uM("audio",this)&&!uM("video",this))},t.audioTimestampOffset=function(i){return void 0!==i&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(hu({type:"audio",sourceUpdater:this,action:du_timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},t.videoTimestampOffset=function(i){return void 0!==i&&this.videoBuffer&&this.videoTimestampOffset!==i&&(hu({type:"video",sourceUpdater:this,action:du_timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},t.audioQueueCallback=function(i){!this.audioBuffer||hu({type:"audio",sourceUpdater:this,action:du_callback(i),name:"callback"})},t.videoQueueCallback=function(i){!this.videoBuffer||hu({type:"video",sourceUpdater:this,action:du_callback(i),name:"callback"})},t.dispose=function(){var i=this;this.trigger("dispose"),i$.forEach(function(s){i.abort(s),i.canRemoveSourceBuffer()?i.removeSourceBuffer(s):i[s+"QueueCallback"](function(){return xj(s,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(Fe.EventTarget),Dj=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},kj=new Uint8Array("\n\n".split("").map(function(r){return r.charCodeAt(0)})),o$=function(r){function e(n,i){var s;return void 0===i&&(i={}),(s=r.call(this,n,i)||this).mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=n.featuresNativeTextTracks,s.shouldSaveSegmentTimingInfo_=!1,s}Ot(e,r);var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Fe.createTimeRanges();var i=this.subtitlesTrack_.cues;return Fe.createTimeRanges([[i[0].startTime,i[i.length-1].startTime]])},t.initSegmentForMap=function(i,s){if(void 0===s&&(s=!1),!i)return null;var o=rA(i),c=this.initSegments_[o];if(s&&!c&&i.bytes){var m=new Uint8Array(kj.byteLength+i.bytes.byteLength);m.set(i.bytes),m.set(kj,i.bytes.byteLength),this.initSegments_[o]=c={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:m}}return c||i},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(i){return void 0===i||(this.subtitlesTrack_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},t.remove=function(i,s){kw(i,s,this.subtitlesTrack_)},t.fillBuffer_=function(){var i=this,s=this.chooseNextRequest_();if(s){if(null===this.syncController_.timestampOffsetForTimeline(s.timeline))return this.syncController_.one("timestampoffset",function(){i.state="READY",i.paused()||i.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(s)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(r.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},t.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(i,s,o){var c=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(s.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(i)return-101===i.code&&this.handleTimeout_(),-102===i.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(i);var f=this.pendingSegment_;this.saveBandwidthRelatedStats_(f.duration,s.stats),this.state="APPENDING",this.trigger("appending");var m=f.segment;if(m.map&&(m.map.bytes=s.map.bytes),f.bytes=s.bytes,"function"!=typeof Ce().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var _,w=function(){c.subtitlesTrack_.tech_.off("vttjsloaded",_),c.stopForError({message:"Error loading vtt.js"})};return _=function(){c.subtitlesTrack_.tech_.off("vttjserror",w),c.segmentRequestFinished_(i,s,o)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",_),void this.subtitlesTrack_.tech_.one("vttjserror",w)}m.requested=!0;try{this.parseVTTCues_(f)}catch(C){return void this.stopForError({message:C.message})}if(this.updateTimeMapping_(f,this.syncController_.timelines[f.timeline],this.playlist_),f.timingInfo=f.cues.length?{start:f.cues[0].startTime,end:f.cues[f.cues.length-1].endTime}:{start:f.startOfSegment,end:f.startOfSegment+f.duration},f.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");f.byteLength=f.bytes.byteLength,this.mediaSecondsLoaded+=m.duration,f.cues.forEach(function(C){c.subtitlesTrack_.addCue(c.featuresNativeTextTracks_?new(Ce().VTTCue)(C.startTime,C.endTime,C.text):C)}),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],s=0,o=0;o<t.length;o++)t[n].startTime===t[o].startTime&&t[n].endTime===t[o].endTime&&t[n].text===t[o].text&&++s>1&&i.push(t[o]);i.length&&i.forEach(function(c){return e.removeCue(c)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(i){var s,o=!1;"function"==typeof Ce().TextDecoder?s=new(Ce().TextDecoder)("utf8"):(s=Ce().WebVTT.StringDecoder(),o=!0);var c=new(Ce().WebVTT.Parser)(Ce(),Ce().vttjs,s);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},c.oncue=i.cues.push.bind(i.cues),c.ontimestampmap=function(_){i.timestampmap=_},c.onparsingerror=function(_){Fe.log.warn("Error encountered when parsing cues: "+_.message)},i.segment.map){var f=i.segment.map.bytes;o&&(f=Dj(f)),c.parse(f)}var m=i.bytes;o&&(m=Dj(m)),c.parse(m),c.flush()},t.updateTimeMapping_=function(i,s,o){var c=i.segment;if(s){if(!i.cues.length)return void(c.empty=!0);var f=i.timestampmap,m=f.MPEGTS/SI.ONE_SECOND_IN_TS-f.LOCAL+s.mapping;i.cues.forEach(function(C){C.startTime+=m,C.endTime+=m}),o.syncInfo||(o.syncInfo={mediaSequence:o.mediaSequence+i.mediaIndex,time:Math.min(i.cues[0].startTime,i.cues[i.cues.length-1].startTime-c.duration)})}},e}(aM),a$=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var s=n[i];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null},Pj=[{name:"VOD",run:function(e,t,n,i,s){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,i,s){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var o=null,c=null,f=WP(t);s=s||0;for(var m=0;m<f.length;m++){var w=f[t.endList||0===s?m:f.length-(m+1)],C=w.segment,M=e.timelineToDatetimeMappings[C.timeline];if(M&&C.dateTimeObject){var V=C.dateTimeObject.getTime()/1e3+M;if(C.parts&&"number"==typeof w.partIndex)for(var H=0;H<w.partIndex;H++)V+=C.parts[H].duration;var Se=Math.abs(s-V);if(null!==c&&(0===Se||c<Se))break;c=Se,o={time:V,segmentIndex:w.segmentIndex,partIndex:w.partIndex}}}return o}},{name:"Segment",run:function(e,t,n,i,s){var o=null,c=null;s=s||0;for(var f=WP(t),m=0;m<f.length;m++){var w=f[t.endList||0===s?m:f.length-(m+1)],C=w.segment,M=w.part&&w.part.start||C&&C.start;if(C.timeline===i&&void 0!==M){var L=Math.abs(s-M);if(null!==c&&c<L)break;(!o||null===c||c>=L)&&(c=L,o={time:M,segmentIndex:w.segmentIndex,partIndex:w.partIndex})}}return o}},{name:"Discontinuity",run:function(e,t,n,i,s){var o=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var c=null,f=0;f<t.discontinuityStarts.length;f++){var m=t.discontinuityStarts[f],w=e.discontinuities[t.discontinuitySequence+f+1];if(w){var C=Math.abs(s-w.time);if(null!==c&&c<C)break;(!o||null===c||c>=C)&&(c=C,o={time:w.time,segmentIndex:m,partIndex:null})}}return o}},{name:"Playlist",run:function(e,t,n,i,s){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],c$=function(r){function e(n){var i;return(i=r.call(this)||this).timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=cc("SyncController"),i}Ot(e,r);var t=e.prototype;return t.getSyncPoint=function(i,s,o,c){var f=this.runStrategies_(i,s,o,c);return f.length?this.selectSyncPoint_(f,{key:"time",value:c}):null},t.getExpiredTime=function(i,s){if(!i||!i.segments)return null;var o=this.runStrategies_(i,s,i.discontinuitySequence,0);if(!o.length)return null;var c=this.selectSyncPoint_(o,{key:"segmentIndex",value:0});return c.segmentIndex>0&&(c.time*=-1),Math.abs(c.time+xw({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:c.segmentIndex,endIndex:0}))},t.runStrategies_=function(i,s,o,c){for(var f=[],m=0;m<Pj.length;m++){var _=Pj[m],w=_.run(this,i,s,o,c);w&&(w.strategy=_.name,f.push({strategy:_.name,syncPoint:w}))}return f},t.selectSyncPoint_=function(i,s){for(var o=i[0].syncPoint,c=Math.abs(i[0].syncPoint[s.key]-s.value),f=i[0].strategy,m=1;m<i.length;m++){var _=Math.abs(i[m].syncPoint[s.key]-s.value);_<c&&(c=_,o=i[m].syncPoint,f=i[m].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy ["+f+"]: [time:"+o.time+", segmentIndex:"+o.segmentIndex+("number"==typeof o.partIndex?",partIndex:"+o.partIndex:"")+"]"),o},t.saveExpiredSegmentInfo=function(i,s){var o=s.mediaSequence-i.mediaSequence;if(o>86400)Fe.log.warn("Not saving expired segment info. Media sequence gap "+o+" is too large.");else for(var c=o-1;c>=0;c--){var f=i.segments[c];if(f&&void 0!==f.start){s.syncInfo={mediaSequence:i.mediaSequence+c,time:f.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+", mediaSequence: "+s.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var s=i.segments[0],o=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-o}},t.saveSegmentTimingInfo=function(i){var s=i.segmentInfo,o=i.shouldSaveTimelineMapping,c=this.calculateSegmentTimeMapping_(s,s.timingInfo,o),f=s.segment;c&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:f.start}));var m=f.dateTimeObject;f.discontinuity&&o&&m&&(this.timelineToDatetimeMappings[f.timeline]=-m.getTime()/1e3)},t.timestampOffsetForTimeline=function(i){return void 0===this.timelines[i]?null:this.timelines[i].time},t.mappingForTimeline=function(i){return void 0===this.timelines[i]?null:this.timelines[i].mapping},t.calculateSegmentTimeMapping_=function(i,s,o){var _,w,c=i.segment,f=i.part,m=this.timelines[i.timeline];if("number"==typeof i.timestampOffset)m={time:i.startOfSegment,mapping:i.startOfSegment-s.start},o&&(this.timelines[i.timeline]=m,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": [time: "+m.time+"] [mapping: "+m.mapping+"]")),_=i.startOfSegment,w=s.end+m.mapping;else{if(!m)return!1;_=s.start+m.mapping,w=s.end+m.mapping}return f&&(f.start=_,f.end=w),(!c.start||_<c.start)&&(c.start=_),c.end=w,!0},t.saveDiscontinuitySyncInfo_=function(i){var s=i.playlist,o=i.segment;if(o.discontinuity)this.discontinuities[o.timeline]={time:o.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var c=0;c<s.discontinuityStarts.length;c++){var f=s.discontinuityStarts[c],m=s.discontinuitySequence+c+1,_=f-i.mediaIndex,w=Math.abs(_);if(!this.discontinuities[m]||this.discontinuities[m].accuracy>w){var C;C=_<0?o.start-xw({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex,endIndex:f}):o.end+xw({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex+1,endIndex:f}),this.discontinuities[m]={time:C,accuracy:w}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e}(Fe.EventTarget),d$=function(r){function e(){var n;return(n=r.call(this)||this).pendingTimelineChanges_={},n.lastTimelineChanges_={},n}Ot(e,r);var t=e.prototype;return t.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(i){var s=i.type,o=i.from,c=i.to;return"number"==typeof o&&"number"==typeof c&&(this.pendingTimelineChanges_[s]={type:s,from:o,to:c},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},t.lastTimelineChange=function(i){var s=i.type,o=i.from,c=i.to;return"number"==typeof o&&"number"==typeof c&&(this.lastTimelineChanges_[s]={type:s,from:o,to:c},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(Fe.EventTarget),h$=ij(sj(function(){function r(V,H,Se){return V(Se={path:H,exports:{},require:function(je,Ne){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},Se.exports),Se.exports}var t=r(function(V){function H(be,je){for(var Ne=0;Ne<je.length;Ne++){var $e=je[Ne];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(be,$e.key,$e)}}V.exports=function(be,je,Ne){return je&&H(be.prototype,je),Ne&&H(be,Ne),be},V.exports.default=V.exports,V.exports.__esModule=!0}),n=r(function(V){function H(Se,be){return V.exports=H=Object.setPrototypeOf||function(Ne,$e){return Ne.__proto__=$e,Ne},V.exports.default=V.exports,V.exports.__esModule=!0,H(Se,be)}V.exports=H,V.exports.default=V.exports,V.exports.__esModule=!0}),i=r(function(V){V.exports=function(Se,be){Se.prototype=Object.create(be.prototype),Se.prototype.constructor=Se,n(Se,be)},V.exports.default=V.exports,V.exports.__esModule=!0}),s=function(){function V(){this.listeners={}}var H=V.prototype;return H.on=function(be,je){this.listeners[be]||(this.listeners[be]=[]),this.listeners[be].push(je)},H.off=function(be,je){if(!this.listeners[be])return!1;var Ne=this.listeners[be].indexOf(je);return this.listeners[be]=this.listeners[be].slice(0),this.listeners[be].splice(Ne,1),Ne>-1},H.trigger=function(be){var je=this.listeners[be];if(je)if(2===arguments.length)for(var Ne=je.length,$e=0;$e<Ne;++$e)je[$e].call(this,arguments[1]);else for(var nt=Array.prototype.slice.call(arguments,1),pt=je.length,ct=0;ct<pt;++ct)je[ct].apply(this,nt)},H.dispose=function(){this.listeners={}},H.pipe=function(be){this.on("data",function(je){be.push(je)})},V}(),f=null,m=function(){function V(Se){f||(f=function(){var $e,nt,pt,Mt,Vn,tr,Ai,br,H=[[[],[],[],[],[]],[[],[],[],[],[]]],Se=H[0],be=H[1],je=Se[4],Ne=be[4],ct=[],ut=[];for($e=0;$e<256;$e++)ut[(ct[$e]=$e<<1^283*($e>>7))^$e]=$e;for(nt=pt=0;!je[nt];nt^=Mt||1,pt=ut[pt]||1)for(je[nt]=tr=(tr=pt^pt<<1^pt<<2^pt<<3^pt<<4)>>8^255&tr^99,Ne[tr]=nt,br=16843009*ct[Vn=ct[Mt=ct[nt]]]^65537*Vn^257*Mt^16843008*nt,Ai=257*ct[tr]^16843008*tr,$e=0;$e<4;$e++)Se[$e][nt]=Ai=Ai<<24^Ai>>>8,be[$e][tr]=br=br<<24^br>>>8;for($e=0;$e<5;$e++)Se[$e]=Se[$e].slice(0),be[$e]=be[$e].slice(0);return H}()),this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];var be,je,Ne,$e=this._tables[0][4],nt=this._tables[1],pt=Se.length,ct=1;if(4!==pt&&6!==pt&&8!==pt)throw new Error("Invalid aes key size");var ut=Se.slice(0),Mt=[];for(this._key=[ut,Mt],be=pt;be<4*pt+28;be++)Ne=ut[be-1],(be%pt==0||8===pt&&be%pt==4)&&(Ne=$e[Ne>>>24]<<24^$e[Ne>>16&255]<<16^$e[Ne>>8&255]<<8^$e[255&Ne],be%pt==0&&(Ne=Ne<<8^Ne>>>24^ct<<24,ct=ct<<1^283*(ct>>7))),ut[be]=ut[be-pt]^Ne;for(je=0;be;je++,be--)Ne=ut[3&je?be:be-4],Mt[je]=be<=4||je<4?Ne:nt[0][$e[Ne>>>24]]^nt[1][$e[Ne>>16&255]]^nt[2][$e[Ne>>8&255]]^nt[3][$e[255&Ne]]}return V.prototype.decrypt=function(be,je,Ne,$e,nt,pt){var tr,Ai,br,Gu,ct=this._key[1],ut=be^ct[0],Mt=$e^ct[1],Vn=Ne^ct[2],jr=je^ct[3],Nv=ct.length/4-2,$u=4,qu=this._tables[1],uf=qu[0],Lv=qu[1],Fv=qu[2],Cd=qu[3],O0=qu[4];for(Gu=0;Gu<Nv;Gu++)tr=uf[ut>>>24]^Lv[Mt>>16&255]^Fv[Vn>>8&255]^Cd[255&jr]^ct[$u],Ai=uf[Mt>>>24]^Lv[Vn>>16&255]^Fv[jr>>8&255]^Cd[255&ut]^ct[$u+1],br=uf[Vn>>>24]^Lv[jr>>16&255]^Fv[ut>>8&255]^Cd[255&Mt]^ct[$u+2],jr=uf[jr>>>24]^Lv[ut>>16&255]^Fv[Mt>>8&255]^Cd[255&Vn]^ct[$u+3],$u+=4,ut=tr,Mt=Ai,Vn=br;for(Gu=0;Gu<4;Gu++)nt[(3&-Gu)+pt]=O0[ut>>>24]<<24^O0[Mt>>16&255]<<16^O0[Vn>>8&255]<<8^O0[255&jr]^ct[$u++],tr=ut,ut=Mt,Mt=Vn,Vn=jr,jr=tr},V}(),_=function(V){function H(){var be;return(be=V.call(this,s)||this).jobs=[],be.delay=1,be.timeout_=null,be}i(H,V);var Se=H.prototype;return Se.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},Se.push=function(je){this.jobs.push(je),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},H}(s),w=function(H){return H<<24|(65280&H)<<8|(16711680&H)>>8|H>>>24},M=function(){function V(Se,be,je,Ne){var $e=V.STEP,nt=new Int32Array(Se.buffer),pt=new Uint8Array(Se.byteLength),ct=0;for(this.asyncStream_=new _,this.asyncStream_.push(this.decryptChunk_(nt.subarray(ct,ct+$e),be,je,pt)),ct=$e;ct<nt.length;ct+=$e)je=new Uint32Array([w(nt[ct-4]),w(nt[ct-3]),w(nt[ct-2]),w(nt[ct-1])]),this.asyncStream_.push(this.decryptChunk_(nt.subarray(ct,ct+$e),be,je,pt));this.asyncStream_.push(function(){Ne(null,function(V){return V.subarray(0,V.byteLength-V[V.byteLength-1])}(pt))})}return V.prototype.decryptChunk_=function(be,je,Ne,$e){return function(){var nt=function(H,Se,be){var pt,ct,ut,Mt,Vn,jr,tr,Ai,br,je=new Int32Array(H.buffer,H.byteOffset,H.byteLength>>2),Ne=new m(Array.prototype.slice.call(Se)),$e=new Uint8Array(H.byteLength),nt=new Int32Array($e.buffer);for(pt=be[0],ct=be[1],ut=be[2],Mt=be[3],br=0;br<je.length;br+=4)Vn=w(je[br]),jr=w(je[br+1]),tr=w(je[br+2]),Ai=w(je[br+3]),Ne.decrypt(Vn,jr,tr,Ai,nt,br),nt[br]=w(nt[br]^pt),nt[br+1]=w(nt[br+1]^ct),nt[br+2]=w(nt[br+2]^ut),nt[br+3]=w(nt[br+3]^Mt),pt=Vn,ct=jr,ut=tr,Mt=Ai;return $e}(be,je,Ne);$e.set(nt,be.byteOffset)}},t(V,null,[{key:"STEP",get:function(){return 32e3}}]),V}();self.onmessage=function(V){var H=V.data,Se=new Uint8Array(H.encrypted.bytes,H.encrypted.byteOffset,H.encrypted.byteLength),be=new Uint32Array(H.key.bytes,H.key.byteOffset,H.key.byteLength/4),je=new Uint32Array(H.iv.bytes,H.iv.byteOffset,H.iv.byteLength/4);new M(Se,be,je,function(Ne,$e){self.postMessage(function(H){var Se={};return Object.keys(H).forEach(function(be){var je=H[be];Se[be]=ArrayBuffer.isView(je)?{bytes:je.buffer,byteOffset:je.byteOffset,byteLength:je.byteLength}:je}),Se}({source:H.source,decrypted:$e}),[$e.buffer])})}})),f$=rj(h$),p$=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},lA=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},cM=function(e,t){t.activePlaylistLoader=e,e.load()},cA={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e],s=t.blacklistCurrentPlaylist;lA(t.segmentLoaders[e],i);var o=i.activeTrack(),c=i.activeGroup(),f=(c.filter(function(w){return w.default})[0]||c[0]).id,m=i.tracks[f];if(o!==m){for(var _ in Fe.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[_].enabled=i.tracks[_]===m;i.onTrackChanged()}else s({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];Fe.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),lA(n,i);var s=i.activeTrack();s&&(s.mode="disabled"),i.onTrackChanged()}}},Mj={AUDIO:function(e,t,n){if(t){var i=n.tech,s=n.requestOptions,o=n.segmentLoaders[e];t.on("loadedmetadata",function(){var c=t.media();o.playlist(c,s),(!i.paused()||c.endList&&"none"!==i.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),s),i.paused()||o.load()}),t.on("error",cA[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,s=n.requestOptions,o=n.segmentLoaders[e],c=n.mediaTypes[e];t.on("loadedmetadata",function(){var f=t.media();o.playlist(f,s),o.track(c.activeTrack()),(!i.paused()||f.endList&&"none"!==i.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),s),i.paused()||o.load()}),t.on("error",cA[e](e,n))}},y$={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,c=t.master.mediaGroups,f=t.mediaTypes[e],m=f.groups,_=f.tracks,w=f.logger_,C=t.masterPlaylistLoader,M=Iw(C.master);for(var L in(!c[e]||0===Object.keys(c[e]).length)&&(c[e]={main:{default:{default:!0}}},M&&(c[e].main.default.playlists=C.master.playlists)),c[e])for(var V in m[L]||(m[L]=[]),c[e][L]){var H=c[e][L][V],Se=void 0;if(M?(w("AUDIO group '"+L+"' label '"+V+"' is a master playlist"),H.isMasterPlaylist=!0,Se=null):Se="vhs-json"===i&&H.playlists?new A0(H.playlists[0],n,o):H.resolvedUri?new A0(H.resolvedUri,n,o):H.playlists&&"dash"===i?new nM(H.playlists[0],n,o,C):null,H=Fe.mergeOptions({id:V,playlistLoader:Se},H),Mj[e](e,H.playlistLoader,t),m[L].push(H),void 0===_[V]){var be=new Fe.AudioTrack({id:V,kind:p$(H),enabled:!1,language:H.language,default:H.default,label:V});_[V]=be}}s.on("error",cA[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,s=t.sourceType,o=t.segmentLoaders[e],c=t.requestOptions,f=t.master.mediaGroups,m=t.mediaTypes[e],_=m.groups,w=m.tracks,C=t.masterPlaylistLoader;for(var M in f[e])for(var L in _[M]||(_[M]=[]),f[e][M])if(!f[e][M][L].forced){var V=f[e][M][L],H=void 0;if("hls"===s)H=new A0(V.resolvedUri,i,c);else if("dash"===s){if(!V.playlists.filter(function(je){return je.excludeUntil!==1/0}).length)return;H=new nM(V.playlists[0],i,c,C)}else"vhs-json"===s&&(H=new A0(V.playlists?V.playlists[0]:V.resolvedUri,i,c));if(V=Fe.mergeOptions({id:L,playlistLoader:H},V),Mj[e](e,V.playlistLoader,t),_[M].push(V),void 0===w[L]){var be=n.addRemoteTextTrack({id:L,kind:"subtitles",default:V.default&&V.autoselect,language:V.language,label:L},!1).track;w[L]=be}}o.on("error",cA[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,s=t.mediaTypes[e],o=s.groups,c=s.tracks;for(var f in i[e])for(var m in o[f]||(o[f]=[]),i[e][f]){var _=i[e][f][m];if(/^(?:CC|SERVICE)/.test(_.instreamId)){var w=n.options_.vhs&&n.options_.vhs.captionServices||{},C={label:m,language:_.language,instreamId:_.instreamId,default:_.default&&_.autoselect};if(w[C.instreamId]&&(C=Fe.mergeOptions(C,w[C.instreamId])),void 0===C.default&&delete C.default,o[f].push(Fe.mergeOptions({id:m},_)),void 0===c[m]){var M=n.addRemoteTextTrack({id:C.instreamId,kind:"captions",default:C.default,language:C.language,label:C.label},!1).track;c[m]=M}}}}},_$=function r(e,t){for(var n=0;n<e.length;n++)if(KP(t,e[n])||e[n].playlists&&r(e[n].playlists,t))return!0;return!1},T$={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},x$=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],I$=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},D$=function(r){function e(n){var i;i=r.call(this)||this;var s=n.src,o=n.handleManifestRedirects,c=n.withCredentials,f=n.tech,m=n.bandwidth,_=n.externVhs,w=n.useCueTags,C=n.blacklistDuration,M=n.enableLowInitialPlaylist,L=n.sourceType,V=n.cacheEncryptionKeys,H=n.experimentalBufferBasedABR,Se=n.experimentalLeastPixelDiffSelector,be=n.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var je=n.maxPlaylistRetries;null==je&&(je=1/0),af=_,i.experimentalBufferBasedABR=Boolean(H),i.experimentalLeastPixelDiffSelector=Boolean(Se),i.withCredentials=c,i.tech_=f,i.vhs_=f.vhs,i.sourceType_=L,i.useCueTags_=w,i.blacklistDuration=C,i.maxPlaylistRetries=je,i.enableLowInitialPlaylist=M,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:c,handleManifestRedirects:o,maxPlaylistRetries:je,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:sf,activeTrack:sf,getActiveGroup:sf,onGroupChanged:sf,onTrackChanged:sf,lastTrack_:null,logger_:cc("MediaGroups["+t+"]")}}),e}(),i.mediaSource=new(Ce().MediaSource),i.handleDurationChange_=i.handleDurationChange_.bind(Sn(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Sn(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Sn(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Fe.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new c$(n),i.segmentMetadataTrack_=f.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new f$,i.sourceUpdater_=new Aj(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new d$;var Ne={vhs:i.vhs_,parse708captions:n.parse708captions,captionServices:be,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:m,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:V,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_="dash"===i.sourceType_?new nM(s,i.vhs_,i.requestOptions_):new A0(s,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new aM(Fe.mergeOptions(Ne,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new aM(Fe.mergeOptions(Ne,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new o$(Fe.mergeOptions(Ne,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),x$.forEach(function(nt){i[nt+"_"]=I$.bind(Sn(i),nt)}),i.logger_=cc("MPC"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var $e="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one($e,function(){var nt=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-nt,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}Ot(e,r);var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return-1===i||-1===s?-1:i+s},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(){var i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,"abr")},t.switchMedia_=function(i,s,o){var c=this.media(),f=c&&(c.id||c.uri),m=i.id||i.uri;f&&f!==m&&(this.logger_("switch media "+f+" -> "+m+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(i,o)},t.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=Ce().setInterval(function(){return i.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Ce().clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var i=this.master(),s=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return s;var f,o=i.mediaGroups.AUDIO,c=Object.keys(o);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)f=this.mediaTypes_.AUDIO.activeTrack();else{var m=o.main||c.length&&o[c[0]];for(var _ in m)if(m[_].default){f={label:_};break}}if(!f)return s;var w=[];for(var C in o)if(o[C][f.label]){var M=o[C][f.label];if(M.playlists&&M.playlists.length)w.push.apply(w,M.playlists);else if(M.uri)w.push(M);else if(i.playlists.length)for(var L=0;L<i.playlists.length;L++){var V=i.playlists[L];V.attributes&&V.attributes.AUDIO&&V.attributes.AUDIO===C&&w.push(V)}}return w.length?w:s},t.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=i.masterPlaylistLoader_.media(),o=1.5*s.targetDuration*1e3;i.requestOptions_.timeout=ZP(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?0:o,s.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(L){y$[L](L,e)});var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,s=e.vhs,o=e.segmentLoaders,c=o.AUDIO,f=o.main;["AUDIO","SUBTITLES"].forEach(function(L){t[L].activeGroup=function(e,t){return function(n){var s=t.mediaTypes[e].groups,o=t.masterPlaylistLoader.media();if(!o)return null;var c=null;o.attributes[e]&&(c=s[o.attributes[e]]);var f=Object.keys(s);if(!c)if("AUDIO"===e&&f.length>1&&Iw(t.master))for(var m=0;m<f.length;m++){var _=s[f[m]];if(_$(_,o)){c=_;break}}else s.main?c=s.main:1===f.length&&(c=s[f[0]]);return void 0===n?c:null!==n&&c&&c.filter(function(w){return w.id===n.id})[0]||null}}(L,e),t[L].activeTrack=T$[L](L,e),t[L].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],s=n.main,o=t.mediaTypes[e],c=o.activeTrack(),f=o.getActiveGroup(),m=o.activePlaylistLoader,_=o.lastGroup_;if((!f||!_||f.id!==_.id)&&(o.lastGroup_=f,o.lastTrack_=c,lA(i,o),f&&!f.isMasterPlaylist)){if(!f.playlistLoader)return void(m&&s.resetEverything());i.resyncLoader(),cM(f.playlistLoader,o)}}}(L,e),t[L].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(L,e),t[L].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,i=t.segmentLoaders,s=i[e],o=i.main,c=t.mediaTypes[e],f=c.activeTrack(),m=c.getActiveGroup(),_=c.activePlaylistLoader,w=c.lastTrack_;if((!w||!f||w.id!==f.id)&&(c.lastGroup_=m,c.lastTrack_=f,lA(s,c),m)){if(m.isMasterPlaylist){if(!f||!w||f.id===w.id)return;var C=t.vhs.masterPlaylistController_,M=C.selectPlaylist();if(C.media()===M)return;return c.logger_("track change. Switching master audio from "+w.id+" to "+f.id),n.pause(),o.resetEverything(),void C.fastQualityChange_(M)}if("AUDIO"===e){if(!m.playlistLoader)return o.setAudio(!0),void o.resetEverything();s.setAudio(!0),o.setAudio(!1)}if(_===m.playlistLoader)return void cM(m.playlistLoader,c);s.track&&s.track(f),s.resetEverything(),cM(m.playlistLoader,c)}}}(L,e),t[L].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var i=n[e].activeTrack();return i?n[e].activeGroup(i):null}}(L,e)});var m=t.AUDIO.activeGroup();if(m){var _=(m.filter(function(L){return L.default})[0]||m[0]).id;t.AUDIO.tracks[_].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(f.setAudio(!1),c.setAudio(!0)):f.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(L){return t[L].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(L){return t[L].onGroupChanging()})});var C=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};for(var M in i.audioTracks().addEventListener("change",C),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",function(){i.audioTracks().removeEventListener("change",C),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[M])}({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),s),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var s=i.masterPlaylistLoader_.media();if(!s){var o;if(i.excludeUnsupportedVariants_(),i.enableLowInitialPlaylist&&(o=i.selectInitialPlaylist()),o||(o=i.selectPlaylist()),!o||!i.shouldSwitchToMedia_(o))return;if(i.initialMedia_=o,i.switchMedia_(i.initialMedia_,"initial"),"vhs-json"!==i.sourceType_||!i.initialMedia_.segments)return;s=i.initialMedia_}i.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=i.masterPlaylistLoader_.media(),o=1.5*s.targetDuration*1e3;i.requestOptions_.timeout=ZP(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?0:o,i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=i.masterPlaylistLoader_.media();"playlist-unchanged"!==s.lastExcludeReason_&&i.stuckAtPlaylistEnd_(s)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(i,s){var o=i.mediaGroups||{},c=!0,f=Object.keys(o.AUDIO);for(var m in o.AUDIO)for(var _ in o.AUDIO[m])o.AUDIO[m][_].uri||(c=!1);c&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(o.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),af.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),f.length&&Object.keys(o.AUDIO[f[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(i){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,o=this.tech_.currentTime(),c=this.bufferLowWaterLine(),f=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,s=e.nextPlaylist,o=e.bufferLowWaterLine,c=e.bufferHighWaterLine,f=e.duration,m=e.experimentalBufferBasedABR,_=e.log;if(!s)return Fe.log.warn("We received no playlist to switch to. Please check your stream."),!1;var w="allowing switch "+(t&&t.id||"null")+" -> "+s.id;if(!t)return _(w+" as current playlist is not set"),!0;if(s.id===t.id)return!1;var C=Boolean(I0(n,i).length);if(!t.endList)return C||"number"!=typeof t.partTargetDuration?(_(w+" as current playlist is live"),!0):(_("not "+w+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var M=$P(n,i),L=m?Ls.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ls.MAX_BUFFER_LOW_WATER_LINE;if(f<L)return _(w+" as duration < max low water line ("+f+" < "+L+")"),!0;var V=s.attributes.BANDWIDTH,H=t.attributes.BANDWIDTH;if(V<H&&(!m||M<c)){var Se=w+" as next bandwidth < current bandwidth ("+V+" < "+H+")";return m&&(Se+=" and forwardBuffer < bufferHighWaterLine ("+M+" < "+c+")"),_(Se),!0}if((!m||V>H)&&M>=o){var be=w+" as forwardBuffer >= bufferLowWaterLine ("+M+" >= "+o+")";return m&&(be+=" and next bandwidth > current bandwidth ("+V+" > "+H+")"),_(be),!0}return _("not "+w+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:o,currentPlaylist:s,nextPlaylist:i,bufferLowWaterLine:c,bufferHighWaterLine:f,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var i=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var o=i.selectPlaylist();i.shouldSwitchToMedia_(o)&&i.switchMedia_(o,"bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(o){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var s=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var c=i.getCodecsOrExclude_();!c||i.sourceUpdater_.addOrChangeSourceBuffers(c)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(i){void 0===i&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},t.fastQualityChange_=function(i){var s=this;void 0===i&&(i=this.selectPlaylist()),i!==this.masterPlaylistLoader_.media()?(this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){s.tech_.setCurrentTime(Fe.browser.IE_VERSION||Fe.browser.IS_EDGE?s.tech_.currentTime()+.04:s.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},t.setupFirstPlay=function(){var i=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var o=this.seekable();if(!o.length)return!1;if(Fe.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(o.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(o.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();void 0!==i&&"function"==typeof i.then&&i.then(null,function(s){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(i&&i.length){var s=this.duration();i[i.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();i=!s||s.hasVideo?i&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!i||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(i){if(!this.seekable().length)return!1;var o=this.syncController_.getExpiredTime(i,this.duration());if(null===o)return!1;var c=af.Playlist.playlistEnd(i,o),f=this.tech_.currentTime(),m=this.tech_.buffered();if(!m.length)return c-f<=Ed;var _=m.end(m.length-1);return _-f<=Ed&&c-_<=Ed},t.blacklistCurrentPlaylist=function(i,s){void 0===i&&(i={});var o=i.playlist||this.masterPlaylistLoader_.media();if(s=s||i.blacklistDuration||this.blacklistDuration,!o)return this.error=i,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));o.playlistErrors_++;var w,c=this.masterPlaylistLoader_.master.playlists,f=c.filter(tA),m=1===f.length&&f[0]===o;if(1===c.length&&s!==1/0)return Fe.log.warn("Problem encountered with playlist "+o.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(m);if(m){var _=!1;c.forEach(function(Se){if(Se!==o){var be=Se.excludeUntil;void 0!==be&&be!==1/0&&(_=!0,delete Se.excludeUntil)}}),_&&(Fe.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}w=o.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*s,o.excludeUntil=w,i.reason&&(o.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var C=this.selectPlaylist();if(!C)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(i.internal?this.logger_:Fe.log.warn)((i.internal?"Internal problem":"Problem")+" encountered with playlist "+o.id+"."+(i.message?" "+i.message:"")+" Switching to playlist "+C.id+"."),C.attributes.AUDIO!==o.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),C.attributes.SUBTITLES!==o.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var V=C.targetDuration/2*1e3||5e3,H="number"==typeof C.lastRequest&&Date.now()-C.lastRequest<=V;return this.switchMedia_(C,"exclude",m||H)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(i,s){var o=this,c=[],f="all"===i;(f||"main"===i)&&c.push(this.masterPlaylistLoader_);var m=[];(f||"audio"===i)&&m.push("AUDIO"),(f||"subtitle"===i)&&(m.push("CLOSED-CAPTIONS"),m.push("SUBTITLES")),m.forEach(function(_){var w=o.mediaTypes_[_]&&o.mediaTypes_[_].activePlaylistLoader;w&&c.push(w)}),["main","audio","subtitle"].forEach(function(_){var w=o[_+"SegmentLoader_"];w&&(i===_||"all"===i)&&c.push(w)}),c.forEach(function(_){return s.forEach(function(w){"function"==typeof _[w]&&_[w]()})})},t.setCurrentTime=function(i){var s=I0(this.tech_.buffered(),i);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?s&&s.length?i:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:af.Playlist.duration(i):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var i;if(this.masterPlaylistLoader_&&!this.sourceUpdater_.hasCreatedSourceBuffers()){var s=this.masterPlaylistLoader_.media();if(s){var o=this.syncController_.getExpiredTime(s,this.duration());if(null!==o){var m,_,c=this.masterPlaylistLoader_.master,f=af.Playlist.seekable(s,o,af.Playlist.liveEdgeDelay(c,s));0===f.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(o=this.syncController_.getExpiredTime(s,this.duration()))||0===(i=af.Playlist.seekable(s,o,af.Playlist.liveEdgeDelay(c,s))).length)||(this.seekable_&&this.seekable_.length&&(m=this.seekable_.end(0),_=this.seekable_.start(0)),this.seekable_=i?i.start(0)>f.end(0)||f.start(0)>i.end(0)?f:Fe.createTimeRanges([[i.start(0)>f.start(0)?i.start(0):f.start(0),i.end(0)<f.end(0)?i.end(0):f.end(0)]]):f,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==m||this.seekable_.start(0)!==_)&&(this.logger_("seekable updated ["+kF(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},t.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,i),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(i){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1))}else{var o=this.tech_.buffered(),c=af.Playlist.duration(this.masterPlaylistLoader_.media());o.length>0&&(c=Math.max(c,o.end(o.length-1))),this.mediaSource.duration!==c&&this.sourceUpdater_.setDuration(c)}},t.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var o=i.mediaTypes_[s].groups;for(var c in o)o[c].forEach(function(f){f.playlistLoader&&f.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),o=!i||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!s||!o)},t.getCodecsOrExclude_=function(){var i=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};s.video=s.main;var o=Dw(this.master(),this.media()),c={},f=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(c.video=o.video||s.main.videoCodec||"avc1.4d400d"),s.main.isMuxed&&(c.video+=","+(o.audio||s.main.audioCodec||PN)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||f)&&(c.audio=o.audio||s.main.audioCodec||s.audio.audioCodec||PN,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),c.audio||c.video){var w,_={};if(["video","audio"].forEach(function(V){if(c.hasOwnProperty(V)&&!function(H,Se){return H?bI(Se):Rk(Se)}(s[V].isFmp4,c[V])){var H=s[V].isFmp4?"browser":"muxer";_[H]=_[H]||[],_[H].push(c[V]),"audio"===V&&(w=H)}}),f&&w&&this.media().attributes.AUDIO){var C=this.media().attributes.AUDIO;this.master().playlists.forEach(function(V){(V.attributes&&V.attributes.AUDIO)===C&&V!==i.media()&&(V.excludeUntil=1/0)}),this.logger_("excluding audio group "+C+" as "+w+' does not support codec(s): "'+c.audio+'"')}if(!Object.keys(_).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var L=[];if(["video","audio"].forEach(function(V){var H=(_d(i.sourceUpdater_.codecs[V]||"")[0]||{}).type,Se=(_d(c[V]||"")[0]||{}).type;H&&Se&&H.toLowerCase()!==Se.toLowerCase()&&L.push('"'+i.sourceUpdater_.codecs[V]+'" -> "'+c[V]+'"')}),L.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+L.join(", ")+".",blacklistDuration:1/0,internal:!0})}return c}var M=Object.keys(_).reduce(function(V,H){return V&&(V+=", "),V+(H+' does not support codec(s): "')+_[H].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:M,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},t.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var s=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},t.excludeUnsupportedVariants_=function(){var i=this,s=this.master().playlists,o=[];Object.keys(s).forEach(function(c){var f=s[c];if(-1===o.indexOf(f.id)){o.push(f.id);var m=Dw(i.master,f),_=[];m.audio&&!Rk(m.audio)&&!bI(m.audio)&&_.push("audio codec "+m.audio),m.video&&!Rk(m.video)&&!bI(m.video)&&_.push("video codec "+m.video),m.text&&"stpp.ttml.im1t"===m.text&&_.push("text codec "+m.text),_.length&&(f.excludeUntil=1/0,i.logger_("excluding "+f.id+" for unsupported: "+_.join(", ")))}})},t.excludeIncompatibleVariants_=function(i){var s=this,o=[],c=this.master().playlists,f=sA(_d(i)),m=mj(f),_=f.video&&_d(f.video)[0]||null,w=f.audio&&_d(f.audio)[0]||null;Object.keys(c).forEach(function(C){var M=c[C];if(-1===o.indexOf(M.id)&&M.excludeUntil!==1/0){o.push(M.id);var L=[],V=Dw(s.masterPlaylistLoader_.master,M),H=mj(V);if(V.audio||V.video){if(H!==m&&L.push('codec count "'+H+'" !== "'+m+'"'),!s.sourceUpdater_.canChangeType()){var Se=V.video&&_d(V.video)[0]||null,be=V.audio&&_d(V.audio)[0]||null;Se&&_&&Se.type.toLowerCase()!==_.type.toLowerCase()&&L.push('video codec "'+Se.type+'" !== "'+_.type+'"'),be&&w&&be.type.toLowerCase()!==w.type.toLowerCase()&&L.push('audio codec "'+be.type+'" !== "'+w.type+'"')}L.length&&(M.excludeUntil=1/0,s.logger_("blacklisting "+M.id+": "+L.join(" && ")))}}})},t.updateAdCues_=function(i){var s=0,o=this.seekable();o.length&&(s=o.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var s,i=n,o=0;o<e.segments.length;o++){var c=e.segments[o];if(s||(s=a$(t,i+c.duration/2)),s){if("cueIn"in c){s.endTime=i,s.adEndTime=i,i+=c.duration,s=null;continue}if(i<s.endTime){i+=c.duration;continue}s.endTime+=c.duration}else if("cueOut"in c&&((s=new(Ce().VTTCue)(i,i+c.duration,c.cueOut)).adStartTime=i,s.adEndTime=i+parseFloat(c.cueOut),t.addCue(s)),"cueOutCont"in c){var f=c.cueOutCont.split("/").map(parseFloat),m=f[0],_=f[1];(s=new(Ce().VTTCue)(i,i+c.duration,"")).adStartTime=i-m,s.adEndTime=s.adStartTime+_,t.addCue(s)}i+=c.duration}}(i,this.cueTagsTrack_,s)},t.goalBufferLength=function(){var i=this.tech_.currentTime(),s=Ls.GOAL_BUFFER_LENGTH,o=Ls.GOAL_BUFFER_LENGTH_RATE,c=Math.max(s,Ls.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+i*o,c)},t.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),s=Ls.BUFFER_LOW_WATER_LINE,o=Ls.BUFFER_LOW_WATER_LINE_RATE,c=Math.max(s,Ls.MAX_BUFFER_LOW_WATER_LINE),f=Math.max(s,Ls.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+i*o,this.experimentalBufferBasedABR?f:c)},t.bufferHighWaterLine=function(){return Ls.BUFFER_HIGH_WATER_LINE},e}(Fe.EventTarget),P$=function(e,t,n){var i=e.masterPlaylistController_,c=i[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(i);if(t.attributes){var f=t.attributes.RESOLUTION;this.width=f&&f.width,this.height=f&&f.height,this.bandwidth=t.attributes.BANDWIDTH}this.codecs=Dw(i.master(),t),this.playlist=t,this.id=n,this.enabled=function(e,t,n){return function(i){var s=e.master.playlists[t],o=zP(s),c=tA(s);return void 0===i?c:(i?delete s.disabled:s.disabled=!0,i!==c&&!o&&(n(),e.trigger(i?"renditionenabled":"renditiondisabled")),i)}}(e.playlists,t.id,c)},Rj=["seeking","seeked","pause","playing","error"],R$=function(){function r(t){var n=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=cc("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},s=function(){return n.monitorCurrentTime_()},o=function(){return n.techWaiting_()},c=function(){return n.cancelTimer_()},f=this.masterPlaylistController_,m=["main","subtitle","audio"],_={};m.forEach(function(C){_[C]={reset:function(){return n.resetSegmentDownloads_(C)},updateend:function(){return n.checkSegmentDownloads_(C)}},f[C+"SegmentLoader_"].on("appendsdone",_[C].updateend),f[C+"SegmentLoader_"].on("playlistupdate",_[C].reset),n.tech_.on(["seeked","seeking"],_[C].reset)});var w=function(M){["main","audio"].forEach(function(L){f[L+"SegmentLoader_"][M]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),w("off"))},this.clearSeekingAppendCheck_=function(){return w("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),w("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",o),this.tech_.on(Rj,c),this.tech_.on("canplay",s),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",o),n.tech_.off(Rj,c),n.tech_.off("canplay",s),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),m.forEach(function(C){f[C+"SegmentLoader_"].off("appendsdone",_[C].updateend),f[C+"SegmentLoader_"].off("playlistupdate",_[C].reset),n.tech_.off(["seeked","seeking"],_[C].reset)}),n.checkCurrentTimeTimeout_&&Ce().clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=r.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Ce().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Ce().setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var i=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(n){var i=this.masterPlaylistController_,s=i[n+"SegmentLoader_"],o=s.buffered_(),c=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[n+"Buffered_"],o);this[n+"Buffered_"]=o,c?this.resetSegmentDownloads_(n):(this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:Rv(o)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),"subtitle"!==n&&i.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0)))},e.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var n=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===n&&(!i.length||n+Ed>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var c,i=this.seekable(),s=this.tech_.currentTime();if(this.afterSeekableWindow_(i,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(c=i.end(i.length-1)),this.beforeSeekableWindow_(i,s)){var m=i.start(0);c=m+(m===i.end(0)?0:Ed)}if(void 0!==c)return this.logger_("Trying to seek outside of seekable at time "+s+" with seekable range "+kF(i)+". Seeking to "+c+"."),this.tech_.setCurrentTime(c),!0;for(var _=this.masterPlaylistController_.sourceUpdater_,w=this.tech_.buffered(),C=_.audioBuffer?_.audioBuffered():null,M=_.videoBuffer?_.videoBuffered():null,L=this.media(),V=L.partTargetDuration?L.partTargetDuration:2*(L.targetDuration-ag),H=[C,M],Se=0;Se<H.length;Se++)if(H[Se]&&$P(H[Se],s)<V)return!1;var je=eA(w,s);return 0!==je.length&&(c=je.start(0)+Ed,this.logger_("Buffered region starts ("+je.start(0)+")  just beyond seek point ("+s+"). Seeking to "+c+"."),this.tech_.setCurrentTime(c),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),s=I0(i,n);if(s.length&&n+3<=s.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region ["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},e.techWaiting_=function(){var n=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(n,i)){var s=n.end(n.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to live point (seekable end) "+s),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var o=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,c=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:o.audioBuffered(),videoBuffered:o.videoBuffered(),currentTime:i}))return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var m=eA(c,i);if(m.length>0){var _=m.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+_+", seeking to "+m.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*_,i),!0}return!1},e.afterSeekableWindow_=function(n,i,s,o){if(void 0===o&&(o=!1),!n.length)return!1;var c=n.end(n.length-1)+Ed;return!s.endList&&o&&(c=n.end(n.length-1)+3*s.targetDuration),i>c},e.beforeSeekableWindow_=function(n,i){return!!(n.length&&n.start(0)>0&&i<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var i=n.videoBuffered,s=n.audioBuffered,o=n.currentTime;if(i){var c;if(i.length&&s.length){var f=I0(i,o-3),m=I0(i,o),_=I0(s,o);_.length&&!m.length&&f.length&&(c={start:f.end(0),end:_.end(0)})}else eA(i,o).length||(c=this.gapFromVideoUnderflow_(i,o));return!!c&&(this.logger_("Encountered a gap in video from "+c.start+" to "+c.end+". Seeking to current time "+o),!0)}},e.skipTheGap_=function(n){var i=this.tech_.buffered(),s=this.tech_.currentTime(),o=eA(i,s);this.cancelTimer_(),0!==o.length&&s===n&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",n,"nextRange start:",o.start(0)),this.tech_.setCurrentTime(o.start(0)+ag),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,i){for(var s=function(e){if(e.length<2)return Fe.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),s=e.start(n);t.push([i,s])}return Fe.createTimeRanges(t)}(n),o=0;o<s.length;o++){var c=s.start(o),f=s.end(o);if(i-c<4&&i-c>2)return{start:c,end:f}}return null},r}(),O$={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},N$=function r(e,t){var n=0,i=0,s=Fe.mergeOptions(O$,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){i&&e.currentTime(i)},c=function(C){null!=C&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",o),e.src(C),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},f=function(){return Date.now()-n<1e3*s.errorInterval?(e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void e.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(n=Date.now(),s.getSource.call(e,c)):void Fe.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},m=function w(){e.off("loadedmetadata",o),e.off("error",f),e.off("dispose",w)};e.on("error",f),e.on("dispose",m),e.reloadSourceOnError=function(C){m(),r(e,C)}},Xs={PlaylistLoader:A0,Playlist:ka,utils:X6,STANDARD_PLAYLIST_SELECTOR:_j,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(ka.isEnabled);return D0(t,function(i,s){return oM(i,s)}),t.filter(function(i){return!!Dw(e.playlists.master,i).video})[0]||null},lastBandwidthSelector:_j,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Ce().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),yj(this.playlists.master,t,parseInt(aA(this.tech_.el(),"width"),10)*i,parseInt(aA(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:oM,comparePlaylistResolution:function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Ce().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||Ce().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:ZF()};Object.keys(Ls).forEach(function(r){Object.defineProperty(Xs,r,{get:function(){return Fe.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),Ls[r]},set:function(t){Fe.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Fe.log.warn("value of Vhs."+r+" must be greater than or equal to 0"):Ls[r]=t}})});var Nj="videojs-vhs",Lj=function(e,t){for(var n=t.media(),i=-1,s=0;s<e.length;s++)if(e[s].id===n.id){i=s;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};Xs.canPlaySource=function(){return Fe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Fj=function(){if(!Ce().localStorage)return null;var e=Ce().localStorage.getItem(Nj);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}};Xs.supportsNativeHls=function(){if(!Dt()||!Dt().createElement)return!1;var r=Dt().createElement("video");return!!Fe.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))})}(),Xs.supportsNativeDash=!!(Dt()&&Dt().createElement&&Fe.getTech("Html5").isSupported())&&/maybe|probably/i.test(Dt().createElement("video").canPlayType("application/dash+xml")),Xs.supportsTypeNatively=function(r){return"hls"===r?Xs.supportsNativeHls:"dash"===r&&Xs.supportsNativeDash},Xs.isSupported=function(){return Fe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var dM=function(r){function e(n,i,s){var o;if(o=r.call(this,i,Fe.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&Fe.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof s.initialBandwidth&&(o.options_.bandwidth=s.initialBandwidth),o.logger_=cc("VhsHandler"),i.options_&&i.options_.playerId){var c=Fe(i.options_.playerId);c.hasOwnProperty("hls")||Object.defineProperty(c,"hls",{get:function(){return Fe.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Sn(o)},configurable:!0}),c.hasOwnProperty("vhs")||Object.defineProperty(c,"vhs",{get:function(){return Fe.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Sn(o)},configurable:!0}),c.hasOwnProperty("dash")||Object.defineProperty(c,"dash",{get:function(){return Fe.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Sn(o)},configurable:!0}),o.player_=c}if(o.tech_=i,o.source_=n,o.stats={},o.ignoreNextSeekingEvent_=!1,o.setOptions_(),o.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(o.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return o.on(Dt(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(f){var m=Dt().fullscreenElement||Dt().webkitFullscreenElement||Dt().mozFullScreenElement||Dt().msFullscreenElement;m&&m.contains(o.tech_.el())?o.masterPlaylistController_.fastQualityChange_():o.masterPlaylistController_.checkABR_()}),o.on(o.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),o.on(o.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),o.on(o.tech_,"play",o.play),o}Ot(e,r);var t=e.prototype;return t.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var s=Fj();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ls.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ls.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(o){void 0!==i.source_[o]&&(i.options_[o]=i.source_[o])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(i,s){var o=this;if(i){this.setOptions_(),this.options_.src=function(e){return 0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Xs,this.options_.sourceType=MN(s),this.options_.seekTo=function(m){o.tech_.setCurrentTime(m)},this.options_.smoothQualityChange&&Fe.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new D$(this.options_);var c=Fe.mergeOptions({liveRangeSafeTimeDelta:Ed},this.options_,{seekable:function(){return o.seekable()},media:function(){return o.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new R$(c),this.masterPlaylistController_.on("error",function(){var m=Fe.players[o.tech_.options_.playerId],_=o.masterPlaylistController_.error;"object"!=typeof _||_.code?"string"==typeof _&&(_={message:_,code:3}):_.code=3,m.error(_)});var f=this.options_.experimentalBufferBasedABR?Xs.movingAverageBandwidthSelector(.55):Xs.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):f.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Xs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(_){this.masterPlaylistController_.selectPlaylist=_.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(_){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=_,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var _=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,w=Ce().navigator.connection||Ce().navigator.mozConnection||Ce().navigator.webkitConnection,C=1e7;if(this.options_.useNetworkInformationApi&&w){var M=1e3*w.downlink*1e3;_=M>=C&&_>=C?Math.max(_,M):M}return _},set:function(_){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=_,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){Fe.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return o.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return o.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return o.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return o.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return o.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return o.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return o.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return o.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return o.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return o.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return o.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return o.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return o.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Rv(o.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return o.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return o.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return o.tech_.name_},enumerable:!0},duration:{get:function(){return o.tech_.duration()},enumerable:!0},master:{get:function(){return o.playlists.master},enumerable:!0},playerDimensions:{get:function(){return o.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Rv(o.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return o.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){o.options_.useBandwidthFromLocalStorage&&function(e){if(!Ce().localStorage)return!1;var t=Fj();t=t?Fe.mergeOptions(t,e):e;try{Ce().localStorage.setItem(Nj,JSON.stringify(t))}catch(n){return!1}}({bandwidth:o.bandwidth,throughput:Math.round(o.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),n=Iw(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter(function(i){return!zP(i)}).map(function(i,s){return new P$(e,i,i.id)}):[]}}(o)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){o.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Ce().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.setupEme_=function(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,o=function(e){var t=e.player,o=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=sA(_d(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var s=uw(i.video),o=uw(i.audio),c={};for(var f in e)c[f]={},o&&(c[f].audioContentType=o),s&&(c[f].videoContentType=s),t.contentProtection&&t.contentProtection[f]&&t.contentProtection[f].pssh&&(c[f].pssh=t.contentProtection[f].pssh),"string"==typeof e[f]&&(c[f].url=e[f]);return Fe.mergeOptions(e,c)}(e.sourceKeySystems,e.media,e.audioMedia);return!(!o||(t.currentSource().keySystems=o,o&&!t.eme&&(Fe.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});this.player_.tech_.on("keystatuschange",function(c){"output-restricted"===c.status&&i.masterPlaylistController_.blacklistCurrentPlaylist({playlist:i.masterPlaylistController_.media(),message:"DRM keystatus changed to "+c.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),11!==Fe.browser.IE_VERSION&&o?(this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,s=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var c=function(e,t){return e.reduce(function(n,i){if(!i.contentProtection)return n;var s=t.reduce(function(o,c){var f=i.contentProtection[c];return f&&f.pssh&&(o[c]={pssh:f.pssh}),o},{});return Object.keys(s).length&&n.push(s),n},[])}(i?s.concat([i]):s,Object.keys(n)),f=[],m=[];return c.forEach(function(_){m.push(new Promise(function(w,C){t.tech_.one("keysessioncreated",w)})),f.push(new Promise(function(w,C){t.eme.initializeMediaKeys({keySystems:_},function(M){M?C(M):w()})}))}),Promise.race([Promise.all(f),Promise.race(m)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(c){i.logger_("error while creating EME key session",c),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},t.setupQualityLevels_=function(){var i=this,s=Fe.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(e,t){t.representations().forEach(function(n){e.addQualityLevel(n)}),Lj(e,t.playlists)}(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){Lj(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":"2.12.0","mux.js":"5.14.1","mpd-parser":"0.19.2","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return Aj.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Ce().URL.revokeObjectURL&&(Ce().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),r.prototype.dispose.call(this)},t.convertToProgramTime=function(i,s){return function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,s=e.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return s({message:"getProgramTime: playlist and time must be provided"});var o=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,s=0;s<t.segments.length&&!(e<=(n=(i=t.segments[s]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));s++);var o=t.segments[t.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*o.duration)return null;i=o}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!o)return s({message:"valid programTime was not found"});if("estimate"===o.type)return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var c={mediaSeconds:i},f=function(e,t){if(!t.dateTimeObject)return null;var o=e-(t.videoTimingInfo.transmuxedPresentationStart+t.videoTimingInfo.transmuxerPrependedSeconds);return new Date(t.dateTimeObject.getTime()+1e3*o)}(i,o.segment);return f&&(c.programDateTime=f.toISOString()),s(null,c)}({playlist:this.masterPlaylistController_.media(),time:i,callback:s})},t.seekToProgramTime=function(i,s,o,c){return void 0===o&&(o=!0),void 0===c&&(c=2),oG({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:c,pauseAfterSeek:o,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},e}(Fe.getComponent("Component")),dA={name:"videojs-http-streaming",VERSION:"2.12.0",canHandleSource:function(e,t){void 0===t&&(t={});var n=Fe.mergeOptions(Fe.options,t);return dA.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var i=Fe.mergeOptions(Fe.options,n);return t.vhs=new dM(e,t,i),Fe.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Fe.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=ZF(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var i=Fe.mergeOptions(Fe.options,t).vhs.overrideNative,s=void 0===i?!Fe.browser.IS_ANY_SAFARI:i,o=MN(e);return!o||Xs.supportsTypeNatively(o)&&!s?"":"maybe"}};bI("avc1.4d400d,mp4a.40.2")&&Fe.getTech("Html5").registerSourceHandler(dA,0),Fe.VhsHandler=dM,Object.defineProperty(Fe,"HlsHandler",{get:function(){return Fe.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),dM},configurable:!0}),Fe.VhsSourceHandler=dA,Object.defineProperty(Fe,"HlsSourceHandler",{get:function(){return Fe.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),dA},configurable:!0}),Fe.Vhs=Xs,Object.defineProperty(Fe,"Hls",{get:function(){return Fe.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Xs},configurable:!0}),Fe.use||(Fe.registerComponent("Hls",Xs),Fe.registerComponent("Vhs",Xs)),Fe.options.vhs=Fe.options.vhs||{},Fe.options.hls=Fe.options.hls||{},Fe.getPlugin&&Fe.getPlugin("reloadSourceOnError")||(Fe.registerPlugin||Fe.plugin)("reloadSourceOnError",function(e){N$(this,e)});const Q$=Fe,X$=["videoPlayer"],J$=[{path:"",component:d4},{path:"about",component:fb},{path:"clips/:id",component:(()=>{class r{constructor(t){this.route=t}ngOnInit(){var t;this.player=Q$(null===(t=this.target)||void 0===t?void 0:t.nativeElement),this.route.data.subscribe(n=>{var i;this.clip=n.clip,null===(i=this.player)||void 0===i||i.src({src:this.clip.url,type:"video/mp4"})})}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Qa))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-clip"]],viewQuery:function(t,n){if(1&t&&d.Gf(X$,7),2&t){let i;d.iGM(i=d.CRH())&&(n.target=i.first)}},features:[d._Bn([Yu])],decls:17,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-w-16","aspect-h-9"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],["src","assets/video/hero.webm","type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(t,n){1&t&&(d.TgZ(0,"section",0),d.TgZ(1,"div",1),d.TgZ(2,"h1",2),d._uU(3),d.qZA(),d.TgZ(4,"div",3),d._uU(5),d.TgZ(6,"span"),d._uU(7),d.ALo(8,"fbTimestamp"),d.qZA(),d.qZA(),d.TgZ(9,"div",4),d.TgZ(10,"video",5,6),d._UZ(12,"source",7),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",8),d.TgZ(14,"h2",9),d._uU(15,"More Clips"),d.qZA(),d._UZ(16,"app-clips-list",10),d.qZA()),2&t&&(d.xp6(3),d.Oqu(null==n.clip?null:n.clip.title),d.xp6(2),d.hij(" Uploaded By ",null==n.clip?null:n.clip.displayName," on "),d.xp6(2),d.Oqu(d.lcZ(8,4,null==n.clip?null:n.clip.timestamp)),d.xp6(9),d.Q6J("scrollable",!1))},directives:[wN],pipes:[EN],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:normal;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:normal;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:normal;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%;height:0}.video-js.vjs-16-9{padding-top:56.25%}.video-js.vjs-4-3{padding-top:75%}.video-js.vjs-9-16{padding-top:177.7777777778%}.video-js.vjs-1-1{padding-top:100%}.video-js.vjs-fill{width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:bold;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js .vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster{display:block}.vjs-using-native-controls .vjs-poster{display:none}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control{display:none}.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time{display:none}.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0em}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-chapters-button,.video-js.vjs-layout-small .vjs-descriptions-button,.video-js.vjs-layout-small .vjs-captions-button,.video-js.vjs-layout-small .vjs-subtitles-button,.video-js.vjs-layout-small .vjs-audio-button,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-chapters-button,.video-js.vjs-layout-x-small .vjs-descriptions-button,.video-js.vjs-layout-x-small .vjs-captions-button,.video-js.vjs-layout-x-small .vjs-subtitles-button,.video-js.vjs-layout-x-small .vjs-audio-button,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-chapters-button,.video-js.vjs-layout-tiny .vjs-descriptions-button,.video-js.vjs-layout-tiny .vjs-captions-button,.video-js.vjs-layout-tiny .vjs-subtitles-button,.video-js.vjs-layout-tiny .vjs-audio-button,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small:not(.vjs-liveui) .vjs-subs-caps-button,.video-js.vjs-layout-x-small:not(.vjs-live) .vjs-subs-caps-button,.video-js.vjs-layout-tiny .vjs-subs-caps-button{display:none}.video-js.vjs-layout-x-small.vjs-liveui .vjs-custom-control-spacer,.video-js.vjs-layout-tiny .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-liveui.vjs-no-flex .vjs-custom-control-spacer,.video-js.vjs-layout-tiny.vjs-no-flex .vjs-custom-control-spacer{width:auto}.video-js.vjs-layout-x-small.vjs-liveui .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),r})(),resolve:{clip:ow}},{path:"**",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(t,n){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"span",1),d._uU(2,"404"),d.qZA(),d._UZ(3,"div",2),d._UZ(4,"div",3),d._UZ(5,"div",4),d._UZ(6,"div",5),d._UZ(7,"div",6),d._UZ(8,"div",7),d._UZ(9,"div",8),d._UZ(10,"div",9),d._UZ(11,"div",10),d._UZ(12,"div",11),d._UZ(13,"div",12),d._UZ(14,"div",13),d.qZA(),d.TgZ(15,"div",14),d.TgZ(16,"h2",15),d._uU(17,"Page not found"),d.qZA(),d.TgZ(18,"p"),d._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),d.qZA(),d.qZA())},styles:[""]}),r})()}];let eq=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[jl.forRoot(J$)],jl]}),r})();var tq=U(6921);function jj(r,e){return e?t=>Mc(e.pipe((0,uo.q)(1),(0,vi.e)((r,e)=>{r.subscribe(new Sr.Q(e,tq.Z))})),t.pipe(jj(r))):(0,Xn.z)((t,n)=>r(t,n).pipe((0,uo.q)(1),function(r){return(0,un.U)(()=>r)}(t)))}var iq=U(7398);let hM=(()=>{class r{constructor(t,n,i,s){this.auth=t,this.db=n,this.router=i,this.route=s,this.redirect=!1,this.usersCollection=n.collection("users"),this.isAuthenticated$=t.user.pipe((0,un.U)(o=>!!o)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function(r,e=py.z){const t=function(r=0,e,t=py.P){let n=-1;return null!=e&&((0,iq.K)(e)?t=e:n=e),new qi.y(i=>{let s=function(r){return r instanceof Date&&!isNaN(r)}(r)?+r-t.now():r;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=n?this.schedule(void 0,n):i.complete())},s)})}(1e3,e);return jj(()=>t)}()),this.router.events.pipe(ai(o=>o instanceof _r),(0,un.U)(o=>this.route.firstChild),gr(o=>{var c;return null!==(c=null==o?void 0:o.data)&&void 0!==c?c:$t({})})).subscribe(o=>{var c;this.redirect=null!==(c=o.authOnly)&&void 0!==c&&c})}createUser(t){var n=this;return(0,Xe.Z)(function*(){if(!t.password)throw new Error("Password not provided");const i=yield n.auth.createUserWithEmailAndPassword(t.email,t.password);if(!i.user)throw new Error("User can't be found");yield n.usersCollection.doc(i.user.uid).set({name:t.name,email:t.email,age:t.age,phoneNumber:t.phoneNumber}),yield i.user.updateProfile({displayName:t.name})})()}logout(t){var n=this;return(0,Xe.Z)(function*(){t&&t.preventDefault(),yield n.auth.signOut(),n.redirect&&(yield n.router.navigateByUrl("/"))})()}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(zh),d.LFG(gk),d.LFG(bi),d.LFG(Qa))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Mw=(()=>{class r{constructor(){this.modals=[]}register(t){this.modals.push({id:t,visible:!1})}unregister(t){this.modals=this.modals.filter(n=>n.id!==t)}isModalOpen(t){var n;return!!(null===(n=this.modals.find(i=>i.id===t))||void 0===n?void 0:n.visible)}toggleModal(t){const n=this.modals.find(i=>i.id===t);n&&(n.visible=!n.visible)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function uq(r,e){if(1&r){const t=d.EpF();d.TgZ(0,"li"),d.TgZ(1,"a",15),d.NdJ("click",function(i){return d.CHM(t),d.oxw().openModal(i)}),d._uU(2,"Login / Register"),d.qZA(),d.qZA()}}const Uj=function(){return{exact:!0}},lq=function(){return{sort:"1"}};function cq(r,e){if(1&r){const t=d.EpF();d.TgZ(0,"li"),d.TgZ(1,"a",16),d._uU(2,"Manage"),d.qZA(),d.qZA(),d.TgZ(3,"li"),d.TgZ(4,"a",17),d._uU(5,"Upload"),d.qZA(),d.qZA(),d.TgZ(6,"li"),d.TgZ(7,"a",15),d.NdJ("click",function(i){return d.CHM(t),d.oxw().auth.logout(i)}),d._uU(8,"Logout"),d.qZA(),d.qZA()}2&r&&(d.xp6(1),d.Q6J("routerLinkActiveOptions",d.DdM(3,Uj))("queryParams",d.DdM(4,lq)),d.xp6(3),d.Q6J("routerLinkActiveOptions",d.DdM(5,Uj)))}let dq=(()=>{class r{constructor(t,n){this.modal=t,this.auth=n}ngOnInit(){}openModal(t){t.preventDefault(),this.modal.toggleModal("auth")}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Mw),d.Y36(hM))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["href","/","routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLinkActive","text-indigo-400","routerLink","/upload",1,"px-2",3,"routerLinkActiveOptions"]],template:function(t,n){if(1&t&&(d.TgZ(0,"header",0),d.TgZ(1,"nav",1),d.TgZ(2,"a",2),d._uU(3,"Clipz"),d.qZA(),d.TgZ(4,"div",3),d.TgZ(5,"ul",4),d.YNc(6,uq,3,0,"li",5),d.ALo(7,"async"),d.YNc(8,cq,9,6,"ng-template",null,6,d.W1O),d.TgZ(10,"li",7),d.TgZ(11,"a",8),d._uU(12,"About"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"ul",9),d.TgZ(14,"li"),d.TgZ(15,"a",10),d._UZ(16,"img",11),d.TgZ(17,"span",12),d._uU(18,"English"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(19,"li",13),d.TgZ(20,"a",10),d._UZ(21,"img",14),d.TgZ(22,"span",12),d._uU(23,"French"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const i=d.MAs(9);d.xp6(6),d.Q6J("ngIf",!d.lcZ(7,2,n.auth.isAuthenticated$))("ngIfElse",i)}},directives:[v,Hi,O],pipes:[gc],styles:[""]}),r})();const hq=[[["","heading",""]],"*"],fq=function(r){return{hidden:r}},pq=["[heading]","*"];let Bj=(()=>{class r{constructor(t,n){this.modal=t,this.el=n,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Mw),d.Y36(d.SBq))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:pq,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,n){1&t&&(d.F$t(hq),d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.NdJ("click",function(){return n.closeModal()}),d._UZ(3,"div",3),d.qZA(),d.TgZ(4,"span",4),d._uU(5,"\u200b"),d.qZA(),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.Hsn(9),d.TgZ(10,"div",8),d.NdJ("click",function(){return n.closeModal()}),d._uU(11," \u2715 "),d.qZA(),d.qZA(),d.Hsn(12,1),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&d.Q6J("ngClass",d.VKq(1,fq,!n.modal.isModalOpen(n.modalID)))},directives:[si],styles:[""]}),r})();const gq=["*"];let Vj=(()=>{class r{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:gq,decls:2,vars:2,template:function(t,n){1&t&&(d.F$t(),d.TgZ(0,"div"),d.Hsn(1),d.qZA()),2&t&&d.ekj("hidden",!n.active)},styles:[""]}),r})();const mq=function(r,e){return{"hover:text-indigo-400":r,"hover: text-white text-white bg-indigo-400":e}};function vq(r,e){if(1&r){const t=d.EpF();d.TgZ(0,"li",2),d.TgZ(1,"a",3),d.NdJ("click",function(){const s=d.CHM(t).$implicit;return d.oxw().selectTab(s)}),d._uU(2),d.qZA(),d.qZA()}if(2&r){const t=e.$implicit;d.xp6(1),d.Q6J("ngClass",d.WLB(2,mq,!t.active,t.active)),d.xp6(1),d.Oqu(t.tabTitle)}}const yq=["*"];let _q=(()=>{class r{constructor(){this.tabs=new d.n_E}ngAfterContentInit(){var t;const n=null===(t=this.tabs)||void 0===t?void 0:t.filter(i=>i.active);(!n||0===n.length)&&this.selectTab(this.tabs.first)}selectTab(t){var n;return null===(n=this.tabs)||void 0===n||n.forEach(i=>{i.active=!1}),t.active=!0,!1}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-tabs-container"]],contentQueries:function(t,n,i){if(1&t&&d.Suo(i,Vj,4),2&t){let s;d.iGM(s=d.CRH())&&(n.tabs=s)}},ngContentSelectors:yq,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,n){1&t&&(d.F$t(),d.TgZ(0,"ul",0),d.YNc(1,vq,3,5,"li",1),d.qZA(),d.Hsn(2)),2&t&&(d.xp6(1),d.Q6J("ngForOf",n.tabs))},directives:[ia,si],styles:[""]}),r})();function fM(...r){const e=(0,Ha.jO)(r),{args:t,keys:n}=Ga(r),i=new qi.y(s=>{const{length:o}=t;if(!o)return void s.complete();const c=new Array(o);let f=o,m=o;for(let _=0;_<o;_++){let w=!1;(0,Jr.Xf)(t[_]).subscribe(new Sr.Q(s,C=>{w||(w=!0,m--),c[_]=C},()=>f--,void 0,()=>{(!f||!w)&&(m||s.next(n?xu(n,c):c),s.complete())}))}});return e?i.pipe(Cu(e)):i}let Hj=(()=>{class r{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.Qsj),d.Y36(d.SBq))},r.\u0275dir=d.lG2({type:r}),r})(),Ov=(()=>{class r extends Hj{}return r.\u0275fac=function(){let e;return function(n){return(e||(e=d.n5z(r)))(n||r)}}(),r.\u0275dir=d.lG2({type:r,features:[d.qOj]}),r})();const dc=new d.OlP("NgValueAccessor"),Tq={provide:dc,useExisting:(0,d.Gpc)(()=>Rw),multi:!0},wq=new d.OlP("CompositionEventMode");let Rw=(()=>{class r extends Hj{constructor(t,n,i){super(t,n),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=B()?B().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(wq,8))},r.\u0275dir=d.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&d.NdJ("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[d._Bn([Tq]),d.qOj]}),r})();function ug(r){return null==r||0===r.length}function $j(r){return null!=r&&"number"==typeof r.length}const Js=new d.OlP("NgValidators"),lg=new d.OlP("NgAsyncValidators"),Sq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class eo{static min(e){return function(r){return e=>{if(ug(e.value)||ug(r))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<r?{min:{min:r,actual:e.value}}:null}}(e)}static max(e){return function(r){return e=>{if(ug(e.value)||ug(r))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>r?{max:{max:r,actual:e.value}}:null}}(e)}static required(e){return zj(e)}static requiredTrue(e){return function(r){return!0===r.value?null:{required:!0}}(e)}static email(e){return function(r){return ug(r.value)||Sq.test(r.value)?null:{email:!0}}(e)}static minLength(e){return function(r){return e=>ug(e.value)||!$j(e.value)?null:e.value.length<r?{minlength:{requiredLength:r,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(r){return e=>$j(e.value)&&e.value.length>r?{maxlength:{requiredLength:r,actualLength:e.value.length}}:null}(e)}static pattern(e){return Xj(e)}static nullValidator(e){return null}static compose(e){return iU(e)}static composeAsync(e){return sU(e)}}function zj(r){return ug(r.value)?{required:!0}:null}function Xj(r){if(!r)return Ow;let e,t;return"string"==typeof r?(t="","^"!==r.charAt(0)&&(t+="^"),t+=r,"$"!==r.charAt(r.length-1)&&(t+="$"),e=new RegExp(t)):(t=r.toString(),e=r),n=>{if(ug(n.value))return null;const i=n.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ow(r){return null}function Jj(r){return null!=r}function eU(r){const e=(0,d.QGY)(r)?(0,qn.D)(r):r;return(0,d.CqO)(e),e}function tU(r){let e={};return r.forEach(t=>{e=null!=t?rn(rn({},e),t):e}),0===Object.keys(e).length?null:e}function nU(r,e){return e.map(t=>t(r))}function rU(r){return r.map(e=>function(r){return!r.validate}(e)?e:t=>e.validate(t))}function iU(r){if(!r)return null;const e=r.filter(Jj);return 0==e.length?null:function(t){return tU(nU(t,e))}}function pM(r){return null!=r?iU(rU(r)):null}function sU(r){if(!r)return null;const e=r.filter(Jj);return 0==e.length?null:function(t){return fM(nU(t,e).map(eU)).pipe((0,un.U)(tU))}}function gM(r){return null!=r?sU(rU(r)):null}function oU(r,e){return null===r?[e]:Array.isArray(r)?[...r,e]:[r,e]}function aU(r){return r._rawValidators}function uU(r){return r._rawAsyncValidators}function mM(r){return r?Array.isArray(r)?r:[r]:[]}function hA(r,e){return Array.isArray(r)?r.includes(e):r===e}function lU(r,e){const t=mM(e);return mM(r).forEach(i=>{hA(t,i)||t.push(i)}),t}function cU(r,e){return mM(e).filter(t=>!hA(r,t))}class dU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ea extends dU{get formDirective(){return null}get path(){return null}}class cg extends dU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hU{constructor(e){this._cd=e}is(e){var t,n,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(n=this._cd)?void 0:n.control)?void 0:i[e])}}let vM=(()=>{class r extends hU{constructor(t){super(t)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(cg,2))},r.\u0275dir=d.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&d.ekj("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[d.qOj]}),r})(),Nw=(()=>{class r extends hU{constructor(t){super(t)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(ea,10))},r.\u0275dir=d.lG2({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,n){2&t&&d.ekj("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[d.qOj]}),r})();function Lw(r,e){bM(r,e),e.valueAccessor.writeValue(r.value),function(r,e){e.valueAccessor.registerOnChange(t=>{r._pendingValue=t,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&fU(r,e)})}(r,e),function(r,e){const t=(n,i)=>{e.valueAccessor.writeValue(n),i&&e.viewToModelUpdate(n)};r.registerOnChange(t),e._registerOnDestroy(()=>{r._unregisterOnChange(t)})}(r,e),function(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&fU(r,e),"submit"!==r.updateOn&&r.markAsTouched()})}(r,e),function(r,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(t),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(t)})}}(r,e)}function gA(r,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),vA(r,e),r&&(e._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function mA(r,e){r.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bM(r,e){const t=aU(r);null!==e.validator?r.setValidators(oU(t,e.validator)):"function"==typeof t&&r.setValidators([t]);const n=uU(r);null!==e.asyncValidator?r.setAsyncValidators(oU(n,e.asyncValidator)):"function"==typeof n&&r.setAsyncValidators([n]);const i=()=>r.updateValueAndValidity();mA(e._rawValidators,i),mA(e._rawAsyncValidators,i)}function vA(r,e){let t=!1;if(null!==r){if(null!==e.validator){const i=aU(r);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,r.setValidators(s))}}if(null!==e.asyncValidator){const i=uU(r);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,r.setAsyncValidators(s))}}}const n=()=>{};return mA(e._rawValidators,n),mA(e._rawAsyncValidators,n),t}function fU(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function pU(r,e){bM(r,e)}function TM(r,e){if(!r.hasOwnProperty("model"))return!1;const t=r.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function gU(r,e){r._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function EM(r,e){if(!e)return null;let t,n,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Rw?t=s:function(r){return Object.getPrototypeOf(r.constructor)===Ov}(s)?n=s:i=s}),i||n||t||null}function yA(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const Fw="VALID",_A="INVALID",P0="PENDING",jw="DISABLED";function wM(r){return(CM(r)?r.validators:r)||null}function mU(r){return Array.isArray(r)?pM(r):r||null}function SM(r,e){return(CM(e)?e.asyncValidators:r)||null}function vU(r){return Array.isArray(r)?gM(r):r||null}function CM(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class xM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mU(this._rawValidators),this._composedAsyncValidatorFn=vU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fw}get invalid(){return this.status===_A}get pending(){return this.status==P0}get disabled(){return this.status===jw}get enabled(){return this.status!==jw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mU(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=vU(e)}addValidators(e){this.setValidators(lU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cU(e,this._rawAsyncValidators))}hasValidator(e){return hA(this._rawValidators,e)}hasAsyncValidator(e){return hA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=P0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jw,this.errors=null,this._forEachChild(n=>{n.disable(Fs(rn({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Fs(rn({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fw,this._forEachChild(n=>{n.enable(Fs(rn({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Fs(rn({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fw||this.status===P0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jw:Fw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=P0,this._hasOwnPendingAsyncValidator=!0;const t=eU(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(r,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let n=r;return e.forEach(i=>{n=n instanceof M0?n.controls.hasOwnProperty(i)?n.controls[i]:null:n instanceof Fq&&n.at(i)||null}),n}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?jw:this.errors?_A:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(P0)?P0:this._anyControlsHaveStatus(_A)?_A:Fw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Pa extends xM{constructor(e=null,t,n){super(wM(t),SM(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class M0 extends xM{constructor(e,t,n){super(wM(t),SM(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Pa?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((i,s)=>{n=t(n,i,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Fq extends xM{constructor(e,t,n){super(wM(t),SM(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((n,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((n,i)=>{this.at(i)&&this.at(i).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Pa?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,n)=>!!n._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const jq={provide:ea,useExisting:(0,d.Gpc)(()=>bA)},Uw=(()=>Promise.resolve(null))();let bA=(()=>{class r extends ea{constructor(t,n){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new d.vpe,this.form=new M0({},pM(t),gM(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Uw.then(()=>{const n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Lw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Uw.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name),yA(this._directives,t)})}addFormGroup(t){Uw.then(()=>{const n=this._findContainer(t.path),i=new M0({});pU(i,t),n.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Uw.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Uw.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,gU(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Js,10),d.Y36(lg,10))},r.\u0275dir=d.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){1&t&&d.NdJ("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([jq]),d.qOj]}),r})();const Bq={provide:cg,useExisting:(0,d.Gpc)(()=>IM)},bU=(()=>Promise.resolve(null))();let IM=(()=>{class r extends cg{constructor(t,n,i,s){super(),this.control=new Pa,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=EM(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),TM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(r,e){return[...e.path,r]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Lw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const n=t.isDisabled.currentValue,i=""===n||n&&"false"!==n;bU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(ea,9),d.Y36(Js,10),d.Y36(lg,10),d.Y36(dc,10))},r.\u0275dir=d.lG2({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Bq]),d.qOj,d.TTD]}),r})(),Bw=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=d.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),EU=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({}),r})();const AM=new d.OlP("NgModelWithFormControlWarning"),qq={provide:cg,useExisting:(0,d.Gpc)(()=>DM)};let DM=(()=>{class r extends cg{constructor(t,n,i,s){super(),this._ngModelWarningConfig=s,this.update=new d.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=EM(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const n=t.form.previousValue;n&&gA(n,this,!1),Lw(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}TM(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&gA(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(t){return new(t||r)(d.Y36(Js,10),d.Y36(lg,10),d.Y36(dc,10),d.Y36(AM,8))},r.\u0275dir=d.lG2({type:r,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[d._Bn([qq]),d.qOj,d.TTD]}),r})();const Wq={provide:ea,useExisting:(0,d.Gpc)(()=>R0)};let R0=(()=>{class r extends ea{constructor(t,n){super(),this.validators=t,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return Lw(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){gA(t.control||null,t,!1),yA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,gU(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,i=this.form.get(t.path);n!==i&&(gA(n||null,t),i instanceof Pa&&(Lw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);pU(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function(r,e){return vA(r,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bM(this.form,this),this._oldForm&&vA(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Js,10),d.Y36(lg,10))},r.\u0275dir=d.lG2({type:r,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&d.NdJ("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Wq]),d.qOj,d.TTD]}),r})();const iW={provide:Js,useExisting:(0,d.Gpc)(()=>EA),multi:!0};let EA=(()=>{class r{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?zj(t):null}registerOnValidatorChange(t){this._onChange=t}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=d.lG2({type:r,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,n){2&t&&d.uIk("required",n.required?"":null)},inputs:{required:"required"},features:[d._Bn([iW])]}),r})();const lW={provide:Js,useExisting:(0,d.Gpc)(()=>OM),multi:!0};let OM=(()=>{class r{constructor(){this._validator=Ow}ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Xj(this.pattern)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=d.lG2({type:r,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&d.uIk("pattern",n.pattern?n.pattern:null)},inputs:{pattern:"pattern"},features:[d._Bn([lW]),d.TTD]}),r})(),FU=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[EU]]}),r})(),cW=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[FU]}),r})(),NM=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:AM,useValue:t.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[FU]}),r})();const dW=["*"];let wA=(()=>{class r{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:dW,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,n){1&t&&(d.F$t(),d.TgZ(0,"div",0),d.Hsn(1),d.qZA()),2&t&&d.Q6J("ngClass",n.bgColor)},directives:[si],styles:[""]}),r})();function hW(r,e){if(1&r&&(d.TgZ(0,"app-alert",11),d._uU(1),d.qZA()),2&r){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(1),d.Oqu(t.alertMsg)}}function fW(r,e){1&r&&(d.TgZ(0,"p",12),d._uU(1,"Email is invalid"),d.qZA())}function pW(r,e){1&r&&(d.TgZ(0,"p",12),d._uU(1,"Password is invalid"),d.qZA())}let gW=(()=>{class r{constructor(t){this.auth=t,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please Wait! We are logging you in.",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var t=this;return(0,Xe.Z)(function*(){t.showAlert=!0,t.alertMsg="Please Wait! We are logging you in.",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.signInWithEmailAndPassword(t.credentials.email,t.credentials.password)}catch(n){t.alertMsg="An unexpected error occurred. Please try again later",t.alertColor="red",t.inSubmission=!1}t.alertMsg="Success! You are logged in.",t.alertColor="green"})()}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(zh))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","placeholder","Password","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,n){if(1&t&&(d.YNc(0,hW,2,2,"app-alert",0),d.TgZ(1,"form",1,2),d.NdJ("ngSubmit",function(){return n.login()}),d.TgZ(3,"div",3),d.TgZ(4,"label",4),d._uU(5,"Email"),d.qZA(),d.TgZ(6,"input",5,6),d.NdJ("ngModelChange",function(s){return n.credentials.email=s}),d.qZA(),d.YNc(8,fW,2,0,"p",7),d.qZA(),d.TgZ(9,"div",3),d.TgZ(10,"label",4),d._uU(11,"Password"),d.qZA(),d.TgZ(12,"input",8,9),d.NdJ("ngModelChange",function(s){return n.credentials.password=s}),d.qZA(),d.YNc(14,pW,2,0,"p",7),d.qZA(),d.TgZ(15,"button",10),d._uU(16," Submit "),d.qZA(),d.qZA()),2&t){const i=d.MAs(2),s=d.MAs(7),o=d.MAs(13);d.Q6J("ngIf",n.showAlert),d.xp6(6),d.Q6J("ngModel",n.credentials.email),d.xp6(2),d.Q6J("ngIf",s.errors&&s.touched&&s.dirty),d.xp6(4),d.Q6J("ngModel",n.credentials.password),d.xp6(2),d.Q6J("ngIf",o.errors&&o.touched&&o.dirty),d.xp6(1),d.Q6J("disabled",i.invalid||n.inSubmission)}},directives:[Hi,Bw,Nw,bA,Rw,EA,OM,vM,IM,wA],styles:[""]}),r})();class mW{static match(e,t){return n=>{const i=n.get(e),s=n.get(t);if(!i||!s)return console.error("Form controls can not be found in the form group"),{controlNotFound:!1};const o=i.value===s.value?null:{noMatch:!0};return s.setErrors(o),o}}}let vW=(()=>{class r{constructor(t){this.auth=t,this.validate=n=>this.auth.fetchSignInMethodsForEmail(n.value).then(i=>i.length?{emailTaken:!0}:null)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(zh))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const SA=new d.OlP("config"),jU=new d.OlP("NEW_CONFIG"),UU=new d.OlP("INITIAL_CONFIG"),yW={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:".",clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},_W=["Hh:m0:s0","Hh:m0","m0:s0"],bW=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let BU=(()=>{class r{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(n,i,s,o)=>{const c=n.split(s),f=c.length>1?`${s}${c[1]}`:"";let m=c[0];const _=this.separatorLimit.replace(/\s/g,"");_&&+_&&(m="-"===m[0]?`-${m.slice(1,m.length).slice(0,_.length)}`:m.slice(0,_.length));const w=/(\d+)(\d{3})/;for(;i&&w.test(m);)m=m.replace(w,"$1"+i+"$2");return void 0===o?m+f:0===o?m:m+f.substr(0,o+1)},this.percentage=n=>Number(n)>=0&&Number(n)<=100,this.getPrecision=n=>{const i=n.split(".");return i.length>1?Number(i[i.length-1]):1/0},this.checkAndRemoveSuffix=n=>{var i,s,o;for(let c=(null==(i=this.suffix)?void 0:i.length)-1;c>=0;c--){const f=this.suffix.substr(c,null==(s=this.suffix)?void 0:s.length);if(n.includes(f)&&(c-1<0||!n.includes(this.suffix.substr(c-1,null==(o=this.suffix)?void 0:o.length))))return n.replace(f,"")}return n},this.checkInputPrecision=(n,i,s)=>{if(i<1/0){const o=new RegExp(this._charToRegExpExpression(s)+`\\d{${i}}.*$`),c=n.match(o);c&&c[0].length-1>i&&(n=n.substring(0,n.length-(c[0].length-1-i))),0===i&&n.endsWith(s)&&(n=n.substring(0,n.length-1))}return n},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,n){const[i,s]=n;return this.customPattern=s,this.applyMask(t,i)}applyMask(t,n,i=0,s=!1,o=!1,c=(()=>{})){var Ne,$e;if(!n||"string"!=typeof t)return"";let f=0,m="",_=!1,w=!1,C=1,M=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const L=t.toString().split("");"IP"===n&&(this.ipError=L.filter(nt=>"."===nt).length<3&&L.length<7,n="099.099.099.099");const V=[];for(let nt=0;nt<t.length;nt++)(null==(Ne=t[nt])?void 0:Ne.match("\\d"))&&V.push(t[nt]);if("CPF_CNPJ"===n&&(this.cpfCnpjError=11!==V.length&&14!==V.length,n=V.length>11?"00.000.000/0000-00":"000.000.000-00"),n.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const nt=this.getPrecision(n);t=this.checkInputPrecision(t,nt,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),m=this.percentage(t)?t:t.substring(0,t.length-1)}else if(n.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&t[1]!==this.decimalMarker&&!o?t.slice(1,t.length):t;const nt=this._charToRegExpExpression(this.thousandSeparator),pt=this._charToRegExpExpression(this.decimalMarker),ct='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(nt,"").replace(pt,""),ut=new RegExp("["+ct+"]");t.match(ut)&&(t=t.substring(0,t.length-1));const Mt=this.getPrecision(n),Vn=(t=this.checkInputPrecision(t,Mt,this.decimalMarker)).replace(new RegExp(nt,"g"),"");m=this._formatWithSeparators(Vn,this.thousandSeparator,this.decimalMarker,Mt);const jr=m.indexOf(",")-t.indexOf(","),tr=m.length-t.length;if(tr>0&&","!==m[i]){w=!0;let Ai=0;do{this._shift.add(i+Ai),Ai++}while(Ai<tr)}else 0!==jr&&i>0&&!(m.indexOf(",")>=i&&i>3)||!(m.indexOf(".")>=i&&i>3)&&tr<=0?(this._shift.clear(),w=!0,C=tr,this._shift.add(i+=tr)):this._shift.clear()}else for(let nt=0,pt=L[0];nt<L.length&&f!==n.length;nt++,pt=L[nt])if(this._checkSymbolMask(pt,n[f])&&"?"===n[f+1])m+=pt,f+=2;else if("*"===n[f+1]&&_&&this._checkSymbolMask(pt,n[f+2]))m+=pt,f+=3,_=!1;else if(this._checkSymbolMask(pt,n[f])&&"*"===n[f+1])m+=pt,_=!0;else if("?"===n[f+1]&&this._checkSymbolMask(pt,n[f+2]))m+=pt,f+=3;else if(this._checkSymbolMask(pt,n[f])){if("H"===n[f]&&Number(pt)>2){f+=1,this._shiftStep(n,f,L.length),nt--,this.leadZeroDateTime&&(m+="0");continue}if("h"===n[f]&&"2"===m&&Number(pt)>3){f+=1,nt--;continue}if("m"===n[f]&&Number(pt)>5){f+=1,this._shiftStep(n,f,L.length),nt--,this.leadZeroDateTime&&(m+="0");continue}if("s"===n[f]&&Number(pt)>5){f+=1,this._shiftStep(n,f,L.length),nt--,this.leadZeroDateTime&&(m+="0");continue}const ct=31;if("d"===n[f]&&(Number(pt)>3&&this.leadZeroDateTime||Number(t.slice(f,f+2))>ct||"/"===t[f+1])){f+=1,this._shiftStep(n,f,L.length),nt--,this.leadZeroDateTime&&(m+="0");continue}if("M"===n[f]){const ut=12,Mt=0===f&&(Number(pt)>2||Number(t.slice(f,f+2))>ut||"/"===t[f+1]),Vn=t.slice(f-3,f-1).includes("/")&&("/"===t[f-2]&&Number(t.slice(f-1,f+1))>ut&&"/"!==t[f]||"/"===t[f]||"/"===t[f-3]&&Number(t.slice(f-2,f))>ut&&"/"!==t[f-1]||"/"===t[f-1]),jr=Number(t.slice(f-3,f-1))<=ct&&!t.slice(f-3,f-1).includes("/")&&"/"===t[f-1]&&(Number(t.slice(f,f+2))>ut||"/"===t[f+1]),tr=Number(t.slice(f-3,f-1))>ct&&!t.slice(f-3,f-1).includes("/")&&!t.slice(f-2,f).includes("/")&&Number(t.slice(f-2,f))>ut,Ai=Number(t.slice(f-3,f-1))<=ct&&!t.slice(f-3,f-1).includes("/")&&"/"!==t[f-1]&&Number(t.slice(f-1,f+1))>ut;if(Number(pt)>1&&this.leadZeroDateTime||Mt||Vn||jr||tr||Ai){f+=1,this._shiftStep(n,f,L.length),nt--,this.leadZeroDateTime&&(m+="0");continue}}m+=pt,f++}else-1!==this.maskSpecialCharacters.indexOf(n[f])?(m+=n[f],f++,this._shiftStep(n,f,L.length),nt--):this.maskSpecialCharacters.indexOf(pt)>-1&&this.maskAvailablePatterns[n[f]]&&(null==($e=this.maskAvailablePatterns[n[f]])?void 0:$e.optional)?(!!L[f]&&"099.099.099.099"!==n&&"000.000.000-00"!==n&&"00.000.000/0000-00"!==n&&(m+=L[f]),f++,nt--):"*"===this.maskExpression[f+1]&&this._findSpecialChar(this.maskExpression[f+2])&&this._findSpecialChar(pt)===this.maskExpression[f+2]&&_||"?"===this.maskExpression[f+1]&&this._findSpecialChar(this.maskExpression[f+2])&&this._findSpecialChar(pt)===this.maskExpression[f+2]&&_?(f+=3,m+=pt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(pt)<0&&pt!==this.placeHolderCharacter&&(M=!0);m.length+1===n.length&&-1!==this.maskSpecialCharacters.indexOf(n[n.length-1])&&(m+=n[n.length-1]);let H=i+1;for(;this._shift.has(H);)C++,H++;let Se=s?f:this._shift.has(i)?C:0;M&&Se--,c(Se,w),C<0&&this._shift.clear();let be=!1;o&&(be=L.every(nt=>this.maskSpecialCharacters.includes(nt)));let je=`${this.prefix}${be?"":m}${this.suffix}`;return 0===m.length&&(je=`${this.prefix}${m}`),je}_findSpecialChar(t){return this.maskSpecialCharacters.find(n=>n===t)}_checkSymbolMask(t,n){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[n]&&this.maskAvailablePatterns[n].pattern&&this.maskAvailablePatterns[n].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((n,i)=>n.match("^-?\\d")||n.match("\\s")||"."===n||","===n||"-"===n&&0===i&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?"\\"+t:t)}_shiftStep(t,n,i){const s=/[*?]/g.test(t.slice(0,n))?i:n;this._shift.add(s+this.prefix.length||0)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(SA))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})(),VU=(()=>{class r extends BU{constructor(t,n,i,s){super(n),this.document=t,this._config=n,this._elementRef=i,this._renderer=s,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.onChange=o=>{}}applyMask(t,n,i=0,s=!1,o=!1,c=(()=>{})){if(!n)return t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const f=t&&"number"==typeof this.selStart?t[this.selStart]:"";let m="";if(this.hiddenInput&&!this.writingValue){let M=this.actualValue.split("");""!==t&&M.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>M.length?M.splice(this.selStart,0,f):t.length<M.length&&(M.length-t.length==1?M.splice(this.selStart-1,1):M.splice(this.selStart,this.selEnd-this.selStart))):M=[],this.showMaskTyped&&(t=this.removeMask(t)),m=this.actualValue.length&&M.length<=t.length?this.shiftTypedSymbols(M.join("")):t}m=Boolean(m)&&m.length?m:t;const _=super.applyMask(m,n,i,s,o,c);if(this.actualValue=this.getActualValue(_),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(M=>M!==this.decimalMarker)),this.formControlResult(_),!this.showMaskTyped)return this.hiddenInput&&_&&_.length?this.hideInput(_,this.maskExpression):_;const w=_.length,C=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const M=this._numberSkipedSymbols(_);return _+C.slice(w+M)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?_+C:_+C.slice(w)}_numberSkipedSymbols(t){const n=/(^|\D)(\d\D)/g;let i=n.exec(t),s=0;for(;null!=i;)s+=1,i=n.exec(t);return s}applyValueChanges(t=0,n,i,s=(()=>{})){const o=this._elementRef.nativeElement;o.value=this.applyMask(o.value,this.maskExpression,t,n,i,s),o!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(t,n){return t.split("").map((i,s)=>{var o,c;return this.maskAvailablePatterns&&this.maskAvailablePatterns[n[s]]&&(null==(o=this.maskAvailablePatterns[n[s]])?void 0:o.symbol)?null==(c=this.maskAvailablePatterns[n[s]])?void 0:c.symbol:i}).join("")}getActualValue(t){const n=t.split("").filter((i,s)=>this._checkSymbolMask(i,this.maskExpression[s])||this.maskSpecialCharacters.includes(this.maskExpression[s])&&i===this.maskExpression[s]);return n.join("")===t?n.join(""):t}shiftTypedSymbols(t){let n="";return(t&&t.split("").map((s,o)=>{if(this.maskSpecialCharacters.includes(t[o+1])&&t[o+1]!==this.maskExpression[o+1])return n=s,t[o+1];if(n.length){const c=n;return n="",c}return s})||[]).join("")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,n]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,n))}checkSpecialCharAmount(t){return t.split("").filter(i=>this._findSpecialChar(i)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var i;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const n=[];for(let s=0;s<t.length;s++)(null==(i=t[s])?void 0:i.match("\\d"))&&n.push(t[s]);return n.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:n.length>3&&n.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:n.length>6&&n.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var o;const n=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,i=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return n;const s=[];for(let c=0;c<t.length;c++)(null==(o=t[c])?void 0:o.match("\\d"))&&s.push(t[c]);return s.length<=3?n.slice(s.length,n.length):s.length>3&&s.length<=6?n.slice(s.length+1,n.length):s.length>6&&s.length<=9?n.slice(s.length+2,n.length):s.length>9&&s.length<11?n.slice(s.length+3,n.length):11===s.length?"":12===s.length?i.slice(17===t.length?16:15,i.length):s.length>12&&s.length<=14?i.slice(s.length+4,i.length):""}formControlResult(t){this.writingValue||this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const n=Number(t);return Number.isNaN(n)?t:n}_removeMask(t,n){return t&&t.replace(this._regExpForRemove(n),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(n=>`\\${n}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const n=this._retrieveSeparatorPrecision(this.maskExpression);let i=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&(i=i.replace(this.decimalMarker,".")),this.isNumberValue?n?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,i):Number(i):i}_retrieveSeparatorPrecision(t){const n=t.match(new RegExp("^separator\\.([^d]*)"));return n?Number(n[1]):null}_checkPrecision(t,n){return t.indexOf("2")>0?Number(n).toFixed(2):Number(n)}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(pe),d.LFG(SA),d.LFG(d.SBq),d.LFG(d.Qsj))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac}),r})(),TW=(()=>{class r{constructor(t,n,i){this.document=t,this._maskService=n,this._config=i,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=s=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:n,specialCharacters:i,patterns:s,prefix:o,suffix:c,thousandSeparator:f,decimalMarker:m,dropSpecialCharacters:_,hiddenInput:w,showMaskTyped:C,placeHolderCharacter:M,shownMaskExpression:L,showTemplate:V,clearIfNotMatch:H,validation:Se,separatorLimit:be,allowNegativeNumbers:je,leadZeroDateTime:Ne}=t;if(n&&(n.currentValue!==n.previousValue&&!n.firstChange&&(this._maskService.maskChanged=!0),this._maskValue=n.currentValue||"",n.currentValue&&n.currentValue.split("||").length>1&&(this._maskExpressionArray=n.currentValue.split("||").sort(($e,nt)=>$e.length-nt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0])),i){if(!i.currentValue||!Array.isArray(i.currentValue))return;this._maskService.maskSpecialCharacters=i.currentValue||[]}s&&s.currentValue&&(this._maskService.maskAvailablePatterns=s.currentValue),o&&(this._maskService.prefix=o.currentValue),c&&(this._maskService.suffix=c.currentValue),f&&(this._maskService.thousandSeparator=f.currentValue),m&&(this._maskService.decimalMarker=m.currentValue),_&&(this._maskService.dropSpecialCharacters=_.currentValue),w&&(this._maskService.hiddenInput=w.currentValue),C&&(this._maskService.showMaskTyped=C.currentValue),M&&(this._maskService.placeHolderCharacter=M.currentValue),L&&(this._maskService.shownMaskExpression=L.currentValue),V&&(this._maskService.showTemplate=V.currentValue),H&&(this._maskService.clearIfNotMatch=H.currentValue),Se&&(this._maskService.validation=Se.currentValue),be&&(this._maskService.separatorLimit=be.currentValue),je&&(this._maskService.allowNegativeNumbers=je.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter($e=>"-"!==$e))),Ne&&(this._maskService.leadZeroDateTime=Ne.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||bW.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(_W.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let n=0;for(const i in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[i].optional&&(this._maskValue.indexOf(i)!==this._maskValue.lastIndexOf(i)?n+=this._maskValue.split("").filter(o=>o===i).join("").length:-1!==this._maskValue.indexOf(i)&&n++,-1!==this._maskValue.indexOf(i)&&t.toString().length>=this._maskValue.indexOf(i)||n===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const i=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-n:this._maskValue.length-n;if(t.toString().length<i)return this._createValidationError(t)}}return null}onPaste(){this._justPasted=!0}onModelChange(t){!t&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const n=t.target;if(this._inputValue=n.value,this._setMask(),!this._maskValue)return void this.onChange(n.value);const i=1===n.selectionStart?n.selectionStart+this._maskService.prefix.length:n.selectionStart;let s=0,o=!1;if(this._maskService.applyValueChanges(i,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(f,m)=>{this._justPasted=!1,s=f,o=m}),this.document.activeElement!==n)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let c=this._position?this._inputValue.length+i+s:i+("Backspace"!==this._code||o?s:0);c>this._getActualInputLength()&&(c=this._getActualInputLength()),c<0&&(c=0),n.setSelectionRange(c,c),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onFocus(t){if(!this._maskValue)return;const n=t.target;null!==n&&null!==n.selectionStart&&n.selectionStart===n.selectionEnd&&n.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),n.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===n.value?(n.focus(),n.setSelectionRange(0,0)):n.selectionStart>this._maskService.actualValue.length&&n.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const o=n.value&&n.value!==this._maskService.prefix?n.value:this._maskService.prefix+this._maskService.maskIsShown;n.value!==o&&(n.value=o),(n.selectionStart||n.selectionEnd)<=this._maskService.prefix.length?n.selectionStart=this._maskService.prefix.length:n.selectionEnd>this._getActualInputLength()&&(n.selectionEnd=this._getActualInputLength())}onKeyDown(t){var i;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const n=t.target;if(this._inputValue=n.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===n.value.length&&(n.selectionStart=n.selectionEnd),8===t.keyCode&&0!==n.selectionStart)if(this.specialCharacters=(null==(i=this.specialCharacters)?void 0:i.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&n.selectionStart<=this.prefix.length)n.setSelectionRange(this.prefix.length,this.prefix.length);else{if(this._inputValue.length!==n.selectionStart&&1!==n.selectionStart)for(;this.specialCharacters.includes(this._inputValue[n.selectionStart-1].toString())&&(this.prefix.length>=1&&n.selectionStart>this.prefix.length||0===this.prefix.length);)n.setSelectionRange(n.selectionStart-1,n.selectionStart-1);this.suffixCheckOnPressDelete(t.keyCode,n)}this.suffixCheckOnPressDelete(t.keyCode,n),this._maskService.prefix.length&&n.selectionStart<=this._maskService.prefix.length&&n.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const s=n.selectionStart;8===t.keyCode&&!n.readOnly&&0===s&&n.selectionEnd===n.value.length&&0!==n.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<n.selectionStart?n.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(n.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=n.selectionStart,this._maskService.selEnd=n.selectionEnd}writeValue(t){var n=this;return(0,Xe.Z)(function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&n.setDisabledState(Boolean(t.disable)),t=t.value),"number"==typeof t&&(t=String(t),t="."!==n.decimalMarker?t.replace(".",n.decimalMarker):t,n._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),n._inputValue=t,n._setMask(),t&&n._maskService.maskExpression||n._maskService.maskExpression&&(n._maskService.prefix||n._maskService.showMaskTyped)?(n._maskService.writingValue=!0,n._maskService.formElementProperty=["value",n._maskService.applyMask(t,n._maskService.maskExpression)],n._maskService.writingValue=!1):n._maskService.formElementProperty=["value",t],n._inputValue=t})()}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}suffixCheckOnPressDelete(t,n){46===t&&this.suffix.length>0&&this._inputValue.length-this.suffix.length<=n.selectionStart&&n.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),8===t&&(this.suffix.length>1&&this._inputValue.length-this.suffix.length<n.selectionStart&&n.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),1===this.suffix.length&&this._inputValue.length===n.selectionStart&&n.setSelectionRange(n.selectionStart-1,n.selectionStart-1))}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((n,i,s)=>{if(this._start="{"===i?s:this._start,"}"!==i)return this._maskService._findSpecialChar(i)?n+i:n;this._end=s;const o=Number(t.slice(this._start+1,this._end));return n+new Array(o+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const n=this._maskValue.split("").filter(i=>":"!==i).length;return t&&(0==+t[t.length-1]&&t.length<n||t.length<=n-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var i,s;const n=(null==(i=this._maskService.removeMask(this._inputValue))?void 0:i.length)<=(null==(s=this._maskService.removeMask(t))?void 0:s.length);if(this._inputValue&&n)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,n;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(pe),d.Y36(VU),d.Y36(SA))},r.\u0275dir=d.lG2({type:r,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,n){1&t&&d.NdJ("paste",function(){return n.onPaste()})("ngModelChange",function(s){return n.onModelChange(s)})("input",function(s){return n.onInput(s)})("blur",function(){return n.onBlur()})("click",function(s){return n.onFocus(s)})("keydown",function(s){return n.onKeyDown(s)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime"},features:[d._Bn([{provide:dc,useExisting:(0,d.Gpc)(()=>r),multi:!0},{provide:Js,useExisting:(0,d.Gpc)(()=>r),multi:!0},VU]),d.TTD]}),r})();function EW(r,e){return rn(rn({},r),e instanceof Function?e():e)}let wW=(()=>{class r{static forRoot(t){return{ngModule:r,providers:[{provide:jU,useValue:t},{provide:UU,useValue:yW},{provide:SA,useFactory:EW,deps:[UU,jU]},BU]}}static forChild(){return{ngModule:r}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({}),r})();const HU="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function SW(r,e){1&r&&(d.TgZ(0,"p",3),d._uU(1,"Passwords must be at least 8 characters long, have at least 1 uppercase letter, 1 lowercase letter, and 1 number."),d.qZA())}function CW(r,e){1&r&&(d.TgZ(0,"p",3),d._uU(1,"Field is required"),d.qZA())}function xW(r,e){if(1&r&&(d.TgZ(0,"p",3),d._uU(1),d.qZA()),2&r){const t=d.oxw(2);let n;d.xp6(1),d.AsE(" The value you inputted is ",null==(n=t.control.get("name"))||null==n.errors?null:n.errors.minlength.actualLength," characters long. It must be at least ",null==(n=t.control.get("name"))||null==n.errors?null:n.errors.minlength.requiredLength," long.")}}function IW(r,e){1&r&&(d.TgZ(0,"p",3),d._uU(1,"Invalid email"),d.qZA())}function AW(r,e){1&r&&(d.TgZ(0,"p",3),d._uU(1,"Value too low"),d.qZA())}function DW(r,e){1&r&&(d.TgZ(0,"p",3),d._uU(1,"Value too high"),d.qZA())}function kW(r,e){1&r&&(d.TgZ(0,"p",3),d._uU(1,"Passwords do not match"),d.qZA())}function PW(r,e){1&r&&(d.TgZ(0,"p",3),d._uU(1,"Email is taken already"),d.qZA())}function MW(r,e){if(1&r&&(d.ynx(0),d.YNc(1,SW,2,0,"p",2),d.YNc(2,CW,2,0,"p",2),d.YNc(3,xW,2,2,"p",2),d.YNc(4,IW,2,0,"p",2),d.YNc(5,AW,2,0,"p",2),d.YNc(6,DW,2,0,"p",2),d.YNc(7,kW,2,0,"p",2),d.YNc(8,PW,2,0,"p",2),d.BQk()),2&r){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.emailTaken)}}HU.KeyboardEvent||(HU.KeyboardEvent=function(r,e){});let LM=(()=>{class r{constructor(){this.control=new Pa,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"placeholder","type","formControl","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,n){1&t&&(d._UZ(0,"input",0),d.YNc(1,MW,9,8,"ng-container",1)),2&t&&(d.Q6J("placeholder",n.placeholder)("type",n.type)("formControl",n.control)("mask",n.format)("dropSpecialCharacters",!1),d.xp6(1),d.Q6J("ngIf",n.control.touched&&n.control.dirty))},directives:[Rw,TW,vM,DM,Hi],styles:[""]}),r})();function RW(r,e){if(1&r&&(d.TgZ(0,"app-alert",11),d._uU(1),d.qZA()),2&r){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(1),d.Oqu(t.alertMsg)}}let OW=(()=>{class r{constructor(t,n){this.auth=t,this.emailTaken=n,this.inSubmission=!1,this.name=new Pa("",[eo.required,eo.minLength(3)]),this.email=new Pa("",[eo.required,eo.email],[this.emailTaken.validate]),this.age=new Pa("",[eo.required,eo.min(18),eo.max(120)]),this.password=new Pa("",[eo.required,eo.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new Pa("",[eo.required]),this.phoneNumber=new Pa("",[eo.required,eo.minLength(10),eo.maxLength(13)]),this.showAlert=!1,this.alertMsg="Please wait! Your account is being created.",this.alertColor="blue",this.registerForm=new M0({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[mW.match("password","confirm_password")])}register(){var t=this;return(0,Xe.Z)(function*(){t.inSubmission=!0,t.showAlert=!0,t.alertMsg="Please wait! Your account is being created.",t.alertColor="blue";try{yield t.auth.createUser(t.registerForm.value)}catch(n){return console.error(n),t.alertMsg="An unexpected error occurred. Please try again later.",t.alertColor="red",void(t.inSubmission=!1)}t.alertMsg="Success! Your account has been created.",t.alertColor="green"})()}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(hM),d.Y36(vW))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-register"]],decls:31,vars:12,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["format","(000)000-0000","placeholder","Enter Phone Number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","diabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(t,n){1&t&&(d.YNc(0,RW,2,2,"app-alert",0),d.TgZ(1,"form",1),d.NdJ("ngSubmit",function(){return n.register()}),d.TgZ(2,"div",2),d.TgZ(3,"label",3),d._uU(4,"Name"),d.qZA(),d._UZ(5,"app-input",4),d.qZA(),d.TgZ(6,"div",2),d.TgZ(7,"label",3),d._uU(8,"Email"),d.qZA(),d._UZ(9,"app-input",5),d.qZA(),d.TgZ(10,"div",2),d.TgZ(11,"label",3),d._uU(12,"Age"),d.qZA(),d._UZ(13,"app-input",6),d.qZA(),d.TgZ(14,"div",2),d.TgZ(15,"label",3),d._uU(16,"Password"),d.qZA(),d._UZ(17,"app-input",7),d.qZA(),d.TgZ(18,"div",2),d.TgZ(19,"label",3),d._uU(20,"Confirm Password"),d.qZA(),d._UZ(21,"app-input",8),d.qZA(),d.TgZ(22,"div",2),d.TgZ(23,"label",3),d._uU(24,"Phone Number"),d.qZA(),d._UZ(25,"app-input",9),d.qZA(),d.TgZ(26,"button",10),d._uU(27," Submit "),d.qZA(),d.qZA(),d.TgZ(28,"p"),d._uU(29),d.ALo(30,"json"),d.qZA()),2&t&&(d.Q6J("ngIf",n.showAlert),d.xp6(1),d.Q6J("formGroup",n.registerForm),d.xp6(4),d.Q6J("control",n.name),d.xp6(4),d.Q6J("control",n.email),d.xp6(4),d.Q6J("control",n.age),d.xp6(4),d.Q6J("control",n.password),d.xp6(4),d.Q6J("control",n.confirm_password),d.xp6(4),d.Q6J("control",n.phoneNumber),d.xp6(1),d.Q6J("disabled",n.registerForm.invalid||n.inSubmission),d.xp6(3),d.Oqu(d.lcZ(30,10,n.registerForm.errors)))},directives:[Hi,Bw,Nw,R0,LM,wA],pipes:[gf],styles:[""]}),r})(),NW=(()=>{class r{constructor(t){this.modal=t}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Mw))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2x1","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(t,n){1&t&&(d.TgZ(0,"app-modal",0),d.TgZ(1,"p",1),d._uU(2,"Your Account"),d.qZA(),d.TgZ(3,"app-tabs-container"),d.TgZ(4,"app-tab",2),d._UZ(5,"app-login"),d.qZA(),d.TgZ(6,"app-tab",3),d._UZ(7,"app-register"),d.qZA(),d.qZA(),d.qZA())},directives:[Bj,_q,Vj,gW,OW],styles:[""]}),r})();function LW(r,e){1&r&&d._UZ(0,"app-auth-modal")}let FW=(()=>{class r{constructor(t){this.auth=t,this.title="clips"}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(hM))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,n){1&t&&(d._UZ(0,"app-nav"),d._UZ(1,"router-outlet"),d.YNc(2,LW,1,0,"app-auth-modal",0),d.ALo(3,"async")),2&t&&(d.xp6(2),d.Q6J("ngIf",!d.lcZ(3,1,n.auth.isAuthenticatedWithDelay$)))},directives:[dq,Ff,Hi,NW],pipes:[gc],styles:[""]}),r})(),GU=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[_u,NM,wW.forRoot()]]}),r})(),jW=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[_u,GU,NM,cW]]}),r})();const FM_firebase={apiKey:"AIzaSyBJ-6vp4RPw8NMsEQyh2MdD9kwnZSHLb0c",authDomain:"clips-3206c.firebaseapp.com",projectId:"clips-3206c",storageBucket:"clips-3206c.appspot.com",appId:"1:537540062728:web:05fcee4ba63fdcf7ac2bbd"};function UW(r,e){if(1&r&&(d.TgZ(0,"app-alert",9),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.qZA()),2&r){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(2),d.Oqu(t.alertMsg)}}const BW=function(r,e){return{"opacity-50":r,"hover:bg-indigo-700":e}};let VW=(()=>{class r{constructor(t,n){this.modal=t,this.clipService=n,this.activeClip=null,this.inSubmission=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please Wait! Updating clip.",this.update=new d.vpe,this.clipID=new Pa(""),this.title=new Pa("",[eo.required,eo.minLength(3)]),this.editForm=new M0({title:this.title,id:this.clipID})}ngOnInit(){this.modal.register("editClip")}ngOnDestroy(){this.modal.unregister("editClip")}ngOnChanges(){!this.activeClip||(this.inSubmission=!1,this.showAlert=!1,this.clipID.setValue(this.activeClip.docID),this.title.setValue(this.activeClip.title))}submit(){var t=this;return(0,Xe.Z)(function*(){if(t.activeClip){t.inSubmission=!0,t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please Wait Updating clip.";try{yield t.clipService.updateClip(t.clipID.value,t.title.value)}catch(n){return t.inSubmission=!1,t.alertColor="red",void(t.alertMsg="Something went wrong. Try again later.")}t.activeClip.title=t.title.value,t.update.emit(t.activeClip),t.inSubmission=!1,t.alertColor="green",t.alertMsg="Success! Your clip has been updated"}})()}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Mw),d.Y36(ow))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-edit"]],inputs:{activeClip:"activeClip"},outputs:{update:"update"},features:[d.TTD],decls:12,vars:8,consts:[["modalID","editClip"],[1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"ngClass","disabled"],[3,"color"]],template:function(t,n){1&t&&(d.TgZ(0,"app-modal",0),d.TgZ(1,"p",1),d._uU(2,"Edit Video"),d.qZA(),d.YNc(3,UW,3,2,"app-alert",2),d.TgZ(4,"form",3),d.NdJ("ngSubmit",function(){return n.submit()}),d.TgZ(5,"div",4),d.TgZ(6,"label",5),d._uU(7,"Title"),d.qZA(),d._UZ(8,"app-input",6),d.qZA(),d.TgZ(9,"div",7),d.TgZ(10,"button",8),d._uU(11," Update "),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("ngIf",n.showAlert),d.xp6(1),d.Q6J("formGroup",n.editForm),d.xp6(4),d.Q6J("control",n.title),d.xp6(2),d.Q6J("ngClass",d.WLB(5,BW,n.inSubmission,!n.inSubmission))("disabled",n.inSubmission))},directives:[Bj,Hi,Bw,Nw,R0,LM,si,wA],styles:[""]}),r})();const $U=function(r){return["/","clips",r]};function HW(r,e){if(1&r){const t=d.EpF();d.TgZ(0,"div",10),d.TgZ(1,"a",11),d._UZ(2,"img",12),d.qZA(),d.TgZ(3,"div",13),d.TgZ(4,"a",14),d._uU(5),d.qZA(),d.TgZ(6,"a",15),d.NdJ("click",function(i){const o=d.CHM(t).$implicit;return d.oxw().copyToClipboard(i,o.docID)}),d._uU(7," Copy Link "),d.qZA(),d.qZA(),d.TgZ(8,"div",16),d.TgZ(9,"a",17),d.NdJ("click",function(i){const o=d.CHM(t).$implicit;return d.oxw().openModal(i,o)}),d.TgZ(10,"span",18),d._uU(11,"build"),d.qZA(),d.qZA(),d.TgZ(12,"a",19),d.NdJ("click",function(i){const o=d.CHM(t).$implicit;return d.oxw().deleteClip(i,o)}),d.TgZ(13,"span",18),d._uU(14,"delete"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&r){const t=e.$implicit;d.xp6(1),d.Q6J("routerLink",d.VKq(4,$U,t.docID)),d.xp6(1),d.Q6J("src",t.screenshotUrl,d.LSH),d.xp6(2),d.Q6J("routerLink",d.VKq(6,$U,t.docID)),d.xp6(1),d.hij(" ",t.title," ")}}let GW=(()=>{class r{constructor(t,n,i,s){this.router=t,this.route=n,this.clipService=i,this.modal=s,this.videoOrder="1",this.clips=[],this.activeClip=null,this.sort$=new Cs(this.videoOrder)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.videoOrder="2"==t.sort?t.sort:"1",this.sort$.next(this.videoOrder)}),this.clipService.getUserClips(this.sort$).subscribe(t=>{this.clips=[],t.forEach(n=>{this.clips.push(Object.assign({docID:n.id},n.data()))})})}sort(t){const{value:n}=t.target;this.router.navigate([],{relativeTo:this.route,queryParams:{sort:n}})}openModal(t,n){t.preventDefault(),this.activeClip=n,this.modal.toggleModal("editClip")}update(t){this.clips.forEach((n,i)=>{n.docID==t.docID&&(this.clips[i].title=t.title)})}deleteClip(t,n){t.preventDefault(),this.clipService.deleteClip(n),this.clips.forEach((i,s)=>{i.docID==n.docID&&this.clips.splice(s,1)})}copyToClipboard(t,n){return(0,Xe.Z)(function*(){if(t.preventDefault(),!n)return;const i=`${location.origin}/clips/${n}`;yield navigator.clipboard.writeText(i),alert("Link Copied!")})()}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(bi),d.Y36(Qa),d.Y36(ow),d.Y36(Mw))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"activeClip","update"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],[3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"p-6","text-2xl"],[1,"font-bold","mb-2",3,"routerLink"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded",3,"click"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,n){1&t&&(d.TgZ(0,"section",0),d.TgZ(1,"div",1),d.TgZ(2,"a",2),d._uU(3," Upload Videos "),d.qZA(),d.TgZ(4,"select",3),d.NdJ("change",function(s){return n.sort(s)}),d.TgZ(5,"option",4),d._uU(6,"Recent Uploads"),d.qZA(),d.TgZ(7,"option",5),d._uU(8,"Oldest Uploads"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"div",6),d.TgZ(10,"div",7),d.YNc(11,HW,15,8,"div",8),d.qZA(),d.qZA(),d.TgZ(12,"app-edit",9),d.NdJ("update",function(s){return n.update(s)}),d.qZA()),2&t&&(d.xp6(5),d.Q6J("selected","1"===n.videoOrder),d.xp6(2),d.Q6J("selected","2"===n.videoOrder),d.xp6(4),d.Q6J("ngForOf",n.clips),d.xp6(1),d.Q6J("activeClip",n.activeClip))},directives:[v,ia,VW],styles:[""]}),r})();var CA,$W=new Uint8Array(16);function qW(){if(!CA&&!(CA="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return CA($W)}const WW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ZW=function(r){return"string"==typeof r&&WW.test(r)};for(var to=[],jM=0;jM<256;++jM)to.push((jM+256).toString(16).substr(1));const XW=function(r,e,t){var n=(r=r||{}).random||(r.rng||qW)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(to[r[e+0]]+to[r[e+1]]+to[r[e+2]]+to[r[e+3]]+"-"+to[r[e+4]]+to[r[e+5]]+"-"+to[r[e+6]]+to[r[e+7]]+"-"+to[r[e+8]]+to[r[e+9]]+"-"+to[r[e+10]]+to[r[e+11]]+to[r[e+12]]+to[r[e+13]]+to[r[e+14]]+to[r[e+15]]).toLowerCase();if(!ZW(t))throw TypeError("Stringified UUID is invalid");return t}(n)};var qU=U(6285);let JW=(()=>{class r{constructor(){this.isRunning=!1,this.isReady=!1,this.ffmpeg=(0,qU.createFFmpeg)({log:!0})}init(){var t=this;return(0,Xe.Z)(function*(){t.isReady||(yield t.ffmpeg.load(),t.isReady=!0)})()}getScreenshots(t){var n=this;return(0,Xe.Z)(function*(){n.isRunning=!0;const i=yield(0,qU.fetchFile)(t);n.ffmpeg.FS("writeFile",t.name,i);const s=[1,2,3],o=[];s.forEach(f=>{o.push("-i",t.name,"-ss",`00:00:0${f}`,"-frames:v","1","-filter:v","scale=510:-1",`output_0${f}.png`)}),yield n.ffmpeg.run(...o);const c=[];return s.forEach(f=>{const m=n.ffmpeg.FS("readFile",`output_0${f}.png`),_=new Blob([m.buffer],{type:"image/png"}),w=URL.createObjectURL(_);c.push(w)}),n.isRunning=!1,c})()}blobFromUrl(t){return(0,Xe.Z)(function*(){return yield(yield fetch(t)).blob()})()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),e5=(()=>{class r{handleEvent(t){t.preventDefault(),t.stopPropagation()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=d.lG2({type:r,selectors:[["","app-event-blocker",""]],hostBindings:function(t,n){1&t&&d.NdJ("drop",function(s){return n.handleEvent(s)})("dragover",function(s){return n.handleEvent(s)})}}),r})(),t5=(()=>{class r{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(Va,16))},r.\u0275pipe=d.Yjl({name:"safeURL",type:r,pure:!0}),r})();function n5(r,e){1&r&&(d.TgZ(0,"span",6),d._uU(1," settings "),d.qZA())}function r5(r,e){1&r&&(d.TgZ(0,"span",6),d._uU(1,"autorenew"),d.qZA())}const i5=function(r){return{"bg-indigo-400 border-indigo-400 border-solid":r}};function s5(r,e){if(1&r){const t=d.EpF();d.ynx(0),d.TgZ(1,"div",17),d.NdJ("dragend",function(){return d.CHM(t),d.oxw(2).isDragover=!1})("dragover",function(){return d.CHM(t),d.oxw(2).isDragover=!0})("dragenter",function(){return d.CHM(t),d.oxw(2).isDragover=!0})("dragleave",function(){return d.CHM(t),d.oxw(2).isDragover=!1})("mouseleave",function(){return d.CHM(t),d.oxw(2).isDragover=!1})("drop",function(i){return d.CHM(t),d.oxw(2).storeFile(i)}),d.TgZ(2,"h5"),d._uU(3,"Drop your file here (mp4 only!)"),d.qZA(),d.YNc(4,r5,2,0,"span",18),d.qZA(),d.TgZ(5,"input",19),d.NdJ("change",function(i){return d.CHM(t),d.oxw(2).storeFile(i)}),d.qZA(),d.BQk()}if(2&r){const t=d.oxw(2);d.xp6(1),d.Q6J("ngClass",d.VKq(2,i5,t.isDragover)),d.xp6(3),d.Q6J("ngIf",t.ffmpegService.isRunning)}}const o5=function(r,e){return{"border-green-400":r,"border-transparent":e}};function a5(r,e){if(1&r){const t=d.EpF();d.TgZ(0,"div",20),d.NdJ("click",function(){const s=d.CHM(t).$implicit;return d.oxw(2).selectedScreenshots=s}),d._UZ(1,"img",21),d.ALo(2,"safeURL"),d.qZA()}if(2&r){const t=e.$implicit,n=d.oxw(2);d.Q6J("ngClass",d.WLB(4,o5,t===n.selectedScreenshots,t!==n.selectedScreenshots)),d.xp6(1),d.Q6J("src",d.lcZ(2,2,t),d.LSH)}}const u5=function(r,e){return{"opacity-50":r,"hover:bg-indigo-700":e}};function l5(r,e){if(1&r){const t=d.EpF();d.YNc(0,s5,6,4,"ng-container",7),d.TgZ(1,"form",8),d.NdJ("ngSubmit",function(){return d.CHM(t),d.oxw().uploadFile()}),d.TgZ(2,"h2",9),d._uU(3,"Select a Thumbnail"),d.qZA(),d.TgZ(4,"div",10),d.YNc(5,a5,3,7,"div",11),d.qZA(),d.TgZ(6,"div",12),d.TgZ(7,"label",13),d._uU(8,"Title"),d.qZA(),d._UZ(9,"app-input",14),d.qZA(),d.TgZ(10,"div",15),d.TgZ(11,"button",16),d._uU(12," Publish "),d.qZA(),d.qZA(),d.qZA()}if(2&r){const t=d.oxw(),n=d.MAs(9);d.Q6J("ngIf",!t.nextStep)("ngIfElse",n),d.xp6(1),d.Q6J("formGroup",t.uploadForm),d.xp6(4),d.Q6J("ngForOf",t.screenshots),d.xp6(4),d.Q6J("control",t.title),d.xp6(2),d.Q6J("ngClass",d.WLB(7,u5,t.inSubmission,!t.inSubmission))("disabled",t.inSubmission)}}function c5(r,e){if(1&r&&(d.TgZ(0,"p"),d._uU(1),d.ALo(2,"percent"),d.qZA()),2&r){const t=d.oxw(3);d.xp6(1),d.Oqu(d.lcZ(2,1,t.percentage))}}function d5(r,e){if(1&r&&(d.TgZ(0,"app-alert",23),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.YNc(3,c5,3,3,"p",24),d.qZA()),2&r){const t=d.oxw(2);d.Q6J("color",t.alertColor),d.xp6(2),d.Oqu(t.alertMsg),d.xp6(1),d.Q6J("ngIf",t.showPercentage)}}function h5(r,e){if(1&r&&d.YNc(0,d5,4,3,"app-alert",22),2&r){const t=d.oxw();d.Q6J("ngIf",t.showAlert)}}let f5=(()=>{class r{constructor(t,n,i,s,o){this.ffmpegService=t,this.storage=n,this.auth=i,this.clipService=s,this.router=o,this.isDragover=!1,this.file=null,this.nextStep=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please Wait! Your clip is being uploaded.",this.inSubmission=!1,this.percentage=0,this.showPercentage=!1,this.user=null,this.screenshots=[],this.selectedScreenshots="",this.title=new Pa("",[eo.required,eo.minLength(3)]),this.uploadForm=new M0({title:this.title}),i.user.subscribe(c=>{this.user=c,this.ffmpegService.init()})}ngOnDestroy(){var t;null===(t=this.task)||void 0===t||t.cancel()}storeFile(t){var n=this;return(0,Xe.Z)(function*(){var i,s,o,c;n.ffmpegService.isRunning||(n.isDragover=!1,n.file=t.dataTransfer?null!==(s=null===(i=t.dataTransfer)||void 0===i?void 0:i.files.item(0))&&void 0!==s?s:null:null!==(c=null===(o=t.target.files)||void 0===o?void 0:o.item(0))&&void 0!==c?c:null,n.file&&"video/mp4"===n.file.type&&(n.screenshots=yield n.ffmpegService.getScreenshots(n.file),n.selectedScreenshots=n.screenshots[0],n.title.setValue(n.file.name.replace(/\.[^/.]+$/,"")),n.nextStep=!0))})()}uploadFile(){var t=this;return(0,Xe.Z)(function*(){t.uploadForm.disable(),t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please Wait! Your clip is being uploaded.",t.inSubmission=!0,t.showPercentage=!0;const n=XW(),i=`clips/${n}.mp4`,s=yield t.ffmpegService.blobFromUrl(t.selectedScreenshots),o=`screenshots/${n}.png`;t.screenshotTask=t.storage.upload(o,s),t.task=t.storage.upload(i,t.file);const c=t.storage.ref(i),f=t.storage.ref(o);var m;Gs([t.task.percentageChanges(),t.screenshotTask.percentageChanges()]).subscribe(m=>{const[_,w]=m;_&&w&&(t.percentage=(_+w)/200)}),fM([t.task.snapshotChanges(),t.screenshotTask.snapshotChanges()]).pipe(gr(()=>fM([c.getDownloadURL(),f.getDownloadURL()]))).subscribe({next:(m=(0,Xe.Z)(function*(_){var w,C;const[M,L]=_,V={uid:null===(w=t.user)||void 0===w?void 0:w.uid,displayName:null===(C=t.user)||void 0===C?void 0:C.displayName,title:t.title.value,fileName:`${n}.mp4`,url:M,screenshotUrl:L,screenshotFileName:`${n}.png`,timestamp:e0.Z.firestore.FieldValue.serverTimestamp()},H=yield t.clipService.createClip(V);t.alertColor="green",t.alertMsg="Success! Your clip is now ready to share with the world.",t.showPercentage=!1,setTimeout(()=>{t.router.navigate(["clips",H.id])},1e3)}),function(w){return m.apply(this,arguments)}),error:m=>{t.uploadForm.enable(),t.alertColor="red",t.alertMsg="Upload failed! Please try again later.",t.inSubmission=!0,t.showPercentage=!1}})})()}}return r.\u0275fac=function(t){return new(t||r)(d.Y36(JW),d.Y36(Ak),d.Y36(zh),d.Y36(ow),d.Y36(bi))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-upload"]],decls:10,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf","ngIfElse"],["uploadEditorCtr",""],["uploadFormContainer",""],[1,"material-icons","text-center","text-6xl","p-8","animate-spin"],[4,"ngIf","ngIfElse"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","border-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"ngClass","disabled"],["app-event-blocker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf"],["type","file",1,"mt-4",3,"change"],[1,"border-8","cursor-pointer",3,"ngClass","click"],[3,"src"],[3,"color",4,"ngIf"],[3,"color"],[4,"ngIf"]],template:function(t,n){if(1&t&&(d.TgZ(0,"section",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d._uU(3,"Upload Video"),d.qZA(),d.ynx(4),d.YNc(5,n5,2,0,"span",3),d.BQk(),d.YNc(6,l5,13,10,"ng-template",null,4,d.W1O),d.YNc(8,h5,1,1,"ng-template",null,5,d.W1O),d.qZA(),d.qZA()),2&t){const i=d.MAs(7);d.xp6(5),d.Q6J("ngIf",!n.ffmpegService.isReady)("ngIfElse",i)}},directives:[Hi,Bw,Nw,R0,ia,LM,si,e5,wA],pipes:[t5,gg],styles:[""]}),r})();var p5=U(7979);const UM=(0,un.U)(r=>!!r);let BM=(()=>{class r{constructor(t,n){this.router=t,this.auth=n,this.canActivate=(i,s)=>{const o=i.data.authGuardPipe||(()=>UM);return this.auth.user.pipe((0,uo.q)(1),o(i,s),(0,un.U)(c=>"boolean"==typeof c?c:Array.isArray(c)?this.router.createUrlTree(c):this.router.parseUrl(c)))}}}return r.\u0275fac=function(t){return new(t||r)(d.LFG(bi),d.LFG(zh))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})();const WU=()=>(0,p5.z)(UM,(0,un.U)(e=>e||"/")),v5=[{path:"manage",component:GW,data:{authOnly:!0,authGuardPipe:WU},canActivate:[BM]},{path:"upload",component:f5,data:{authOnly:!0,authGuardPipe:WU},canActivate:[BM]},{path:"manage-clips",redirectTo:"manage"}];let y5=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[jl.forChild(v5)],jl]}),r})(),_5=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[_u,y5,GU,NM]]}),r})(),b5=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.oAB({type:r,bootstrap:[FW]}),r.\u0275inj=d.cJS({providers:[],imports:[[dl,_5,jW,ls.hO.initializeApp(FM_firebase),dV,_V,eq,u4]]}),r})();(0,d.G48)(),e0.Z.initializeApp(FM_firebase);let zU=!1;e0.Z.auth().onAuthStateChanged(()=>{zU||Tu().bootstrapModule(b5).catch(r=>console.error(r)),zU=!0})},1052:Ye=>{function _e(d,ee,B,ae,ie,he,pe){try{var ce=d[he](pe),fe=ce.value}catch(Q){return void B(Q)}ce.done?ee(fe):Promise.resolve(fe).then(ae,ie)}Ye.exports=function(d){return function(){var ee=this,B=arguments;return new Promise(function(ae,ie){var he=d.apply(ee,B);function pe(fe){_e(he,ae,ie,pe,ce,"next",fe)}function ce(fe){_e(he,ae,ie,pe,ce,"throw",fe)}pe(void 0)})}},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0},6549:Ye=>{function _e(){return Ye.exports=_e=Object.assign||function(U){for(var d=1;d<arguments.length;d++){var ee=arguments[d];for(var B in ee)Object.prototype.hasOwnProperty.call(ee,B)&&(U[B]=ee[B])}return U},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0,_e.apply(this,arguments)}Ye.exports=_e,Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0},9162:(Ye,_e,U)=>{"use strict";function ce(G,re,Te,Ee){return new(Te||(Te=Promise))(function(Y,ge){function Pe(qe){try{Me(Ee.next(qe))}catch(ot){ge(ot)}}function Ge(qe){try{Me(Ee.throw(qe))}catch(ot){ge(ot)}}function Me(qe){qe.done?Y(qe.value):function(Y){return Y instanceof Te?Y:new Te(function(ge){ge(Y)})}(qe.value).then(Pe,Ge)}Me((Ee=Ee.apply(G,re||[])).next())})}function ye(G){return this instanceof ye?(this.v=G,this):new ye(G)}function le(G,re,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Ee=Te.apply(G,re||[]),Y=[];return Ue={},ge("next"),ge("throw"),ge("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function ge(kt){Ee[kt]&&(Ue[kt]=function(Ht){return new Promise(function(Lt,Pt){Y.push([kt,Ht,Lt,Pt])>1||Pe(kt,Ht)})})}function Pe(kt,Ht){try{!function(kt){kt.value instanceof ye?Promise.resolve(kt.value.v).then(Me,qe):ot(Y[0][2],kt)}(Ee[kt](Ht))}catch(Lt){ot(Y[0][3],Lt)}}function Me(kt){Pe("next",kt)}function qe(kt){Pe("throw",kt)}function ot(kt,Ht){kt(Ht),Y.shift(),Y.length&&Pe(Y[0][0],Y[0][1])}}function Ve(G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,re=G[Symbol.asyncIterator];return re?re.call(G):(G=function(G){var re="function"==typeof Symbol&&Symbol.iterator,Te=re&&G[re],Ee=0;if(Te)return Te.call(G);if(G&&"number"==typeof G.length)return{next:function(){return G&&Ee>=G.length&&(G=void 0),{value:G&&G[Ee++],done:!G}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(G),Te={},Ee("next"),Ee("throw"),Ee("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function Ee(Y){Te[Y]=G[Y]&&function(ge){return new Promise(function(Pe,Ge){!function(Y,ge,Pe,Ge){Promise.resolve(Ge).then(function(Me){Y({value:Me,done:Pe})},ge)}(Pe,Ge,(ge=G[Y](ge)).done,ge.value)})}}}U.d(_e,{mG:()=>ce,qq:()=>ye,FC:()=>le,KL:()=>Ve})},5893:()=>{},3668:(Ye,_e,U)=>{"use strict";U.d(_e,{deG:()=>Oc,tb:()=>yE,AFp:()=>O_,ip1:()=>pv,CZH:()=>Yp,hGG:()=>Kx,z2F:()=>fd,sBO:()=>Hx,Sil:()=>_E,_Vd:()=>Fh,EJc:()=>ju,SBq:()=>tv,qLn:()=>ih,vpe:()=>Ca,tBr:()=>mr,XFs:()=>Jt,OlP:()=>Jn,zs3:()=>Uo,ZZ4:()=>W_,aQg:()=>z_,soG:()=>Qp,YKP:()=>b_,h0i:()=>jh,PXZ:()=>C1,R0b:()=>Go,FiY:()=>yi,Lbi:()=>$h,g9A:()=>N_,n_E:()=>w_,Qsj:()=>Up,FYo:()=>nv,JOm:()=>va,q3G:()=>Ir,tp0:()=>us,Rgc:()=>qp,dDg:()=>j_,q4F:()=>Xl,GfV:()=>LT,s_b:()=>Bh,ifc:()=>jt,eFA:()=>Bx,G48:()=>NE,Gpc:()=>ue,X6Q:()=>Xp,_c5:()=>MR,VLi:()=>w1,c2e:()=>Ox,zSh:()=>nu,wAp:()=>dn,vHH:()=>rt,EiD:()=>Gg,mCW:()=>Il,qzn:()=>Uc,JVY:()=>Bc,pB0:()=>q0,eBb:()=>Qd,L6k:()=>jg,LAX:()=>Jv,cg1:()=>u_,kL8:()=>DC,yhl:()=>Yd,dqk:()=>ln,sIi:()=>fp,CqO:()=>wh,QGY:()=>ba,F4k:()=>_p,RDi:()=>mg,AaK:()=>ce,z3N:()=>No,qOj:()=>Vy,TTD:()=>aa,_Bn:()=>OT,xp6:()=>Yi,uIk:()=>$y,ekj:()=>jm,Suo:()=>vx,Xpm:()=>X,lG2:()=>pi,Yz7:()=>Pt,cJS:()=>pn,oAB:()=>dr,Yjl:()=>rs,Y36:()=>km,_UZ:()=>lT,BQk:()=>Ky,ynx:()=>yp,qZA:()=>Pm,TgZ:()=>sd,EpF:()=>od,n5z:()=>Rc,LFG:()=>Oe,$8M:()=>uo,$Z:()=>Ei,NdJ:()=>Yy,CRH:()=>A_,kcU:()=>wf,O4$:()=>Eu,oxw:()=>dT,ALo:()=>cx,lcZ:()=>zT,Hsn:()=>bp,F$t:()=>Om,Q6J:()=>uT,DdM:()=>BT,VKq:()=>VT,WLB:()=>ix,iGM:()=>mx,MAs:()=>WS,CHM:()=>Do,LSH:()=>Uf,YNc:()=>qS,W1O:()=>Hh,_uU:()=>Ah,Oqu:()=>i_,hij:()=>Bm,AsE:()=>Dh,Gf:()=>I_});var d=U(273),ee=U(7908),B=U(8410),ae=U(3719),ie=U(3174);function he(a){for(let u in a)if(a[u]===he)return u;throw Error("Could not find renamed property on target object.")}function pe(a,u){for(const l in u)u.hasOwnProperty(l)&&!a.hasOwnProperty(l)&&(a[l]=u[l])}function ce(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ce).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const u=a.toString();if(null==u)return""+u;const l=u.indexOf("\n");return-1===l?u:u.substring(0,l)}function fe(a,u){return null==a||""===a?null===u?"":u:null==u||""===u?a:a+" "+u}const Q=he({__forward_ref__:he});function ue(a){return a.__forward_ref__=ue,a.toString=function(){return ce(this())},a}function ne(a){return et(a)?a():a}function et(a){return"function"==typeof a&&a.hasOwnProperty(Q)&&a.__forward_ref__===ue}class rt extends Error{constructor(u,l){super(function(a,u){return`${a?`NG0${a}: `:""}${u}`}(u,l)),this.code=u}}function le(a){return"string"==typeof a?a:null==a?"":String(a)}function Ie(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():le(a)}function Ke(a,u){const l=u?` in ${u}`:"";throw new rt("201",`No provider for ${Ie(a)} found${l}`)}function qe(a,u){null==a&&function(a,u,l,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${l} ${h} ${u} <=Actual]`))}(u,a,null,"!=")}function Pt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function pn(a){return{providers:a.providers||[],imports:a.imports||[]}}function On(a){return sn(a,ki)||sn(a,An)}function sn(a,u){return a.hasOwnProperty(u)?a[u]:null}function Un(a){return a&&(a.hasOwnProperty(ht)||a.hasOwnProperty(ar))?a[ht]:null}const ki=he({\u0275prov:he}),ht=he({\u0275inj:he}),An=he({ngInjectableDef:he}),ar=he({ngInjectorDef:he});var Jt=(()=>((Jt=Jt||{})[Jt.Default=0]="Default",Jt[Jt.Host=1]="Host",Jt[Jt.Self=2]="Self",Jt[Jt.SkipSelf=4]="SkipSelf",Jt[Jt.Optional=8]="Optional",Jt))();let In;function Br(a){const u=In;return In=a,u}function Rt(a,u,l){const h=On(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&Jt.Optional?null:void 0!==u?u:void Ke(ce(a),"Injector")}function vn(a){return{toString:a}.toString()}var yn=(()=>((yn=yn||{})[yn.OnPush=0]="OnPush",yn[yn.Default=1]="Default",yn))(),jt=(()=>{return(a=jt||(jt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",jt;var a})();const Yt="undefined"!=typeof globalThis&&globalThis,pu="undefined"!=typeof window&&window,js="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ln=Yt||"undefined"!=typeof global&&global||pu||js,xe={},de=[],ke=he({\u0275cmp:he}),at=he({\u0275dir:he}),ze=he({\u0275pipe:he}),Vt=he({\u0275mod:he}),nn=he({\u0275fac:he}),Gn=he({__NG_ELEMENT_ID__:he});let K=0;function X(a){return vn(()=>{const l={},h={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===yn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||de,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||jt.Emulated,id:"c",styles:a.styles||de,_:null,setInput:null,schemas:a.schemas||null,tView:null},p=a.directives,y=a.features,T=a.pipes;return h.id+=K++,h.inputs=Es(a.inputs,l),h.outputs=Es(a.outputs),y&&y.forEach(x=>x(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(We):null,h.pipeDefs=T?()=>("function"==typeof T?T():T).map(vt):null,h})}function We(a){return Bn(a)||function(a){return a[at]||null}(a)}function vt(a){return function(a){return a[ze]||null}(a)}const bn={};function dr(a){return vn(()=>{const u={type:a.type,bootstrap:a.bootstrap||de,declarations:a.declarations||de,imports:a.imports||de,exports:a.exports||de,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(bn[a.id]=a.type),u})}function Es(a,u){if(null==a)return xe;const l={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),l[p]=h,u&&(u[p]=y)}return l}const pi=X;function rs(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function Bn(a){return a[ke]||null}function hr(a,u){const l=a[Vt]||null;if(!l&&!0===u)throw new Error(`Type ${ce(a)} does not have '\u0275mod' property.`);return l}function ro(a){return Array.isArray(a)&&"object"==typeof a[1]}function io(a){return Array.isArray(a)&&!0===a[1]}function Xr(a){return 0!=(8&a.flags)}function xo(a){return 2==(2&a.flags)}function Id(a){return 1==(1&a.flags)}function Ss(a){return null!==a.template}function hg(a){return 0!=(512&a[2])}function so(a,u){return a.hasOwnProperty(nn)?a[nn]:null}class kd{constructor(u,l,h){this.previousValue=u,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function aa(){return yu}function yu(a){return a.type.prototype.ngOnChanges&&(a.setInput=_u),ua}function ua(){const a=gi(this),u=null==a?void 0:a.current;if(u){const l=a.previous;if(l===xe)a.previous=u;else for(let h in u)l[h]=u[h];a.current=null,this.ngOnChanges(u)}}function _u(a,u,l,h){const p=gi(a)||function(a,u){return a[vf]=u}(a,{previous:xe,current:null}),y=p.current||(p.current={}),T=p.previous,x=this.declaredInputs[l],k=T[x];y[x]=new kd(k&&k.currentValue,u,T===xe),a[h]=u}aa.ngInherit=!0;const vf="__ngSimpleChanges__";function gi(a){return a[vf]||null}const _f="http://www.w3.org/2000/svg";let vc;function mg(a){vc=a}function Kn(a){return!!a.listen}const Md={createRenderer:(a,u)=>void 0!==vc?vc:"undefined"!=typeof document?document:void 0};function Mr(a){for(;Array.isArray(a);)a=a[0];return a}function Vs(a,u){return Mr(u[a])}function Rr(a,u){return Mr(u[a.index])}function La(a,u){return a.data[u]}function Fa(a,u){return a[u]}function $n(a,u){const l=u[a];return ro(l)?l:l[0]}function Ao(a){return 4==(4&a[2])}function el(a){return 128==(128&a[2])}function $i(a,u){return null==u?null:a[u]}function tl(a){a[18]=0}function la(a,u){a[5]+=u;let l=a,h=a[3];for(;null!==h&&(1===u&&1===l[5]||-1===u&&0===l[5]);)h[5]+=u,l=h,h=h[3]}const Wt={lFrame:Nd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function bc(){return Wt.bindingsEnabled}function ft(){return Wt.lFrame.lView}function kn(){return Wt.lFrame.tView}function Do(a){return Wt.lFrame.contextLView=a,a[8]}function fr(){let a=il();for(;null!==a&&64===a.type;)a=a.parent;return a}function il(){return Wt.lFrame.currentTNode}function mi(a,u){const l=Wt.lFrame;l.currentTNode=a,l.isParent=u}function Ec(){return Wt.lFrame.isParent}function Ua(){Wt.lFrame.isParent=!1}function sl(){return Wt.isInCheckNoChangesMode}function Ba(a){Wt.isInCheckNoChangesMode=a}function oi(){const a=Wt.lFrame;let u=a.bindingRootIndex;return-1===u&&(u=a.bindingRootIndex=a.tView.bindingStartIndex),u}function da(){return Wt.lFrame.bindingIndex++}function oo(a){const u=Wt.lFrame,l=u.bindingIndex;return u.bindingIndex=u.bindingIndex+a,l}function ll(a,u){const l=Wt.lFrame;l.bindingIndex=l.bindingRootIndex=a,cl(u)}function cl(a){Wt.lFrame.currentDirectiveIndex=a}function Sc(){return Wt.lFrame.currentQueryIndex}function dl(a){Wt.lFrame.currentQueryIndex=a}function Tf(a){const u=a[1];return 2===u.type?u.declTNode:1===u.type?a[6]:null}function Cc(a,u,l){if(l&Jt.SkipSelf){let p=u,y=a;for(;!(p=p.parent,null!==p||l&Jt.Host||(p=Tf(y),null===p||(y=y[15],10&p.type))););if(null===p)return!1;u=p,a=y}const h=Wt.lFrame=hl();return h.currentTNode=u,h.lView=a,!0}function xc(a){const u=hl(),l=a[1];Wt.lFrame=u,u.currentTNode=l.firstChild,u.lView=a,u.tView=l,u.contextLView=a,u.bindingIndex=l.bindingStartIndex,u.inI18n=!1}function hl(){const a=Wt.lFrame,u=null===a?null:a.child;return null===u?Nd(a):u}function Nd(a){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=u),u}function fl(){const a=Wt.lFrame;return Wt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Ef=fl;function pl(){const a=fl();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function rr(){return Wt.lFrame.selectedIndex}function ha(a){Wt.lFrame.selectedIndex=a}function pr(){const a=Wt.lFrame;return La(a.tView,a.selectedIndex)}function Eu(){Wt.lFrame.currentNamespace=_f}function wf(){Wt.lFrame.currentNamespace=null}function fa(a,u){for(let l=u.directiveStart,h=u.directiveEnd;l<h;l++){const y=a.data[l].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:x,ngAfterViewInit:k,ngAfterViewChecked:j,ngOnDestroy:q}=y;T&&(a.contentHooks||(a.contentHooks=[])).push(-l,T),x&&((a.contentHooks||(a.contentHooks=[])).push(l,x),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(l,x)),k&&(a.viewHooks||(a.viewHooks=[])).push(-l,k),j&&((a.viewHooks||(a.viewHooks=[])).push(l,j),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(l,j)),null!=q&&(a.destroyHooks||(a.destroyHooks=[])).push(l,q)}}function Ic(a,u,l){Fd(a,u,3,l)}function gl(a,u,l,h){(3&a[2])===l&&Fd(a,u,l,h)}function Cf(a,u){let l=a[2];(3&l)===u&&(l&=2047,l+=1,a[2]=l)}function Fd(a,u,l,h){const y=null!=h?h:-1,T=u.length-1;let x=0;for(let k=void 0!==h?65535&a[18]:0;k<T;k++)if("number"==typeof u[k+1]){if(x=u[k],null!=h&&x>=h)break}else u[k]<0&&(a[18]+=65536),(x<y||-1==y)&&(xf(a,l,u,k),a[18]=(4294901760&a[18])+k+2),k++}function xf(a,u,l,h){const p=l[h]<0,y=l[h+1],x=a[p?-l[h]:l[h]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===u){a[2]+=2048;try{y.call(x)}finally{}}}else try{y.call(x)}finally{}}class ml{constructor(u,l,h){this.factory=u,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function qn(a,u,l){const h=Kn(a);let p=0;for(;p<l.length;){const y=l[p];if("number"==typeof y){if(0!==y)break;p++;const T=l[p++],x=l[p++],k=l[p++];h?a.setAttribute(u,x,k,T):u.setAttributeNS(T,x,k)}else{const T=y,x=l[++p];$t(T)?h&&a.setProperty(u,T,x):h?a.setAttribute(u,T,x):u.setAttribute(T,x),p++}}return p}function Ha(a){return 3===a||4===a||6===a}function $t(a){return 64===a.charCodeAt(0)}function ao(a,u){if(null!==u&&0!==u.length)if(null===a||0===a.length)a=u.slice();else{let l=-1;for(let h=0;h<u.length;h++){const p=u[h];"number"==typeof p?l=p:0===l||Cs(a,l,p,null,-1===l||2===l?u[++h]:null)}}return a}function Cs(a,u,l,h,p){let y=0,T=a.length;if(-1===u)T=-1;else for(;y<a.length;){const x=a[y++];if("number"==typeof x){if(x===u){T=-1;break}if(x>u){T=y-1;break}}}for(;y<a.length;){const x=a[y];if("number"==typeof x)break;if(x===l){if(null===h)return void(null!==p&&(a[y+1]=p));if(h===a[y+1])return void(a[y+2]=p)}y++,null!==h&&y++,null!==p&&y++}-1!==T&&(a.splice(T,0,u),y=T+1),a.splice(y++,0,l),null!==h&&a.splice(y++,0,h),null!==p&&a.splice(y++,0,p)}function qi(a){return-1!==a}function Su(a){return 32767&a}function vl(a,u){let l=function(a){return a>>16}(a),h=u;for(;l>0;)h=h[15],l--;return h}let kc=!0;function Ga(a){const u=kc;return kc=a,u}let Tg=0;function Cu(a,u){const l=Sr(a,u);if(-1!==l)return l;const h=u[1];h.firstCreatePass&&(a.injectorIndex=u.length,xu(h.data,a),xu(u,null),xu(h.blueprint,null));const p=Pc(a,u),y=a.injectorIndex;if(qi(p)){const T=Su(p),x=vl(p,u),k=x[1].data;for(let j=0;j<8;j++)u[y+j]=x[T+j]|k[T+j]}return u[y+8]=p,y}function xu(a,u){a.push(0,0,0,0,0,0,0,0,u)}function Sr(a,u){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===u[a.injectorIndex+8]?-1:a.injectorIndex}function Pc(a,u){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let l=0,h=null,p=u;for(;null!==p;){const y=p[1],T=y.type;if(h=2===T?y.declTNode:1===T?p[6]:null,null===h)return-1;if(l++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return-1}function Gs(a,u,l){!function(a,u,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(Gn)&&(h=l[Gn]),null==h&&(h=l[Gn]=Tg++);const p=255&h;u.data[a+(p>>5)]|=1<<p}(a,u,l)}function $s(a,u,l){if(l&Jt.Optional)return a;Ke(u,"NodeInjector")}function jd(a,u,l,h){if(l&Jt.Optional&&void 0===h&&(h=null),0==(l&(Jt.Self|Jt.Host))){const p=a[9],y=Br(void 0);try{return p?p.get(u,h,l&Jt.Optional):Rt(u,h,l&Jt.Optional)}finally{Br(y)}}return $s(h,u,l)}function Iu(a,u,l,h=Jt.Default,p){if(null!==a){const y=function(a){if("string"==typeof a)return a.charCodeAt(0)||0;const u=a.hasOwnProperty(Gn)?a[Gn]:void 0;return"number"==typeof u?u>=0?255&u:yl:u}(l);if("function"==typeof y){if(!Cc(u,a,h))return h&Jt.Host?$s(p,l,h):jd(u,l,h,p);try{const T=y(h);if(null!=T||h&Jt.Optional)return T;Ke(l)}finally{Ef()}}else if("number"==typeof y){let T=null,x=Sr(a,u),k=-1,j=h&Jt.Host?u[16][6]:null;for((-1===x||h&Jt.SkipSelf)&&(k=-1===x?Pc(a,u):u[x+8],-1!==k&&vi(h,!1)?(T=u[1],x=Su(k),u=vl(k,u)):x=-1);-1!==x;){const q=u[1];if(qa(y,x,q.data)){const te=Mc(x,u,l,T,h,j);if(te!==$a)return te}k=u[x+8],-1!==k&&vi(h,u[1].data[x+8]===j)&&qa(y,x,u)?(T=q,x=Su(k),u=vl(k,u)):x=-1}}}return jd(u,l,h,p)}const $a={};function yl(){return new lr(fr(),ft())}function Mc(a,u,l,h,p,y){const T=u[1],x=T.data[a+8],q=Jr(x,T,l,null==h?xo(x)&&kc:h!=T&&0!=(3&x.type),p&Jt.Host&&y===x);return null!==q?ga(u,T,q,x):$a}function Jr(a,u,l,h,p){const y=a.providerIndexes,T=u.data,x=1048575&y,k=a.directiveStart,q=y>>20,we=p?x+q:a.directiveEnd;for(let Be=h?x:x+q;Be<we;Be++){const it=T[Be];if(Be<k&&l===it||Be>=k&&it.type===l)return Be}if(p){const Be=T[k];if(Be&&Ss(Be)&&Be.type===l)return k}return null}function ga(a,u,l,h){let p=a[l];const y=u.data;if(function(a){return a instanceof ml}(p)){const T=p;T.resolving&&function(a,u){throw new rt("200",`Circular dependency in DI detected for ${a}`)}(Ie(y[l]));const x=Ga(T.canSeeViewProviders);T.resolving=!0;const k=T.injectImpl?Br(T.injectImpl):null;Cc(a,h,Jt.Default);try{p=a[l]=T.factory(void 0,y,a,h),u.firstCreatePass&&l>=h.directiveStart&&function(a,u,l){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:y}=u.type.prototype;if(h){const T=yu(u);(l.preOrderHooks||(l.preOrderHooks=[])).push(a,T),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(a,T)}p&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-a,p),y&&((l.preOrderHooks||(l.preOrderHooks=[])).push(a,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(a,y))}(l,y[l],u)}finally{null!==k&&Br(k),Ga(x),T.resolving=!1,Ef()}}return p}function qa(a,u,l){return!!(l[u+(a>>5)]&1<<a)}function vi(a,u){return!(a&Jt.Self||a&Jt.Host&&u)}class lr{constructor(u,l){this._tNode=u,this._lView=l}get(u,l,h){return Iu(this._tNode,this._lView,u,h,l)}}function Rc(a){return vn(()=>{const u=a.prototype.constructor,l=u[nn]||gr(u),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const y=p[nn]||gr(p);if(y&&y!==l)return y;p=Object.getPrototypeOf(p)}return y=>new y})}function gr(a){return et(a)?()=>{const u=gr(ne(a));return u&&u()}:so(a)}function uo(a){return function(a,u){if("class"===u)return a.classes;if("style"===u)return a.styles;const l=a.attrs;if(l){const h=l.length;let p=0;for(;p<h;){const y=l[p];if(Ha(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<h&&"string"==typeof l[p];)p++;else{if(y===u)return l[p+1];p+=2}}}return null}(fr(),a)}const ma="__parameters__";function Xn(a,u,l){return vn(()=>{const h=function(a){return function(...l){if(a){const h=a(...l);for(const p in h)this[p]=h[p]}}}(u);function p(...y){if(this instanceof p)return h.apply(this,y),this;const T=new p(...y);return x.annotation=T,x;function x(k,j,q){const te=k.hasOwnProperty(ma)?k[ma]:Object.defineProperty(k,ma,{value:[]})[ma];for(;te.length<=q;)te.push(null);return(te[q]=te[q]||[]).push(T),k}}return l&&(p.prototype=Object.create(l.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class Jn{constructor(u,l){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Pt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Oc=new Jn("AnalyzeForEntryComponents");function as(a,u){void 0===u&&(u=a);for(let l=0;l<a.length;l++){let h=a[l];Array.isArray(h)?(u===a&&(u=a.slice(0,l)),as(h,u)):u!==a&&u.push(h)}return u}function ho(a,u){a.forEach(l=>Array.isArray(l)?ho(l,u):u(l))}function Ud(a,u,l){u>=a.length?a.push(l):a.splice(u,0,l)}function Wa(a,u){return u>=a.length-1?a.pop():a.splice(u,1)[0]}function Au(a,u){const l=[];for(let h=0;h<a;h++)l.push(u);return l}function Mi(a,u,l){let h=Du(a,u);return h>=0?a[1|h]=l:(h=~h,function(a,u,l,h){let p=a.length;if(p==u)a.push(l,h);else if(1===p)a.push(h,a[0]),a[0]=l;else{for(p--,a.push(a[p-1],a[p]);p>u;)a[p]=a[p-2],p--;a[u]=l,a[u+1]=h}}(a,h,u,l)),h}function fo(a,u){const l=Du(a,u);if(l>=0)return a[1|l]}function Du(a,u){return function(a,u,l){let h=0,p=a.length>>l;for(;p!==h;){const y=h+(p-h>>1),T=a[y<<l];if(u===T)return y<<l;T>u?p=y:h=y+1}return~(p<<l)}(a,u,1)}const wl={},Lc="__NG_DI_FLAG__",Ro="ngTempTokenPath",Mg=/\n/gm,P="__source",R=he({provide:String,useValue:he});let z;function se(a){const u=z;return z=a,u}function Le(a,u=Jt.Default){if(void 0===z)throw new Error("inject() must be called from an injection context");return null===z?Rt(a,void 0,u):z.get(a,u&Jt.Optional?null:void 0,u)}function Oe(a,u=Jt.Default){return(In||Le)(ne(a),u)}function Nt(a){const u=[];for(let l=0;l<a.length;l++){const h=ne(a[l]);if(Array.isArray(h)){if(0===h.length)throw new Error("Arguments array must have arguments.");let p,y=Jt.Default;for(let T=0;T<h.length;T++){const x=h[T],k=Wn(x);"number"==typeof k?-1===k?p=x.token:y|=k:p=x}u.push(Oe(p,y))}else u.push(Oe(h))}return u}function Pn(a,u){return a[Lc]=u,a.prototype[Lc]=u,a}function Wn(a){return a[Lc]}const mr=Pn(Xn("Inject",a=>({token:a})),-1),yi=Pn(Xn("Optional"),8),us=Pn(Xn("SkipSelf"),4);let xs;function Ya(a){var u;return(null==(u=function(){if(void 0===xs&&(xs=null,ln.trustedTypes))try{xs=ln.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return xs}())?void 0:u.createHTML(a))||a}class Pu{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Nf extends Pu{getTypeName(){return"HTML"}}class Zd extends Pu{getTypeName(){return"Style"}}class G0 extends Pu{getTypeName(){return"Script"}}class Kd extends Pu{getTypeName(){return"URL"}}class $0 extends Pu{getTypeName(){return"ResourceURL"}}function No(a){return a instanceof Pu?a.changingThisBreaksApplicationSecurity:a}function Uc(a,u){const l=Yd(a);if(null!=l&&l!==u){if("ResourceURL"===l&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===u}function Yd(a){return a instanceof Pu&&a.getTypeName()||null}function Bc(a){return new Nf(a)}function jg(a){return new Zd(a)}function Qd(a){return new G0(a)}function Jv(a){return new Kd(a)}function q0(a){return new $0(a)}class W0{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const l=(new window.DOMParser).parseFromString(Ya(u),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(u):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class z0{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const h=this.inertDocument.createElement("body");l.appendChild(h)}}getInertBodyElement(u){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Ya(u),l;const h=this.inertDocument.createElement("body");return h.innerHTML=Ya(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(u){const l=u.attributes;for(let p=l.length-1;0<p;p--){const T=l.item(p).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&u.removeAttribute(T)}let h=u.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const ey=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Il(a){return(a=String(a)).match(ey)||a.match(Bg)?a:"unsafe:"+a}function Lo(a){const u={};for(const l of a.split(","))u[l]=!0;return u}function Vc(...a){const u={};for(const l of a)for(const h in l)l.hasOwnProperty(h)&&(u[h]=!0);return u}const ny=Lo("area,br,col,hr,img,wbr"),Vg=Lo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ry=Lo("rp,rt"),Fo=Vc(ny,Vc(Vg,Lo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vc(ry,Lo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vc(ry,Vg)),Hg=Lo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xd=Lo("srcset"),Hc=Vc(Hg,Xd,Lo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Dl=Lo("script,style,template");class Y0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let l=u.firstChild,h=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?h=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,h&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let p=this.checkClobberedElement(l,l.nextSibling);if(p){l=p;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(u){const l=u.nodeName.toLowerCase();if(!Fo.hasOwnProperty(l))return this.sanitizedSomething=!0,!Dl.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const h=u.attributes;for(let p=0;p<h.length;p++){const y=h.item(p),T=y.name,x=T.toLowerCase();if(!Hc.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let k=y.value;Hg[x]&&(k=Il(k)),Xd[x]&&(a=k,k=(a=String(a)).split(",").map(u=>Il(u.trim())).join(", ")),this.buf.push(" ",T,'="',sy(k),'"')}var a;return this.buf.push(">"),!0}endElement(u){const l=u.nodeName.toLowerCase();Fo.hasOwnProperty(l)&&!ny.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(u){this.buf.push(sy(u))}checkClobberedElement(u,l){if(l&&(u.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return l}}const Gc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ff=/([^\#-~ |!])/g;function sy(a){return a.replace(/&/g,"&amp;").replace(Gc,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(Ff,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jd;function Gg(a,u){let l=null;try{Jd=Jd||function(a){const u=new z0(a);return function(){try{return!!(new window.DOMParser).parseFromString(Ya(""),"text/html")}catch(a){return!1}}()?new W0(u):u}(a);let h=u?String(u):"";l=Jd.getInertBodyElement(h);let p=5,y=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=y,y=l.innerHTML,l=Jd.getInertBodyElement(h)}while(h!==y);return Ya((new Y0).sanitizeChildren(oy(l)||l))}finally{if(l){const h=oy(l)||l;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function oy(a){return"content"in a&&function(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Ir=(()=>((Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir))();function Uf(a){const u=function(){const a=ft();return a&&a[12]}();return u?u.sanitize(Ir.URL,a)||"":Uc(a,"URL")?No(a):Il(le(a))}const Hf="__ngContext__";function _i(a,u){a[Hf]=u}function qg(a){const u=function(a){return a[Hf]||null}(a);return u?Array.isArray(u)?u:u.lView:null}function Zg(a){return a.ngOriginalError}function ob(a,...u){a.error(...u)}class ih{constructor(){this._console=console}handleError(u){const l=this._findOriginalError(u),h=(a=u)&&a.ngErrorLogger||ob;var a;h(this._console,"ERROR",u),l&&h(this._console,"ORIGINAL ERROR",l)}_findOriginalError(u){let l=u&&Zg(u);for(;l&&Zg(l);)l=Zg(l);return l||null}}const Xg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ln))();function vo(a){return a instanceof Function?a():a}var va=(()=>((va=va||{})[va.Important=1]="Important",va[va.DashCase=2]="DashCase",va))();function Wc(a,u){return undefined(a,u)}function Ll(a){const u=a[3];return io(u)?u[3]:u}function Fl(a){return tm(a[13])}function Kf(a){return tm(a[4])}function tm(a){for(;null!==a&&!io(a);)a=a[4];return a}function Xa(a,u,l,h,p){if(null!=h){let y,T=!1;io(h)?y=h:ro(h)&&(T=!0,h=h[0]);const x=Mr(h);0===a&&null!==l?null==p?oh(u,l,x):As(u,l,x,p||null,!0):1===a&&null!==l?As(u,l,x,p||null,!0):2===a?function(a,u,l){const h=ah(a,u);h&&function(a,u,l,h){Kn(a)?a.removeChild(u,l,h):u.removeChild(l)}(a,h,u,l)}(u,x,T):3===a&&u.destroyNode(x),null!=y&&function(a,u,l,h,p){const y=l[7];y!==Mr(l)&&Xa(u,a,h,y,p);for(let x=10;x<l.length;x++){const k=l[x];Xe(k[1],k,a,u,h,y)}}(u,a,y,l,p)}}function rm(a,u,l){return Kn(a)?a.createElement(u,l):null===l?a.createElement(u):a.createElementNS(l,u)}function me(a,u){const l=a[9],h=l.indexOf(u),p=u[3];1024&u[2]&&(u[2]&=-1025,la(p,-1)),l.splice(h,1)}function Qe(a,u){if(a.length<=10)return;const l=10+u,h=a[l];if(h){const p=h[17];null!==p&&p!==a&&me(p,h),u>0&&(a[l-1][4]=h[4]);const y=Wa(a,10+u);!function(a,u){Xe(a,u,u[11],2,null,null),u[0]=null,u[6]=null}(h[1],h);const T=y[19];null!==T&&T.detachView(y[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function wt(a,u){if(!(256&u[2])){const l=u[11];Kn(l)&&l.destroyNode&&Xe(a,u,l,3,null,null),function(a){let u=a[13];if(!u)return yt(a[1],a);for(;u;){let l=null;if(ro(u))l=u[13];else{const h=u[10];h&&(l=h)}if(!l){for(;u&&!u[4]&&u!==a;)ro(u)&&yt(u[1],u),u=u[3];null===u&&(u=a),ro(u)&&yt(u[1],u),l=u&&u[4]}u=l}}(u)}}function yt(a,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function(a,u){let l;if(null!=a&&null!=(l=a.destroyHooks))for(let h=0;h<l.length;h+=2){const p=u[l[h]];if(!(p instanceof ml)){const y=l[h+1];if(Array.isArray(y))for(let T=0;T<y.length;T+=2){const x=p[y[T]],k=y[T+1];try{k.call(x)}finally{}}else try{y.call(p)}finally{}}}}(a,u),function(a,u){const l=a.cleanup,h=u[7];let p=-1;if(null!==l)for(let y=0;y<l.length-1;y+=2)if("string"==typeof l[y]){const T=l[y+1],x="function"==typeof T?T(u):Mr(u[T]),k=h[p=l[y+2]],j=l[y+3];"boolean"==typeof j?x.removeEventListener(l[y],k,j):j>=0?h[p=j]():h[p=-j].unsubscribe(),y+=2}else{const T=h[p=l[y+1]];l[y].call(T)}if(null!==h){for(let y=p+1;y<h.length;y++)h[y]();u[7]=null}}(a,u),1===u[1].type&&Kn(u[11])&&u[11].destroy();const l=u[17];if(null!==l&&io(u[3])){l!==u[3]&&me(l,u);const h=u[19];null!==h&&h.detachView(a)}}}function Tn(a,u,l){return function(a,u,l){let h=u;for(;null!==h&&40&h.type;)h=(u=h).parent;if(null===h)return l[0];if(2&h.flags){const p=a.data[h.directiveStart].encapsulation;if(p===jt.None||p===jt.Emulated)return null}return Rr(h,l)}(a,u.parent,l)}function As(a,u,l,h,p){Kn(a)?a.insertBefore(u,l,h,p):u.insertBefore(l,h,p)}function oh(a,u,l){Kn(a)?a.appendChild(u,l):u.appendChild(l)}function jl(a,u,l,h,p){null!==h?As(a,u,l,h,p):oh(a,u,l)}function ah(a,u){return Kn(a)?a.parentNode(u):u.parentNode}function Yf(a,u,l){return Qf(a,u,l)}let Qf=function(a,u,l){return 40&a.type?Rr(a,l):null};function zc(a,u,l,h){const p=Tn(a,h,u),y=u[11],x=Yf(h.parent||u[6],h,u);if(null!=p)if(Array.isArray(l))for(let k=0;k<l.length;k++)jl(y,p,l[k],x,!1);else jl(y,p,l,x,!1)}function ep(a,u){if(null!==u){const l=u.type;if(3&l)return Rr(u,a);if(4&l)return hb(-1,a[u.index]);if(8&l){const h=u.child;if(null!==h)return ep(a,h);{const p=a[u.index];return io(p)?hb(-1,p):Mr(p)}}if(32&l)return Wc(u,a)()||Mr(a[u.index]);{const h=db(a,u);return null!==h?Array.isArray(h)?h[0]:ep(Ll(a[16]),h):ep(a,u.next)}}return null}function db(a,u){return null!==u?a[16][6].projection[u.projection]:null}function hb(a,u){const l=10+a+1;if(l<u.length){const h=u[l],p=h[1].firstChild;if(null!==p)return ep(h,p)}return u[7]}function fb(a,u,l,h,p,y,T){for(;null!=l;){const x=h[l.index],k=l.type;if(T&&0===u&&(x&&_i(Mr(x),h),l.flags|=4),64!=(64&l.flags))if(8&k)fb(a,u,l.child,h,p,y,!1),Xa(u,a,p,x,y);else if(32&k){const j=Wc(l,h);let q;for(;q=j();)Xa(u,a,p,q,y);Xa(u,a,p,x,y)}else 16&k?Ar(a,u,h,l,p,y):Xa(u,a,p,x,y);l=T?l.projectionNext:l.next}}function Xe(a,u,l,h,p,y){fb(l,h,a.firstChild,u,p,y,!1)}function Ar(a,u,l,h,p,y){const T=l[16],k=T[6].projection[h.projection];if(Array.isArray(k))for(let j=0;j<k.length;j++)Xa(u,a,p,k[j],y);else fb(a,u,k,T[3],p,y,!0)}function Jw(a,u,l){Kn(a)?a.setAttribute(u,"style",l):u.style.cssText=l}function ls(a,u,l){Kn(a)?""===l?a.removeAttribute(u,"class"):a.setAttribute(u,"class",l):u.className=l}function KA(a,u,l){let h=a.length;for(;;){const p=a.indexOf(u,l);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const y=u.length;if(p+y===h||a.charCodeAt(p+y)<=32)return p}l=p+1}}const ya="ng-template";function tp(a,u,l){let h=0;for(;h<a.length;){let p=a[h++];if(l&&"class"===p){if(p=a[h],-1!==KA(p.toLowerCase(),u,0))return!0}else if(1===p){for(;h<a.length&&"string"==typeof(p=a[h++]);)if(p.toLowerCase()===u)return!0;return!1}}return!1}function Ul(a){return 4===a.type&&a.value!==ya}function mn(a,u,l){return u===(4!==a.type||l?a.value:ya)}function QA(a,u,l){let h=4;const p=a.attrs||[],y=function(a){for(let u=0;u<a.length;u++)if(Ha(a[u]))return u;return a.length}(p);let T=!1;for(let x=0;x<u.length;x++){const k=u[x];if("number"!=typeof k){if(!T)if(4&h){if(h=2|1&h,""!==k&&!mn(a,k,l)||""===k&&1===u.length){if(Oi(h))return!1;T=!0}}else{const j=8&h?k:u[++x];if(8&h&&null!==a.attrs){if(!tp(a.attrs,j,l)){if(Oi(h))return!1;T=!0}continue}const te=Zt(8&h?"class":k,p,Ul(a),l);if(-1===te){if(Oi(h))return!1;T=!0;continue}if(""!==j){let we;we=te>y?"":p[te+1].toLowerCase();const Be=8&h?we:null;if(Be&&-1!==KA(Be,j,0)||2&h&&j!==we){if(Oi(h))return!1;T=!0}}}}else{if(!T&&!Oi(h)&&!Oi(k))return!1;if(T&&Oi(k))continue;T=!1,h=k|1&h}}return Oi(h)||T}function Oi(a){return 0==(1&a)}function Zt(a,u,l,h){if(null===u)return-1;let p=0;if(h||!l){let y=!1;for(;p<u.length;){const T=u[p];if(T===a)return p;if(3===T||6===T)y=!0;else{if(1===T||2===T){let x=u[++p];for(;"string"==typeof x;)x=u[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=y?1:2}return-1}return function(a,u){let l=a.indexOf(4);if(l>-1)for(l++;l<a.length;){const h=a[l];if("number"==typeof h)return-1;if(h===u)return l;l++}return-1}(u,a)}function gy(a,u,l=!1){for(let h=0;h<u.length;h++)if(QA(a,u[h],l))return!0;return!1}function om(a,u){e:for(let l=0;l<u.length;l++){const h=u[l];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function eS(a,u){return a?":not("+u.trim()+")":u}function mb(a){let u=a[0],l=1,h=2,p="",y=!1;for(;l<a.length;){let T=a[l];if("string"==typeof T)if(2&h){const x=a[++l];p+="["+T+(x.length>0?'="'+x+'"':"")+"]"}else 8&h?p+="."+T:4&h&&(p+=" "+T);else""!==p&&!Oi(T)&&(u+=eS(y,p),p=""),h=T,y=y||!Oi(h);l++}return""!==p&&(u+=eS(y,p)),u}const xn={};function Yi(a){am(kn(),ft(),rr()+a,sl())}function am(a,u,l,h){if(!h)if(3==(3&u[2])){const y=a.preOrderCheckHooks;null!==y&&Ic(u,y,l)}else{const y=a.preOrderHooks;null!==y&&gl(u,y,0,l)}ha(l)}function Ja(a,u){return a<<17|u<<2}function eu(a){return a>>17&32767}function vy(a){return 2|a}function Bl(a){return(131068&a)>>2}function yy(a,u){return-131069&a|u<<2}function np(a){return 1|a}function Tb(a,u){const l=a.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const p=l[h],y=l[h+1];if(-1!==y){const T=a.data[y];dl(p),T.contentQueries(2,u[y],y)}}}function ip(a,u,l,h,p,y,T,x,k,j){const q=u.blueprint.slice();return q[0]=p,q[2]=140|h,tl(q),q[3]=q[15]=a,q[8]=l,q[10]=T||a&&a[10],q[11]=x||a&&a[11],q[12]=k||a&&a[12]||null,q[9]=j||a&&a[9]||null,q[6]=y,q[16]=2==u.type?a[16]:q,q}function sp(a,u,l,h,p){let y=a.data[u];if(null===y)y=function(a,u,l,h,p){const y=il(),T=Ec(),k=a.data[u]=function(a,u,l,h,p,y){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?y:y&&y.parent,l,u,h,p);return null===a.firstChild&&(a.firstChild=k),null!==y&&(T?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k)),k}(a,u,l,h,p),Wt.lFrame.inI18n&&(y.flags|=64);else if(64&y.type){y.type=l,y.value=h,y.attrs=p;const T=function(){const a=Wt.lFrame,u=a.currentTNode;return a.isParent?u:u.parent}();y.injectorIndex=null===T?-1:T.injectorIndex}return mi(y,!0),y}function Kc(a,u,l,h){if(0===l)return-1;const p=u.length;for(let y=0;y<l;y++)u.push(h),a.blueprint.push(h),a.data.push(null);return p}function ch(a,u,l){xc(u);try{const h=a.viewQuery;null!==h&&Fb(1,h,l);const p=a.template;null!==p&&pm(a,u,p,1,l),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Tb(a,u),a.staticViewQueries&&Fb(2,a.viewQuery,l);const y=a.components;null!==y&&function(a,u){for(let l=0;l<u.length;l++)Ry(a,u[l])}(u,y)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{u[2]&=-5,pl()}}function Gr(a,u,l,h){const p=u[2];if(256==(256&p))return;xc(u);const y=sl();try{tl(u),function(a){Wt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==l&&pm(a,u,l,2,h);const T=3==(3&p);if(!y)if(T){const j=a.preOrderCheckHooks;null!==j&&Ic(u,j,null)}else{const j=a.preOrderHooks;null!==j&&gl(u,j,0,null),Cf(u,0)}if(function(a){for(let u=Fl(a);null!==u;u=Kf(u)){if(!u[2])continue;const l=u[9];for(let h=0;h<l.length;h++){const p=l[h],y=p[3];0==(1024&p[2])&&la(y,1),p[2]|=1024}}}(u),function(a){for(let u=Fl(a);null!==u;u=Kf(u))for(let l=10;l<u.length;l++){const h=u[l],p=h[1];el(h)&&Gr(p,h,p.template,h[8])}}(u),null!==a.contentQueries&&Tb(a,u),!y)if(T){const j=a.contentCheckHooks;null!==j&&Ic(u,j)}else{const j=a.contentHooks;null!==j&&gl(u,j,1),Cf(u,1)}!function(a,u){const l=a.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const p=l[h];if(p<0)ha(~p);else{const y=p,T=l[++h],x=l[++h];ll(T,y),x(2,u[y])}}}finally{ha(-1)}}(a,u);const x=a.components;null!==x&&function(a,u){for(let l=0;l<u.length;l++)Rb(a,u[l])}(u,x);const k=a.viewQuery;if(null!==k&&Fb(2,k,h),!y)if(T){const j=a.viewCheckHooks;null!==j&&Ic(u,j)}else{const j=a.viewHooks;null!==j&&gl(u,j,2),Cf(u,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),y||(u[2]&=-73),1024&u[2]&&(u[2]&=-1025,la(u[3],-1))}finally{pl()}}function cs(a,u,l,h){const p=u[10],y=!sl(),T=Ao(u);try{y&&!T&&p.begin&&p.begin(),T&&ch(a,u,h),Gr(a,u,l,h)}finally{y&&!T&&p.end&&p.end()}}function pm(a,u,l,h,p){const y=rr(),T=2&h;try{ha(-1),T&&u.length>20&&am(a,u,20,sl()),l(h,p)}finally{ha(y)}}function xy(a,u,l){if(Xr(u)){const p=u.directiveEnd;for(let y=u.directiveStart;y<p;y++){const T=a.data[y];T.contentQueries&&T.contentQueries(1,l[y],y)}}}function wb(a,u,l){!bc()||(function(a,u,l,h){const p=l.directiveStart,y=l.directiveEnd;a.firstCreatePass||Cu(l,u),_i(h,u);const T=l.initialInputs;for(let x=p;x<y;x++){const k=a.data[x],j=Ss(k);j&&bS(u,l,k);const q=ga(u,a,x,l);_i(q,u),null!==T&&TS(0,x-p,q,k,0,T),j&&($n(l.index,u)[8]=q)}}(a,u,l,Rr(l,u)),128==(128&l.flags)&&function(a,u,l){const h=l.directiveStart,p=l.directiveEnd,T=l.index,x=Wt.lFrame.currentDirectiveIndex;try{ha(T);for(let k=h;k<p;k++){const j=a.data[k],q=u[k];cl(k),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Yc(j,q)}}finally{ha(-1),cl(x)}}(a,u,l))}function Sb(a,u,l=Rr){const h=u.localNames;if(null!==h){let p=u.index+1;for(let y=0;y<h.length;y+=2){const T=h[y+1],x=-1===T?l(u,a):a[T];a[p++]=x}}}function Cb(a){const u=a.tView;return null===u||u.incompleteFirstPass?a.tView=Iy(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):u}function Iy(a,u,l,h,p,y,T,x,k,j){const q=20+h,te=q+p,we=function(a,u){const l=[];for(let h=0;h<u;h++)l.push(h<a?null:xn);return l}(q,te),Be="function"==typeof j?j():j;return we[1]={type:a,blueprint:we,template:l,queries:null,viewQuery:x,declTNode:u,data:we.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:k,consts:Be,incompleteFirstPass:!1}}function Dy(a,u,l,h){const p=Em(u);null===l?p.push(h):(p.push(l),a.firstCreatePass&&lp(a).push(h,p.length-1))}function gS(a,u,l){for(let h in a)if(a.hasOwnProperty(h)){const p=a[h];(l=null===l?{}:l).hasOwnProperty(h)?l[h].push(u,p):l[h]=[u,p]}return l}function Ab(a,u,l,h){let p=!1;if(bc()){const y=function(a,u,l){const h=a.directiveRegistry;let p=null;if(h)for(let y=0;y<h.length;y++){const T=h[y];gy(l,T.selectors,!1)&&(p||(p=[]),Gs(Cu(l,u),a,T.type),Ss(T)?(gm(a,l),p.unshift(T)):p.push(T))}return p}(a,u,l),T=null===h?null:{"":-1};if(null!==y){p=!0,Db(l,a.data.length,y.length);for(let q=0;q<y.length;q++){const te=y[q];te.providersResolver&&te.providersResolver(te)}let x=!1,k=!1,j=Kc(a,u,y.length,null);for(let q=0;q<y.length;q++){const te=y[q];l.mergedAttrs=ao(l.mergedAttrs,te.hostAttrs),ks(a,l,u,j,te),mm(j,te,T),null!==te.contentQueries&&(l.flags|=8),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(l.flags|=128);const we=te.type.prototype;!x&&(we.ngOnChanges||we.ngOnInit||we.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(l.index),x=!0),!k&&(we.ngOnChanges||we.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(l.index),k=!0),j++}!function(a,u){const h=u.directiveEnd,p=a.data,y=u.attrs,T=[];let x=null,k=null;for(let j=u.directiveStart;j<h;j++){const q=p[j],te=q.inputs,we=null===y||Ul(u)?null:kb(te,y);T.push(we),x=gS(te,j,x),k=gS(q.outputs,j,k)}null!==x&&(x.hasOwnProperty("class")&&(u.flags|=16),x.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=T,u.inputs=x,u.outputs=k}(a,l)}T&&function(a,u,l){if(u){const h=a.localNames=[];for(let p=0;p<u.length;p+=2){const y=l[u[p+1]];if(null==y)throw new rt("301",`Export of name '${u[p+1]}' not found!`);h.push(u[p],y)}}}(l,h,T)}return l.mergedAttrs=ao(l.mergedAttrs,l.attrs),p}function vS(a,u,l,h,p,y){const T=y.hostBindings;if(T){let x=a.hostBindingOpCodes;null===x&&(x=a.hostBindingOpCodes=[]);const k=~u.index;(function(a){let u=a.length;for(;u>0;){const l=a[--u];if("number"==typeof l&&l<0)return l}return 0})(x)!=k&&x.push(k),x.push(h,p,T)}}function Yc(a,u){null!==a.hostBindings&&a.hostBindings(1,u)}function gm(a,u){u.flags|=2,(a.components||(a.components=[])).push(u.index)}function mm(a,u,l){if(l){if(u.exportAs)for(let h=0;h<u.exportAs.length;h++)l[u.exportAs[h]]=a;Ss(u)&&(l[""]=a)}}function Db(a,u,l){a.flags|=1,a.directiveStart=u,a.directiveEnd=u+l,a.providerIndexes=u}function ks(a,u,l,h,p){a.data[h]=p;const y=p.factory||(p.factory=so(p.type)),T=new ml(y,Ss(p),null);a.blueprint[h]=T,l[h]=T,vS(a,u,0,h,Kc(a,l,p.hostVars,xn),p)}function bS(a,u,l){const h=Rr(u,a),p=Cb(l),y=a[10],T=bm(a,ip(a,p,null,l.onPush?64:16,h,u,y,y.createRenderer(h,l),null,null));a[u.index]=T}function yo(a,u,l,h,p,y){const T=Rr(a,u);!function(a,u,l,h,p,y,T){if(null==y)Kn(a)?a.removeAttribute(u,p,l):u.removeAttribute(p);else{const x=null==T?le(y):T(y,h||"",p);Kn(a)?a.setAttribute(u,p,x,l):l?u.setAttributeNS(l,p,x):u.setAttribute(p,x)}}(u[11],T,y,a.value,l,h,p)}function TS(a,u,l,h,p,y){const T=y[u];if(null!==T){const x=h.setInput;for(let k=0;k<T.length;){const j=T[k++],q=T[k++],te=T[k++];null!==x?h.setInput(l,te,j,q):l[q]=te}}}function kb(a,u){let l=null,h=0;for(;h<u.length;){const p=u[h];if(0!==p)if(5!==p){if("number"==typeof p)break;a.hasOwnProperty(p)&&(null===l&&(l=[]),l.push(p,a[p],u[h+1])),h+=2}else h+=2;else h+=4}return l}function Pb(a,u,l,h){return new Array(a,!0,!1,u,null,0,h,l,null,null)}function Rb(a,u){const l=$n(u,a);if(el(l)){const h=l[1];80&l[2]?Gr(h,l,h.template,l[8]):l[5]>0&&ym(l)}}function ym(a){for(let h=Fl(a);null!==h;h=Kf(h))for(let p=10;p<h.length;p++){const y=h[p];if(1024&y[2]){const T=y[1];Gr(T,y,T.template,y[8])}else y[5]>0&&ym(y)}const l=a[1].components;if(null!==l)for(let h=0;h<l.length;h++){const p=$n(l[h],a);el(p)&&p[5]>0&&ym(p)}}function Ry(a,u){const l=$n(u,a),h=l[1];(function(a,u){for(let l=u.length;l<a.blueprint.length;l++)u.push(a.blueprint[l])})(h,l),ch(h,l,l[8])}function bm(a,u){return a[13]?a[14][4]=u:a[13]=u,a[14]=u,u}function Ob(a){for(;a;){a[2]|=64;const u=Ll(a);if(hg(a)&&!u)return a;a=u}return null}function Tm(a,u,l){const h=u[10];h.begin&&h.begin();try{Gr(a,u,a.template,l)}catch(p){throw Ny(u,p),p}finally{h.end&&h.end()}}function Lb(a){!function(a){for(let u=0;u<a.components.length;u++){const l=a.components[u],h=qg(l),p=h[1];cs(p,h,p.template,l)}}(a[8])}function Fb(a,u,l){dl(0),u(a,l)}const SS=(()=>Promise.resolve(null))();function Em(a){return a[7]||(a[7]=[])}function lp(a){return a.cleanup||(a.cleanup=[])}function Ny(a,u){const l=a[9],h=l?l.get(ih,null):null;h&&h.handleError(u)}function CS(a,u,l,h,p){for(let y=0;y<l.length;){const T=l[y++],x=l[y++],k=u[T],j=a.data[T];null!==j.setInput?j.setInput(k,p,h,x):k[x]=p}}function tu(a,u,l){const h=Vs(u,a);!function(a,u,l){Kn(a)?a.setValue(u,l):u.textContent=l}(a[11],h,l)}function Vl(a,u,l){let h=l?a.styles:null,p=l?a.classes:null,y=0;if(null!==u)for(let T=0;T<u.length;T++){const x=u[T];"number"==typeof x?y=x:1==y?p=fe(p,x):2==y&&(h=fe(h,x+": "+u[++T]+";"))}l?a.styles=h:a.stylesWithoutHost=h,l?a.classes=p:a.classesWithoutHost=p}const Ub=new Jn("INJECTOR",-1);class Xc{get(u,l=wl){if(l===wl){const h=new Error(`NullInjectorError: No provider for ${ce(u)}!`);throw h.name="NullInjectorError",h}return l}}const nu=new Jn("Set Injector scope."),Jc={},Ly={};let cp;function Bb(){return void 0===cp&&(cp=new Xc),cp}function Dr(a,u=null,l=null,h){const p=wm(a,u,l,h);return p._resolveInjectorDefTypes(),p}function wm(a,u=null,l=null,h){return new vD(a,l,u||Bb(),h)}class vD{constructor(u,l,h,p=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];l&&ho(l,x=>this.processProvider(x,u,l)),ho([u],x=>this.processInjectorType(x,[],y)),this.records.set(Ub,hh(void 0,this));const T=this.records.get(nu);this.scope=null!=T?T.value:null,this.source=p||("object"==typeof u?null:ce(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,l=wl,h=Jt.Default){this.assertNotDestroyed();const p=se(this),y=Br(void 0);try{if(!(h&Jt.SkipSelf)){let x=this.records.get(u);if(void 0===x){const k=("function"==typeof(a=u)||"object"==typeof a&&a instanceof Jn)&&On(u);x=k&&this.injectableDefInScope(k)?hh(Vb(u),Jc):null,this.records.set(u,x)}if(null!=x)return this.hydrate(u,x)}return(h&Jt.Self?Bb():this.parent).get(u,l=h&Jt.Optional&&l===wl?null:l)}catch(T){if("NullInjectorError"===T.name){if((T[Ro]=T[Ro]||[]).unshift(ce(u)),p)throw T;return function(a,u,l,h){const p=a[Ro];throw u[P]&&p.unshift(u[P]),a.message=function(a,u,l,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let p=ce(u);if(Array.isArray(u))p=u.map(ce).join(" -> ");else if("object"==typeof u){let y=[];for(let T in u)if(u.hasOwnProperty(T)){let x=u[T];y.push(T+":"+("string"==typeof x?JSON.stringify(x):ce(x)))}p=`{${y.join(", ")}}`}return`${l}${h?"("+h+")":""}[${p}]: ${a.replace(Mg,"\n  ")}`}("\n"+a.message,p,l,h),a.ngTokenPath=p,a[Ro]=null,a}(T,u,"R3InjectorError",this.source)}throw T}finally{Br(y),se(p)}var a}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((h,p)=>u.push(ce(p))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(u,l,h){if(!(u=ne(u)))return!1;let p=Un(u);const y=null==p&&u.ngModule||void 0,T=void 0===y?u:y,x=-1!==h.indexOf(T);if(void 0!==y&&(p=Un(y)),null==p)return!1;if(null!=p.imports&&!x){let q;h.push(T);try{ho(p.imports,te=>{this.processInjectorType(te,l,h)&&(void 0===q&&(q=[]),q.push(te))})}finally{}if(void 0!==q)for(let te=0;te<q.length;te++){const{ngModule:we,providers:Be}=q[te];ho(Be,it=>this.processProvider(it,we,Be||de))}}this.injectorDefTypes.add(T);const k=so(T)||(()=>new T);this.records.set(T,hh(k,Jc));const j=p.providers;if(null!=j&&!x){const q=u;ho(j,te=>this.processProvider(te,q,j))}return void 0!==y&&void 0!==u.providers}processProvider(u,l,h){let p=dp(u=ne(u))?u:ne(u&&u.provide);const y=(a=u,IS(a)?hh(void 0,a.useValue):hh(xS(a),Jc));var a;if(dp(u)||!0!==u.multi)this.records.get(p);else{let T=this.records.get(p);T||(T=hh(void 0,Jc,!0),T.factory=()=>Nt(T.multi),this.records.set(p,T)),p=u,T.multi.push(u)}this.records.set(p,y)}hydrate(u,l){return l.value===Jc&&(l.value=Ly,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(a=l.value)&&"object"==typeof a&&"function"==typeof a.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var a}injectableDefInScope(u){if(!u.providedIn)return!1;const l=ne(u.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Vb(a){const u=On(a),l=null!==u?u.factory:so(a);if(null!==l)return l;if(a instanceof Jn)throw new Error(`Token ${ce(a)} is missing a \u0275prov definition.`);if(a instanceof Function)return function(a){const u=a.length;if(u>0){const h=Au(u,"?");throw new Error(`Can't resolve all parameters for ${ce(a)}: (${h.join(", ")}).`)}const l=function(a){const u=a&&(a[ki]||a[An]);if(u){const l=function(a){if(a.hasOwnProperty("name"))return a.name;const u=(""+a).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),u}return null}(a);return null!==l?()=>l.factory(a):()=>new a}(a);throw new Error("unreachable")}function xS(a,u,l){let h;if(dp(a)){const p=ne(a);return so(p)||Vb(p)}if(IS(a))h=()=>ne(a.useValue);else if(function(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Nt(a.deps||[]));else if(function(a){return!(!a||!a.useExisting)}(a))h=()=>Oe(ne(a.useExisting));else{const p=ne(a&&(a.useClass||a.provide));if(!function(a){return!!a.deps}(a))return so(p)||Vb(p);h=()=>new p(...Nt(a.deps))}return h}function hh(a,u,l=!1){return{factory:a,value:u,multi:l?[]:void 0}}function IS(a){return null!==a&&"object"==typeof a&&R in a}function dp(a){return"function"==typeof a}let Uo=(()=>{class a{static create(l,h){var p;if(Array.isArray(l))return Dr({name:""},h,l,"");{const y=null!=(p=l.name)?p:"";return Dr({name:y},l.parent,l.providers,y)}}}return a.THROW_IF_NOT_FOUND=wl,a.NULL=new Xc,a.\u0275prov=Pt({token:a,providedIn:"any",factory:()=>Oe(Ub)}),a.__NG_ELEMENT_ID__=-1,a})();function wD(a,u){fa(qg(a)[1],fr())}function Vy(a){let u=function(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),l=!0;const h=[a];for(;u;){let p;if(Ss(a))p=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Error("Directives cannot inherit Components");p=u.\u0275dir}if(p){if(l){h.push(p);const T=a;T.inputs=hp(a.inputs),T.declaredInputs=hp(a.declaredInputs),T.outputs=hp(a.outputs);const x=p.hostBindings;x&&US(a,x);const k=p.viewQuery,j=p.contentQueries;if(k&&jS(a,k),j&&Hl(a,j),pe(a.inputs,p.inputs),pe(a.declaredInputs,p.declaredInputs),pe(a.outputs,p.outputs),Ss(p)&&p.data.animation){const q=a.data;q.animation=(q.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let T=0;T<y.length;T++){const x=y[T];x&&x.ngInherit&&x(a),x===Vy&&(l=!1)}}u=Object.getPrototypeOf(u)}!function(a){let u=0,l=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=u+=p.hostVars,p.hostAttrs=ao(p.hostAttrs,l=ao(l,p.hostAttrs))}}(h)}function hp(a){return a===xe?{}:a===de?[]:a}function jS(a,u){const l=a.viewQuery;a.viewQuery=l?(h,p)=>{u(h,p),l(h,p)}:u}function Hl(a,u){const l=a.contentQueries;a.contentQueries=l?(h,p,y)=>{u(h,p,y),l(h,p,y)}:u}function US(a,u){const l=a.hostBindings;a.hostBindings=l?(h,p)=>{u(h,p),l(h,p)}:u}let Am=null;function nd(){if(!Am){const a=ln.Symbol;if(a&&a.iterator)Am=a.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<u.length;++l){const h=u[l];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Am=h)}}}return Am}function fp(a){return!!Xb(a)&&(Array.isArray(a)||!(a instanceof Map)&&nd()in a)}function Xb(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ru(a,u,l){return a[u]=l}function ds(a,u,l){return!Object.is(a[u],l)&&(a[u]=l,!0)}function rd(a,u,l,h){const p=ds(a,u,l);return ds(a,u+1,h)||p}function $y(a,u,l,h){const p=ft();return ds(p,da(),u)&&(kn(),yo(pr(),p,a,u,l,h)),$y}function gh(a,u,l,h,p,y){const x=rd(a,Wt.lFrame.bindingIndex,l,p);return oo(2),x?u+le(l)+h+le(p)+y:xn}function qS(a,u,l,h,p,y,T,x){const k=ft(),j=kn(),q=a+20,te=j.firstCreatePass?function(a,u,l,h,p,y,T,x,k){const j=u.consts,q=sp(u,a,4,T||null,$i(j,x));Ab(u,l,q,$i(j,k)),fa(u,q);const te=q.tViews=Iy(2,q,h,p,y,u.directiveRegistry,u.pipeRegistry,null,u.schemas,j);return null!==u.queries&&(u.queries.template(u,q),te.queries=u.queries.embeddedTView(q)),q}(q,j,k,u,l,h,p,y,T):j.data[q];mi(te,!1);const we=k[11].createComment("");zc(j,k,we,te),_i(we,k),bm(k,k[q]=Pb(we,k,we,te)),Id(te)&&wb(j,k,te),null!=T&&Sb(k,te,x)}function WS(a){return Fa(Wt.lFrame.contextLView,20+a)}function km(a,u=Jt.Default){const l=ft();return null===l?Oe(a,u):Iu(fr(),l,ne(a),u)}function Ei(){throw new Error("invalid")}function uT(a,u,l){const h=ft();return ds(h,da(),u)&&function(a,u,l,h,p,y,T,x){const k=Rr(u,l);let q,j=u.inputs;!x&&null!=j&&(q=j[h])?(CS(a,l,q,h,p),xo(u)&&function(a,u){const l=$n(u,a);16&l[2]||(l[2]|=64)}(l,u.index)):3&u.type&&(h=function(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=T?T(p,u.value||"",h):p,Kn(y)?y.setProperty(k,h,p):$t(h)||(k.setProperty?k.setProperty(h,p):k[h]=p))}(kn(),pr(),h,a,u,h[11],l,!1),uT}function Ru(a,u,l,h,p){const T=p?"class":"style";CS(a,l,u.inputs[T],T,h)}function sd(a,u,l,h){const p=ft(),y=kn(),T=20+a,x=p[11],k=p[T]=rm(x,u,Wt.lFrame.currentNamespace),j=y.firstCreatePass?function(a,u,l,h,p,y,T){const x=u.consts,j=sp(u,a,2,p,$i(x,y));return Ab(u,l,j,$i(x,T)),null!==j.attrs&&Vl(j,j.attrs,!1),null!==j.mergedAttrs&&Vl(j,j.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,j),j}(T,y,p,0,u,l,h):y.data[T];mi(j,!0);const q=j.mergedAttrs;null!==q&&qn(x,k,q);const te=j.classes;null!==te&&ls(x,k,te);const we=j.styles;null!==we&&Jw(x,k,we),64!=(64&j.flags)&&zc(y,p,k,j),0===Wt.lFrame.elementDepthCount&&_i(k,p),Wt.lFrame.elementDepthCount++,Id(j)&&(wb(y,p,j),xy(y,j,p)),null!==h&&Sb(p,j)}function Pm(){let a=fr();Ec()?Ua():(a=a.parent,mi(a,!1));const u=a;Wt.lFrame.elementDepthCount--;const l=kn();l.firstCreatePass&&(fa(l,a),Xr(a)&&l.queries.elementEnd(a)),null!=u.classesWithoutHost&&function(a){return 0!=(16&a.flags)}(u)&&Ru(l,u,ft(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function(a){return 0!=(32&a.flags)}(u)&&Ru(l,u,ft(),u.stylesWithoutHost,!1)}function lT(a,u,l,h){sd(a,u,l,h),Pm()}function yp(a,u,l){const h=ft(),p=kn(),y=a+20,T=p.firstCreatePass?function(a,u,l,h,p){const y=u.consts,T=$i(y,h),x=sp(u,a,8,"ng-container",T);return null!==T&&Vl(x,T,!0),Ab(u,l,x,$i(y,p)),null!==u.queries&&u.queries.elementStart(u,x),x}(y,p,h,u,l):p.data[y];mi(T,!0);const x=h[y]=h[11].createComment("");zc(p,h,x,T),_i(x,h),Id(T)&&(wb(p,h,T),xy(p,T,h)),null!=l&&Sb(h,T)}function Ky(){let a=fr();const u=kn();Ec()?Ua():(a=a.parent,mi(a,!1)),u.firstCreatePass&&(fa(u,a),Xr(a)&&u.queries.elementEnd(a))}function od(){return ft()}function ba(a){return!!a&&"function"==typeof a.then}function _p(a){return!!a&&"function"==typeof a.subscribe}const wh=_p;function Yy(a,u,l,h){const p=ft(),y=kn(),T=fr();return function(a,u,l,h,p,y,T,x){const k=Id(h),q=a.firstCreatePass&&lp(a),te=u[8],we=Em(u);let Be=!0;if(3&h.type||x){const At=Rr(h,u),Gt=x?x(At):At,lt=we.length,on=x?Rn=>x(Mr(Rn[h.index])):h.index;if(Kn(l)){let Rn=null;if(!x&&k&&(Rn=function(a,u,l,h){const p=a.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const T=p[y];if(T===l&&p[y+1]===h){const x=u[7],k=p[y+2];return x.length>k?x[k]:null}"string"==typeof T&&(y+=2)}return null}(a,u,p,h.index)),null!==Rn)(Rn.__ngLastListenerFn__||Rn).__ngNextListenerFn__=y,Rn.__ngLastListenerFn__=y,Be=!1;else{y=Rm(h,u,te,y,!1);const er=l.listen(Gt,p,y);we.push(y,er),q&&q.push(p,on,lt,lt+1)}}else y=Rm(h,u,te,y,!0),Gt.addEventListener(p,y,T),we.push(y),q&&q.push(p,on,lt,T)}else y=Rm(h,u,te,y,!1);const it=h.outputs;let Et;if(Be&&null!==it&&(Et=it[p])){const At=Et.length;if(At)for(let Gt=0;Gt<At;Gt+=2){const bs=u[Et[Gt]][Et[Gt+1]].subscribe(y),Eo=we.length;we.push(y,bs),q&&q.push(p,h.index,Eo,-(Eo+1))}}}(y,p,p[11],T,a,u,!!l,h),Yy}function Xy(a,u,l,h){try{return!1!==l(h)}catch(p){return Ny(a,p),!1}}function Rm(a,u,l,h,p){return function y(T){if(T===Function)return h;const x=2&a.flags?$n(a.index,u):u;0==(32&u[2])&&Ob(x);let k=Xy(u,0,h,T),j=y.__ngNextListenerFn__;for(;j;)k=Xy(u,0,j,T)&&k,j=j.__ngNextListenerFn__;return p&&!1===k&&(T.preventDefault(),T.returnValue=!1),k}}function dT(a=1){return function(a){return(Wt.lFrame.contextLView=function(a,u){for(;a>0;)u=u[15],a--;return u}(a,Wt.lFrame.contextLView))[8]}(a)}function tC(a,u){let l=null;const h=function(a){const u=a.attrs;if(null!=u){const l=u.indexOf(5);if(0==(1&l))return u[l+1]}return null}(a);for(let p=0;p<u.length;p++){const y=u[p];if("*"!==y){if(null===h?gy(a,y,!0):om(h,y))return p}else l=p}return l}function Om(a){const u=ft()[16][6];if(!u.projection){const h=u.projection=Au(a?a.length:1,null),p=h.slice();let y=u.child;for(;null!==y;){const T=a?tC(y,a):0;null!==T&&(p[T]?p[T].projectionNext=y:h[T]=y,p[T]=y),y=y.next}}}function bp(a,u=0,l){const h=ft(),p=kn(),y=sp(p,20+a,16,null,l||null);null===y.projection&&(y.projection=u),Ua(),64!=(64&y.flags)&&function(a,u,l){Ar(u[11],0,u,l,Tn(a,l,u),Yf(l.parent||u[6],l,u))}(p,h,y)}function iC(a,u,l,h,p){const y=a[l+1],T=null===u;let x=h?eu(y):Bl(y),k=!1;for(;0!==x&&(!1===k||T);){const q=a[x+1];sC(a[x],u)&&(k=!0,a[x+1]=h?np(q):vy(q)),x=h?eu(q):Bl(q)}k&&(a[l+1]=h?vy(y):np(y))}function sC(a,u){return null===a||null==u||(Array.isArray(a)?a[1]:a)===u||!(!Array.isArray(a)||"string"!=typeof u)&&Du(a,u)>=0}function jm(a,u){return function(a,u,l,h){const p=ft(),y=kn(),T=oo(2);y.firstUpdatePass&&function(a,u,l,h){const p=a.data;if(null===p[l+1]){const y=p[rr()],T=function(a,u){return u>=a.expandoStartIndex}(a,l);(function(a,u){return 0!=(a.flags&(u?16:32))})(y,h)&&null===u&&!T&&(u=!1),u=function(a,u,l,h){const p=function(a){const u=Wt.lFrame.currentDirectiveIndex;return-1===u?null:a[u]}(a);let y=h?u.residualClasses:u.residualStyles;if(null===p)0===(h?u.classBindings:u.styleBindings)&&(l=ad(l=r_(null,a,u,l,h),u.attrs,h),y=null);else{const T=u.directiveStylingLast;if(-1===T||a[T]!==p)if(l=r_(p,a,u,l,h),null===y){let k=function(a,u,l){const h=l?u.classBindings:u.styleBindings;if(0!==Bl(h))return a[eu(h)]}(a,u,h);void 0!==k&&Array.isArray(k)&&(k=r_(null,a,u,k[1],h),k=ad(k,u.attrs,h),function(a,u,l,h){a[eu(l?u.classBindings:u.styleBindings)]=h}(a,u,h,k))}else y=function(a,u,l){let h;const p=u.directiveEnd;for(let y=1+u.directiveStylingLast;y<p;y++)h=ad(h,a[y].hostAttrs,l);return ad(h,u.attrs,l)}(a,u,h)}return void 0!==y&&(h?u.residualClasses=y:u.residualStyles=y),l}(p,y,u,h),function(a,u,l,h,p,y){let T=y?u.classBindings:u.styleBindings,x=eu(T),k=Bl(T);a[h]=l;let q,j=!1;if(Array.isArray(l)){const te=l;q=te[1],(null===q||Du(te,q)>0)&&(j=!0)}else q=l;if(p)if(0!==k){const we=eu(a[x+1]);a[h+1]=Ja(we,x),0!==we&&(a[we+1]=yy(a[we+1],h)),a[x+1]=function(a,u){return 131071&a|u<<17}(a[x+1],h)}else a[h+1]=Ja(x,0),0!==x&&(a[x+1]=yy(a[x+1],h)),x=h;else a[h+1]=Ja(k,0),0===x?x=h:a[k+1]=yy(a[k+1],h),k=h;j&&(a[h+1]=vy(a[h+1])),iC(a,q,h,!0),iC(a,q,h,!1),function(a,u,l,h,p){const y=p?a.residualClasses:a.residualStyles;null!=y&&"string"==typeof u&&Du(y,u)>=0&&(l[h+1]=np(l[h+1]))}(u,q,a,h,y),T=Ja(x,k),y?u.classBindings=T:u.styleBindings=T}(p,y,u,l,T,h)}}(y,a,T,h),u!==xn&&ds(p,T,u)&&function(a,u,l,h,p,y,T,x){if(!(3&u.type))return;const k=a.data,j=k[x+1];Um(function(a){return 1==(1&a)}(j)?ud(k,u,l,p,Bl(j),T):void 0)||(Um(y)||function(a){return 2==(2&a)}(j)&&(y=ud(k,null,l,p,x,T)),function(a,u,l,h,p){const y=Kn(a);if(u)p?y?a.addClass(l,h):l.classList.add(h):y?a.removeClass(l,h):l.classList.remove(h);else{let T=-1===h.indexOf("-")?void 0:va.DashCase;if(null==p)y?a.removeStyle(l,h,T):l.style.removeProperty(h);else{const x="string"==typeof p&&p.endsWith("!important");x&&(p=p.slice(0,-10),T|=va.Important),y?a.setStyle(l,h,p,T):l.style.setProperty(h,p,x?"important":"")}}}(h,T,Vs(rr(),l),p,y))}(y,y.data[rr()],p,p[11],a,p[T+1]=function(a,u){return null==a||("string"==typeof u?a+=u:"object"==typeof a&&(a=ce(No(a)))),a}(u,l),h,T)}(a,u,null,!0),jm}function r_(a,u,l,h,p){let y=null;const T=l.directiveEnd;let x=l.directiveStylingLast;for(-1===x?x=l.directiveStart:x++;x<T&&(y=u[x],h=ad(h,y.hostAttrs,p),y!==a);)x++;return null!==a&&(l.directiveStylingLast=x),h}function ad(a,u,l){const h=l?1:2;let p=-1;if(null!==u)for(let y=0;y<u.length;y++){const T=u[y];"number"==typeof T?p=T:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Mi(a,T,!!l||u[++y]))}return void 0===a?null:a}function ud(a,u,l,h,p,y){const T=null===u;let x;for(;p>0;){const k=a[p],j=Array.isArray(k),q=j?k[1]:k,te=null===q;let we=l[p+1];we===xn&&(we=te?de:void 0);let Be=te?fo(we,h):q===h?we:void 0;if(j&&!Um(Be)&&(Be=fo(k,h)),Um(Be)&&(x=Be,T))return x;const it=a[p+1];p=T?eu(it):Bl(it)}if(null!==u){let k=y?u.residualClasses:u.residualStyles;null!=k&&(x=fo(k,h))}return x}function Um(a){return void 0!==a}function Ah(a,u=""){const l=ft(),h=kn(),p=a+20,y=h.firstCreatePass?sp(h,p,1,u,null):h.data[p],T=l[p]=function(a,u){return Kn(a)?a.createText(u):a.createTextNode(u)}(l[11],u);zc(h,l,T,y),mi(y,!1)}function i_(a){return Bm("",a,""),i_}function Bm(a,u,l){const h=ft(),p=function(a,u,l,h){return ds(a,da(),l)?u+le(l)+h:xn}(h,a,u,l);return p!==xn&&tu(h,rr(),p),Bm}function Dh(a,u,l,h,p){const y=ft(),T=gh(y,a,u,l,h,p);return T!==xn&&tu(y,rr(),T),Dh}const Ou=void 0;var Wm=["en",[["a","p"],["AM","PM"],Ou],[["AM","PM"],Ou,Ou],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ou,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ou,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ou,"{1} 'at' {0}",Ou],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(a){const l=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===h?1:5}];let Zl={};function u_(a){const u=function(a){return a.toLowerCase().replace(/_/g,"-")}(a);let l=_T(u);if(l)return l;const h=u.split("-")[0];if(l=_T(h),l)return l;if("en"===h)return Wm;throw new Error(`Missing locale data for the locale "${a}".`)}function DC(a){return u_(a)[dn.PluralCase]}function _T(a){return a in Zl||(Zl[a]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[a]),Zl[a]}var dn=(()=>((dn=dn||{})[dn.LocaleId=0]="LocaleId",dn[dn.DayPeriodsFormat=1]="DayPeriodsFormat",dn[dn.DayPeriodsStandalone=2]="DayPeriodsStandalone",dn[dn.DaysFormat=3]="DaysFormat",dn[dn.DaysStandalone=4]="DaysStandalone",dn[dn.MonthsFormat=5]="MonthsFormat",dn[dn.MonthsStandalone=6]="MonthsStandalone",dn[dn.Eras=7]="Eras",dn[dn.FirstDayOfWeek=8]="FirstDayOfWeek",dn[dn.WeekendRange=9]="WeekendRange",dn[dn.DateFormat=10]="DateFormat",dn[dn.TimeFormat=11]="TimeFormat",dn[dn.DateTimeFormat=12]="DateTimeFormat",dn[dn.NumberSymbols=13]="NumberSymbols",dn[dn.NumberFormats=14]="NumberFormats",dn[dn.CurrencyCode=15]="CurrencyCode",dn[dn.CurrencySymbol=16]="CurrencySymbol",dn[dn.CurrencyName=17]="CurrencyName",dn[dn.Currencies=18]="Currencies",dn[dn.Directionality=19]="Directionality",dn[dn.PluralCase=20]="PluralCase",dn[dn.ExtraData=21]="ExtraData",dn))();const Zm="en-US";let su=Zm;function g_(a,u,l,h,p){if(a=ne(a),Array.isArray(a))for(let y=0;y<a.length;y++)g_(a[y],u,l,h,p);else{const y=kn(),T=ft();let x=dp(a)?a:ne(a.provide),k=xS(a);const j=fr(),q=1048575&j.providerIndexes,te=j.directiveStart,we=j.providerIndexes>>20;if(dp(a)||!a.multi){const Be=new ml(k,p,km),it=Np(x,u,p?q:q+we,te);-1===it?(Gs(Cu(j,T),y,x),Ms(y,a,u.length),u.push(x),j.directiveStart++,j.directiveEnd++,p&&(j.providerIndexes+=1048576),l.push(Be),T.push(Be)):(l[it]=Be,T[it]=Be)}else{const Be=Np(x,u,q+we,te),it=Np(x,u,q,q+we),Et=Be>=0&&l[Be],At=it>=0&&l[it];if(p&&!At||!p&&!Et){Gs(Cu(j,T),y,x);const Gt=function(a,u,l,h,p){const y=new ml(a,l,km);return y.multi=[],y.index=u,y.componentProviders=0,MT(y,p,h&&!l),y}(p?QC:RT,l.length,p,h,k);!p&&At&&(l[it].providerFactory=Gt),Ms(y,a,u.length,0),u.push(x),j.directiveStart++,j.directiveEnd++,p&&(j.providerIndexes+=1048576),l.push(Gt),T.push(Gt)}else Ms(y,a,Be>-1?Be:it,MT(l[p?it:Be],k,!p&&h));!p&&h&&At&&l[it].componentProviders++}}}function Ms(a,u,l,h){const p=dp(u),y=function(a){return!!a.useClass}(u);if(p||y){const k=(y?ne(u.useClass):u).prototype.ngOnDestroy;if(k){const j=a.destroyHooks||(a.destroyHooks=[]);if(!p&&u.multi){const q=j.indexOf(l);-1===q?j.push(l,[h,k]):j[q+1].push(h,k)}else j.push(l,k)}}}function MT(a,u,l){return l&&a.componentProviders++,a.multi.push(u)-1}function Np(a,u,l,h){for(let p=l;p<h;p++)if(u[p]===a)return p;return-1}function RT(a,u,l,h){return Lu(this.multi,[])}function QC(a,u,l,h){const p=this.multi;let y;if(this.providerFactory){const T=this.providerFactory.componentProviders,x=ga(l,l[1],this.providerFactory.index,h);y=x.slice(0,T),Lu(p,y);for(let k=T;k<x.length;k++)y.push(x[k])}else y=[],Lu(p,y);return y}function Lu(a,u){for(let l=0;l<a.length;l++)u.push((0,a[l])());return u}function OT(a,u=[]){return l=>{l.providersResolver=(h,p)=>function(a,u,l){const h=kn();if(h.firstCreatePass){const p=Ss(a);g_(l,h.data,h.blueprint,p,!0),g_(u,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,u)}}class XC{}class Lh{resolveComponentFactory(u){throw function(a){const u=Error(`No component factory found for ${ce(a)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=a,u}(u)}}let Fh=(()=>{class a{}return a.NULL=new Lh,a})();function JC(){return jp(fr(),ft())}function jp(a,u){return new tv(Rr(a,u))}let tv=(()=>{class a{constructor(l){this.nativeElement=l}}return a.__NG_ELEMENT_ID__=JC,a})();function YD(a){return a instanceof tv?a.nativeElement:a}class nv{}let Up=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function(){const a=ft(),l=$n(fr().index,a);return function(a){return a[11]}(ro(l)?l:a)}(),a})(),XD=(()=>{class a{}return a.\u0275prov=Pt({token:a,providedIn:"root",factory:()=>null}),a})();class LT{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const Xl=new LT("13.0.3"),Bp={};function m_(a,u,l,h,p=!1){for(;null!==l;){const y=u[l.index];if(null!==y&&h.push(Mr(y)),io(y))for(let x=10;x<y.length;x++){const k=y[x],j=k[1].firstChild;null!==j&&m_(k[1],k,j,h)}const T=l.type;if(8&T)m_(a,u,l.child,h);else if(32&T){const x=Wc(l,u);let k;for(;k=x();)h.push(k)}else if(16&T){const x=db(u,l);if(Array.isArray(x))h.push(...x);else{const k=Ll(u[16]);m_(k[1],k,x,h,!0)}}l=p?l.projectionNext:l.next}return h}class Vp{constructor(u,l){this._lView=u,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,l=u[1];return m_(l,u,l.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(io(u)){const l=u[8],h=l?l.indexOf(this):-1;h>-1&&(Qe(u,h),Wa(l,h))}this._attachedToViewContainer=!1}wt(this._lView[1],this._lView)}onDestroy(u){Dy(this._lView[1],this._lView,null,u)}markForCheck(){Ob(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Tm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(a,u,l){Ba(!0);try{Tm(a,u,l)}finally{Ba(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var u;this._appRef=null,Xe(this._lView[1],u=this._lView,u[11],2,null,null)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=u}}class FT extends Vp{constructor(u){super(u),this._view=u}detectChanges(){Lb(this._view)}checkNoChanges(){!function(a){Ba(!0);try{Lb(a)}finally{Ba(!1)}}(this._view)}get context(){return null}}class v_ extends Fh{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const l=Bn(u);return new __(l,this.ngModule)}}function Hp(a){const u=[];for(let l in a)a.hasOwnProperty(l)&&u.push({propName:a[l],templateName:l});return u}const jT=new Jn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xg});class __ extends XC{constructor(u,l){super(),this.componentDef=u,this.ngModule=l,this.componentType=u.type,this.selector=u.selectors.map(mb).join(","),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Hp(this.componentDef.inputs)}get outputs(){return Hp(this.componentDef.outputs)}create(u,l,h,p){const y=(p=p||this.ngModule)?function(a,u){return{get:(l,h,p)=>{const y=a.get(l,Bp,p);return y!==Bp||h===Bp?y:u.get(l,h,p)}}}(u,p.injector):u,T=y.get(nv,Md),x=y.get(XD,null),k=T.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",q=h?function(a,u,l){if(Kn(a))return a.selectRootElement(u,l===jt.ShadowDom);let h="string"==typeof u?a.querySelector(u):u;return h.textContent="",h}(k,h,this.componentDef.encapsulation):rm(T.createRenderer(null,this.componentDef),j,function(a){const u=a.toLowerCase();return"svg"===u?_f:"math"===u?"http://www.w3.org/1998/MathML/":null}(j)),te=this.componentDef.onPush?576:528,we=function(a,u){return{components:[],scheduler:a||Xg,clean:SS,playerHandler:u||null,flags:0}}(),Be=Iy(0,null,null,1,0,null,null,null,null,null),it=ip(null,Be,we,te,null,null,T,k,x,y);let Et,At;xc(it);try{const Gt=function(a,u,l,h,p,y){const T=l[1];l[20]=a;const k=sp(T,20,2,"#host",null),j=k.mergedAttrs=u.hostAttrs;null!==j&&(Vl(k,j,!0),null!==a&&(qn(p,a,j),null!==k.classes&&ls(p,a,k.classes),null!==k.styles&&Jw(p,a,k.styles)));const q=h.createRenderer(a,u),te=ip(l,Cb(u),null,u.onPush?64:16,l[20],k,h,q,y||null,null);return T.firstCreatePass&&(Gs(Cu(k,l),T,u.type),gm(T,k),Db(k,l.length,1)),bm(l,te),l[20]=te}(q,this.componentDef,it,T,k);if(q)if(h)qn(k,q,["ng-version",Xl.full]);else{const{attrs:lt,classes:on}=function(a){const u=[],l=[];let h=1,p=2;for(;h<a.length;){let y=a[h];if("string"==typeof y)2===p?""!==y&&u.push(y,a[++h]):8===p&&l.push(y);else{if(!Oi(p))break;p=y}h++}return{attrs:u,classes:l}}(this.componentDef.selectors[0]);lt&&qn(k,q,lt),on&&on.length>0&&ls(k,q,on.join(" "))}if(At=La(Be,20),void 0!==l){const lt=At.projection=[];for(let on=0;on<this.ngContentSelectors.length;on++){const Rn=l[on];lt.push(null!=Rn?Array.from(Rn):null)}}Et=function(a,u,l,h,p){const y=l[1],T=function(a,u,l){const h=fr();a.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),ks(a,h,u,Kc(a,u,1,null),l));const p=ga(u,a,h.directiveStart,h);_i(p,u);const y=Rr(h,u);return y&&_i(y,u),p}(y,l,u);if(h.components.push(T),a[8]=T,p&&p.forEach(k=>k(T,u)),u.contentQueries){const k=fr();u.contentQueries(1,T,k.directiveStart)}const x=fr();return!y.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(ha(x.index),vS(l[1],x,0,x.directiveStart,x.directiveEnd,u),Yc(u,T)),T}(Gt,this.componentDef,it,we,[wD]),ch(Be,it,null)}finally{pl()}return new t1(this.componentType,Et,jp(At,it),it,At)}}class t1 extends class{}{constructor(u,l,h,p,y){super(),this.location=h,this._rootLView=p,this._tNode=y,this.instance=l,this.hostView=this.changeDetectorRef=new FT(p),this.componentType=u}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}class jh{}class b_{}const Gp=new Map;class T_ extends jh{constructor(u,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new v_(this);const h=hr(u);this._bootstrapComponents=vo(h.bootstrap),this._r3Injector=wm(u,l,[{provide:jh,useValue:this},{provide:Fh,useValue:this.componentFactoryResolver}],ce(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,l=Uo.THROW_IF_NOT_FOUND,h=Jt.Default){return u===Uo||u===jh||u===Ub?this:this._r3Injector.get(u,l,h)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class $p extends b_{constructor(u){super(),this.moduleType=u,null!==hr(u)&&function(a){const u=new Set;!function l(h){const p=hr(h,!0),y=p.id;null!==y&&(function(a,u,l){if(u&&u!==l)throw new Error(`Duplicate module registered for ${a} - ${ce(u)} vs ${ce(u.name)}`)}(y,Gp.get(y),h),Gp.set(y,h));const T=vo(p.imports);for(const x of T)u.has(x)||(u.add(x),l(x))}(a)}(u)}create(u){return new T_(this.moduleType,u)}}function BT(a,u,l){const h=oi()+a,p=ft();return p[h]===xn?ru(p,h,l?u.call(l):u()):function(a,u){return a[u]}(p,h)}function VT(a,u,l,h){return sx(ft(),oi(),a,u,l,h)}function ix(a,u,l,h,p){return function(a,u,l,h,p,y,T){const x=u+l;return rd(a,x,p,y)?ru(a,x+2,T?h.call(T,p,y):h(p,y)):ni(a,x+2)}(ft(),oi(),a,u,l,h,p)}function ni(a,u){const l=a[u];return l===xn?void 0:l}function sx(a,u,l,h,p,y){const T=u+l;return ds(a,T,p)?ru(a,T+1,y?h.call(y,p):h(p)):ni(a,T+1)}function cx(a,u){const l=kn();let h;const p=a+20;l.firstCreatePass?(h=function(a,u){if(u)for(let l=u.length-1;l>=0;l--){const h=u[l];if(a===h.name)return h}}(u,l.pipeRegistry),l.data[p]=h,h.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(p,h.onDestroy)):h=l.data[p];const y=h.factory||(h.factory=so(h.type)),T=Br(km);try{const x=Ga(!1),k=y();return Ga(x),function(a,u,l,h){l>=a.data.length&&(a.data[l]=null,a.blueprint[l]=null),u[l]=h}(l,ft(),p,k),k}finally{Br(T)}}function zT(a,u,l){const h=a+20,p=ft(),y=Fa(p,h);return function(a,u){return a[1].data[u].pure}(p,h)?sx(p,oi(),u,y.transform,l,y):y.transform(l)}function sv(a){return u=>{setTimeout(a,void 0,u)}}const Ca=class extends d.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,l,h){var k,j,q;let p=u,y=l||(()=>null),T=h;if(u&&"object"==typeof u){const te=u;p=null==(k=te.next)?void 0:k.bind(te),y=null==(j=te.error)?void 0:j.bind(te),T=null==(q=te.complete)?void 0:q.bind(te)}this.__isAsync&&(y=sv(y),p&&(p=sv(p)),T&&(T=sv(T)));const x=super.subscribe({next:p,error:y,complete:T});return u instanceof ee.w0&&u.add(x),x}};function hx(){return this._results[nd()]()}class w_{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=nd(),h=w_.prototype;h[l]||(h[l]=hx)}get changes(){return this._changes||(this._changes=new Ca)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,l){return this._results.reduce(u,l)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,l){const h=this;h.dirty=!1;const p=as(u);(this._changesDetected=!function(a,u,l){if(a.length!==u.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],y=u[h];if(l&&(p=l(p),y=l(y)),y!==p)return!1}return!0}(h._results,p,l))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let qp=(()=>{class a{}return a.__NG_ELEMENT_ID__=u1,a})();const o1=qp,a1=class extends o1{constructor(u,l,h){super(),this._declarationLView=u,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(u){const l=this._declarationTContainer.tViews,h=ip(this._declarationLView,l,u,16,null,l.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(l)),ch(l,h,u),new Vp(h)}};function u1(){return ov(fr(),ft())}function ov(a,u){return 4&a.type?new a1(u,a,jp(a,u)):null}let Bh=(()=>{class a{}return a.__NG_ELEMENT_ID__=av,a})();function av(){return px(fr(),ft())}const YT=Bh,QT=class extends YT{constructor(u,l,h){super(),this._lContainer=u,this._hostTNode=l,this._hostLView=h}get element(){return jp(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){const u=Pc(this._hostTNode,this._hostLView);if(qi(u)){const l=vl(u,this._hostLView),h=Su(u);return new lr(l[1].data[h+8],l)}return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const l=fx(this._lContainer);return null!==l&&l[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,l,h){const p=u.createEmbeddedView(l||{});return this.insert(p,h),p}createComponent(u,l,h,p,y){const T=u&&!("function"==typeof u);let x;if(T)x=l;else{const te=l||{};x=te.index,h=te.injector,p=te.projectableNodes,y=te.ngModuleRef}const k=T?u:new __(Bn(u)),j=h||this.parentInjector;if(!y&&null==k.ngModule&&j){const te=j.get(jh,null);te&&(y=te)}const q=k.create(j,p,void 0,y);return this.insert(q.hostView,x),q}insert(u,l){const h=u._lView,p=h[1];if(io(h[3])){const q=this.indexOf(u);if(-1!==q)this.detach(q);else{const te=h[3],we=new QT(te,te[6],te[3]);we.detach(we.indexOf(u))}}const y=this._adjustIndex(l),T=this._lContainer;!function(a,u,l,h){const p=10+h,y=l.length;h>0&&(l[p-1][4]=u),h<y-10?(u[4]=l[p],Ud(l,10+h,u)):(l.push(u),u[4]=null),u[3]=l;const T=u[17];null!==T&&l!==T&&function(a,u){const l=a[9];u[16]!==u[3][3][16]&&(a[2]=!0),null===l?a[9]=[u]:l.push(u)}(T,u);const x=u[19];null!==x&&x.insertView(a),u[2]|=128}(p,h,T,y);const x=hb(y,T),k=h[11],j=ah(k,T[7]);return null!==j&&function(a,u,l,h,p,y){h[0]=p,h[6]=u,Xe(a,h,l,1,p,y)}(p,T[6],k,h,j,x),u.attachToViewContainerRef(),Ud(XT(T),y,u),u}move(u,l){return this.insert(u,l)}indexOf(u){const l=fx(this._lContainer);return null!==l?l.indexOf(u):-1}remove(u){const l=this._adjustIndex(u,-1),h=Qe(this._lContainer,l);h&&(Wa(XT(this._lContainer),l),wt(h[1],h))}detach(u){const l=this._adjustIndex(u,-1),h=Qe(this._lContainer,l);return h&&null!=Wa(XT(this._lContainer),l)?new Vp(h):null}_adjustIndex(u,l=0){return null==u?this.length+l:u}};function fx(a){return a[8]}function XT(a){return a[8]||(a[8]=[])}function px(a,u){let l;const h=u[a.index];if(io(h))l=h;else{let p;if(8&a.type)p=Mr(h);else{const y=u[11];p=y.createComment("");const T=Rr(a,u);As(y,ah(y,T),p,function(a,u){return Kn(a)?a.nextSibling(u):u.nextSibling}(y,T),!1)}u[a.index]=l=Pb(h,u,p,a),bm(u,l)}return new QT(l,a,u)}class uv{constructor(u){this.queryList=u,this.matches=null}clone(){return new uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class hd{constructor(u=[]){this.queries=u}createEmbeddedView(u){const l=u.queries;if(null!==l){const h=null!==u.contentQueries?u.contentQueries[0]:l.length,p=[];for(let y=0;y<h;y++){const T=l.getByIndex(y);p.push(this.queries[T.indexInDeclarationView].clone())}return new hd(p)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let l=0;l<this.queries.length;l++)null!==rE(u,l).matches&&this.queries[l].setDirty()}}class C_{constructor(u,l,h=null){this.predicate=u,this.flags=l,this.read=h}}class Wp{constructor(u=[]){this.queries=u}elementStart(u,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(u,l)}elementEnd(u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(u)}embeddedTView(u){let l=null;for(let h=0;h<this.length;h++){const p=null!==l?l.length:0,y=this.getByIndex(h).embeddedTView(u,p);y&&(y.indexInDeclarationView=h,null!==l?l.push(y):l=[y])}return null!==l?new Wp(l):null}template(u,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(u,l)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class Vh{constructor(u,l=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(u,l){this.isApplyingToNode(l)&&this.matchTNode(u,l)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,l){this.elementStart(u,l)}embeddedTView(u,l){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,l),new Vh(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=u.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(u,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const y=h[p];this.matchTNodeWithReadOption(u,l,JT(l,y)),this.matchTNodeWithReadOption(u,l,Jr(l,u,y,!1,!1))}else h===qp?4&l.type&&this.matchTNodeWithReadOption(u,l,-1):this.matchTNodeWithReadOption(u,l,Jr(l,u,h,!1,!1))}matchTNodeWithReadOption(u,l,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===tv||p===Bh||p===qp&&4&l.type)this.addMatch(l.index,-2);else{const y=Jr(l,u,p,!1,!1);null!==y&&this.addMatch(l.index,y)}else this.addMatch(l.index,h)}}addMatch(u,l){null===this.matches?this.matches=[u,l]:this.matches.push(u,l)}}function JT(a,u){const l=a.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===u)return l[h+1];return null}function eE(a,u,l,h){return-1===l?function(a,u){return 11&a.type?jp(a,u):4&a.type?ov(a,u):null}(u,a):-2===l?function(a,u,l){return l===tv?jp(u,a):l===qp?ov(u,a):l===Bh?px(u,a):void 0}(a,u,h):ga(a,a[1],l,u)}function Jl(a,u,l,h){const p=u[19].queries[h];if(null===p.matches){const y=a.data,T=l.matches,x=[];for(let k=0;k<T.length;k+=2){const j=T[k];x.push(j<0?null:eE(u,y[j],T[k+1],l.metadata.read))}p.matches=x}return p.matches}function x_(a,u,l,h){const p=a.queries.getByIndex(l),y=p.matches;if(null!==y){const T=Jl(a,u,p,l);for(let x=0;x<y.length;x+=2){const k=y[x];if(k>0)h.push(T[x/2]);else{const j=y[x+1],q=u[-k];for(let te=10;te<q.length;te++){const we=q[te];we[17]===we[3]&&x_(we[1],we,j,h)}if(null!==q[9]){const te=q[9];for(let we=0;we<te.length;we++){const Be=te[we];x_(Be[1],Be,j,h)}}}}}return h}function mx(a){const u=ft(),l=kn(),h=Sc();dl(h+1);const p=rE(l,h);if(a.dirty&&Ao(u)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const y=p.crossesNgTemplate?x_(l,u,h,[]):Jl(l,u,p,h);a.reset(y,YD),a.notifyOnChanges()}return!0}return!1}function I_(a,u,l){const h=kn();h.firstCreatePass&&(lv(h,new C_(a,u,l),-1),2==(2&u)&&(h.staticViewQueries=!0)),D_(h,ft(),u)}function vx(a,u,l,h){const p=kn();if(p.firstCreatePass){const y=fr();lv(p,new C_(u,l,h),y.index),function(a,u){const l=a.contentQueries||(a.contentQueries=[]);u!==(l.length?l[l.length-1]:-1)&&l.push(a.queries.length-1,u)}(p,a),2==(2&l)&&(p.staticContentQueries=!0)}D_(p,ft(),l)}function A_(){return a=ft(),u=Sc(),a[19].queries[u].queryList;var a,u}function D_(a,u,l){const h=new w_(4==(4&l));Dy(a,u,h,h.destroy),null===u[19]&&(u[19]=new hd),u[19].queries.push(new uv(h))}function lv(a,u,l){null===a.queries&&(a.queries=new Wp),a.queries.track(new Vh(u,l))}function rE(a,u){return a.queries.getByIndex(u)}function Hh(a,u){return ov(a,u)}function Kp(...a){}const pv=new Jn("Application Initializer");let Yp=(()=>{class a{constructor(l){this.appInits=l,this.resolve=Kp,this.reject=Kp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if(ba(y))l.push(y);else if(wh(y)){const T=new Promise((x,k)=>{y.subscribe({complete:x,error:k})});l.push(T)}}Promise.all(l).then(()=>{h()}).catch(p=>{this.reject(p)}),0===l.length&&h(),this.initialized=!0}}return a.\u0275fac=function(l){return new(l||a)(Oe(pv,8))},a.\u0275prov=Pt({token:a,factory:a.\u0275fac}),a})();const O_=new Jn("AppId"),vE={provide:O_,useFactory:function(){return`${gv()}${gv()}${gv()}`},deps:[]};function gv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const N_=new Jn("Platform Initializer"),$h=new Jn("Platform ID"),yE=new Jn("appBootstrapListener");let Ox=(()=>{class a{log(l){console.log(l)}warn(l){console.warn(l)}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275prov=Pt({token:a,factory:a.\u0275fac}),a})();const Qp=new Jn("LocaleId"),ju=new Jn("DefaultCurrencyCode");class T1{constructor(u,l){this.ngModuleFactory=u,this.componentFactories=l}}let _E=(()=>{class a{compileModuleSync(l){return new $p(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),y=vo(hr(l).declarations).reduce((T,x)=>{const k=Bn(x);return k&&T.push(new __(k)),T},[]);return new T1(h,y)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275prov=Pt({token:a,factory:a.\u0275fac}),a})();const TE=(()=>Promise.resolve(0))();function EE(a){"undefined"==typeof Zone?TE.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Go{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ca(!1),this.onMicrotaskEmpty=new Ca(!1),this.onStable=new Ca(!1),this.onError=new Ca(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&l,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function(){let a=ln.requestAnimationFrame,u=ln.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&u){const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l);const h=u[Zone.__symbol__("OriginalDelegate")];h&&(u=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function(a){const u=()=>{!function(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(ln,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,xE(a),a.isCheckStableRunning=!0,L_(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),xE(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,p,y,T,x)=>{try{return jx(a),l.invokeTask(p,y,T,x)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||a.shouldCoalesceRunChangeDetection)&&u(),F_(a)}},onInvoke:(l,h,p,y,T,x,k)=>{try{return jx(a),l.invoke(p,y,T,x,k)}finally{a.shouldCoalesceRunChangeDetection&&u(),F_(a)}},onHasTask:(l,h,p,y)=>{l.hasTask(p,y),h===p&&("microTask"==y.change?(a._hasPendingMicrotasks=y.microTask,xE(a),L_(a)):"macroTask"==y.change&&(a.hasPendingMacrotasks=y.macroTask))},onHandleError:(l,h,p,y)=>(l.handleError(p,y),a.runOutsideAngular(()=>a.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Go.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Go.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,l,h){return this._inner.run(u,l,h)}runTask(u,l,h,p){const y=this._inner,T=y.scheduleEventTask("NgZoneEvent: "+p,u,SE,Kp,Kp);try{return y.runTask(T,l,h)}finally{y.cancelTask(T)}}runGuarded(u,l,h){return this._inner.runGuarded(u,l,h)}runOutsideAngular(u){return this._outer.run(u)}}const SE={};function L_(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function xE(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function jx(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function F_(a){a._nesting--,L_(a)}class E1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ca,this.onMicrotaskEmpty=new Ca,this.onStable=new Ca,this.onError=new Ca}run(u,l,h){return u.apply(l,h)}runGuarded(u,l,h){return u.apply(l,h)}runOutsideAngular(u){return u()}runTask(u,l,h,p){return u.apply(l,h)}}let j_=(()=>{class a{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Go.assertNotInAngularZone(),EE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())EE(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,p){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==y),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:y,updateCb:p})}whenStable(l,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,h,p){return[]}}return a.\u0275fac=function(l){return new(l||a)(Oe(Go))},a.\u0275prov=Pt({token:a,factory:a.\u0275fac}),a})(),U_=(()=>{class a{constructor(){this._applications=new Map,B_.addToWindow(this)}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return B_.findTestabilityInTree(this,l,h)}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275prov=Pt({token:a,factory:a.\u0275fac}),a})();class IE{addToWindow(u){}findTestabilityInTree(u,l,h){return null}}function w1(a){B_=a}let xa,B_=new IE;const mv=new Jn("AllowMultipleToken");class C1{constructor(u,l){this.name=u,this.token=l}}function Bx(a,u,l=[]){const h=`Platform: ${u}`,p=new Jn(h);return(y=[])=>{let T=V_();if(!T||T.injector.get(mv,!1))if(a)a(l.concat(y).concat({provide:p,useValue:!0}));else{const x=l.concat(y).concat({provide:p,useValue:!0},{provide:nu,useValue:"platform"});!function(a){if(xa&&!xa.destroyed&&!xa.injector.get(mv,!1))throw new rt("400","");xa=a.get(DE);const u=a.get(N_,null);u&&u.forEach(l=>l())}(Uo.create({providers:x,name:h}))}return function(a){const u=V_();if(!u)throw new rt("401","");return u}()}}function V_(){return xa&&!xa.destroyed?xa:null}let DE=(()=>{class a{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const x=function(a,u){let l;return l="noop"===a?new E1:("zone.js"===a?void 0:a)||new Go({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),l}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),k=[{provide:Go,useValue:x}];return x.run(()=>{const j=Uo.create({providers:k,parent:this.injector,name:l.moduleType.name}),q=l.create(j),te=q.injector.get(ih,null);if(!te)throw new rt("402","");return x.runOutsideAngular(()=>{const we=x.onError.subscribe({next:Be=>{te.handleError(Be)}});q.onDestroy(()=>{vv(this._modules,q),we.unsubscribe()})}),function(a,u,l){try{const h=l();return ba(h)?h.catch(p=>{throw u.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw u.runOutsideAngular(()=>a.handleError(h)),h}}(te,x,()=>{const we=q.injector.get(Yp);return we.runInitializers(),we.donePromise.then(()=>(function(a){qe(a,"Expected localeId to be defined"),"string"==typeof a&&(su=a.toLowerCase().replace(/_/g,"-"))}(q.injector.get(Qp,Zm)||Zm),this._moduleDoBootstrap(q),q))})})}bootstrapModule(l,h=[]){const p=H_({},h);return function(a,u,l){const h=new $p(l);return Promise.resolve(h)}(0,0,l).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(l){const h=l.injector.get(fd);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!l.instance.ngDoBootstrap)throw new rt("403","");l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(l){return new(l||a)(Oe(Uo))},a.\u0275prov=Pt({token:a,factory:a.\u0275fac}),a})();function H_(a,u){return Array.isArray(u)?u.reduce(H_,a):rn(rn({},a),u)}let fd=(()=>{class a{constructor(l,h,p,y,T){this._zone=l,this._injector=h,this._exceptionHandler=p,this._componentFactoryResolver=y,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new B.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),k=new B.y(j=>{let q;this._zone.runOutsideAngular(()=>{q=this._zone.onStable.subscribe(()=>{Go.assertNotInAngularZone(),EE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const te=this._zone.onUnstable.subscribe(()=>{Go.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{q.unsubscribe(),te.unsubscribe()}});this.isStable=(0,ae.T)(x,k.pipe((0,ie.B)()))}bootstrap(l,h){if(!this._initStatus.done)throw new rt("405","");let p;p=l instanceof XC?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(p.componentType);const y=function(a){return a.isBoundToModule}(p)?void 0:this._injector.get(jh),x=p.create(Uo.NULL,[],h||p.selector,y),k=x.location.nativeElement,j=x.injector.get(j_,null),q=j&&x.injector.get(U_);return j&&q&&q.registerApplication(k,j),x.onDestroy(()=>{this.detachView(x.hostView),vv(this.components,x),q&&q.unregisterApplication(k)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new rt("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;vv(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(yE,[]).concat(this._bootstrapListeners).forEach(p=>p(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(l){return new(l||a)(Oe(Go),Oe(Uo),Oe(ih),Oe(Fh),Oe(Yp))},a.\u0275prov=Pt({token:a,factory:a.\u0275fac}),a})();function vv(a,u){const l=a.indexOf(u);l>-1&&a.splice(l,1)}let OE=!0,G_=!1;function Xp(){return G_=!0,OE}function NE(){if(G_)throw new Error("Cannot enable prod mode after platform setup.");OE=!1}let Hx=(()=>{class a{}return a.__NG_ELEMENT_ID__=D1,a})();function D1(a){return function(a,u,l){if(xo(a)&&!l){const h=$n(a.index,u);return new Vp(h,h)}return 47&a.type?new Vp(u[16],u):null}(fr(),ft(),16==(16&a))}class q_{constructor(){}supports(u){return fp(u)}create(u){return new O1(u)}}const R1=(a,u)=>u;class O1{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||R1}forEachItem(u){let l;for(l=this._itHead;null!==l;l=l._next)u(l)}forEachOperation(u){let l=this._itHead,h=this._removalsHead,p=0,y=null;for(;l||h;){const T=!h||l&&l.currentIndex<Ci(h,p,y)?l:h,x=Ci(T,p,y),k=T.currentIndex;if(T===h)p--,h=h._nextRemoved;else if(l=l._next,null==T.previousIndex)p++;else{y||(y=[]);const j=x-p,q=k-p;if(j!=q){for(let we=0;we<j;we++){const Be=we<y.length?y[we]:y[we]=0,it=Be+we;q<=it&&it<j&&(y[we]=Be+1)}y[T.previousIndex]=q-j}}x!==k&&u(T,x,k)}}forEachPreviousItem(u){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)u(l)}forEachAddedItem(u){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)u(l)}forEachMovedItem(u){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)u(l)}forEachRemovedItem(u){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)u(l)}forEachIdentityChange(u){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)u(l)}diff(u){if(null==u&&(u=[]),!fp(u))throw new Error(`Error trying to diff '${ce(u)}'. Only arrays and iterables are allowed`);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let p,y,T,l=this._itHead,h=!1;if(Array.isArray(u)){this.length=u.length;for(let x=0;x<this.length;x++)y=u[x],T=this._trackByFn(x,y),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,y,T,x)),Object.is(l.item,y)||this._addIdentityChange(l,y)):(l=this._mismatch(l,y,T,x),h=!0),l=l._next}else p=0,function(a,u){if(Array.isArray(a))for(let l=0;l<a.length;l++)u(a[l]);else{const l=a[nd()]();let h;for(;!(h=l.next()).done;)u(h.value)}}(u,x=>{T=this._trackByFn(p,x),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,x,T,p)),Object.is(l.item,x)||this._addIdentityChange(l,x)):(l=this._mismatch(l,x,T,p),h=!0),l=l._next,p++}),this.length=p;return this._truncate(l),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,l,h,p){let y;return null===u?y=this._itTail:(y=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(u.item,l)||this._addIdentityChange(u,l),this._reinsertAfter(u,y,p)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(u.item,l)||this._addIdentityChange(u,l),this._moveAfter(u,y,p)):u=this._addAfter(new Wr(l,h),y,p),u}_verifyReinsertion(u,l,h,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?u=this._reinsertAfter(y,u._prev,p):u.currentIndex!=p&&(u.currentIndex=p,this._addToMoves(u,p)),u}_truncate(u){for(;null!==u;){const l=u._next;this._addToRemovals(this._unlink(u)),u=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const p=u._prevRemoved,y=u._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(u,l,h),this._addToMoves(u,h),u}_moveAfter(u,l,h){return this._unlink(u),this._insertAfter(u,l,h),this._addToMoves(u,h),u}_addAfter(u,l,h){return this._insertAfter(u,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,l,h){const p=null===l?this._itHead:l._next;return u._next=p,u._prev=l,null===p?this._itTail=u:p._prev=u,null===l?this._itHead=u:l._next=u,null===this._linkedRecords&&(this._linkedRecords=new N1),this._linkedRecords.put(u),u.currentIndex=h,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const l=u._prev,h=u._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,u}_addToMoves(u,l){return u.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new N1),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,l){return u.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class Wr{constructor(u,l){this.item=u,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kR{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,u))return h;return null}remove(u){const l=u._prevDup,h=u._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class N1{constructor(){this.map=new Map}put(u){const l=u.trackById;let h=this.map.get(l);h||(h=new kR,this.map.set(l,h)),h.add(u)}get(u,l){const p=this.map.get(u);return p?p.get(u,l):null}remove(u){const l=u.trackById;return this.map.get(l).remove(u)&&this.map.delete(l),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ci(a,u,l){const h=a.previousIndex;if(null===h)return h;let p=0;return l&&h<l.length&&(p=l[h]),h+u+p}class BE{constructor(){}supports(u){return u instanceof Map||Xb(u)}create(){return new L1}}class L1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let l;for(l=this._mapHead;null!==l;l=l._next)u(l)}forEachPreviousItem(u){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)u(l)}forEachChangedItem(u){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)u(l)}forEachAddedItem(u){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)u(l)}forEachRemovedItem(u){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)u(l)}diff(u){if(u){if(!(u instanceof Map||Xb(u)))throw new Error(`Error trying to diff '${ce(u)}'. Only maps and objects are allowed`)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(u,(h,p)=>{if(l&&l.key===p)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const y=this._getOrCreateRecordForKey(p,h);l=this._insertBeforeOrAppend(l,y)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,l){if(u){const h=u._prev;return l._next=u,l._prev=h,u._prev=l,h&&(h._next=l),u===this._mapHead&&(this._mapHead=l),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(u,l){if(this._records.has(u)){const p=this._records.get(u);this._maybeAddToChanges(p,l);const y=p._prev,T=p._next;return y&&(y._next=T),T&&(T._prev=y),p._next=null,p._prev=null,p}const h=new F1(u);return this._records.set(u,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,l){Object.is(l,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=l,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,l){u instanceof Map?u.forEach(l):Object.keys(u).forEach(h=>l(u[h],h))}}class F1{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VE(){return new W_([new q_])}let W_=(()=>{class a{constructor(l){this.factories=l}static create(l,h){if(null!=h){const p=h.factories.slice();l=l.concat(p)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||VE()),deps:[[a,new us,new yi]]}}find(l){const h=this.factories.find(p=>p.supports(l));if(null!=h)return h;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(a){return a.name||typeof a}(l)}'`)}}return a.\u0275prov=Pt({token:a,providedIn:"root",factory:VE}),a})();function Wx(){return new z_([new BE])}let z_=(()=>{class a{constructor(l){this.factories=l}static create(l,h){if(h){const p=h.factories.slice();l=l.concat(p)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||Wx()),deps:[[a,new us,new yi]]}}find(l){const h=this.factories.find(p=>p.supports(l));if(h)return h;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return a.\u0275prov=Pt({token:a,providedIn:"root",factory:Wx}),a})();const PR=[new BE],B1=new W_([new q_]),zx=new z_(PR),MR=Bx(null,"core",[{provide:$h,useValue:"unknown"},{provide:DE,deps:[Uo]},{provide:U_,deps:[]},{provide:Ox,deps:[]}]),H1=[{provide:fd,useClass:fd,deps:[Go,Uo,ih,Fh,Yp]},{provide:jT,deps:[Go],useFactory:function(a){let u=[];return a.onStable.subscribe(()=>{for(;u.length;)u.pop()()}),function(l){u.push(l)}}},{provide:Yp,useClass:Yp,deps:[[new yi,pv]]},{provide:_E,useClass:_E,deps:[]},vE,{provide:W_,useFactory:function(){return B1},deps:[]},{provide:z_,useFactory:function(){return zx},deps:[]},{provide:Qp,useFactory:function(a){return a||"undefined"!=typeof $localize&&$localize.locale||Zm},deps:[[new mr(Qp),new yi,new us]]},{provide:ju,useValue:"USD"}];let Kx=(()=>{class a{constructor(l){}}return a.\u0275fac=function(l){return new(l||a)(Oe(fd))},a.\u0275mod=dr({type:a}),a.\u0275inj=pn({providers:H1}),a})()},6293:(Ye,_e,U)=>{"use strict";U.d(_e,{Z:()=>rt});var d=U(4213),ee=U(1177),B=U(1572),ae=U(3855);class ie{constructor(ye,le){this._delegate=ye,this.firebase=le,(0,B._addComponent)(ye,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ye,le=B._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(ye);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Ie=Ve.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:le})}_removeServiceInstance(ye,le=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(le)}_addComponent(ye){(0,B._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,B._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function fe(){const St=function(St){const ye={},le={__esModule:!0,initializeApp:function(Tt,Z={}){const G=B.initializeApp(Tt,Z);if((0,d.r3)(ye,G.name))return ye[G.name];const re=new St(G,le);return ye[G.name]=re,re},app:Ve,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function(Tt){const Z=Tt.name,G=Z.replace("-compat","");if(B._registerComponent(Tt)&&"PUBLIC"===Tt.type){const re=(Te=Ve())=>{if("function"!=typeof Te[G])throw pe.create("invalid-app-argument",{appName:Z});return Te[G]()};void 0!==Tt.serviceProps&&(0,d.ZB)(re,Tt.serviceProps),le[G]=re,St.prototype[G]=function(...Te){return this._getService.bind(this,Z).apply(this,Tt.multipleInstances?Te:[])}}return"PUBLIC"===Tt.type?le[G]:null},removeApp:function(Tt){delete ye[Tt]},useAsService:function(Tt,Z){return"serverAuth"===Z?null:Z},modularAPIs:B}};function Ve(Tt){if(!(0,d.r3)(ye,Tt=Tt||B._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:Tt});return ye[Tt]}return le.default=le,Object.defineProperty(le,"apps",{get:function(){return Object.keys(ye).map(Tt=>ye[Tt])}}),Ve.App=St,le}(ie);return St.INTERNAL=Object.assign(Object.assign({},St.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function(le){(0,d.ZB)(St,le)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),St}(),ue=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const St=self.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const rt=Q;(0,B.registerVersion)("@firebase/app-compat","0.1.13",undefined)},1572:(Ye,_e,U)=>{"use strict";U.r(_e),U.d(_e,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Di,_DEFAULT_ENTRY_NAME:()=>Ge,_addComponent:()=>kt,_addOrOverwriteComponent:()=>Ht,_apps:()=>qe,_clearComponents:()=>pn,_components:()=>ot,_getProvider:()=>Pt,_registerComponent:()=>Lt,_removeServiceInstance:()=>Yn,deleteApp:()=>An,getApp:()=>ki,getApps:()=>ht,initializeApp:()=>Un,onLog:()=>In,registerVersion:()=>Jt,setLogLevel:()=>Yr});var d=U(8239),ee=U(1177),B=U(3855),ae=U(4213);class ie{constructor(Ft){this.container=Ft}getPlatformInfoString(){return this.container.getProviders().map(vn=>{if(function(Rt){const Ft=Rt.getComponent();return"VERSION"===(null==Ft?void 0:Ft.type)}(vn)){const yn=vn.getImmediate();return`${yn.library}/${yn.version}`}return null}).filter(vn=>vn).join(" ")}}const pe="@firebase/app",fe=new B.Yd("@firebase/app"),Ge="[DEFAULT]",Me={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qe=new Map,ot=new Map;function kt(Rt,Ft){try{Rt.container.addComponent(Ft)}catch(vn){fe.debug(`Component ${Ft.name} failed to register with FirebaseApp ${Rt.name}`,vn)}}function Ht(Rt,Ft){Rt.container.addOrOverwriteComponent(Ft)}function Lt(Rt){const Ft=Rt.name;if(ot.has(Ft))return fe.debug(`There were multiple attempts to register component ${Ft}.`),!1;ot.set(Ft,Rt);for(const vn of qe.values())kt(vn,Rt);return!0}function Pt(Rt,Ft){return Rt.container.getProvider(Ft)}function Yn(Rt,Ft,vn=Ge){Pt(Rt,Ft).clearInstance(vn)}function pn(){ot.clear()}const sn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Cn{constructor(Ft,vn,yn){this._isDeleted=!1,this._options=Object.assign({},Ft),this._config=Object.assign({},vn),this._name=vn.name,this._automaticDataCollectionEnabled=vn.automaticDataCollectionEnabled,this._container=yn,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ft){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ft}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ft){this._isDeleted=Ft}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}const Di="9.6.2";function Un(Rt,Ft={}){"object"!=typeof Ft&&(Ft={name:Ft});const vn=Object.assign({name:Ge,automaticDataCollectionEnabled:!1},Ft),yn=vn.name;if("string"!=typeof yn||!yn)throw sn.create("bad-app-name",{appName:String(yn)});const ii=qe.get(yn);if(ii){if((0,ae.vZ)(Rt,ii.options)&&(0,ae.vZ)(vn,ii.config))return ii;throw sn.create("duplicate-app",{appName:yn})}const Mn=new ee.H0(yn);for(const Yt of ot.values())Mn.addComponent(Yt);const jt=new Cn(Rt,vn,Mn);return qe.set(yn,jt),jt}function ki(Rt=Ge){const Ft=qe.get(Rt);if(!Ft)throw sn.create("no-app",{appName:Rt});return Ft}function ht(){return Array.from(qe.values())}function An(Rt){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(Rt){const Ft=Rt.name;qe.has(Ft)&&(qe.delete(Ft),yield Promise.all(Rt.container.getProviders().map(vn=>vn.delete())),Rt.isDeleted=!0)})).apply(this,arguments)}function Jt(Rt,Ft,vn){var yn;let ii=null!==(yn=Me[Rt])&&void 0!==yn?yn:Rt;vn&&(ii+=`-${vn}`);const Mn=ii.match(/\s|\//),jt=Ft.match(/\s|\//);if(Mn||jt){const Yt=[`Unable to register library "${ii}" with version "${Ft}":`];return Mn&&Yt.push(`library name "${ii}" contains illegal characters (whitespace or "/")`),Mn&&jt&&Yt.push("and"),jt&&Yt.push(`version name "${Ft}" contains illegal characters (whitespace or "/")`),void fe.warn(Yt.join(" "))}Lt(new ee.wA(`${ii}-version`,()=>({library:ii,version:Ft}),"VERSION"))}function In(Rt,Ft){if(null!==Rt&&"function"!=typeof Rt)throw sn.create("invalid-log-argument");(0,B.Am)(Rt,Ft)}function Yr(Rt){(0,B.Ub)(Rt)}Lt(new ee.wA("platform-logger",Ft=>new ie(Ft),"PRIVATE")),Jt(pe,"0.7.12",""),Jt(pe,"0.7.12","esm2017"),Jt("fire-js","")},1177:(Ye,_e,U)=>{"use strict";U.d(_e,{wA:()=>B,H0:()=>ce});var d=U(8239),ee=U(4213);class B{constructor(Q,ue,ne){this.name=Q,this.instanceFactory=ue,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const ae="[DEFAULT]";class ie{constructor(Q,ue){this.name=Q,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const ue=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(ue)){const ne=new ee.BH;if(this.instancesDeferred.set(ue,ne),this.isInitialized(ue)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:ue});et&&ne.resolve(et)}catch(et){}}return this.instancesDeferred.get(ue).promise}getImmediate(Q){var ue;const ne=this.normalizeInstanceIdentifier(null==Q?void 0:Q.identifier),et=null!==(ue=null==Q?void 0:Q.optional)&&void 0!==ue&&ue;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ze){if(et)return null;throw Ze}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if("EAGER"===Q.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(ue){}for(const[ue,ne]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(ue);try{const Ze=this.getOrInitializeService({instanceIdentifier:et});ne.resolve(Ze)}catch(Ze){}}}}clearInstance(Q=ae){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,d.Z)(function*(){const ue=Array.from(Q.instances.values());yield Promise.all([...ue.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...ue.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=ae){return this.instances.has(Q)}getOptions(Q=ae){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:ue={}}=Q,ne=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:ne,options:ue});for(const[Ze,rt]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ze)&&rt.resolve(et);return et}onInit(Q,ue){var ne;const et=this.normalizeInstanceIdentifier(ue),Ze=null!==(ne=this.onInitCallbacks.get(et))&&void 0!==ne?ne:new Set;Ze.add(Q),this.onInitCallbacks.set(et,Ze);const rt=this.instances.get(et);return rt&&Q(rt,et),()=>{Ze.delete(Q)}}invokeOnInitCallbacks(Q,ue){const ne=this.onInitCallbacks.get(ue);if(ne)for(const et of ne)try{et(Q,ue)}catch(Ze){}}getOrInitializeService({instanceIdentifier:Q,options:ue={}}){let ne=this.instances.get(Q);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=Q,fe===ae?void 0:fe),options:ue}),this.instances.set(Q,ne),this.instancesOptions.set(Q,ue),this.invokeOnInitCallbacks(ne,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,ne)}catch(et){}var fe;return ne||null}normalizeInstanceIdentifier(Q=ae){return this.component?this.component.multipleInstances?Q:ae:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const ue=this.getProvider(Q.name);if(ue.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);ue.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const ue=new ie(Q,this);return this.providers.set(Q,ue),ue}getProviders(){return Array.from(this.providers.values())}}},3855:(Ye,_e,U)=>{"use strict";U.d(_e,{in:()=>ee,Yd:()=>pe,Ub:()=>ce,Am:()=>fe});const d=[];var ee=(()=>{return(Q=ee||(ee={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",ee;var Q})();const B={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ae=ee.INFO,ie={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},he=(Q,ue,...ne)=>{if(ue<Q.logLevel)return;const et=(new Date).toISOString(),Ze=ie[ue];if(!Ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[Ze](`[${et}]  ${Q.name}:`,...ne)};class pe{constructor(ue){this.name=ue,this._logLevel=ae,this._logHandler=he,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in ee))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?B[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...ue),this._logHandler(this,ee.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...ue),this._logHandler(this,ee.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...ue),this._logHandler(this,ee.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...ue),this._logHandler(this,ee.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...ue),this._logHandler(this,ee.ERROR,...ue)}}function ce(Q){d.forEach(ue=>{ue.setLogLevel(Q)})}function fe(Q,ue){for(const ne of d){let et=null;ue&&ue.level&&(et=B[ue.level]),ne.userLogHandler=null===Q?null:(Ze,rt,...St)=>{const ye=St.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch(Ie){return null}}).filter(le=>le).join(" ");rt>=(null!=et?et:Ze.logLevel)&&Q({level:ee[rt].toLowerCase(),message:ye,args:St,type:Ze.name})}}}},8239:(Ye,_e,U)=>{"use strict";function d(B,ae,ie,he,pe,ce,fe){try{var Q=B[ce](fe),ue=Q.value}catch(ne){return void ie(ne)}Q.done?ae(ue):Promise.resolve(ue).then(he,pe)}function ee(B){return function(){var ae=this,ie=arguments;return new Promise(function(he,pe){var ce=B.apply(ae,ie);function fe(ue){d(ce,he,pe,fe,Q,"next",ue)}function Q(ue){d(ce,he,pe,fe,Q,"throw",ue)}fe(void 0)})}}U.d(_e,{Z:()=>ee})},3681:Ye=>{"use strict";Ye.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.10.1","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},Ye=>{Ye(Ye.s=6907)}]);